<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>







  
  
  
  
  
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">






  
  
  
  
  
  
  <title>JA2 v1.13 Multiplayer</title>
</head>


<body>





rev. 30122007&nbsp;<br>





<br>





<div style="text-align: center;">
<h2>JA2 v1.13 Multiplayer - pre_beta</h2>




</div>





<br>









<table style="background-color: rgb(255, 255, 173); height: 491px; width: 612px; text-align: left; margin-left: auto; margin-right: auto;" border="1" cellpadding="2" cellspacing="2">







  <tbody>







    <tr>







      <td style="width: 198px; text-align: left; background-color: rgb(255, 255, 173); vertical-align: top;">
      
      
      
      
      
      
      <div style="text-align: center; width: 182px;"><br>







      <big>Getting Started</big><br>







      
      
      
      
      
      
      <hr style="height: 2px; width: 80%;"><br>





      <a href="#Installing">Installing</a><br>





      <a href="#Setting_up_Ja2_mp.ini">Setting up Ja2_mp.ini</a><br>





      <a href="#Looking_at_Ja2_Options.ini">Looking at Ja2_Options.ini</a><br>





      <br>





      <a href="#Starting_a_Server">Starting a Server</a><br>





      <a href="#Connecting_the_Client">Connecting the Client</a><br>





      <br>





      <a href="#Setting_the_Drop_Zone">Setting the Drop Zone</a><br>





      <a href="#Hiring_you_Mercs">Hiring you Mercs</a><br>





      <a href="#Doin_Bobby_Rays">Doin' the Bobby Ray's</a><br>







      <br>







      <a href="#Starting_the_Battle">Starting the Battle</a><br>





      <a href="#Placing_you_Mercs">Placing your Mercs</a><br>





      <a href="#Entering_Tactical">Entering Tactical</a><br>





      <br>





      <a href="#Dukein_it_out">Duke'in it out</a><br>





      <a href="#The_Battle_Ends">The Battle Ends</a><br>





      <br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center; width: 157px;"><a href="#Disconnecting_a_ServerClient">Disconnecting a Server/Client</a><br>







      <br>







      </div>







      </td>







      <td style="vertical-align: top; width: 287px;">
      
      
      
      
      
      
      <div style="text-align: center;"><br>







      <big>The Variables of "Ja2_mp.ini"<br>







      </big>
      
      
      
      
      
      
      <hr style="height: 2px; width: 80%;"></div>








      
      
      
      
      
      
      <div style="text-align: center;"><br>





      <a href="readme.html#SERVER_IP">SERVER_IP</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><a href="readme.html#SERVER_PORT">SERVER_PORT </a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center; width: 268px;"><a href="readme.html#MAX_CLIENTS">MAX_CLIENTS </a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><a href="readme.html#CLIENT_NUM">CLIENT_NUM </a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><br>







      <a href="readme.html#SECTOR_EDGE">SECTOR_EDGE </a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><br>







      <a href="readme.html#ENEMY_ENABLED">ENEMY_ENABLED&nbsp;</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><a href="readme.html#CREATURE_ENABLED">CREATURE_ENABLED&nbsp;</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><a href="readme.html#MILITIA_ENABLED">MILITIA_ENABLED&nbsp;</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><a href="readme.html#CIV_ENABLED">CIV_ENABLED&nbsp;</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><br>







      <a href="readme.html#SAME_MERC">SAME_MERC&nbsp;</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><a href="readme.html#PLAYER_BSIDE">PLAYER_BSIDE&nbsp;</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><br>







      <a href="readme.html#NET_DIVISOR">NET_DIVISOR&nbsp;</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><br>







      <a href="readme.html#CRATE_X">CRATE_X&nbsp;</a><br>







      </div>







      
      
      
      
      
      
      <div style="text-align: center;"><a href="readme.html#CRATE_Y">CRATE_Y</a><br>






      <br>







      </div>







      </td>







      <td style="vertical-align: top; width: 433px;"><br>







      
      
      
      
      
      
      <div style="width: 226px; text-align: center;"><big>Developmental
Comments</big><br>





      
      
      
      
      
      <hr style="height: 2px; width: 80%;"><br>





      <a href="#The_Online_SVN_Repo">The Online SVN Repo</a><br>





      <br>





      <a href="#What_no_Co-Op_">How Co-Op Works</a><br>





      <br>





      <a href="#Further_Development">Further Development</a><br>





      <br>





      <a href="#How_it_all_Works">How it all Works</a><br>





      <br>





      <a href="#RakNet_UDP_Networking">RakNet UDP Networking</a><br>


      <br>


      <a href="#_last_minute_notes:">Changes</a><br>





      </div>







      </td>







    </tr>







  
  
  
  
  
  
  </tbody>
</table>







<br>







<hr style="height: 2px; margin-right: auto; margin-left: 33px; width: 1043px;">
<div style="margin-left: 40px; text-align: center;">
<h3><big>Getting Started</big></h3>





</div>





<div style="margin-left: 80px;">
<h3 style="font-weight: normal;"><a name="Installing"></a>Installing</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; Copy the contents of
the extracted release to your root Ja2 directory , in my case
"C:\Program Files\TalonSoft\Ja2". You may notice a neat little blank
file named "NoIntro.txt"... i found out about this while looking
through the source for a way to disable the video cut scenes, and what
do you know, it's allready implemented ! :)</div>





</div>





<div style="margin-left: 80px;">
<h3 style="font-weight: normal;"><a name="Setting_up_Ja2_mp.ini"></a>Setting up Ja2_mp.ini</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; Don't think you can
skip this step, there's too much in here which needs independently
configuring per client to achieve successfull connection and gameplay.<br>





<br>





&nbsp;&nbsp;&nbsp; You will find a copy of this file with the release,
this needs to go in your root Ja2 directory, along with the .exe
included. It contains all the variables and parameters i have added
which are convenient to change. They are read in from the file as part
of starting up the Raknet Client. So if you change a setting in the
file, you dont need to restart the game engine for effect, simply
restart the net client. More&nbsp;about these variables in the
following section where i detail each one.</div>





<h3 style="font-weight: normal;"><a name="Looking_at_Ja2_Options.ini"></a>Looking at Ja2_Options.ini</h3>





</div>





<div style="margin-left: 40px;">
<div style="margin-left: 80px;">&nbsp;&nbsp;&nbsp; This file is found
in the chosen "Data" directory of Ja2, in this case "Data-1.13" as this
mod is based on the Ja2 v1.13 source code version 1080. In it there are
a few options you may want to keep in mind for possible adjustment to
give a "better game"... some such are: &nbsp;NOVICE_CASH,
EXPERIENCED_CASH, EXPERT_CASH, and INSANE_CASH, depending on your game
mode chosen, (note though i dont think it matters which you choose at
this stage of development as Co-Op isnt fully implemented and AI should
be disabled).<span style="font-style: italic;"> </span>It mainly changes the starting cash, see this file for what these default values are.<br>





</div>





</div>





<div style="margin-left: 80px;">
<h3 style="font-weight: normal;"><a name="Starting_a_Server"></a>Starting a Server</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; Ok... start a new
game and when presented with the map screen, press the '1' key, (it
works on the numpad too). You should see some little remarks about the
server starting up.</div>





<h3 style="font-weight: normal;"><a name="Connecting_the_Client"></a>Connecting the Client</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; If you are the host
you need to connect to your server to play, do this after starting it
as above by pressing the '2' key. If you aren't the host, start a new
game with the same settings as the host, and once at the map screen,
press the '2' key. In either situation you should see some comments
about the Raknet network client starting up, and then if you have
specified the right variables in Ja2_mp.ini and your network/firewall
is "ok",&nbsp;you should make connection and see report of this from
both the server and client. If you need to change a variable in your
config or simply have another go at connecting, you can press the '2'
key again after your attempt has been reported as failed, or kill the
client/server and start it again.<br>





</div>





<h3 style="font-weight: normal;"><a name="Setting_the_Drop_Zone"></a>Setting the Drop Zone</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; At this point in
development all client need to set this and to the same sector. Switch
to the Airspace display by either clicking on the map button or
pressing the 'A' key. Then click on the 'bullseye' to select it, (which
will at startup be located at secotor 9,1 "Omerta"), then place it as
the agreed/desired game sector. All hired Mercs and Bobby Rays orders
will now be sent there.</div>





<h3 style="font-weight: normal;"><a name="Hiring_you_Mercs"></a>Hiring you Mercs</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; Boot up your laptop
and hire up-to 7 Mercs from the selections at AIM and MERC... Due to
the assumed fact that their proceeding action wont be longer than a
day, the default chosen contract length, delivery time and confirmation
have been adjusted for ease of use.<br>
<br>
&nbsp;&nbsp;&nbsp; I might also add here that this can be a good time
to save the game, once all clients have hired their mercs, this way if
there is a crash or some other problem or you just want to start again
or play once more, you can do so quicker. Though bobby rays orders are
not save at the moment, so save before placing them.</div>





<h3 style="font-weight: normal;"><a name="Doin_Bobby_Rays"></a>Doin' the Bobby Ray's</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; I just had to add
this in because i could ;p ... the default destination and shipping
choice have been pre-set, and there's no difference in changing them.
The delivery will be made 10 seconds after entering Tactical view, into
your pre-located crate as specified in the config file. Further orders
can be made mid game, though the stability hasnt been tested of one
client being in Strategic view while the other/s are in Tactical. Note
i've changed the defualt game options to gives the best bobby rays
selection, this is great, unless you want it otherwise.<br>





</div>





<h3 style="font-weight: normal;"><a name="Starting_the_Battle"></a>

      Starting the Battle</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; When all clients
have followed the above steps and are ready for battle, from the map
screen, press the '3' key. This will deploy your hired mercs to the
chosen sector and launch the "Pre Battle Interface" or PBI, seen as the
pre-loved red box giving you the only option available in Multiplayer
to "Goto Sector" or the 'E' key. After this the level will be loaded
and you will be presented with the "Tactical Placement GUI", as known
by the overhead map view of the sector allowing placement of Mercs
along allocated edge space.</div>





<h3 style="font-weight: normal;"><a name="Placing_you_Mercs"></a>Placing your Mercs</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; Now its probably best to wait until all clients have finished loading
the level before beginning placement. Also be carefull if for some
reason you will be placing opposed mercs along the same edge or at a
corner where they may be in immediate sighting range of another clients
enemy merc edge, you will probably have problems, as the code doesn't
like starting the battle (going into tactical) and going straight into
turnbased mode when all clients aren't in tactical yet, ie still in
placement mode.</div>





<h3 style="font-weight: normal;"><a name="Entering_Tactical"></a>Entering Tactical</h3>





<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp; When all clients
have finished with their merc placement and are ready, all can selet
"Done" or the 'enter' key to go into what is called "Tactical View". It
will start in realtime until the the first opposed sighting is made at
which time it changes to turn-based mode and at this stage of
development doesn't come back until all but one team is left.<span style="font-weight: bold;"><br>





</span></div>





</div>





<div style="margin-left: 40px;">
<h3 style="margin-left: 40px;"><span style="font-weight: bold;"></span><span style="font-weight: normal;"><a name="Dukein_it_out"></a>Duke'in it out</span></h3>





<div style="margin-left: 80px;">&nbsp;&nbsp;&nbsp; Let me break it to
you now so as to dash those hopes you had of experiencing the full
spectrum of intricacy and complexity afforded by the Ja2 engine but in
Multiplayer...<br>





<br>





Very little of the combat components have been implemented at this
stage... here is the list of what is sent across the network and as
such justifies allowed gameplay manouvers:<br>





<br>





** moving your mercs on the ground level, ** changing stance between
standing, crouching, and prone, ** changing facing direction, &nbsp;**
firing a gun, ** bullet damages and ** stopping a merc apon spotting
new enemy...<br>





<br>





&nbsp;&nbsp;&nbsp; I might also mention that ** knife damages,&nbsp;**
punch damages, ** and burst fire damages are implemented, however the
animations are not. This leaves pretty much all the rest of the fun
un-implemented, so agree to avoid it to save confusion and invalid
battle actions, for example, roofs, med packs,&nbsp; and grenades etc.
etc.<br>





</div>





</div>





<div style="margin-left: 40px;">
<div style="margin-left: 40px; text-align: left;">
<h3><span style="font-weight: normal;"><a name="The_Battle_Ends"></a>The Battle Ends</span></h3>





</div>





<div style="text-align: left;">
<div style="margin-left: 80px;">&nbsp;&nbsp;&nbsp; Once all but one
team is left we have a winner, and you will either be presented with
notification of defeat or, be returned to realtime and as such become
the winner / survivor.<br>





From here im not sure whatis possible, you could obviously start a new
game, but you could also try hiring more mercs and gear, which will be
delivered automatically. Perhaps even the survivor could walk to
another sector, and those defeated, hiring more weapons and mercs could
change their destination sector. Though it hasnt been tested...<br>





</div>





</div>





</div>





<div style="text-align: left;">
<div style="margin-left: 40px;"><br>





<h3 style="font-weight: normal; margin-left: 40px;"><a name="Disconnecting_a_ServerClient"></a>Disconnecting a Server/Client</h3>





<div style="margin-left: 80px;">By pressing the '4' key, from the
Tactical (map) view, the server and client process's if running will be
disconnected and 'killed', reseting parameters relating to status of
connection.</div>





</div>





</div>





<div style="margin-left: 40px;">
<div style="margin-left: 80px;"><br>





</div>





</div>







      <br>







<div style="margin-left: 0px; width: 1228px;">
<hr style="height: 2px; margin-right: auto; margin-left: 23px; width: 1080px;"></div>







<div style="text-align: center;">
<h3><big>The Variables of "Ja2_mp.ini"</big><big></big></h3>





</div>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="SERVER_IP"></a><span style="font-weight: normal;">SERVER_IP&nbsp;</span></h3>





  </li>





</ul>





<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; This is the IP
addess that your client will connect to. You can use "127.0.0.1" if you
are the host, or your external address. Don't forget the <span style="font-weight: bold;">"quotation" </span>marks.</div>





<ul>







</ul>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="SERVER_PORT"></a><span style="font-weight: normal;">SERVER_PORT</span></h3>





  </li>





</ul>





<div style="margin-left: 40px;">
<div style="margin-left: 120px;"><span style="font-weight: normal;">&nbsp;&nbsp;&nbsp;
The port that the server and client will connect through, best if not
used by other apps and isnt blocked by a firewall, router etc. &gt;
6000 is best, set it the same on all machines and it doesnt need to be
writting in "quotation" marks as don't the rest of the variables.</span><br>





</div>





<span style="font-weight: normal;"></span></div>





<ul>







</ul>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="MAX_CLIENTS"></a><span style="font-weight: normal;">MAX_CLIENTS</span><br>







    </h3>







  </li>







</ul>







<div style="margin-left: 80px;">
<div style="margin-left: 40px;">&nbsp;&nbsp;&nbsp;
&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp; This can't
be made higher than 4 (for the games sake), but lower is ok. Simply
specifies to the server how many active connections to allow at once.<br>







</div>







<br>







</div>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="CLIENT_NUM"></a><span style="font-weight: normal;">CLIENT_NUM</span></h3>







  </li>







</ul>







<div style="margin-left: 80px;">
<div style="margin-left: 80px;">&nbsp;&nbsp;&nbsp; This will be your
machines client number and must be different to all other connecting
machines. Assign 1 as the the server and 2,3,&nbsp;and 4&nbsp; for each
other client.<br>







</div>







<br>







</div>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="SECTOR_EDGE"></a><span style="font-weight: normal;">SECTOR_EDGE</span><br>







    </h3>







  </li>







</ul>







<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; &nbsp;Choose between
0
and 3, to set your starting sector edge (ubStrategicInsertionCode) ,
0=North, 2=East, 1=South, and 3=West. <br>







</div>







<br>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="ENEMY_ENABLED"></a><span style="font-weight: normal;">ENEMY_ENABLED</span></h3>





  </li>





</ul>





<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; This as with the
following 3 options can now be set to 0 or 1, to enable or disable the
spawning of the respetive AI faction. The clients never generate
anything themselves, just spawn what is passed to them from the server
to make sure all players have same AI. The AI is only
controlled/running on the server game. Actions are from ther sent out.<br>
<br>
&nbsp;&nbsp;&nbsp; These options are now only server side, and need only be set in its .ini </div>





<ul>







</ul>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="CREATURE_ENABLED"></a><span style="font-weight: normal;">CREATURE_ENABLED</span></h3>





  </li>





</ul>





<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; &nbsp;Leave creature disabled as thier team size was reduced to 1 from 32 to
make room for LAN players...&nbsp;</div>





<ul>







</ul>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="MILITIA_ENABLED"></a><span style="font-weight: normal;">MILITIA_ENABLED</span></h3>





  </li>





</ul>





<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; 0 = disable, 1 =
enable.</div>





<ul>







</ul>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="CIV_ENABLED"></a><span style="font-weight: normal;">CIV_ENABLED</span></h3>







  </li>







</ul>





<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; 0 = disable, 1 =
enable.<br>





</div>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="SAME_MERC"></a><span style="font-weight: normal;">SAME_MERC</span></h3>







  </li>







</ul>







<p style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; &nbsp;Enable or disable
the hiring of the same merc by more than one client... must be the same on
all clients, (1 is untested).</p>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="PLATER_BSIDE"></a><span style="font-weight: normal;">PLAYER_BSIDE</span></h3>







  </li>







</ul>







<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; Set this to 0 for coop,
and 1 for
enemy, probably even better is &gt;5 ... possible more complex
alliances could be done/coming...<br>







(it is set as the bside of LAN members hired mercs when they are
spawned in your game. could be buggy unless same on all clients)</div>







<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="NET_DIVISOR"></a><span style="font-weight: normal;">NET_DIVISOR</span></h3>







  </li>







</ul>







<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; A divisor factor
for
damage done, 2 = half damage, 3 = a third damage, and so
on...&nbsp;must be integer, (whole number). Great for making those
battles last a bit longer, though you may want to pack a lunch and some
water bottle's to replenish your energy levels... ;) <br>





&nbsp;&nbsp;&nbsp; If you want the damage to go higher rather than lower,. have a look in Ja2_Options.ini.&nbsp;</div>









<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="CRATE_X"></a><span style="font-weight: normal;">CRATE_X</span></h3>





  </li>





</ul>





<div style="margin-left: 160px;">&nbsp;&nbsp;&nbsp; The X component of
the coordinates used to place your Bobby Ray's crate. Your crate is
only created/seen in your game.</div>





<ul>







  <li>
    
    
    
    
    
    
    <h3 style="margin-left: 80px;"><a name="CRATE_Y"></a><span style="font-weight: normal;">CRATE_Y</span></h3>







  </li>







</ul>









<div style="margin-left: 80px;">
<div style="margin-left: 80px;">&nbsp;&nbsp;&nbsp;&nbsp; Here are some
example x,y coordinates, coose one depending on your starting edge and
adjust as necessary: North middle:
56,34&nbsp; East middle: 118, 43&nbsp;
South
middle: 114, 114&nbsp; West middle: 42, 118 (middle may be
different per map size), given examples are for sector 9,1,0 "omerta".<br>





<br>





&nbsp;&nbsp;&nbsp; This isn't "straight" forward however to figure out yourself as the grid xy is
offset/rotated 45 degrees on the diagonal (i think). To move it to the left for example, you must <br>







increase X and decrease Y, without going off the map...&nbsp;<br>







<br>





&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; As im not to sure about how the grid is set up ive
made things a little easier for you by including a little function
bound to key '5', which when pressed from within the tactical view,
displays the x, y coordinates of &nbsp;the mouse cursor and the grid
number. :)<br>





<br>





&nbsp;&nbsp;&nbsp; Also something to keep in mind is that the crate is
created in an unloaded level only, apon the hiring of your first merc,
and will sometimes appear blue... It defaults to being the open
variant, and will appear closed if it has recieved an order.<br>







<br>







</div>







</div>







<div style="margin-left: 0px; width: 1228px;">
<hr style="height: 2px; margin-right: auto; margin-left: 23px; width: 1080px;"></div>





<div style="text-align: center;">
<h3><big>Developmental
Comments</big></h3>





</div>





<div style="text-align: center;">

<br>





<div style="text-align: left;">
<h3 style="font-weight: normal;"><a name="The_Online_SVN_Repo"></a>The Online SVN Repo</h3>





&nbsp;&nbsp;&nbsp; Thanks to the forward help of&nbsp;<span class="small"></span><a href="http://www.ja-galaxy-forum.com/board/ubbthreads.php?ubb=showprofile&amp;User=3220">
			lalienxx</a>
at the Bear's Bit i have some SVN space where you can get the source
code as i update it using an SVN client such as TortoiseSVN. I'm open
to contributions.<br>





&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <a href="https://81.169.133.124/source/ja2/branches/JA2_Multiplayer">https://81.169.133.124/source/ja2/branches/JA2_Multiplayer</a><br>





<h3 style="font-weight: normal;"><a name="What_no_Co-Op_"></a>How Co-Op works</h3>





&nbsp;&nbsp;&nbsp;&nbsp; If it does... (you'll have to get back to me on that)<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp; I seems to have nutted out the problem stopping my
initial sometimes working attempt from working all the time. it was
that the Inv array part of the Merc Create struct , which is a class
and not that simple, was getting mangled through the RPC call, so i
fixed it by pulling out the inventory items into a dedicated struct to
hold them and the old struct, passing this, and then at the other end
(the recieve) a new create merc struct is initiated, and filled with
values from the old struct, (the bits that pass through ok), and the
pulled out inventory items passed through "outside" with it.<br>
<br>
&nbsp;&nbsp;&nbsp; It seems to work out, so let me know if you have any
experience to comment on. The AI components are now set server side
only. And are sent out when the server creates them, which is generally
after going from the tactical placement gui, into the tactical "action"
view.
<h3 style="font-weight: normal;"><a name="Further_Development"></a>Further Development</h3>





&nbsp;&nbsp;&nbsp; At times ive been quite lost at the approach at
which i have been tackling this... there are/is alot of information
changes and happening under the surface that it is almost impossible to
make individual calls and recieves for each, though technically
possible, particularly if you only take it one at a time. But ive
become more interested in a possiblility which has been talked about a
bit on the forums where there is a central game running on a server and
the clients simply manipulate that. It means going to a deeper level of
the core game engine platform than ive been working with but it would
hae it benifits. Allready ive gotten into the side of things which
handles input, that is rather straight forward, so you could
theoretically have each client take a turn at having their commands via
the keyboard/mouse sent and activated on the central server game
instance. Easy enough. <br>





&nbsp;&nbsp;&nbsp; The bit im not sure on is how you'd have each client
seeing they're own realtime independant view, as different client would
have different viewports. perhaps you could stream the video / directx
layer, but that may be a bit much like VNC and not necessary to have so
much data being sent. More recently ive been hopefull of the
possibility of sending out to the clients the Animation calls made by
the server as it goes about the game's progress. <br>





&nbsp;&nbsp;&nbsp; So aside from this inspiration for total overhall im
not totally abondoning this branch, as its still become/ing something
that can be played and offers gameplay un-experienced before. Im still
keen on implementing more combat features and am keen for suggestions
through the Bear's Pit Forum thread relating to this release. If people
suggest say 5 to 10 of there most wanted implementations, i can do a
few of the possible candidates. Some im keen on are, roof actions,
grenades, med packs, items and &nbsp;Co-Op.<br>





<br>





Another thing not yet implemented is Interupts... coming up next.<br>





<br>





&nbsp;&nbsp;&nbsp; You can contact me (<b><a href="http://www.ja-galaxy-forum.com/board/ubbthreads.php?ubb=showprofile&amp;User=4977">
			haydent
			</a></b>) through the Bear Pit's Forum<br>





<br>





&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <a href="http://www.ja-galaxy-forum.com/board/ubbthreads.php">http://www.ja-galaxy-forum.com/board/ubbthreads.php</a><br>
<br>
<br>





<br>





<h3 style="font-weight: normal;"><a name="How_it_all_Works"></a>How it all Works</h3>





&nbsp;&nbsp;&nbsp; Maybe you dont want to get your head under the bonet
and into the code itself just yet but are just interested to know how i
went about certain things, here's a brief run down. <br>





<br>





&nbsp;&nbsp;&nbsp; Well firslty i hope it does work, atleast some for
you, ive barely play tested, just loading it up on my spare computer
which is a laptop with no screen and a damaged faulty monitor output
plug, enough though that i could test my code worked, but iver
christmas i hope to test it further, perhaps you can to and give some
feedback.<br>





<br>





&nbsp;&nbsp;&nbsp; Aside from the Initial Server and Client components
which i transfered and modified from a "Chat Example" project that
comes with RakNet. I used a function of RakNet called RPC or Remote
Procedure Calls to send and recieve my communication. This is easy as
it avoid having to package my data into packets, send it, then open it
at the other end and work out what to do with it. An RPC function
simply executes the function specified on the other specified remote
clients, in this case all but the sender.<br>





<br>





&nbsp;&nbsp;&nbsp; The server computer lets each client/side know when
its there turn and the clients tell the server when they've finished
they're's. When a client give the fire weapon order, an inital command
is sent out to all the other clients telling them to do the same.
Except when the other clients get to the bit of code which applies the
hit and damage, if the command came from another Client they stop. Then
when the Original client works out the hit damage taking into
consideration random factors, and if it happened, and sends it out to
all the other clients which then apply it hopefully in time to make it
all seem connected.... You will notice wont short-coming of this, is
that a client having recieved an order to replicate a weapon firing,
may do so, but calculate that this particaular shot is going to miss,
and such show the difference in arc for the bullet animation to miss,
but just as you see the bullet whizzing past your head, you recieve the
second command from the attacking client (the one which has the bullet
hitting and it's damages) ... this is then applied and your on half
health after breathing what was in this case, a too eager sigh of
relief ... and the same example vice versa .<br>





<br>





&nbsp;&nbsp;&nbsp; As for the few other implemented commands, the are pretty simple and straight forward...<br>





<br>





&nbsp;&nbsp;&nbsp; So much of the time i've been looking through the
code and i would find things that were almost perfectly set up for
multiplayer and often not used at all, there was a definate effort by
the original creators and they came close in my opinion... id love to
know what stopped them... ?<br>





<br>
&nbsp;&nbsp;&nbsp;&nbsp; Now another of the new systems implemented is
the 4 new LAN teams (bteam: 6, 7, 8, and 9). How i did this was to have
4 new teams, 1 for wach client, max at 4. when client 1 hires a merc
for example it is sent out and spawned on the other clients in team 6.
client 2 in 7, client 3 in 8 and 4 in 9. The server (client 1) handles
the team order and sends the command to each client to start any
particualr teams turn, including the AI. There are a set number range
of ubID's for each team: 6(client 1, the server) is 120 to 126 (7
members), on any client, their own mercs take slots 0 through 19 team
0, but when a client sends out a new move for example, the merc's ID
(ubID) is prefixed (added) with a corresponding number to their client
number (netbTeam) to match it with the network spawned merc copies in
the other games. for example any clients first merc will be ubID 0 and
team 0, if its client 1 (server) a prefix of 120 is added on to make
its ubID 120 which is the first clot for team 6 which is used to hold
the "copies" of client 1's team remotely. if its client 2, the prefix
is 127, and so on... i hope this makes things clearer ;)<br>





<br>





<br>





<h3 style="font-weight: normal;"><a name="RakNet_UDP_Networking"></a>RakNet UDP Networking</h3>





&nbsp;&nbsp;&nbsp; If your interested in more information on the free
C++ UDP based network library used in this project follow this link for
where there is a forum, doxygen manual and you can download it yourself.<br>





&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <a href="http://www.rakkarsoft.com/">http://www.rakkarsoft.com/</a><br>





<br>





<h3 style="font-weight: normal;"><a name="_last_minute_notes:"></a>Changes:</h3>
<br>





<table style="text-align: left; width: 100%;" border="0" cellpadding="3" cellspacing="0">
  <tbody>
    <tr>
      <td style="width: 151px; text-align: right;">

rev. 30122007 --</td>
      <td style="width: 1038px;">
&nbsp;CoOp has been fixed  ...  AI is now propogated to the
clients where spawned, though only slightly tested, also added new dev
notes on lan team turn implementation and coop. also i forgot to
mention the grid coordinate display script bound to key '5'  was fixed
last release, as the X and Y where around the wrong way. Interupts are on their way.<br>
      </td>
    </tr>
    <tr>
      <td style="text-align: right;"></td>
      <td></td>
    </tr>
    <tr>
      <td style="width: 151px; text-align: right;">rev. 24122007 --</td>
      <td style="width: 1038px;">bug fixes:
disabled interrupts to avoid lock-up, fixed crash bug of clicking in
"hashed" area while in tact place gui.<br>
      </td>
    </tr>
    <tr>
      <td style="text-align: right;"></td>
      <td></td>
    </tr>
    <tr>
      <td style="width: 151px; text-align: right;">rev. 22122007 --</td>
      <td style="width: 1038px;">small adjustment
to fix team 4 being treated as PLAYER_PLAN member and getting a green
shader ! , there are now 7 slots per LAN team, but 1 creature and 1
player_plan.<br>
      </td>
    </tr>
    <tr>
      <td style="text-align: right;"></td>
      <td></td>
    </tr>
    <tr>
      <td style="width: 151px; text-align: right;">rev. 21122007 --</td>
      <td style="width: 1038px;">initial pre beta release<br>
      </td>
    </tr>
    <tr>
      <td style="text-align: center;"></td>
      <td></td>
    </tr>
  </tbody>
</table>
<br>





<br>





<br>





eof</div>





</div>





</body>
</html>
