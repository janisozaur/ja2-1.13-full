<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Build: Init.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_3179ea33d55a76dc38212d9eab798728.html">export</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e5664b4b56927c8728eb3192fa60e338.html">hdc2</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_1eb12a41a47efb9efcd82fa98f4f4dbd.html">FTP</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_80cc1f21a78ab7941088ea567f236150.html">ja2src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_994ab287602efefceafe55287a3657d6.html">Build</a></div>
<h1>Init.cpp</h1><a href="Init_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifdef PRECOMPILEDHEADERS</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="JA2_01All_8h.html">JA2 All.h</a>"</span>
<a name="l00003"></a>00003 <span class="preprocessor">      #include "<a class="code" href="HelpScreen_8h.html">HelpScreen.h</a>"</span>
<a name="l00004"></a>00004 <span class="preprocessor">      #include "<a class="code" href="Multilingual_01Text_01Code_01Generator_8h.html">Multilingual Text Code Generator.h</a>"</span>
<a name="l00005"></a>00005 <span class="preprocessor">      #include "<a class="code" href="INIReader_8h.html">INIReader.h</a>"</span>
<a name="l00006"></a>00006       
<a name="l00007"></a>00007 <span class="preprocessor">#else</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">      #include &lt;stdio.h&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">      #include "<a class="code" href="sgp_8h.html">sgp.h</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">      #include "Gameloop.h"</span>
<a name="l00011"></a>00011 <span class="preprocessor">      #include "Screens.h"</span>
<a name="l00012"></a>00012 <span class="preprocessor">      #include "Wcheck.h"</span>
<a name="l00013"></a>00013 <span class="preprocessor">      #include "<a class="code" href="INIReader_8h.html">INIReader.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">      #include "<a class="code" href="vobject__blitters_8h.html">vobject_blitters.h</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">      #include "<a class="code" href="renderworld_8h.html">renderworld.h</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">      #include "<a class="code" href="mousesystem_8h.html">mousesystem.h</a>"</span>
<a name="l00017"></a>00017 <span class="preprocessor">      #include "<a class="code" href="sysutil_8h.html">sysutil.h</a>"</span>
<a name="l00018"></a>00018 <span class="preprocessor">      #include "<a class="code" href="worlddef_8h.html">worlddef.h</a>"</span>
<a name="l00019"></a>00019 <span class="preprocessor">      #include "<a class="code" href="Animation_01Data_8h.html">Animation Data.h</a>"</span>
<a name="l00020"></a>00020 <span class="preprocessor">      #include "overhead.h"</span>
<a name="l00021"></a>00021 <span class="preprocessor">      #include "<a class="code" href="Font_01Control_8h.html">Font Control.h</a>"</span>
<a name="l00022"></a>00022 <span class="preprocessor">      #include "<a class="code" href="Button_01System_8h.html">Button System.h</a>"</span>
<a name="l00023"></a>00023 <span class="preprocessor">      #include "<a class="code" href="Timer_01Control_8h.html">Timer Control.h</a>"</span>
<a name="l00024"></a>00024 <span class="preprocessor">      #include "<a class="code" href="Utilities_8h.html">Utilities.h</a>"</span>
<a name="l00025"></a>00025 <span class="preprocessor">      #include "<a class="code" href="Radar_01Screen_8h.html">Radar Screen.h</a>"</span>
<a name="l00026"></a>00026 <span class="preprocessor">      #include "<a class="code" href="Render_01Dirty_8h.html">Render Dirty.h</a>"</span>
<a name="l00027"></a>00027 <span class="preprocessor">      #include "cursors.h"</span>
<a name="l00028"></a>00028 <span class="preprocessor">      #include "<a class="code" href="Sound_01Control_8h.html">Sound Control.h</a>"</span>
<a name="l00029"></a>00029 <span class="preprocessor">      #include "<a class="code" href="Event_01Pump_8h.html">Event Pump.h</a>"</span>
<a name="l00030"></a>00030 <span class="preprocessor">      #include "<a class="code" href="lighting_8h.html">lighting.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">      #include "<a class="code" href="Cursor_01Control_8h.html">Cursor Control.h</a>"</span>
<a name="l00032"></a>00032 <span class="preprocessor">      #include "music control.h"</span>
<a name="l00033"></a>00033 <span class="preprocessor">      #include "<a class="code" href="video_8h.html">video.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">      #include "sys globals.h"</span>
<a name="l00035"></a>00035 <span class="preprocessor">      #include "<a class="code" href="mapscreen_8h.html">mapscreen.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">      #include "interface items.h"</span>
<a name="l00037"></a>00037 <span class="preprocessor">      #include "Maputility.h"</span>
<a name="l00038"></a>00038 <span class="preprocessor">      #include "<a class="code" href="strategic_8h.html">strategic.h</a>"</span>
<a name="l00039"></a>00039 <span class="preprocessor">      #include "dialogue control.h"</span>
<a name="l00040"></a>00040 <span class="preprocessor">      #include "<a class="code" href="Text_8h.html">Text.h</a>"</span>
<a name="l00041"></a>00041 <span class="preprocessor">      #include "<a class="code" href="laptop_8h.html">laptop.h</a>"</span>
<a name="l00042"></a>00042 <span class="preprocessor">      #include "<a class="code" href="NPC_8h.html">NPC.h</a>"</span>
<a name="l00043"></a>00043 <span class="preprocessor">      #include "<a class="code" href="MercTextBox_8h.html">MercTextBox.h</a>"</span>
<a name="l00044"></a>00044 <span class="preprocessor">      #include "tile cache.h"</span>
<a name="l00045"></a>00045 <span class="preprocessor">      #include "<a class="code" href="strategicmap_8h.html">strategicmap.h</a>"</span>
<a name="l00046"></a>00046 <span class="preprocessor">      #include "<a class="code" href="Map_01Information_8h.html">Map Information.h</a>"</span>
<a name="l00047"></a>00047 <span class="preprocessor">      #include "<a class="code" href="laptop_8h.html">laptop.h</a>"</span>
<a name="l00048"></a>00048 <span class="preprocessor">      #include "<a class="code" href="Shade_01Table_01Util_8h.html">Shade Table Util.h</a>"</span>
<a name="l00049"></a>00049 <span class="preprocessor">      #include "<a class="code" href="Exit_01Grids_8h.html">Exit Grids.h</a>"</span>
<a name="l00050"></a>00050 <span class="preprocessor">      #include "<a class="code" href="Summary_01Info_8h.html">Summary Info.h</a>"</span> 
<a name="l00051"></a>00051 <span class="preprocessor">      #include "<a class="code" href="GameSettings_8h.html">GameSettings.h</a>"</span>
<a name="l00052"></a>00052 <span class="preprocessor">      #include "<a class="code" href="Game_01Init_8h.html">Game Init.h</a>"</span>
<a name="l00053"></a>00053 <span class="preprocessor">      #include "<a class="code" href="Init_8h.html">Init.h</a>"</span>
<a name="l00054"></a>00054 <span class="preprocessor">      #include "<a class="code" href="jascreens_8h.html">jascreens.h</a>"</span>
<a name="l00055"></a>00055 <span class="preprocessor">      #include "<a class="code" href="XML_8h.html">XML.h</a>"</span>
<a name="l00056"></a>00056 <span class="preprocessor">      #include "<a class="code" href="SaveLoadGame_8h.html">SaveLoadGame.h</a>"</span>
<a name="l00057"></a>00057 <span class="preprocessor">#endif</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00059"></a>00059 <span class="keyword">extern</span> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="GameSettings_8cpp.html#0a0f9f199b5c2245363c96a59bd69d16">GetCDromDriveLetter</a>( <a class="code" href="Types_8h.html#2a2a31a4bbd8a0f9b35e1bca5b3e1f7f">STR8</a>  pString );
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">// The InitializeGame function is responsible for setting up all data and Gaming Engine</span>
<a name="l00062"></a>00062 <span class="comment">// tasks which will run the game</span>
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="preprocessor">#ifdef JA2BETAVERSION</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="keyword">extern</span>      <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>     <a class="code" href="Init_8cpp.html#5eeaaf1538e3d79c75de9fe77916c7f3">gfUseConsecutiveQuickSaveSlots</a>;
<a name="l00066"></a>00066 <span class="preprocessor">#endif</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a>00068 <span class="preprocessor">#if defined( GERMAN ) &amp;&amp; !defined( _DEBUG )</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span>      <span class="comment">//#define LASERLOCK_ENABLED</span>
<a name="l00070"></a>00070 <span class="preprocessor">#endif</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="preprocessor">#ifdef LASERLOCK_ENABLED</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span>      <span class="keywordtype">int</span>   <a class="code" href="Init_8cpp.html#179ba6158a441d1d9dafdd3c2e746eb7">LASERLOK_Init</a>( HINSTANCE hInstance );
<a name="l00075"></a>00075       <span class="keywordtype">int</span>   <a class="code" href="Init_8cpp.html#cb1a9b63002d4480ba2fe09f82fe7880">LASERLOK_Run</a>();
<a name="l00076"></a>00076       <span class="keywordtype">int</span>   <a class="code" href="Init_8cpp.html#c82da33f7b515e423b283b5d6b51fd61">LASERLOK_Check</a>();
<a name="l00077"></a>00077 
<a name="l00078"></a>00078       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>     <a class="code" href="Init_8cpp.html#f14953a55597826c3774d2ecf75df1b3">PrepareLaserLockSystem</a>();
<a name="l00079"></a>00079       <span class="keywordtype">void</span> <a class="code" href="Init_8cpp.html#bb5e86933ace24db684612a2a1fcf303">HandleLaserLockResult</a>( <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fSuccess );
<a name="l00080"></a>00080 <span class="comment">//    int   TestCall( int n);</span>
<a name="l00081"></a>00081 <span class="preprocessor">#endif</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a>00083 <span class="keyword">extern</span>      HINSTANCE                           <a class="code" href="Init_8cpp.html#9164eb1b2a5220be5cc556fc74a98e8a">ghInstance</a>;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 
<a name="l00086"></a><a class="code" href="Init_8h.html#3be6a12761a8e786bb78a67ae32fb714">00086</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Init_8cpp.html#3be6a12761a8e786bb78a67ae32fb714">LoadExternalGameplayData</a>(<a class="code" href="Types_8h.html#ba0652aa53ceb4404f77e13a0c993b0e">STR</a> directoryName)
<a name="l00087"></a>00087 {
<a name="l00088"></a>00088       <span class="keywordtype">char</span> fileName[MAX_PATH];
<a name="l00089"></a>00089 
<a name="l00090"></a>00090       <span class="comment">// WANNE: Enemy drops - begin</span>
<a name="l00091"></a>00091       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00092"></a>00092       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ENEMYMISCDROPSFILENAME);
<a name="l00093"></a>00093       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00094"></a>00094       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#fbb312df384be71838d036c734eb37e4">ReadInEnemyMiscDropsStats</a>(<a class="code" href="EnemyItemDrops_8cpp.html#ff78ce56fd6eb458baa7b0064cd7f7c0">gEnemyMiscDrops</a>, fileName))
<a name="l00095"></a>00095             <span class="keywordflow">return</span> FALSE;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00098"></a>00098       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ENEMYEXPLOSIVEDROPSFILENAME);
<a name="l00099"></a>00099       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00100"></a>00100       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#77fe90c78daa84163302f2c87d1972ec">ReadInEnemyExplosiveDropsStats</a>(<a class="code" href="EnemyItemDrops_8cpp.html#75644159033cad799e063a2a2aa9e18d">gEnemyExplosiveDrops</a>, fileName))
<a name="l00101"></a>00101             <span class="keywordflow">return</span> FALSE;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00104"></a>00104       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ENEMYWEAPONDROPSFILENAME);
<a name="l00105"></a>00105       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00106"></a>00106       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#5179ee02d0a148aca1004753222846f5">ReadInEnemyWeaponDropsStats</a>(<a class="code" href="EnemyItemDrops_8cpp.html#30181fd4ce2d13148b68e07c39f2ea3b">gEnemyWeaponDrops</a>, fileName))
<a name="l00107"></a>00107             <span class="keywordflow">return</span> FALSE;
<a name="l00108"></a>00108 
<a name="l00109"></a>00109       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00110"></a>00110       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ENEMYAMMODROPSFILENAME);
<a name="l00111"></a>00111       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00112"></a>00112       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#1a821a1c81a1e0972852b63c95c67f36">ReadInEnemyAmmoDropsStats</a>(<a class="code" href="EnemyItemDrops_8cpp.html#8b3e308194379cca0401597a71834f10">gEnemyAmmoDrops</a>, fileName))
<a name="l00113"></a>00113             <span class="keywordflow">return</span> FALSE;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00116"></a>00116       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ENEMYARMOURDROPSFILENAME);
<a name="l00117"></a>00117       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00118"></a>00118       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#f6ecf46012abccfba28d26de7c4f0002">ReadInEnemyArmourDropsStats</a>(<a class="code" href="EnemyItemDrops_8cpp.html#5b6611cd5268248c180606e429bf47f2">gEnemyArmourDrops</a>, fileName))
<a name="l00119"></a>00119             <span class="keywordflow">return</span> FALSE;
<a name="l00120"></a>00120 
<a name="l00121"></a>00121       <span class="comment">// WANNE: Enemy drops - end</span>
<a name="l00122"></a>00122       
<a name="l00123"></a>00123 
<a name="l00124"></a>00124       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00125"></a>00125       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, AMMOTYPESFILENAME);
<a name="l00126"></a>00126       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00127"></a>00127       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#53c3e5113156c8e377442bd352435e66">ReadInAmmoTypeStats</a>(fileName))
<a name="l00128"></a>00128             <span class="keywordflow">return</span> FALSE;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="comment">//Madd: Simple Localization</span>
<a name="l00131"></a>00131 <span class="comment">//Read in the correct ammostring file for the given language</span>
<a name="l00132"></a>00132       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00133"></a>00133 <span class="preprocessor">#ifdef GERMAN</span>
<a name="l00134"></a>00134 <span class="preprocessor"></span>      <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, GERMAN_PREFIX); <span class="comment">// add German. prefix to filename</span>
<a name="l00135"></a>00135 <span class="preprocessor">#endif</span>
<a name="l00136"></a>00136 <span class="preprocessor"></span><span class="preprocessor">#ifdef RUSSIAN</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>      <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, RUSSIAN_PREFIX); <span class="comment">// add Russian. prefix to filename</span>
<a name="l00138"></a>00138 <span class="preprocessor">#endif</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span>      <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, AMMOFILENAME);
<a name="l00140"></a>00140       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00141"></a>00141       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#f423fbac2c195710acbbf58b52bbc50b">ReadInAmmoStats</a>(fileName))
<a name="l00142"></a>00142             <span class="keywordflow">return</span> FALSE;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 
<a name="l00145"></a>00145     <span class="comment">// Lesh: added this, begin</span>
<a name="l00146"></a>00146       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00147"></a>00147       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, BURSTSOUNDSFILENAME);
<a name="l00148"></a>00148       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00149"></a>00149       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#6558c777d10a9f46eeb83ee8a7acf917">ReadInBurstSoundArray</a>(fileName))
<a name="l00150"></a>00150             <span class="keywordflow">return</span> FALSE;
<a name="l00151"></a>00151     <span class="comment">// Lesh: end</span>
<a name="l00152"></a>00152 
<a name="l00153"></a>00153       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00154"></a>00154       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ITEMSFILENAME);
<a name="l00155"></a>00155       DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00156"></a>00156       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#de1c5201728a3e79f35dd143fd4ec9c6">ReadInItemStats</a>(fileName,FALSE))
<a name="l00157"></a>00157             <span class="keywordflow">return</span> FALSE;
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 <span class="comment">//Madd: Simple localization</span>
<a name="l00160"></a>00160 <span class="comment">// The idea here is that we can have a separate xml file that's named differently</span>
<a name="l00161"></a>00161 <span class="comment">// but only contains the relevant tags that need to be localized</span>
<a name="l00162"></a>00162 <span class="comment">// then when the file is read in using the same xml reader code, it will only overwrite</span>
<a name="l00163"></a>00163 <span class="comment">// the tags that are contained in the localized file.  This only works for items.xml </span>
<a name="l00164"></a>00164 <span class="comment">// since I tweaked the xml_items.cpp to make it work :p</span>
<a name="l00165"></a>00165 <span class="comment">// So for instance, the german file would be called German.Items.xml and would only contain</span>
<a name="l00166"></a>00166 <span class="comment">// the uiIndex (for reference), szItemName, szLongItemName, szItemDesc, szBRName, and szBRDesc tags</span>
<a name="l00167"></a>00167  
<a name="l00168"></a>00168 <span class="preprocessor">#ifdef GERMAN </span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>      <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00170"></a>00170       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, GERMAN_PREFIX);
<a name="l00171"></a>00171       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ITEMSFILENAME);
<a name="l00172"></a>00172       <span class="keywordflow">if</span> ( <a class="code" href="FileMan_8cpp.html#8eb098ceba9cecc2c60c7e40c964e147">FileExists</a>(fileName) )
<a name="l00173"></a>00173       {
<a name="l00174"></a>00174             DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00175"></a>00175             <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#de1c5201728a3e79f35dd143fd4ec9c6">ReadInItemStats</a>(fileName,TRUE))
<a name="l00176"></a>00176                   <span class="keywordflow">return</span> FALSE;
<a name="l00177"></a>00177       }
<a name="l00178"></a>00178 <span class="preprocessor">#endif</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span><span class="preprocessor">#ifdef RUSSIAN </span>
<a name="l00180"></a>00180 <span class="preprocessor"></span>      <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00181"></a>00181       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, RUSSIAN_PREFIX);
<a name="l00182"></a>00182       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ITEMSFILENAME);
<a name="l00183"></a>00183       <span class="keywordflow">if</span> ( <a class="code" href="FileMan_8cpp.html#8eb098ceba9cecc2c60c7e40c964e147">FileExists</a>(fileName) )
<a name="l00184"></a>00184       {
<a name="l00185"></a>00185             DebugMsg (<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"LoadExternalGameplayData, fileName = %s"</span>, fileName));
<a name="l00186"></a>00186             <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#de1c5201728a3e79f35dd143fd4ec9c6">ReadInItemStats</a>(fileName,TRUE))
<a name="l00187"></a>00187                   <span class="keywordflow">return</span> FALSE;
<a name="l00188"></a>00188       }
<a name="l00189"></a>00189 <span class="preprocessor">#endif</span>
<a name="l00190"></a>00190 <span class="preprocessor"></span>
<a name="l00191"></a>00191       <span class="comment">//if(!WriteItemStats())</span>
<a name="l00192"></a>00192       <span class="comment">//    return FALSE;</span>
<a name="l00193"></a>00193 
<a name="l00194"></a>00194       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00195"></a>00195       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, SOUNDSFILENAME);
<a name="l00196"></a>00196       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#248f8a8a57693383c1fc3db099e98bc9">ReadInSoundArray</a>(fileName))
<a name="l00197"></a>00197             <span class="keywordflow">return</span> FALSE;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00200"></a>00200       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, MAGAZINESFILENAME);
<a name="l00201"></a>00201       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#f262bd9fd787c809a423d32cb1447fda">ReadInMagazineStats</a>(fileName))
<a name="l00202"></a>00202             <span class="keywordflow">return</span> FALSE;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00205"></a>00205       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ATTACHMENTSFILENAME);
<a name="l00206"></a>00206       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#4a303bee7940117e2a512977c16bdb5a">ReadInAttachmentStats</a>(fileName))
<a name="l00207"></a>00207             <span class="keywordflow">return</span> FALSE;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00210"></a>00210       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ATTACHMENTINFOFILENAME);
<a name="l00211"></a>00211       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#adc8d3abdd5f16a7c05a9d41900dbc8b">ReadInAttachmentInfoStats</a>(fileName))
<a name="l00212"></a>00212             <span class="keywordflow">return</span> FALSE;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00215"></a>00215       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, LAUNCHABLESFILENAME);
<a name="l00216"></a>00216       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#aa559c63ffcb09aeb1cd39a256a4c856">ReadInLaunchableStats</a>(fileName))
<a name="l00217"></a>00217             <span class="keywordflow">return</span> FALSE;
<a name="l00218"></a>00218       
<a name="l00219"></a>00219       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00220"></a>00220       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, COMPATIBLEFACEITEMSFILENAME);
<a name="l00221"></a>00221       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#7aeec15036e52a11df416139b3cee9be">ReadInCompatibleFaceItemStats</a>(fileName))
<a name="l00222"></a>00222             <span class="keywordflow">return</span> FALSE;
<a name="l00223"></a>00223 
<a name="l00224"></a>00224       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00225"></a>00225       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, MERGESFILENAME);
<a name="l00226"></a>00226       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#7e199f51c467c2e689a8e13807d91a55">ReadInMergeStats</a>(fileName))
<a name="l00227"></a>00227             <span class="keywordflow">return</span> FALSE;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229       <span class="comment">//if(!WriteMergeStats())</span>
<a name="l00230"></a>00230       <span class="comment">//    return FALSE;</span>
<a name="l00231"></a>00231 
<a name="l00232"></a>00232       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00233"></a>00233       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ATTACHMENTCOMBOMERGESFILENAME);
<a name="l00234"></a>00234       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#7d80386c6fbe06a68078da92535a611b">ReadInAttachmentComboMergeStats</a>(fileName))
<a name="l00235"></a>00235             <span class="keywordflow">return</span> FALSE;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00238"></a>00238       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, EXPLOSIVESFILENAME);
<a name="l00239"></a>00239       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#0a7284e2a52cf7e594ad35f9e078263d">ReadInExplosiveStats</a>(fileName))
<a name="l00240"></a>00240             <span class="keywordflow">return</span> FALSE;
<a name="l00241"></a>00241       
<a name="l00242"></a>00242       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00243"></a>00243       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ARMOURSFILENAME);
<a name="l00244"></a>00244       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#c3d7e0a6acdeab9571aac456b2dc3276">ReadInArmourStats</a>(fileName))
<a name="l00245"></a>00245             <span class="keywordflow">return</span> FALSE;
<a name="l00246"></a>00246 
<a name="l00247"></a>00247       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00248"></a>00248       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, WEAPONSFILENAME);
<a name="l00249"></a>00249       <span class="keywordflow">if</span>(!<a class="code" href="Weapons_8cpp.html#1b9052dff2a8b1b4ef7460ffa9c275c5">ReadInWeaponStats</a>(fileName))
<a name="l00250"></a>00250             <span class="keywordflow">return</span> FALSE;
<a name="l00251"></a>00251 
<a name="l00252"></a>00252       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00253"></a>00253       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, INCOMPATIBLEATTACHMENTSFILENAME);
<a name="l00254"></a>00254       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#1efa6f27377d37fe3cb8a492cdc10672">ReadInIncompatibleAttachmentStats</a>(fileName))
<a name="l00255"></a>00255             <span class="keywordflow">return</span> FALSE;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00258"></a>00258       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ENEMYGUNCHOICESFILENAME);
<a name="l00259"></a>00259       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#c08f6050d633b76e52d515954ff616b3">ReadInExtendedArmyGunChoicesStats</a> (fileName))
<a name="l00260"></a>00260             <span class="keywordflow">return</span> FALSE;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00263"></a>00263       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ENEMYITEMCHOICESFILENAME);
<a name="l00264"></a>00264       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#407c27e71ca4831a62847e635187a92e">ReadInArmyItemChoicesStats</a>(fileName))
<a name="l00265"></a>00265             <span class="keywordflow">return</span> FALSE;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00268"></a>00268       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, IMPITEMCHOICESFILENAME);
<a name="l00269"></a>00269       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#4fca6e5999c9f38a06d025c5c860b79a">ReadInIMPItemChoicesStats</a>(fileName))
<a name="l00270"></a>00270             <span class="keywordflow">return</span> FALSE;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00273"></a>00273       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, TONYINVENTORYFILENAME);
<a name="l00274"></a>00274       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#2c955fe2538fd6e3c856435e416b69b5">gTonyInventory</a>,fileName))
<a name="l00275"></a>00275             <span class="keywordflow">return</span> FALSE;
<a name="l00276"></a>00276 
<a name="l00277"></a>00277       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00278"></a>00278       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, DEVININVENTORYFILENAME);
<a name="l00279"></a>00279       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#5d46533f60439e7d930cf194c52364b7">gDevinInventory</a>,fileName))
<a name="l00280"></a>00280             <span class="keywordflow">return</span> FALSE;
<a name="l00281"></a>00281       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00282"></a>00282       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, FRANZINVENTORYFILENAME);
<a name="l00283"></a>00283       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#ea06e5895cad9c4b14afe5817535cf1a">gFranzInventory</a>,fileName))
<a name="l00284"></a>00284             <span class="keywordflow">return</span> FALSE;
<a name="l00285"></a>00285       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00286"></a>00286       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, KEITHINVENTORYFILENAME);
<a name="l00287"></a>00287       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#582919ec056642edb45efa695314314a">gKeithInventory</a>,fileName))
<a name="l00288"></a>00288             <span class="keywordflow">return</span> FALSE;
<a name="l00289"></a>00289       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00290"></a>00290       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, SAMINVENTORYFILENAME);
<a name="l00291"></a>00291       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#2f57ff4603fb37cd23974402e632621d">gSamInventory</a>,fileName))
<a name="l00292"></a>00292             <span class="keywordflow">return</span> FALSE;
<a name="l00293"></a>00293       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00294"></a>00294       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, JAKEINVENTORYFILENAME);
<a name="l00295"></a>00295       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#c3696fa3731b769f37bb57236eab8e0c">gJakeInventory</a>,fileName))
<a name="l00296"></a>00296             <span class="keywordflow">return</span> FALSE;
<a name="l00297"></a>00297       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00298"></a>00298       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, HOWARDINVENTORYFILENAME);
<a name="l00299"></a>00299       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#4c76b93144625fc93c2d5b65e7f6c037">gHowardInventory</a>,fileName))
<a name="l00300"></a>00300             <span class="keywordflow">return</span> FALSE;
<a name="l00301"></a>00301       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00302"></a>00302       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, GABBYINVENTORYFILENAME);
<a name="l00303"></a>00303       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#5ffd215a07aa878e77fccce03ab00f68">gGabbyInventory</a>,fileName))
<a name="l00304"></a>00304             <span class="keywordflow">return</span> FALSE;
<a name="l00305"></a>00305       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00306"></a>00306       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, FRANKINVENTORYFILENAME);
<a name="l00307"></a>00307       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#8d33d124dab48d5c3d78b8cd4e2c30da">gFrankInventory</a>,fileName))
<a name="l00308"></a>00308             <span class="keywordflow">return</span> FALSE;
<a name="l00309"></a>00309       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00310"></a>00310       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ELGININVENTORYFILENAME);
<a name="l00311"></a>00311       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#50f6eeca42ec6e21355a5db09781f9a5">gElginInventory</a>,fileName))
<a name="l00312"></a>00312             <span class="keywordflow">return</span> FALSE;
<a name="l00313"></a>00313       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00314"></a>00314       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, MANNYINVENTORYFILENAME);
<a name="l00315"></a>00315       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#19f2bdabaff238610a2261ad0566d5b9">gMannyInventory</a>,fileName))
<a name="l00316"></a>00316             <span class="keywordflow">return</span> FALSE;
<a name="l00317"></a>00317       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00318"></a>00318       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, HERVEINVENTORYFILENAME);
<a name="l00319"></a>00319       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#4fcfb231978cbf96aabf7126343abd93">gHerveInventory</a>,fileName))
<a name="l00320"></a>00320             <span class="keywordflow">return</span> FALSE;
<a name="l00321"></a>00321       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00322"></a>00322       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, PETERINVENTORYFILENAME);
<a name="l00323"></a>00323       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#3446e3713469b37066ff5768134d8ed5">gPeterInventory</a>,fileName))
<a name="l00324"></a>00324             <span class="keywordflow">return</span> FALSE;
<a name="l00325"></a>00325       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00326"></a>00326       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ALBERTOINVENTORYFILENAME);
<a name="l00327"></a>00327       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#323c36e7e859178fbaa6942ca0a458de">gAlbertoInventory</a>,fileName))
<a name="l00328"></a>00328             <span class="keywordflow">return</span> FALSE;
<a name="l00329"></a>00329       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00330"></a>00330       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, CARLOINVENTORYFILENAME);
<a name="l00331"></a>00331       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#2c1961bf08bb56a0c318c4b34eb99ea6">gCarloInventory</a>,fileName))
<a name="l00332"></a>00332             <span class="keywordflow">return</span> FALSE;
<a name="l00333"></a>00333       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00334"></a>00334       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, MICKEYINVENTORYFILENAME);
<a name="l00335"></a>00335       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#c0bbdcbe129c4e2b6783bc47d055b7df">gMickyInventory</a>,fileName))
<a name="l00336"></a>00336             <span class="keywordflow">return</span> FALSE;
<a name="l00337"></a>00337       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00338"></a>00338       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, ARNIEINVENTORYFILENAME);
<a name="l00339"></a>00339       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#ca63c324a3a6eedad46d713e1a576e5d">gArnieInventory</a>,fileName))
<a name="l00340"></a>00340             <span class="keywordflow">return</span> FALSE;
<a name="l00341"></a>00341       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00342"></a>00342       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, PERKOINVENTORYFILENAME);
<a name="l00343"></a>00343       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#757664ee60bf2dc45cd085e87e1d8fa4">gPerkoInventory</a>,fileName))
<a name="l00344"></a>00344             <span class="keywordflow">return</span> FALSE;
<a name="l00345"></a>00345       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00346"></a>00346       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, FREDOINVENTORYFILENAME);
<a name="l00347"></a>00347       <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#63002dc4d4431553c27d9afaad54fe71">ReadInInventoryStats</a>(<a class="code" href="ArmsDealerInvInit_8cpp.html#d75eee9e3dea328be1eb8888fb2fc564">gFredoInventory</a>,fileName))
<a name="l00348"></a>00348             <span class="keywordflow">return</span> FALSE;
<a name="l00349"></a>00349 
<a name="l00350"></a>00350       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00351"></a>00351       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, CITYTABLEFILENAME);
<a name="l00352"></a>00352       <span class="keywordflow">if</span>(!<a class="code" href="strategicmap_8cpp.html#6a9eea7676fa0a960f416b43361d6efe">ReadInMapStructure</a>(fileName))
<a name="l00353"></a>00353             <span class="keywordflow">return</span> FALSE;
<a name="l00354"></a>00354             
<a name="l00355"></a>00355       <a class="code" href="Sys_01Globals_8h.html#9e96e1edff6728e41ac635536c3d8304">strcpy</a>(fileName, directoryName);
<a name="l00356"></a>00356       <a class="code" href="Sys_01Globals_8h.html#32359e11a61c2e06ff7bd5bf598ddc30">strcat</a>(fileName, EXPLOSIONDATAFILENAME);
<a name="l00357"></a>00357     <span class="keywordflow">if</span>(!<a class="code" href="XML_8h.html#2e7e20b6a29c0bc63efa79bc1eede949">ReadInExplosionDataStats</a>(fileName))
<a name="l00358"></a>00358             <span class="keywordflow">return</span> FALSE;
<a name="l00359"></a>00359 
<a name="l00360"></a>00360       <span class="keywordflow">return</span> TRUE;
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 
<a name="l00364"></a><a class="code" href="Init_8h.html#48c8c0b30dd3aa18eac55ec340269eb3">00364</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Init_8cpp.html#ca628c71d70483f587a80df742c35935">InitializeJA2</a>(<span class="keywordtype">void</span>)
<a name="l00365"></a>00365 { 
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 <span class="preprocessor">#ifdef LASERLOCK_ENABLED</span>
<a name="l00368"></a>00368 <span class="preprocessor"></span>      <a class="code" href="Init_8cpp.html#bb5e86933ace24db684612a2a1fcf303">HandleLaserLockResult</a>( <a class="code" href="Init_8cpp.html#f14953a55597826c3774d2ecf75df1b3">PrepareLaserLockSystem</a>() );
<a name="l00369"></a>00369 <span class="preprocessor">#endif</span>
<a name="l00370"></a>00370 <span class="preprocessor"></span>
<a name="l00371"></a>00371   <a class="code" href="Utilities_8cpp.html#c1190aeaa5900bd07a19183809f15572">HandleJA2CDCheck</a>( );
<a name="l00372"></a>00372 
<a name="l00373"></a>00373       <a class="code" href="Map_01Information_8cpp.html#0d739dcb74321d819ef2bfcb1eb5a669">gfWorldLoaded</a> = FALSE;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375       <span class="comment">//Load external game mechanic data</span>
<a name="l00376"></a>00376       <span class="keywordflow">if</span> ( !<a class="code" href="Init_8cpp.html#3be6a12761a8e786bb78a67ae32fb714">LoadExternalGameplayData</a>(TABLEDATA_DIRECTORY))
<a name="l00377"></a>00377       {
<a name="l00378"></a>00378             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2c1db01a52dceac2c2480a5b9130fe400">ERROR_SCREEN</a> );
<a name="l00379"></a>00379       }
<a name="l00380"></a>00380       
<a name="l00381"></a>00381       <span class="comment">// Load external text</span>
<a name="l00382"></a>00382       <a class="code" href="Text_01Utils_8cpp.html#e425eb10d0781eb5d2e5642e85aa6638">LoadAllExternalText</a>();
<a name="l00383"></a>00383 
<a name="l00384"></a>00384       <span class="comment">// Init JA2 sounds</span>
<a name="l00385"></a>00385       <a class="code" href="Sound_01Control_8cpp.html#63edeec43989cdc5729d5cdd11022f94">InitJA2Sound</a>( );
<a name="l00386"></a>00386 
<a name="l00387"></a>00387       <a class="code" href="renderworld_8cpp.html#1bf795f2a13e8559ffa77bc67b81dcb7">gsRenderCenterX</a> = 805;
<a name="l00388"></a>00388       <a class="code" href="renderworld_8cpp.html#086faf26457fce933b3a4f2e2ef450f3">gsRenderCenterY</a> = 805;
<a name="l00389"></a>00389  
<a name="l00390"></a>00390 
<a name="l00391"></a>00391       <span class="comment">// Init data</span>
<a name="l00392"></a>00392       <a class="code" href="sysutil_8cpp.html#49342504904898ac39b0a4c935459012">InitializeSystemVideoObjects</a>( );
<a name="l00393"></a>00393 
<a name="l00394"></a>00394       <span class="comment">// Init animation system</span>
<a name="l00395"></a>00395       <span class="keywordflow">if</span> ( !<a class="code" href="Animation_01Data_8cpp.html#964fadaccadabf874140b50c8f07dd22">InitAnimationSystem</a>( ) )
<a name="l00396"></a>00396       {
<a name="l00397"></a>00397             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2c1db01a52dceac2c2480a5b9130fe400">ERROR_SCREEN</a> );
<a name="l00398"></a>00398       }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400       <span class="comment">// Init lighting system</span>
<a name="l00401"></a>00401       <a class="code" href="lighting_8cpp.html#c18611f4c358d934bdc8c98b07a688e6">InitLightingSystem</a>();
<a name="l00402"></a>00402 
<a name="l00403"></a>00403       <span class="comment">// Init dialog queue system</span>
<a name="l00404"></a>00404       <a class="code" href="Dialogue_01Control_8cpp.html#f05aff0371f060afdc021979053ee472">InitalizeDialogueControl</a>();
<a name="l00405"></a>00405 
<a name="l00406"></a>00406       <span class="keywordflow">if</span> ( !<a class="code" href="strategic_8h.html#9f804d49ebc6680bd7b06d57b7132f72">InitStrategicEngine</a>( ) )
<a name="l00407"></a>00407       {
<a name="l00408"></a>00408             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2c1db01a52dceac2c2480a5b9130fe400">ERROR_SCREEN</a> );
<a name="l00409"></a>00409       }
<a name="l00410"></a>00410       
<a name="l00411"></a>00411       <span class="comment">//needs to be called here to init the SectorInfo struct</span>
<a name="l00412"></a>00412       <a class="code" href="Campaign_01Init_8cpp.html#526499b5451f84a74376a66b349e28be">InitStrategicMovementCosts</a>( );
<a name="l00413"></a>00413 
<a name="l00414"></a>00414       <span class="comment">// Init tactical engine</span>
<a name="l00415"></a>00415       <span class="keywordflow">if</span> ( !<a class="code" href="Overhead_8cpp.html#2f318cb3c0174f8659d881a2fcf6aa5e">InitTacticalEngine</a>( ) )
<a name="l00416"></a>00416       {
<a name="l00417"></a>00417             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2c1db01a52dceac2c2480a5b9130fe400">ERROR_SCREEN</a> );
<a name="l00418"></a>00418       }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420       <span class="comment">// Init timer system</span>
<a name="l00421"></a>00421       <span class="comment">//Moved to the splash screen code.</span>
<a name="l00422"></a>00422       <span class="comment">//InitializeJA2Clock( );</span>
<a name="l00423"></a>00423 
<a name="l00424"></a>00424       <span class="comment">// INit shade tables</span>
<a name="l00425"></a>00425       <a class="code" href="shading_8cpp.html#3a7d0fb6a0190c964e754c2f3febd492">BuildShadeTable</a>( );
<a name="l00426"></a>00426 
<a name="l00427"></a>00427       <span class="comment">// INit intensity tables</span>
<a name="l00428"></a>00428       <a class="code" href="shading_8cpp.html#f7db1777bb80f974b6fe6cdac808d587">BuildIntensityTable</a>( );
<a name="l00429"></a>00429       
<a name="l00430"></a>00430       <span class="comment">// Init Event Manager</span>
<a name="l00431"></a>00431       <span class="keywordflow">if</span> ( !<a class="code" href="Event_01Manager_8cpp.html#8a90f6122b04c7a5d5e0d534a4bb6543">InitializeEventManager</a>( ) )
<a name="l00432"></a>00432       {
<a name="l00433"></a>00433             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2c1db01a52dceac2c2480a5b9130fe400">ERROR_SCREEN</a> );
<a name="l00434"></a>00434       }
<a name="l00435"></a>00435 
<a name="l00436"></a>00436       <span class="comment">// Initailize World</span>
<a name="l00437"></a>00437       <span class="keywordflow">if</span> ( !<a class="code" href="worlddef_8cpp.html#2ed98396bc8b2d72148681974ad40358">InitializeWorld</a>( ) )
<a name="l00438"></a>00438       {
<a name="l00439"></a>00439             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2c1db01a52dceac2c2480a5b9130fe400">ERROR_SCREEN</a> );
<a name="l00440"></a>00440       }
<a name="l00441"></a>00441 
<a name="l00442"></a>00442       <a class="code" href="Tile_01Cache_8cpp.html#d53d0bdca1c127d5d20d90db35065ac5">InitTileCache</a>( );
<a name="l00443"></a>00443 
<a name="l00444"></a>00444       <a class="code" href="MercTextBox_8cpp.html#5dc5c5d0556369819171b5fc0850ee6b">InitMercPopupBox</a>( );
<a name="l00445"></a>00445 
<a name="l00446"></a>00446       <span class="comment">// Set global volume</span>
<a name="l00447"></a>00447       <a class="code" href="Music_01Control_8cpp.html#d55a1c7e574885520139dcf785b9a7e3">MusicSetVolume</a>( <a class="code" href="GameSettings_8cpp.html#955420499d1cb3101625c85ea703b6bb">gGameSettings</a>.<a class="code" href="structGAME__SETTINGS.html#b1ac327190acefca6dec64cbdd682caa">ubMusicVolumeSetting</a> );
<a name="l00448"></a>00448 
<a name="l00449"></a>00449       <a class="code" href="Shade_01Table_01Util_8cpp.html#d01f6e6f52008d9403b9686045a21f6a">DetermineRGBDistributionSettings</a>();
<a name="l00450"></a>00450 
<a name="l00451"></a>00451       <span class="comment">// Snap: Init save game directory</span>
<a name="l00452"></a>00452       <span class="keywordflow">if</span> ( !<a class="code" href="SaveLoadGame_8cpp.html#d93c9f12be362ca93de0e37ae8c24c13">InitSaveDir</a>() )
<a name="l00453"></a>00453       {
<a name="l00454"></a>00454             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2c1db01a52dceac2c2480a5b9130fe400">ERROR_SCREEN</a> );
<a name="l00455"></a>00455       }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 <span class="preprocessor">#ifdef JA2BETAVERSION</span>
<a name="l00458"></a>00458 <span class="preprocessor"></span><span class="preprocessor">      #ifdef JA2EDITOR</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span>
<a name="l00460"></a>00460       <span class="comment">//UNCOMMENT NEXT LINE TO ALLOW FORCE UPDATES...</span>
<a name="l00461"></a>00461       <span class="comment">//LoadGlobalSummary();</span>
<a name="l00462"></a>00462       <span class="keywordflow">if</span>( <a class="code" href="Sector_01Summary_8cpp.html#77692ddc44d8c2dad132620f9cbecce2">gfMustForceUpdateAllMaps</a> )
<a name="l00463"></a>00463       {
<a name="l00464"></a>00464             <a class="code" href="Sector_01Summary_8cpp.html#809a0123fe04d896ee9484f9f207da0f">ApologizeOverrideAndForceUpdateEverything</a>();
<a name="l00465"></a>00465       }
<a name="l00466"></a>00466 <span class="preprocessor">      #endif</span>
<a name="l00467"></a>00467 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>      
<a name="l00469"></a>00469 <span class="preprocessor">#ifdef JA2BETAVERSION</span>
<a name="l00470"></a>00470 <span class="preprocessor"></span>      <span class="keywordflow">if</span>( <a class="code" href="Multilingual_01Text_01Code_01Generator_8cpp.html#4410e05261214cc3ed8e019804937350">ProcessIfMultilingualCmdLineArgDetected</a>( (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *)<a class="code" href="sgp_8cpp.html#68acfb04bca4baf0b755bba775a7cb52">gzCommandLine</a> ) )
<a name="l00471"></a>00471       { <span class="comment">//If the multilingual text code generator has activated, quit now.</span>
<a name="l00472"></a>00472             <a class="code" href="sgp_8cpp.html#aab7b157104c24c2e5a34f497bedf61e">gfProgramIsRunning</a> = FALSE;
<a name="l00473"></a>00473             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2e4e3b38d7c6133e18657b2a471a78dae">INIT_SCREEN</a> );
<a name="l00474"></a>00474       }
<a name="l00475"></a>00475 <span class="preprocessor">#endif</span>
<a name="l00476"></a>00476 <span class="preprocessor"></span>
<a name="l00477"></a>00477 <span class="preprocessor">#ifdef JA2BETAVERSION</span>
<a name="l00478"></a>00478 <span class="preprocessor"></span>      <span class="comment">// CHECK COMMANDLINE FOR SPECIAL UTILITY</span>
<a name="l00479"></a>00479       <span class="keywordflow">if</span> ( <a class="code" href="Sys_01Globals_8h.html#a6f315b752752a992e37d381c9136046">strcmp</a>( gzCommandLine, <span class="stringliteral">"-DOMAPS"</span> ) == 0 )
<a name="l00480"></a>00480       {
<a name="l00481"></a>00481             <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf23f3ec2a4c23a74ec57cb9cb0988383f2">MAPUTILITY_SCREEN</a> );
<a name="l00482"></a>00482       }
<a name="l00483"></a>00483 <span class="preprocessor">#endif</span>
<a name="l00484"></a>00484 <span class="preprocessor"></span>
<a name="l00485"></a>00485 <span class="preprocessor">#ifdef JA2BETAVERSION</span>
<a name="l00486"></a>00486 <span class="preprocessor"></span>      <span class="comment">//This allows the QuickSave Slots to be autoincremented, ie everytime the user saves, there will be a new quick save file</span>
<a name="l00487"></a>00487       <span class="keywordflow">if</span> ( <a class="code" href="Sys_01Globals_8h.html#85afc6a38783d0199967e919a072b97d">_stricmp</a>( gzCommandLine, <span class="stringliteral">"-quicksave"</span> ) == 0 )
<a name="l00488"></a>00488       {
<a name="l00489"></a>00489             <a class="code" href="Init_8cpp.html#5eeaaf1538e3d79c75de9fe77916c7f3">gfUseConsecutiveQuickSaveSlots</a> = TRUE;
<a name="l00490"></a>00490       }
<a name="l00491"></a>00491 <span class="preprocessor">#endif</span>
<a name="l00492"></a>00492 <span class="preprocessor"></span>
<a name="l00493"></a>00493 <span class="preprocessor">#ifdef JA2BETAVERSION</span>
<a name="l00494"></a>00494 <span class="preprocessor"></span><span class="preprocessor">      #ifdef JA2EDITOR</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span>            <span class="comment">// CHECK COMMANDLINE FOR SPECIAL UTILITY</span>
<a name="l00496"></a>00496             <span class="keywordflow">if</span>( !<a class="code" href="Sys_01Globals_8h.html#a6f315b752752a992e37d381c9136046">strcmp</a>( gzCommandLine, <span class="stringliteral">"-EDITORAUTO"</span> ) )
<a name="l00497"></a>00497             {
<a name="l00498"></a>00498                   OutputDebugString( <span class="stringliteral">"Beginning JA2 using -EDITORAUTO commandline argument...\n"</span> );
<a name="l00499"></a>00499                   <span class="comment">//For editor purposes, need to know the default map file.</span>
<a name="l00500"></a>00500                   sprintf( (<span class="keywordtype">char</span> *)<a class="code" href="editscreen_8cpp.html#01a5706b7f6b82381c641d1b0933ca57">gubFilename</a>, <span class="stringliteral">"none"</span>);
<a name="l00501"></a>00501                   <span class="comment">//also set the sector</span>
<a name="l00502"></a>00502                   <a class="code" href="strategicmap_8cpp.html#49d9aed144a633fda4ba1990f002d703">gWorldSectorX</a> = 0;
<a name="l00503"></a>00503                   <a class="code" href="strategicmap_8cpp.html#ea322310ced0e35ee18a2ee7b32aac5b">gWorldSectorY</a> = 0;
<a name="l00504"></a>00504                   <a class="code" href="editscreen_8cpp.html#20371e5ca7d79bfeed615e7aa4406240">gfAutoLoadA9</a> = TRUE;
<a name="l00505"></a>00505                   <a class="code" href="editscreen_8cpp.html#79ab82c1b1214bc8c3d4ef4fa75226b5">gfIntendOnEnteringEditor</a> = TRUE;
<a name="l00506"></a>00506                   <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#936e08b52f7c869f135433cdf5f50964">fGunNut</a> = TRUE;
<a name="l00507"></a>00507                   <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#3d9e48a36584af44a3764da6ff440e9d">fAirStrikes</a> = FALSE;
<a name="l00508"></a>00508                   <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf29873e16bc1530dedb416060abbeea6d0">GAME_SCREEN</a> );
<a name="l00509"></a>00509             }
<a name="l00510"></a>00510             <span class="keywordflow">if</span> ( <a class="code" href="Sys_01Globals_8h.html#a6f315b752752a992e37d381c9136046">strcmp</a>( gzCommandLine, <span class="stringliteral">"-EDITOR"</span> ) == 0 )
<a name="l00511"></a>00511             {
<a name="l00512"></a>00512                   OutputDebugString( <span class="stringliteral">"Beginning JA2 using -EDITOR commandline argument...\n"</span> );
<a name="l00513"></a>00513                   <span class="comment">//For editor purposes, need to know the default map file.</span>
<a name="l00514"></a>00514                   sprintf( (<span class="keywordtype">char</span> *)<a class="code" href="editscreen_8cpp.html#01a5706b7f6b82381c641d1b0933ca57">gubFilename</a>, <span class="stringliteral">"none"</span>);
<a name="l00515"></a>00515                   <span class="comment">//also set the sector</span>
<a name="l00516"></a>00516                   <a class="code" href="strategicmap_8cpp.html#49d9aed144a633fda4ba1990f002d703">gWorldSectorX</a> = 0;
<a name="l00517"></a>00517                   <a class="code" href="strategicmap_8cpp.html#ea322310ced0e35ee18a2ee7b32aac5b">gWorldSectorY</a> = 0;
<a name="l00518"></a>00518                   <a class="code" href="editscreen_8cpp.html#20371e5ca7d79bfeed615e7aa4406240">gfAutoLoadA9</a> = FALSE;
<a name="l00519"></a>00519                   <a class="code" href="editscreen_8cpp.html#79ab82c1b1214bc8c3d4ef4fa75226b5">gfIntendOnEnteringEditor</a> = TRUE;
<a name="l00520"></a>00520                   <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#936e08b52f7c869f135433cdf5f50964">fGunNut</a> = TRUE;
<a name="l00521"></a>00521                   <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#3d9e48a36584af44a3764da6ff440e9d">fAirStrikes</a> = FALSE;
<a name="l00522"></a>00522                   <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf29873e16bc1530dedb416060abbeea6d0">GAME_SCREEN</a> );
<a name="l00523"></a>00523             }
<a name="l00524"></a>00524 <span class="preprocessor">      #endif</span>
<a name="l00525"></a>00525 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00526"></a>00526 <span class="preprocessor"></span>
<a name="l00527"></a>00527       <span class="keywordflow">return</span>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2e4e3b38d7c6133e18657b2a471a78dae">INIT_SCREEN</a> );
<a name="l00528"></a>00528 }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530 
<a name="l00531"></a><a class="code" href="Init_8h.html#be66801737f099f6581d5c87914164c1">00531</a> <span class="keywordtype">void</span> <a class="code" href="Init_8cpp.html#68497aa28f42268f2d3dfc9babc20922">ShutdownJA2</a>(<span class="keywordtype">void</span>)
<a name="l00532"></a>00532 { 
<a name="l00533"></a>00533   <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiIndex;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535       <span class="comment">// Clear screen....</span>
<a name="l00536"></a>00536       <a class="code" href="vsurface_8cpp.html#10d0257b54c4d27b2d82ead2a46cd581">ColorFillVideoSurfaceArea</a>( FRAME_BUFFER, 0, 0, <a class="code" href="local_8h.html#599adbe412c60e0cc5abb86be7ee4507">SCREEN_WIDTH</a>, <a class="code" href="local_8h.html#f1c710caf1e3a9e81829078054e83799">SCREEN_HEIGHT</a>, <a class="code" href="himage_8cpp.html#d29939ffcd39c7d1cc0a91222702d361">Get16BPPColor</a>( FROMRGB( 0, 0, 0 ) ) );
<a name="l00537"></a>00537       <a class="code" href="video_8cpp.html#02ed05b095e30f580eeba68eff78327c">InvalidateScreen</a>( );
<a name="l00538"></a>00538       <span class="comment">// Remove cursor....</span>
<a name="l00539"></a>00539       <a class="code" href="Cursor_01Control_8cpp.html#6948f4af8a9f571f6a8a45f3fb2931de">SetCurrentCursorFromDatabase</a>( VIDEO_NO_CURSOR );
<a name="l00540"></a>00540 
<a name="l00541"></a>00541       <a class="code" href="video_8cpp.html#fbefe3edde80cc30c690c11d5c063789">RefreshScreen</a>( NULL );
<a name="l00542"></a>00542             
<a name="l00543"></a>00543       <a class="code" href="Game_01Init_8cpp.html#7dec3893cc96fa1c83e670c28789e269">ShutdownStrategicLayer</a>();
<a name="l00544"></a>00544 
<a name="l00545"></a>00545       <span class="comment">// remove temp files built by laptop</span>
<a name="l00546"></a>00546       <a class="code" href="laptop_8cpp.html#ab39582af839e0a37623c3eaf57d0203">ClearOutTempLaptopFiles</a>( );
<a name="l00547"></a>00547 
<a name="l00548"></a>00548       <span class="comment">// Shutdown queue system</span>
<a name="l00549"></a>00549       <a class="code" href="Dialogue_01Control_8cpp.html#16bf74d9dbfc473a2d17804517d51bc0">ShutdownDialogueControl</a>();
<a name="l00550"></a>00550 
<a name="l00551"></a>00551   <span class="comment">// Shutdown Screens</span>
<a name="l00552"></a>00552   <span class="keywordflow">for</span> (uiIndex = 0; uiIndex &lt; <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2bd55d16aed07aa3de513277a83952a51">MAX_SCREENS</a>; uiIndex++)
<a name="l00553"></a>00553   { 
<a name="l00554"></a>00554     (*(<a class="code" href="SCREENS_8cpp.html#1c6511f86a01b6f42ea91436545d16a2">GameScreens</a>[uiIndex].ShutdownScreen))();
<a name="l00555"></a>00555   }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557 
<a name="l00558"></a>00558       <span class="comment">// Shutdown animation system</span>
<a name="l00559"></a>00559       <a class="code" href="Animation_01Data_8cpp.html#547d4e26010a6d727eb6852c89875382">DeInitAnimationSystem</a>( );
<a name="l00560"></a>00560 
<a name="l00561"></a>00561       <a class="code" href="lighting_8cpp.html#cec229c1079f0875635f10386059b2a1">ShutdownLightingSystem</a>();
<a name="l00562"></a>00562 
<a name="l00563"></a>00563       <a class="code" href="Cursor_01Control_8cpp.html#0c7aa4639a2942eef0312483603bc376">CursorDatabaseClear</a>();
<a name="l00564"></a>00564 
<a name="l00565"></a>00565       <a class="code" href="Overhead_8cpp.html#33f820ec2b735c194e018b2b961ebc06">ShutdownTacticalEngine</a>( );
<a name="l00566"></a>00566 
<a name="l00567"></a>00567       <span class="comment">// Shutdown Overhead</span>
<a name="l00568"></a>00568       <a class="code" href="Overhead_8cpp.html#bec7525ac058b7659cbcd34ae66570be">ShutdownOverhead</a>( );
<a name="l00569"></a>00569 
<a name="l00570"></a>00570       <a class="code" href="worlddef_8cpp.html#53178efd5d04dfa2b3bde54bd9979726">DeinitializeWorld</a>( );
<a name="l00571"></a>00571 
<a name="l00572"></a>00572       <a class="code" href="Tile_01Cache_8cpp.html#891c71525c8882624128dd1f4c26cf1e">DeleteTileCache</a>( );
<a name="l00573"></a>00573 
<a name="l00574"></a>00574       <a class="code" href="Timer_01Control_8cpp.html#802be7a5ed5d77d0b56134e1e55463de">ShutdownJA2Clock</a>( );
<a name="l00575"></a>00575 
<a name="l00576"></a>00576       <a class="code" href="Font_01Control_8cpp.html#ba9586dcacd70516d25b809825cad79d">ShutdownFonts</a>();
<a name="l00577"></a>00577 
<a name="l00578"></a>00578       <a class="code" href="Sound_01Control_8cpp.html#e6a870e065ba440801566e7dc96e9db7">ShutdownJA2Sound</a>( );
<a name="l00579"></a>00579 
<a name="l00580"></a>00580       <a class="code" href="Event_01Manager_8cpp.html#3aaa5f56a493b2d17463eb331a5552eb">ShutdownEventManager</a>( );
<a name="l00581"></a>00581 
<a name="l00582"></a>00582       <a class="code" href="Render_01Dirty_8cpp.html#b3b4a317499a1b83a75bf04a290db135">ShutdownBaseDirtyRectQueue</a>( );
<a name="l00583"></a>00583 
<a name="l00584"></a>00584       <span class="comment">// Unload any text box images!</span>
<a name="l00585"></a>00585       <a class="code" href="MercTextBox_8cpp.html#ff9d0a90f4a905befa2bb4ac8e5fb21a">RemoveTextMercPopupImages</a>( );
<a name="l00586"></a>00586 
<a name="l00587"></a>00587       <a class="code" href="Vehicles_8cpp.html#5af9fd192dd3ef83cf0cacd33fcc8c28">ClearOutVehicleList</a>();
<a name="l00588"></a>00588 }
<a name="l00589"></a>00589 
<a name="l00590"></a>00590 
<a name="l00591"></a>00591 <span class="preprocessor">#ifdef LASERLOCK_ENABLED</span>
<a name="l00592"></a>00592 <span class="preprocessor"></span>
<a name="l00593"></a><a class="code" href="Init_8cpp.html#f14953a55597826c3774d2ecf75df1b3">00593</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Init_8cpp.html#f14953a55597826c3774d2ecf75df1b3">PrepareLaserLockSystem</a>()
<a name="l00594"></a>00594 {
<a name="l00595"></a>00595       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> iInitRetVal=0;
<a name="l00596"></a>00596       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> iRunRetVal=0;
<a name="l00597"></a>00597       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> iCheckRetVal=0;
<a name="l00598"></a>00598       <a class="code" href="Types_8h.html#2f68f0189367ead40015f7c0ec68eb9e">CHAR8</a> zDirectory[512];
<a name="l00599"></a>00599 
<a name="l00600"></a>00600       <a class="code" href="Types_8h.html#2f68f0189367ead40015f7c0ec68eb9e">CHAR8</a>       zCdLocation[ SGPFILENAME_LEN ];
<a name="l00601"></a>00601       <a class="code" href="Types_8h.html#2f68f0189367ead40015f7c0ec68eb9e">CHAR8</a>       zCdFile[ SGPFILENAME_LEN ];
<a name="l00602"></a>00602 
<a name="l00603"></a>00603       <span class="comment">//Get the "current" file directory</span>
<a name="l00604"></a>00604       <a class="code" href="FileMan_8cpp.html#1a421263d9ddfdb61cec42c54775b481">GetFileManCurrentDirectory</a>( zDirectory );
<a name="l00605"></a>00605 
<a name="l00606"></a>00606       <span class="keywordflow">if</span>( <a class="code" href="GameSettings_8cpp.html#0a0f9f199b5c2245363c96a59bd69d16">GetCDromDriveLetter</a>( zCdLocation ) )
<a name="l00607"></a>00607       {
<a name="l00608"></a>00608             <span class="comment">// OK, build filename</span>
<a name="l00609"></a>00609             sprintf( zCdFile, <span class="stringliteral">"%s%s"</span>, zCdLocation, <span class="stringliteral">"Data"</span> );
<a name="l00610"></a>00610       }
<a name="l00611"></a>00611       <span class="keywordflow">else</span>
<a name="l00612"></a>00612       {
<a name="l00613"></a>00613             <span class="keywordflow">goto</span> FAILED_LASERLOK;
<a name="l00614"></a>00614       }
<a name="l00615"></a>00615 
<a name="l00616"></a>00616       <span class="comment">//Go back to the root directory</span>
<a name="l00617"></a>00617       <a class="code" href="FileMan_8cpp.html#505ac2410d7aed5987ab12d216bb67e4">SetFileManCurrentDirectory</a>( zCdFile );
<a name="l00618"></a>00618       <span class="comment">//Init the laser lock system</span>
<a name="l00619"></a>00619       iInitRetVal = <a class="code" href="Init_8cpp.html#179ba6158a441d1d9dafdd3c2e746eb7">LASERLOK_Init</a>( <a class="code" href="Init_8cpp.html#9164eb1b2a5220be5cc556fc74a98e8a">ghInstance</a> );
<a name="l00620"></a>00620       <span class="keywordflow">if</span>( iInitRetVal != 0 )
<a name="l00621"></a>00621             <span class="keywordflow">goto</span> FAILED_LASERLOK;
<a name="l00622"></a>00622 
<a name="l00623"></a>00623       <span class="comment">//makes the verification of the laserlok system</span>
<a name="l00624"></a>00624       iRunRetVal = <a class="code" href="Init_8cpp.html#cb1a9b63002d4480ba2fe09f82fe7880">LASERLOK_Run</a>();
<a name="l00625"></a>00625       <span class="keywordflow">if</span>( iRunRetVal != 0 )
<a name="l00626"></a>00626             <span class="keywordflow">goto</span> FAILED_LASERLOK;
<a name="l00627"></a>00627 
<a name="l00628"></a>00628       <span class="comment">//checks the result of the laserlok run function</span>
<a name="l00629"></a>00629       iCheckRetVal = <a class="code" href="Init_8cpp.html#c82da33f7b515e423b283b5d6b51fd61">LASERLOK_Check</a>();
<a name="l00630"></a>00630       <span class="keywordflow">if</span>( iCheckRetVal != 0 )
<a name="l00631"></a>00631             <span class="keywordflow">goto</span> FAILED_LASERLOK;
<a name="l00632"></a>00632       
<a name="l00633"></a>00633       <span class="comment">//Restore back to the proper directory</span>
<a name="l00634"></a>00634       <a class="code" href="FileMan_8cpp.html#505ac2410d7aed5987ab12d216bb67e4">SetFileManCurrentDirectory</a>( zDirectory );
<a name="l00635"></a>00635       <span class="keywordflow">return</span>( TRUE );
<a name="l00636"></a>00636 
<a name="l00637"></a>00637 FAILED_LASERLOK:
<a name="l00638"></a>00638       <span class="comment">//Restore back to the proper directory</span>
<a name="l00639"></a>00639       <a class="code" href="FileMan_8cpp.html#505ac2410d7aed5987ab12d216bb67e4">SetFileManCurrentDirectory</a>( zDirectory );
<a name="l00640"></a>00640       <span class="keywordflow">return</span>( FALSE );
<a name="l00641"></a>00641 }
<a name="l00642"></a>00642 
<a name="l00643"></a><a class="code" href="Init_8cpp.html#bb5e86933ace24db684612a2a1fcf303">00643</a> <span class="keywordtype">void</span> <a class="code" href="Init_8cpp.html#bb5e86933ace24db684612a2a1fcf303">HandleLaserLockResult</a>( <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fSuccess )
<a name="l00644"></a>00644 {
<a name="l00645"></a>00645       <span class="keywordflow">if</span>( !fSuccess )
<a name="l00646"></a>00646       {
<a name="l00647"></a>00647             <a class="code" href="Types_8h.html#2f68f0189367ead40015f7c0ec68eb9e">CHAR8</a> zString[512];
<a name="l00648"></a>00648 
<a name="l00649"></a>00649             sprintf( zString, <span class="stringliteral">"%S"</span>, <a class="code" href="__DutchText_8cpp.html#c5c7f48843bbaeab7848215f323578c9">gzLateLocalizedString</a>[56] );
<a name="l00650"></a>00650 
<a name="l00651"></a>00651     ShowCursor(TRUE);
<a name="l00652"></a>00652     ShowCursor(TRUE);
<a name="l00653"></a>00653             <a class="code" href="sgp_8cpp.html#32e2c21bd648e23ab9be0b4bccfb4a25">ShutdownWithErrorBox</a>( zString );
<a name="l00654"></a>00654       }
<a name="l00655"></a>00655 }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Sep 9 13:48:17 2006 for Build by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
