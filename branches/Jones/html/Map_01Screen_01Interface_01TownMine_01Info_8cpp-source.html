<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Build: Map Screen Interface TownMine Info.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_3179ea33d55a76dc38212d9eab798728.html">export</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e5664b4b56927c8728eb3192fa60e338.html">hdc2</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_1eb12a41a47efb9efcd82fa98f4f4dbd.html">FTP</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_80cc1f21a78ab7941088ea567f236150.html">ja2src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_994ab287602efefceafe55287a3657d6.html">Build</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5aba590d477d4824a9090ab3f8850834.html">Strategic</a></div>
<h1>Map Screen Interface TownMine Info.cpp</h1><a href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifdef PRECOMPILEDHEADERS</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="Strategic_01All_8h.html">Strategic All.h</a>"</span>
<a name="l00003"></a>00003 <span class="preprocessor">      #include "<a class="code" href="HelpScreen_8h.html">HelpScreen.h</a>"</span>
<a name="l00004"></a>00004 <span class="preprocessor">#else</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8h.html">Map Screen Interface TownMine Info.h</a>"</span>
<a name="l00006"></a>00006 <span class="preprocessor">      #include "<a class="code" href="strategicmap_8h.html">strategicmap.h</a>"</span>
<a name="l00007"></a>00007 <span class="preprocessor">      #include "popupbox.h"</span>
<a name="l00008"></a>00008 <span class="preprocessor">      #include "<a class="code" href="Map_01Screen_01Interface_8h.html">Map Screen Interface.h</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">      #include "<a class="code" href="Queen_01Command_8h.html">Queen Command.h</a>"</span>
<a name="l00010"></a>00010 <span class="preprocessor">      #include "<a class="code" href="Player_01Command_8h.html">Player Command.h</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">      #include "<a class="code" href="Font_01Control_8h.html">Font Control.h</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">      #include "<a class="code" href="Font_8h.html">Font.h</a>"</span>
<a name="l00013"></a>00013 <span class="preprocessor">      #include "<a class="code" href="Text_8h.html">Text.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">      #include "<a class="code" href="Map_01Screen_01Interface_01Map_8h.html">Map Screen Interface Map.h</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">      #include "<a class="code" href="Map_01Screen_01Interface_01Border_8h.html">Map Screen Interface Border.h</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">      #include "<a class="code" href="Handle_01UI_8h.html">Handle UI.h</a>"</span>
<a name="l00017"></a>00017 <span class="preprocessor">      #include "<a class="code" href="NPC_8h.html">NPC.h</a>"</span>
<a name="l00018"></a>00018 <span class="preprocessor">      #include "<a class="code" href="Strategic_01Town_01Loyalty_8h.html">Strategic Town Loyalty.h</a>"</span>
<a name="l00019"></a>00019 <span class="preprocessor">      #include "<a class="code" href="Strategic_01Mines_8h.html">Strategic Mines.h</a>"</span>
<a name="l00020"></a>00020 <span class="preprocessor">      #include "<a class="code" href="finances_8h.html">finances.h</a>"</span>
<a name="l00021"></a>00021 <span class="preprocessor">      #include "<a class="code" href="Map_01Screen_01Interface_01Map_01Inventory_8h.html">Map Screen Interface Map Inventory.h</a>"</span> 
<a name="l00022"></a>00022 <span class="preprocessor">      #include "Strategic.h"</span>
<a name="l00023"></a>00023 <span class="preprocessor">      #include "<a class="code" href="Utilities_8h.html">Utilities.h</a>"</span>
<a name="l00024"></a>00024 <span class="preprocessor">      #include "<a class="code" href="video_8h.html">video.h</a>"</span>
<a name="l00025"></a>00025 <span class="preprocessor">      #include "<a class="code" href="Town_01Militia_8h.html">Town Militia.h</a>"</span>
<a name="l00026"></a>00026 <span class="preprocessor">      #include "<a class="code" href="HelpScreen_8h.html">HelpScreen.h</a>"</span>
<a name="l00027"></a>00027 <span class="preprocessor">#endif</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#define BOX_BUTTON_WIDTH 100</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#define BOX_BUTTON_HEIGHT 20</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="comment">// flag to say if we are showing town/mine box at all</span>
<a name="l00035"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8h.html#199f71b31d6be32a5bb716c33ece4396">00035</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Assignments_8cpp.html#199f71b31d6be32a5bb716c33ece4396">fShowTownInfo</a> = FALSE;
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="mapscreen_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">00037</a> <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a> = -1;
<a name="l00038"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#9a8387b726a0dd70f48209b130a4fb38">00038</a> <a class="code" href="structSGPPoint.html">SGPPoint</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#9a8387b726a0dd70f48209b130a4fb38">TownMinePosition</a> ={ 300, 150 };
<a name="l00039"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#ff7f39f9866433d29bc87df3ebddf577">00039</a> <a class="code" href="structSGPRect.html">SGPRect</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#ff7f39f9866433d29bc87df3ebddf577">TownMineDimensions</a> ={ 0, 0, 240, 60 };
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">00041</a> <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a> = 0;
<a name="l00042"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">00042</a> <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> = 0;
<a name="l00043"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#414e5c7ed81e53640148703081de1766">00043</a> <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#414e5c7ed81e53640148703081de1766">bCurrentTownMineSectorZ</a> = 0;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="comment">// inventory button</span>
<a name="l00046"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4a0a21687f84d927f08284af03963a1b">00046</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4a0a21687f84d927f08284af03963a1b">guiMapButtonInventoryImage</a>[2];
<a name="l00047"></a><a class="code" href="mapscreen_8cpp.html#32a55b1e67f3d1af7a6598c87bd7e2ca">00047</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6203d8a242fb4e060520bb7097e1bacf">guiMapButtonInventory</a>[2];
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#732f2fa46361d4d77f209131ec00fcd5">00049</a> <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#732f2fa46361d4d77f209131ec00fcd5">sTotalButtonWidth</a> = 0;
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="keyword">extern</span> <a class="code" href="structMINE__LOCATION__TYPE.html">MINE_LOCATION_TYPE</a> <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#2889e0746115b88002494be407bc5de4">gMineLocation</a>[];
<a name="l00052"></a>00052 <span class="keyword">extern</span> <a class="code" href="structMINE__STATUS__TYPE.html">MINE_STATUS_TYPE</a> <a class="code" href="Creature_01Spreading_8cpp.html#9380f2e39f34095d76ba1abab44dab29">gMineStatus</a>[];
<a name="l00053"></a>00053 <span class="keyword">extern</span> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="HelpScreen_8cpp.html#76b028059427f50dbfcd71e9a289d81a">fMapScreenBottomDirty</a>;
<a name="l00054"></a>00054 <span class="comment">//extern UINT8 gubMonsterMineInfestation[];</span>
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="comment">// create the town/mine info box</span>
<a name="l00058"></a>00058 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#b291bcb5b80c8ec73f9387cfd3b4200c">CreateTownInfoBox</a>( <span class="keywordtype">void</span> );
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="comment">// add town text to town info box</span>
<a name="l00061"></a>00061 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4d1bf25244585c9f7ba5ed8dcb64d205">AddTextToTownBox</a>( <span class="keywordtype">void</span> );
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">// add text to mine info box</span>
<a name="l00064"></a>00064 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6a5b81ba88c15de0b34cbb8683aa2af8">AddTextToMineBox</a>( <span class="keywordtype">void</span> );
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="comment">// add text to non-town/non-mine the other boxes</span>
<a name="l00067"></a>00067 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#83ddfa8d78b37c69faf6b9dcde146a76">AddTextToBlankSectorBox</a>( <span class="keywordtype">void</span> );
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="comment">// add "sector" line text to any popup box</span>
<a name="l00070"></a>00070 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#42e78ef6390bdfc999422e58ca54ef3b">AddSectorToBox</a>(<span class="keywordtype">void</span>);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#760b0face895630fed1052532335b39c">AddCommonInfoToBox</a>(<span class="keywordtype">void</span>);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#14e7f61f81ea6ce8daa83d5639b4a029">AddItemsInSectorToBox</a>(<span class="keywordtype">void</span>);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="comment">// position town/mine info box on the screen</span>
<a name="l00077"></a>00077 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#a98bdfba3b56a920320edcfa6f3e949a">PositionTownMineInfoBox</a>( <span class="keywordtype">void</span> );
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="comment">// add the pop up button for the map inventory pop up activation </span>
<a name="l00080"></a>00080 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e29ae8f1268caa7043020884ec4d2145">AddInventoryButtonForMapPopUpBox</a>( <span class="keywordtype">void</span> );
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="comment">// now remove the above button</span>
<a name="l00083"></a>00083 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#991b06dbe08e14b2e60dc5f5b089f5d4">RemoveInventoryButtonForMapPopUpBox</a>( <span class="keywordtype">void</span> );
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">// callback to turn on sector invneotry list</span>
<a name="l00086"></a>00086 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#dd723017092a8379247370c6b09e22f3">MapTownMineInventoryButtonCallBack</a>( <a class="code" href="struct__GUI__BUTTON.html">GUI_BUTTON</a> *btn, <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> reason );
<a name="l00087"></a>00087 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#feda735a47fec26e616f89b2072568ce">MapTownMineExitButtonCallBack</a>( <a class="code" href="struct__GUI__BUTTON.html">GUI_BUTTON</a> *btn, <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> reason );
<a name="l00088"></a>00088 <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#de3c17d3b745e232dad6be8784830482">MinWidthOfTownMineInfoBox</a>( <span class="keywordtype">void</span> );
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8h.html#40e8046d3cbb12cec6354cf645d9a287">00092</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#40e8046d3cbb12cec6354cf645d9a287">DisplayTownInfo</a>( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sMapX, <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sMapY, <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bMapZ )
<a name="l00093"></a>00093 {
<a name="l00094"></a>00094       <span class="comment">// will display town info for a particular town</span>
<a name="l00095"></a>00095 
<a name="l00096"></a>00096       <span class="comment">// set current sector</span>
<a name="l00097"></a>00097       <span class="keywordflow">if</span>( ( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a> != sMapX ) || ( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> != sMapY ) || ( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#414e5c7ed81e53640148703081de1766">bCurrentTownMineSectorZ</a> != bMapZ ) )
<a name="l00098"></a>00098       {
<a name="l00099"></a>00099         <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a> = ( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> )sMapX;
<a name="l00100"></a>00100         <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> = ( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> )sMapY;
<a name="l00101"></a>00101         <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#414e5c7ed81e53640148703081de1766">bCurrentTownMineSectorZ</a> = bMapZ;
<a name="l00102"></a>00102       }
<a name="l00103"></a>00103 
<a name="l00104"></a>00104       <span class="comment">//create destroy the box</span>
<a name="l00105"></a>00105       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#31a0ea91cb4b8ff32bc4f8d53b337e5c">CreateDestroyTownInfoBox</a>( );
<a name="l00106"></a>00106       
<a name="l00107"></a>00107 }
<a name="l00108"></a>00108 
<a name="l00109"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8h.html#31a0ea91cb4b8ff32bc4f8d53b337e5c">00109</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#31a0ea91cb4b8ff32bc4f8d53b337e5c">CreateDestroyTownInfoBox</a>( <span class="keywordtype">void</span> )
<a name="l00110"></a>00110 {
<a name="l00111"></a>00111       <span class="comment">// create destroy pop up box for town/mine info</span>
<a name="l00112"></a>00112       <span class="keyword">static</span> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fCreated = FALSE;
<a name="l00113"></a>00113       <a class="code" href="structSGPRect.html">SGPRect</a> pDimensions;
<a name="l00114"></a>00114       <a class="code" href="structSGPPoint.html">SGPPoint</a> pPosition;
<a name="l00115"></a>00115       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sButtonX = 0, sButtonY = 0;
<a name="l00116"></a>00116       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bTownId = 0;
<a name="l00117"></a>00117 
<a name="l00118"></a>00118       <span class="keywordflow">if</span>( ( fCreated == FALSE ) &amp;&amp; ( <a class="code" href="Assignments_8cpp.html#199f71b31d6be32a5bb716c33ece4396">fShowTownInfo</a> == TRUE ) )
<a name="l00119"></a>00119       {
<a name="l00120"></a>00120             <span class="comment">// create pop up box</span>
<a name="l00121"></a>00121             <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#b291bcb5b80c8ec73f9387cfd3b4200c">CreateTownInfoBox</a>( );
<a name="l00122"></a>00122 
<a name="l00123"></a>00123             <span class="comment">// decide what kind of text to add to display</span>
<a name="l00124"></a>00124 
<a name="l00125"></a>00125             <span class="keywordflow">if</span> ( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#414e5c7ed81e53640148703081de1766">bCurrentTownMineSectorZ</a> == 0 )
<a name="l00126"></a>00126             {
<a name="l00127"></a>00127                   <span class="comment">// only show the mine info when mines button is selected, otherwise we need to see the sector's regular town info</span>
<a name="l00128"></a>00128                   <span class="keywordflow">if</span> ( ( <a class="code" href="Strategic_01Mines_8cpp.html#b0f0455eb0a1cbba9d376743c6d5d091">IsThereAMineInThisSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> ) == TRUE) &amp;&amp; <a class="code" href="Map_01Screen_01Interface_01Border_8cpp.html#6d825d0bf482e73daae1d7cc2c5670e2">fShowMineFlag</a> )
<a name="l00129"></a>00129                   {
<a name="l00130"></a>00130                         <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6a5b81ba88c15de0b34cbb8683aa2af8">AddTextToMineBox</a>( );
<a name="l00131"></a>00131                   }
<a name="l00132"></a>00132                   <span class="keywordflow">else</span>
<a name="l00133"></a>00133                   {
<a name="l00134"></a>00134                         bTownId = <a class="code" href="strategicmap_8cpp.html#99dffd29ea4571bc0c833d45636f1403">GetTownIdForSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> );
<a name="l00135"></a>00135 
<a name="l00136"></a>00136                         <span class="comment">// do we add text for the town box?</span>
<a name="l00137"></a>00137                         <span class="keywordflow">if</span>( bTownId != <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe105d008cfe091b982e6d052565ed0b5acd8">BLANK_SECTOR</a> )
<a name="l00138"></a>00138                         {
<a name="l00139"></a>00139                               <span class="comment">// add text for town box</span>
<a name="l00140"></a>00140                               <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4d1bf25244585c9f7ba5ed8dcb64d205">AddTextToTownBox</a>( );
<a name="l00141"></a>00141                         }
<a name="l00142"></a>00142                         <span class="keywordflow">else</span>
<a name="l00143"></a>00143                         {
<a name="l00144"></a>00144                               <span class="comment">// just a blank sector (handles SAM sites if visible)</span>
<a name="l00145"></a>00145                               <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#83ddfa8d78b37c69faf6b9dcde146a76">AddTextToBlankSectorBox</a>( );
<a name="l00146"></a>00146                         }
<a name="l00147"></a>00147                   }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149                   <span class="comment">// add "militia", "militia training", "control" "enemy forces", etc. lines text to any popup box</span>
<a name="l00150"></a>00150                   <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#760b0face895630fed1052532335b39c">AddCommonInfoToBox</a>();
<a name="l00151"></a>00151             }
<a name="l00152"></a>00152             <span class="keywordflow">else</span>  <span class="comment">// underground</span>
<a name="l00153"></a>00153             {
<a name="l00154"></a>00154                   <span class="comment">// sector</span>
<a name="l00155"></a>00155                   <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#42e78ef6390bdfc999422e58ca54ef3b">AddSectorToBox</a>();
<a name="l00156"></a>00156             }
<a name="l00157"></a>00157 
<a name="l00158"></a>00158             <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#14e7f61f81ea6ce8daa83d5639b4a029">AddItemsInSectorToBox</a>();
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 
<a name="l00161"></a>00161             <span class="comment">// set font type</span>
<a name="l00162"></a>00162     <a class="code" href="PopUpBox_8cpp.html#1766e1d163312e4ffc7dd19bd013c708">SetBoxFont</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, BLOCKFONT2);
<a name="l00163"></a>00163 
<a name="l00164"></a>00164             <span class="comment">// set highlight color</span>
<a name="l00165"></a>00165             <a class="code" href="PopUpBox_8cpp.html#54a6c8a82992c65a7bc0903197ed4e2b">SetBoxHighLight</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FONT_WHITE);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167             <a class="code" href="PopUpBox_8cpp.html#4ca3527c29f360f7be663f9a63a43ae7">SetBoxSecondColumnForeground</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FONT_WHITE );
<a name="l00168"></a>00168             <a class="code" href="PopUpBox_8cpp.html#ba5395684f2b0be2770e182627192889">SetBoxSecondColumnBackground</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FONT_BLACK );
<a name="l00169"></a>00169             <a class="code" href="PopUpBox_8cpp.html#1d01a5c0f6c41d075ca727bd82c56ef3">SetBoxSecondColumnHighLight</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FONT_WHITE );
<a name="l00170"></a>00170             <a class="code" href="PopUpBox_8cpp.html#03a67b6825cbbea43d8072176e936b46">SetBoxSecondColumnShade</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FONT_BLACK );
<a name="l00171"></a>00171             <a class="code" href="PopUpBox_8cpp.html#e8ec8d3dd04bd71bac366f364ea18493">SetBoxSecondColumnFont</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, BLOCKFONT2 );
<a name="l00172"></a>00172             <a class="code" href="PopUpBox_8cpp.html#1913849d58b53d4fc589394819ea2be9">SetBoxSecondColumnMinimumOffset</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, 20 );
<a name="l00173"></a>00173 
<a name="l00174"></a>00174             <span class="comment">// unhighlighted color</span>
<a name="l00175"></a>00175             <a class="code" href="PopUpBox_8cpp.html#9abf217d763f8f2d54cdb796d6f4acf0">SetBoxForeground</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FONT_YELLOW);
<a name="l00176"></a>00176 
<a name="l00177"></a>00177             <span class="comment">// background color</span>
<a name="l00178"></a>00178             <a class="code" href="PopUpBox_8cpp.html#cd22b7957c3be2ce103cb786eba7d891">SetBoxBackground</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FONT_BLACK);
<a name="l00179"></a>00179 
<a name="l00180"></a>00180             <span class="comment">// shaded color..for darkened text</span>
<a name="l00181"></a>00181             <a class="code" href="PopUpBox_8cpp.html#61b35e3a65bff03dbaecfc1c9b37d4a0">SetBoxShade</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FONT_BLACK );
<a name="l00182"></a>00182 
<a name="l00183"></a>00183             <span class="comment">// give title line (0) different color from the rest</span>
<a name="l00184"></a>00184             <a class="code" href="PopUpBox_8cpp.html#4893811e02abf4288d40b6638b26d497">SetBoxLineForeground</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, 0, FONT_LTGREEN );
<a name="l00185"></a>00185 
<a name="l00186"></a>00186             <span class="comment">// ressize box to text</span>
<a name="l00187"></a>00187             <a class="code" href="PopUpBox_8cpp.html#76d6fca3af625d1539aa309758d6c82d">ResizeBoxToText</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a> );
<a name="l00188"></a>00188 
<a name="l00189"></a>00189             <span class="comment">// make box bigger to this size</span>
<a name="l00190"></a>00190             <a class="code" href="PopUpBox_8cpp.html#672b85cdbfdc5424b94152b87814728a">GetBoxSize</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a> , &amp;pDimensions );
<a name="l00191"></a>00191 
<a name="l00192"></a>00192             <span class="keywordflow">if</span>( pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> &lt; BOX_BUTTON_WIDTH )
<a name="l00193"></a>00193             {
<a name="l00194"></a>00194                   <span class="comment">// resize box to fit button</span>
<a name="l00195"></a>00195                   pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> += BOX_BUTTON_WIDTH;
<a name="l00196"></a>00196             }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198             pDimensions.<a class="code" href="structSGPRect.html#3da8351ad1e68d9f710a57d7a7d8cb21">iBottom</a> += BOX_BUTTON_HEIGHT;
<a name="l00199"></a>00199             
<a name="l00200"></a>00200             <a class="code" href="PopUpBox_8cpp.html#cd2edd363a88ab66e0020fb1388cf457">SetBoxSize</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, pDimensions );
<a name="l00201"></a>00201 
<a name="l00202"></a>00202             <a class="code" href="PopUpBox_8cpp.html#f763b79dcfc4d5a36c25b12d45335d25">ShowBox</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a> );
<a name="l00203"></a>00203 
<a name="l00204"></a>00204             <span class="comment">// now position box</span>
<a name="l00205"></a>00205             <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#de3c17d3b745e232dad6be8784830482">MinWidthOfTownMineInfoBox</a>( );
<a name="l00206"></a>00206             <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#a98bdfba3b56a920320edcfa6f3e949a">PositionTownMineInfoBox</a>( );
<a name="l00207"></a>00207 
<a name="l00208"></a>00208             <span class="comment">// now add the button</span>
<a name="l00209"></a>00209             <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e29ae8f1268caa7043020884ec4d2145">AddInventoryButtonForMapPopUpBox</a>( );
<a name="l00210"></a>00210 
<a name="l00211"></a>00211             <span class="comment">// now position box</span>
<a name="l00212"></a>00212             <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#a98bdfba3b56a920320edcfa6f3e949a">PositionTownMineInfoBox</a>( );
<a name="l00213"></a>00213 
<a name="l00214"></a>00214             fCreated = TRUE;
<a name="l00215"></a>00215       }
<a name="l00216"></a>00216       <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( fCreated == TRUE ) &amp;&amp; ( <a class="code" href="Assignments_8cpp.html#199f71b31d6be32a5bb716c33ece4396">fShowTownInfo</a> == FALSE ) )
<a name="l00217"></a>00217       {
<a name="l00218"></a>00218 
<a name="l00219"></a>00219             <span class="comment">// get box size</span>
<a name="l00220"></a>00220             <a class="code" href="PopUpBox_8cpp.html#672b85cdbfdc5424b94152b87814728a">GetBoxSize</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, &amp;pDimensions );
<a name="l00221"></a>00221 
<a name="l00222"></a>00222             <span class="comment">// get position</span>
<a name="l00223"></a>00223             <a class="code" href="PopUpBox_8cpp.html#ddc91043fa299ba2bbf66faaa9340247">GetBoxPosition</a>( ghTownMineBox, &amp;pPosition);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225             <span class="comment">// destroy pop up box</span>
<a name="l00226"></a>00226             <a class="code" href="PopUpBox_8cpp.html#7d4111e88ba106f3a47fd37d03c7c657">RemoveBox</a>( ghTownMineBox );
<a name="l00227"></a>00227             ghTownMineBox = -1;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229             <span class="comment">// remove inventory button</span>
<a name="l00230"></a>00230             <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#991b06dbe08e14b2e60dc5f5b089f5d4">RemoveInventoryButtonForMapPopUpBox</a>( );
<a name="l00231"></a>00231 
<a name="l00232"></a>00232             <span class="comment">// restore background</span>
<a name="l00233"></a>00233             <a class="code" href="Render_01Dirty_8cpp.html#ce65fac8b540eee1a5bf4902d2dcb0c5">RestoreExternBackgroundRect</a>( ( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> )pPosition.<a class="code" href="structSGPPoint.html#544942cdf34b38a75c6b1e16cc74df92">iX</a>, ( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> )pPosition.<a class="code" href="structSGPPoint.html#9517aacfe3059f66c6b90074d3bf0623">iY</a>, ( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> ) ( pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> - pDimensions.<a class="code" href="structSGPRect.html#ff8e2060cadeb6fe24800e83e9eb7041">iLeft</a> ), ( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> ) ( pDimensions.<a class="code" href="structSGPRect.html#3da8351ad1e68d9f710a57d7a7d8cb21">iBottom</a> - pDimensions.<a class="code" href="structSGPRect.html#d4c794d3a2deda1031b2bd5fa500dea7">iTop</a> + 3 ) );
<a name="l00234"></a>00234 
<a name="l00235"></a>00235             fCreated = FALSE;
<a name="l00236"></a>00236       }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238       
<a name="l00239"></a>00239       <span class="keywordflow">return</span>;
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 
<a name="l00243"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#b291bcb5b80c8ec73f9387cfd3b4200c">00243</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#b291bcb5b80c8ec73f9387cfd3b4200c">CreateTownInfoBox</a>( <span class="keywordtype">void</span> )
<a name="l00244"></a>00244 {
<a name="l00245"></a>00245       <span class="comment">// create basic box</span>
<a name="l00246"></a>00246  <a class="code" href="PopUpBox_8cpp.html#093a16a6129bdcb2660dac5e48b8a80f">CreatePopUpBox</a>(&amp;<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#ff7f39f9866433d29bc87df3ebddf577">TownMineDimensions</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#9a8387b726a0dd70f48209b130a4fb38">TownMinePosition</a>, (POPUP_BOX_FLAG_CLIP_TEXT ));
<a name="l00247"></a>00247  
<a name="l00248"></a>00248  <span class="comment">// which buffer will box render to</span>
<a name="l00249"></a>00249  <a class="code" href="PopUpBox_8cpp.html#58dbb875828ef0d043a9ef17bc66fdf1">SetBoxBuffer</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, FRAME_BUFFER);
<a name="l00250"></a>00250 
<a name="l00251"></a>00251  <span class="comment">// border type?</span>
<a name="l00252"></a>00252  <a class="code" href="PopUpBox_8cpp.html#364b50a714b62e6f7584b5cb2a69261f">SetBorderType</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, <a class="code" href="Map_01Screen_01Interface_8cpp.html#8b8bd8131d058eebf842431fdb4de700">guiPOPUPBORDERS</a>);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254  <span class="comment">// background texture</span>
<a name="l00255"></a>00255  <a class="code" href="PopUpBox_8cpp.html#a37b19de7ac95bf0686472bd648e04c2">SetBackGroundSurface</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, <a class="code" href="Map_01Screen_01Interface_8cpp.html#667bcdcaa8d3bd80c9083926fa92105c">guiPOPUPTEX</a>);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257  <span class="comment">// margin sizes</span>
<a name="l00258"></a>00258  <a class="code" href="PopUpBox_8cpp.html#5d045cd0d06ac540595d12c1a90badf0">SetMargins</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, 6,6,8,6);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260  <span class="comment">// space between lines</span>
<a name="l00261"></a>00261  <a class="code" href="PopUpBox_8cpp.html#635d9bbb3f227dbe180b2f64eb60b25c">SetLineSpace</a>(<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, 2);
<a name="l00262"></a>00262 
<a name="l00263"></a>00263  <span class="comment">// set current box to this one</span>
<a name="l00264"></a>00264  <a class="code" href="PopUpBox_8cpp.html#7e38ff7bdb83f47ac6af46c43f99e27b">SetCurrentBox</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a> );
<a name="l00265"></a>00265 
<a name="l00266"></a>00266  <span class="keywordflow">return</span>;
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 <span class="comment">// adds text to town info box</span>
<a name="l00271"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4d1bf25244585c9f7ba5ed8dcb64d205">00271</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4d1bf25244585c9f7ba5ed8dcb64d205">AddTextToTownBox</a>( <span class="keywordtype">void</span> )
<a name="l00272"></a>00272 {
<a name="l00273"></a>00273       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> hStringHandle = 0;
<a name="l00274"></a>00274       <a class="code" href="Types_8h.html#fcdf88c1d4179fcd6d8a1fa9bbcb8a80">CHAR16</a> wString[ 64 ];
<a name="l00275"></a>00275       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubTownId = 0;
<a name="l00276"></a>00276       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usTownSectorIndex;
<a name="l00277"></a>00277       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sMineSector = 0;
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 
<a name="l00280"></a>00280       <span class="comment">// remember town id</span>
<a name="l00281"></a>00281       ubTownId = <a class="code" href="strategicmap_8cpp.html#99dffd29ea4571bc0c833d45636f1403">GetTownIdForSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> );
<a name="l00282"></a>00282       Assert((ubTownId &gt;= FIRST_TOWN) &amp;&amp; (ubTownId &lt; <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe1051ba4a34e4cff74188ff8c80499572a88">NUM_TOWNS</a>));
<a name="l00283"></a>00283 
<a name="l00284"></a>00284       usTownSectorIndex = SECTOR( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> );
<a name="l00285"></a>00285 
<a name="l00286"></a>00286       <span class="keywordflow">switch</span>( usTownSectorIndex )
<a name="l00287"></a>00287       {
<a name="l00288"></a>00288             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c66026436d911e0461303edb9fe227735f787c22">SEC_B13</a>:
<a name="l00289"></a>00289                   <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc2f9efeb2164c188b2626180b625699310">DRASSEN_AIRPORT_SITE</a> ] );
<a name="l00290"></a>00290                   <span class="keywordflow">break</span>;
<a name="l00291"></a>00291             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c6602643e0a7185e05270b8ffacff9816031ae8e">SEC_F8</a>:
<a name="l00292"></a>00292                   <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc27e7ea400d1b8c3fca7344d2af286bf2a">CAMBRIA_HOSPITAL_SITE</a> ] );
<a name="l00293"></a>00293                   <span class="keywordflow">break</span>;
<a name="l00294"></a>00294             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c6602643104ad166b8bc92969059dd62d784db11">SEC_J9</a>: <span class="comment">//Tixa</span>
<a name="l00295"></a>00295                   <span class="keywordflow">if</span>( !<a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#e5d32ba931394430e60f65852d4e36e6">fFoundTixa</a> )
<a name="l00296"></a>00296                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc2a4b82daa92a2c6388ae0dedd6e48b331">SAND</a> ] );
<a name="l00297"></a>00297                   <span class="keywordflow">else</span>
<a name="l00298"></a>00298                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#68933d9bb7d357af6609236e47fca927">pTownNames</a>[ <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe10560f8283526f5d52c03edfd9bff8b218a">TIXA</a> ] );
<a name="l00299"></a>00299                   <span class="keywordflow">break</span>;
<a name="l00300"></a>00300             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c660264373369bc7daa7c19d5ebbfa29cf5aff8e">SEC_K4</a>: <span class="comment">//Orta</span>
<a name="l00301"></a>00301                   <span class="keywordflow">if</span>( !<a class="code" href="strategicmap_8cpp.html#20549a2f36fdcba9495803c110584b47">fFoundOrta</a> )
<a name="l00302"></a>00302                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc2cef5ef4b4ebb4c87351903a531d4f4f1">SWAMP</a> ] );
<a name="l00303"></a>00303                   <span class="keywordflow">else</span>
<a name="l00304"></a>00304                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#68933d9bb7d357af6609236e47fca927">pTownNames</a>[ <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe1051ae6da30d1617c09899e280a04bde521">ORTA</a> ] );
<a name="l00305"></a>00305                   <span class="keywordflow">break</span>;
<a name="l00306"></a>00306             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c6602643a36f934059c25f9a7548ad011f65ec3b">SEC_N3</a>:
<a name="l00307"></a>00307                   <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc2d7fab107da60f0a7f70a49e19242899d">MEDUNA_AIRPORT_SITE</a> ] );
<a name="l00308"></a>00308                   <span class="keywordflow">break</span>;
<a name="l00309"></a>00309             <span class="keywordflow">default</span>:
<a name="l00310"></a>00310                   <span class="keywordflow">if</span>( usTownSectorIndex == <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c6602643a1f02b8d49f15ade9e5c53145d967651">SEC_N4</a> &amp;&amp; <a class="code" href="strategicmap_8cpp.html#4bd9ad7468be30de044b81f9fee6172f">fSamSiteFound</a>[ <a class="code" href="Map_01Screen_01Helicopter_8h.html#a2baea0e4a061cf7eda1c9589fd7c4fec9b7c0b88ea114dba015456176a22378">SAM_SITE_FOUR</a> ] )
<a name="l00311"></a>00311                   {     <span class="comment">//Meduna's SAM site</span>
<a name="l00312"></a>00312                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc28ce8df2b8e23b6ed206b47748741fbbb">MEDUNA_SAM_SITE</a> ] );
<a name="l00313"></a>00313                   }
<a name="l00314"></a>00314                   <span class="keywordflow">else</span>
<a name="l00315"></a>00315                   { <span class="comment">// town name</span>
<a name="l00316"></a>00316                         swprintf( wString, L<span class="stringliteral">"%s"</span>, <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#68933d9bb7d357af6609236e47fca927">pTownNames</a>[ ubTownId ] );
<a name="l00317"></a>00317                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00318"></a>00318                   }
<a name="l00319"></a>00319                   <span class="keywordflow">break</span>;
<a name="l00320"></a>00320       }
<a name="l00321"></a>00321       <span class="comment">// blank line</span>
<a name="l00322"></a>00322       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, L<span class="stringliteral">""</span> );
<a name="l00323"></a>00323 
<a name="l00324"></a>00324       <span class="comment">// sector</span>
<a name="l00325"></a>00325       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#42e78ef6390bdfc999422e58ca54ef3b">AddSectorToBox</a>();
<a name="l00326"></a>00326 
<a name="l00327"></a>00327       <span class="comment">// town size</span>
<a name="l00328"></a>00328       swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#142ec6a905fde7af35bfed514478bc13">pwTownInfoStrings</a>[ 0 ] );
<a name="l00329"></a>00329       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00330"></a>00330       swprintf( wString, L<span class="stringliteral">"%d"</span>,  <a class="code" href="strategicmap_8cpp.html#e08294f0e64d981fd2b47ceaec37a1c7">GetTownSectorSize</a>( ubTownId ) );
<a name="l00331"></a>00331       <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00332"></a>00332 
<a name="l00333"></a>00333       <span class="comment">// main facilities</span>
<a name="l00334"></a>00334       swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#142ec6a905fde7af35bfed514478bc13">pwTownInfoStrings</a>[ 8 ] );
<a name="l00335"></a>00335       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00336"></a>00336       <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>(wString, L<span class="stringliteral">""</span>);
<a name="l00337"></a>00337       <a class="code" href="Player_01Command_8cpp.html#93e89a31f2e38d68b8c8a4482c3afe8b">GetSectorFacilitiesFlags</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, wString );
<a name="l00338"></a>00338       <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00339"></a>00339 
<a name="l00340"></a>00340       <span class="comment">// the concept of control is only meaningful in sectors where militia can be trained</span>
<a name="l00341"></a>00341       <span class="keywordflow">if</span> ( <a class="code" href="Town_01Militia_8cpp.html#e674aa192c58edfe28bc9ae3eb37dedf">MilitiaTrainingAllowedInSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, 0 ) )
<a name="l00342"></a>00342       {
<a name="l00343"></a>00343             <span class="comment">// town control</span>
<a name="l00344"></a>00344             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#142ec6a905fde7af35bfed514478bc13">pwTownInfoStrings</a>[ 2 ] );
<a name="l00345"></a>00345             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00346"></a>00346             swprintf( wString, L<span class="stringliteral">"%d%%%%"</span>,  (<a class="code" href="strategicmap_8cpp.html#1fab6a2009a1cd32ebff3e51921d830e">GetTownSectorsUnderControl</a>( ubTownId ) * 100) / <a class="code" href="strategicmap_8cpp.html#e08294f0e64d981fd2b47ceaec37a1c7">GetTownSectorSize</a>( ubTownId ));
<a name="l00347"></a>00347             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00348"></a>00348       }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350       <span class="comment">// the concept of town loyalty is only meaningful in towns where loyalty is tracked</span>
<a name="l00351"></a>00351       <span class="keywordflow">if</span>( <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#53aef3e8e8681f01397608fbb9dcf56e">gTownLoyalty</a>[ ubTownId ].fStarted &amp;&amp; <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#9b06c65f6833d5d0ed217d0c959d80dd">gfTownUsesLoyalty</a>[ ubTownId ])
<a name="l00352"></a>00352       {
<a name="l00353"></a>00353             <span class="comment">// town loyalty</span>
<a name="l00354"></a>00354             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#142ec6a905fde7af35bfed514478bc13">pwTownInfoStrings</a>[ 5 ] );
<a name="l00355"></a>00355             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00356"></a>00356             swprintf( wString, L<span class="stringliteral">"%d%%%%"</span>, <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#53aef3e8e8681f01397608fbb9dcf56e">gTownLoyalty</a>[ ubTownId ].ubRating );
<a name="l00357"></a>00357             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00358"></a>00358       }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360       <span class="comment">// if the town has a mine</span>
<a name="l00361"></a>00361       sMineSector = <a class="code" href="Strategic_01Mines_8cpp.html#705797abfce6cf53edda39de4e531a71">GetMineSectorForTown</a>( ubTownId );
<a name="l00362"></a>00362       <span class="keywordflow">if</span>( sMineSector != -1 )
<a name="l00363"></a>00363       {
<a name="l00364"></a>00364             <span class="comment">// Associated Mine: Sector</span>
<a name="l00365"></a>00365         swprintf( wString, L<span class="stringliteral">"%s:"</span>,  <a class="code" href="__DutchText_8cpp.html#142ec6a905fde7af35bfed514478bc13">pwTownInfoStrings</a>[ 4 ] );
<a name="l00366"></a>00366             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00367"></a>00367         <a class="code" href="strategicmap_8cpp.html#8b80a7fbb7d36b5ac32f928b8a0c7085">GetShortSectorString</a>( ( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> )( sMineSector % MAP_WORLD_X ), ( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> )( sMineSector / MAP_WORLD_X ), wString );
<a name="l00368"></a>00368             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00369"></a>00369       }
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 
<a name="l00373"></a>00373 <span class="comment">// adds text to mine info box</span>
<a name="l00374"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6a5b81ba88c15de0b34cbb8683aa2af8">00374</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6a5b81ba88c15de0b34cbb8683aa2af8">AddTextToMineBox</a>( <span class="keywordtype">void</span> )
<a name="l00375"></a>00375 {
<a name="l00376"></a>00376       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubMineIndex;
<a name="l00377"></a>00377       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubTown;
<a name="l00378"></a>00378       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> hStringHandle;
<a name="l00379"></a>00379       <a class="code" href="Types_8h.html#fcdf88c1d4179fcd6d8a1fa9bbcb8a80">CHAR16</a> wString[ 64 ];
<a name="l00380"></a>00380 
<a name="l00381"></a>00381 
<a name="l00382"></a>00382       ubMineIndex = <a class="code" href="Strategic_01Mines_8cpp.html#651c7549289f1e8757d06f344c2af6bd">GetMineIndexForSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> );
<a name="l00383"></a>00383 
<a name="l00384"></a>00384       <span class="comment">// name of town followed by "mine"</span>
<a name="l00385"></a>00385       swprintf( wString, L<span class="stringliteral">"%s %s"</span>, <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#68933d9bb7d357af6609236e47fca927">pTownNames</a>[ <a class="code" href="Strategic_01Mines_8cpp.html#bd0d7d907c1c3b9f152a455c92e7ebfe">GetTownAssociatedWithMine</a>( ubMineIndex ) ], <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 0 ] );
<a name="l00386"></a>00386       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00387"></a>00387 
<a name="l00388"></a>00388       <span class="comment">// blank line</span>
<a name="l00389"></a>00389       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, L<span class="stringliteral">""</span> );
<a name="l00390"></a>00390 
<a name="l00391"></a>00391 
<a name="l00392"></a>00392       <span class="comment">// sector</span>
<a name="l00393"></a>00393       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#42e78ef6390bdfc999422e58ca54ef3b">AddSectorToBox</a>();
<a name="l00394"></a>00394 
<a name="l00395"></a>00395       <span class="comment">// mine status</span>
<a name="l00396"></a>00396       swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 9 ]);
<a name="l00397"></a>00397       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00398"></a>00398 
<a name="l00399"></a>00399       <span class="comment">// check if mine is empty (abandoned) or running out</span>
<a name="l00400"></a>00400       <span class="keywordflow">if</span> (<a class="code" href="Creature_01Spreading_8cpp.html#9380f2e39f34095d76ba1abab44dab29">gMineStatus</a>[ ubMineIndex ].fEmpty)
<a name="l00401"></a>00401       {
<a name="l00402"></a>00402             <span class="comment">// abandonded</span>
<a name="l00403"></a>00403             <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>( wString, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 5 ] );
<a name="l00404"></a>00404       }
<a name="l00405"></a>00405       <span class="keywordflow">else</span>
<a name="l00406"></a>00406       <span class="keywordflow">if</span> (<a class="code" href="Creature_01Spreading_8cpp.html#9380f2e39f34095d76ba1abab44dab29">gMineStatus</a>[ ubMineIndex ].fShutDown)
<a name="l00407"></a>00407       {
<a name="l00408"></a>00408             <span class="comment">// shut down</span>
<a name="l00409"></a>00409             <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>( wString, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 6 ] );
<a name="l00410"></a>00410       }
<a name="l00411"></a>00411       <span class="keywordflow">else</span>
<a name="l00412"></a>00412       <span class="keywordflow">if</span> (<a class="code" href="Creature_01Spreading_8cpp.html#9380f2e39f34095d76ba1abab44dab29">gMineStatus</a>[ ubMineIndex ].fRunningOut)
<a name="l00413"></a>00413       {
<a name="l00414"></a>00414             <span class="comment">// running out</span>
<a name="l00415"></a>00415             <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>( wString, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 7 ] );
<a name="l00416"></a>00416       }
<a name="l00417"></a>00417       <span class="keywordflow">else</span>
<a name="l00418"></a>00418       {
<a name="l00419"></a>00419             <span class="comment">// producing</span>
<a name="l00420"></a>00420             <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>( wString, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 8 ] );
<a name="l00421"></a>00421       }
<a name="l00422"></a>00422       <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00423"></a>00423 
<a name="l00424"></a>00424 
<a name="l00425"></a>00425       <span class="comment">// if still producing</span>
<a name="l00426"></a>00426       <span class="keywordflow">if</span> (!<a class="code" href="Creature_01Spreading_8cpp.html#9380f2e39f34095d76ba1abab44dab29">gMineStatus</a>[ ubMineIndex ].fEmpty)
<a name="l00427"></a>00427       {
<a name="l00428"></a>00428             <span class="comment">// current production</span>
<a name="l00429"></a>00429             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 3 ]);
<a name="l00430"></a>00430             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00431"></a>00431 
<a name="l00432"></a>00432             swprintf( wString, L<span class="stringliteral">"%d"</span>, <a class="code" href="Strategic_01Mines_8cpp.html#eb39d37d61196260412fdb48b91159d3">PredictDailyIncomeFromAMine</a>( ubMineIndex ) );
<a name="l00433"></a>00433             <a class="code" href="finances_8cpp.html#b739f2f0c39ec08da8b1455e51cfc28a">InsertCommasForDollarFigure</a>( wString );
<a name="l00434"></a>00434             <a class="code" href="finances_8cpp.html#64669392045ef4ca942162caf2ee4464">InsertDollarSignInToString</a>( wString );
<a name="l00435"></a>00435             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 
<a name="l00438"></a>00438             <span class="comment">// potential production</span>
<a name="l00439"></a>00439             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 4 ]);
<a name="l00440"></a>00440             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00441"></a>00441 
<a name="l00442"></a>00442             swprintf( wString, L<span class="stringliteral">"%d"</span>, <a class="code" href="Strategic_01Mines_8cpp.html#ecd262ba34aaae61562c412037da6637">GetMaxDailyRemovalFromMine</a>( ubMineIndex ) );
<a name="l00443"></a>00443             <a class="code" href="finances_8cpp.html#b739f2f0c39ec08da8b1455e51cfc28a">InsertCommasForDollarFigure</a>( wString );
<a name="l00444"></a>00444             <a class="code" href="finances_8cpp.html#64669392045ef4ca942162caf2ee4464">InsertDollarSignInToString</a>( wString );
<a name="l00445"></a>00445             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 
<a name="l00448"></a>00448             <span class="comment">// if potential is not nil</span>
<a name="l00449"></a>00449             <span class="keywordflow">if</span> (<a class="code" href="Strategic_01Mines_8cpp.html#2c926993f981184d32a724ae512c6716">GetMaxPeriodicRemovalFromMine</a>(ubMineIndex) &gt; 0)
<a name="l00450"></a>00450             {
<a name="l00451"></a>00451                   <span class="comment">// production rate (current production as a percentage of potential production)</span>
<a name="l00452"></a>00452                   swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 10 ]);
<a name="l00453"></a>00453                   <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00454"></a>00454                   swprintf( wString, L<span class="stringliteral">"%d%%%%"</span>, (<a class="code" href="Strategic_01Mines_8cpp.html#eb39d37d61196260412fdb48b91159d3">PredictDailyIncomeFromAMine</a>(ubMineIndex) * 100 ) / <a class="code" href="Strategic_01Mines_8cpp.html#ecd262ba34aaae61562c412037da6637">GetMaxDailyRemovalFromMine</a>(ubMineIndex) );
<a name="l00455"></a>00455                   <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00456"></a>00456             }
<a name="l00457"></a>00457 
<a name="l00458"></a>00458 
<a name="l00459"></a>00459             <span class="comment">// town control percentage</span>
<a name="l00460"></a>00460             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 12 ]);
<a name="l00461"></a>00461             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00462"></a>00462             swprintf( wString, L<span class="stringliteral">"%d%%%%"</span>, (<a class="code" href="strategicmap_8cpp.html#1fab6a2009a1cd32ebff3e51921d830e">GetTownSectorsUnderControl</a>( <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#2889e0746115b88002494be407bc5de4">gMineLocation</a>[ ubMineIndex ].bAssociatedTown ) *  100) / <a class="code" href="strategicmap_8cpp.html#e08294f0e64d981fd2b47ceaec37a1c7">GetTownSectorSize</a>( <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#2889e0746115b88002494be407bc5de4">gMineLocation</a>[ ubMineIndex ].bAssociatedTown ));
<a name="l00463"></a>00463             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00464"></a>00464 
<a name="l00465"></a>00465             ubTown = <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#2889e0746115b88002494be407bc5de4">gMineLocation</a>[ ubMineIndex ].<a class="code" href="structMINE__LOCATION__TYPE.html#87943d31196d6c155135ddba9ce7bf32">bAssociatedTown</a>;
<a name="l00466"></a>00466             <span class="keywordflow">if</span>( <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#53aef3e8e8681f01397608fbb9dcf56e">gTownLoyalty</a>[ ubTown ].fStarted &amp;&amp; <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#9b06c65f6833d5d0ed217d0c959d80dd">gfTownUsesLoyalty</a>[ ubTown ])
<a name="l00467"></a>00467             {
<a name="l00468"></a>00468                   <span class="comment">// town loyalty percentage</span>
<a name="l00469"></a>00469                   swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 13 ]);
<a name="l00470"></a>00470                   <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00471"></a>00471                   swprintf( wString, L<span class="stringliteral">"%d%%%%"</span>, <a class="code" href="Strategic_01Town_01Loyalty_8cpp.html#53aef3e8e8681f01397608fbb9dcf56e">gTownLoyalty</a>[ <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#2889e0746115b88002494be407bc5de4">gMineLocation</a>[ ubMineIndex ].bAssociatedTown ].ubRating);
<a name="l00472"></a>00472                   <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00473"></a>00473             }
<a name="l00474"></a>00474 
<a name="l00475"></a>00475 <span class="comment">/* gradual monster infestation concept was ditched, now simply IN PRODUCTION or SHUT DOWN</span>
<a name="l00476"></a>00476 <span class="comment">            // percentage of miners working</span>
<a name="l00477"></a>00477 <span class="comment">            swprintf( wString, L"%s:", pwMineStrings[ 14 ]);</span>
<a name="l00478"></a>00478 <span class="comment">            AddMonoString( &amp;hStringHandle, wString );</span>
<a name="l00479"></a>00479 <span class="comment">            swprintf( wString, L"%d%%%%", gubMonsterMineInfestation[ gMineStatus[ ubMineIndex ].bMonsters ]);</span>
<a name="l00480"></a>00480 <span class="comment">            AddSecondColumnMonoString( &amp;hStringHandle, wString );</span>
<a name="l00481"></a>00481 <span class="comment">*/</span>
<a name="l00482"></a>00482 
<a name="l00483"></a>00483             <span class="comment">// ore type (silver/gold</span>
<a name="l00484"></a>00484             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 11 ]);
<a name="l00485"></a>00485             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00486"></a>00486             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, (<a class="code" href="Creature_01Spreading_8cpp.html#9380f2e39f34095d76ba1abab44dab29">gMineStatus</a>[ubMineIndex].ubMineType == <a class="code" href="Strategic_01Mines_8h.html#8f2dfec7e99562dbe5d785467bb71bbbcd944490334ce2fe3b8c734094e32274">SILVER_MINE</a>) ? <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 1 ] : <a class="code" href="__DutchText_8cpp.html#2d6fa826eeb4286552d59ccb751eaa15">pwMineStrings</a>[ 2 ] );
<a name="l00487"></a>00487       }
<a name="l00488"></a>00488 
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00491"></a>00491 <span class="preprocessor"></span>      <span class="comment">// dollar amount remaining in mine</span>
<a name="l00492"></a>00492       <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>( wString, L<span class="stringliteral">"Remaining (DEBUG):"</span>);
<a name="l00493"></a>00493       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00494"></a>00494 
<a name="l00495"></a>00495       swprintf( wString, L<span class="stringliteral">"%d"</span>, <a class="code" href="Strategic_01Mines_8cpp.html#6892dc6566016392353a50aeb5789e25">GetTotalLeftInMine</a>( ubMineIndex ) );
<a name="l00496"></a>00496       <a class="code" href="finances_8cpp.html#b739f2f0c39ec08da8b1455e51cfc28a">InsertCommasForDollarFigure</a>( wString );
<a name="l00497"></a>00497       <a class="code" href="finances_8cpp.html#64669392045ef4ca942162caf2ee4464">InsertDollarSignInToString</a>( wString );
<a name="l00498"></a>00498       <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00499"></a>00499 <span class="preprocessor">#endif</span>
<a name="l00500"></a>00500 <span class="preprocessor"></span>
<a name="l00501"></a>00501 }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 
<a name="l00504"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#83ddfa8d78b37c69faf6b9dcde146a76">00504</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#83ddfa8d78b37c69faf6b9dcde146a76">AddTextToBlankSectorBox</a>( <span class="keywordtype">void</span> )
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> hStringHandle;
<a name="l00507"></a>00507       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usSectorValue = 0;
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 
<a name="l00510"></a>00510       <span class="comment">// get the sector value</span>
<a name="l00511"></a>00511       usSectorValue = SECTOR( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> );
<a name="l00512"></a>00512 
<a name="l00513"></a>00513       <span class="keywordflow">switch</span>( usSectorValue )
<a name="l00514"></a>00514       {
<a name="l00515"></a>00515             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c66026434ecb02d9115f4d616bfb077c756523a9">SEC_D2</a>: <span class="comment">//Chitzena SAM</span>
<a name="l00516"></a>00516                   <span class="keywordflow">if</span>( !<a class="code" href="strategicmap_8cpp.html#4bd9ad7468be30de044b81f9fee6172f">fSamSiteFound</a>[ <a class="code" href="Map_01Screen_01Helicopter_8h.html#a2baea0e4a061cf7eda1c9589fd7c4feb12457b3e347a7cd6b2e31b2240b2417">SAM_SITE_ONE</a> ] )
<a name="l00517"></a>00517                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc25dbb4befe729461eb38325ad5ae62e0e">TROPICS</a> ] );
<a name="l00518"></a>00518                   <span class="keywordflow">else</span>
<a name="l00519"></a>00519                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc226232782dfc28ab6c06aa4aa0159cd52">TROPICS_SAM_SITE</a> ] );
<a name="l00520"></a>00520                   <span class="keywordflow">break</span>;
<a name="l00521"></a>00521             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c6602643a6b93766e638fc1877d78e6209cfb7dc">SEC_D15</a>: <span class="comment">//Drassen SAM</span>
<a name="l00522"></a>00522                   <span class="keywordflow">if</span>( !<a class="code" href="strategicmap_8cpp.html#4bd9ad7468be30de044b81f9fee6172f">fSamSiteFound</a>[ <a class="code" href="Map_01Screen_01Helicopter_8h.html#a2baea0e4a061cf7eda1c9589fd7c4fecf475e986cdf1f7942aaae1028b3054c">SAM_SITE_TWO</a> ] )
<a name="l00523"></a>00523                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc22b6758a3fe10dd98bd594ddf6f341a4d">SPARSE</a> ] );
<a name="l00524"></a>00524                   <span class="keywordflow">else</span>
<a name="l00525"></a>00525                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc268aac00d03d455fa0717b20688444020">SPARSE_SAM_SITE</a> ] );
<a name="l00526"></a>00526                   <span class="keywordflow">break</span>;
<a name="l00527"></a>00527             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c660264303e0da7939fba7e3ffd739064bee4abd">SEC_I8</a>: <span class="comment">//Cambria SAM</span>
<a name="l00528"></a>00528                   <span class="keywordflow">if</span>( !<a class="code" href="strategicmap_8cpp.html#4bd9ad7468be30de044b81f9fee6172f">fSamSiteFound</a>[ <a class="code" href="Map_01Screen_01Helicopter_8h.html#a2baea0e4a061cf7eda1c9589fd7c4fe19b95fb5b66be2899c95eaf371b739e1">SAM_SITE_THREE</a> ] )
<a name="l00529"></a>00529                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc2a4b82daa92a2c6388ae0dedd6e48b331">SAND</a> ] );
<a name="l00530"></a>00530                   <span class="keywordflow">else</span>
<a name="l00531"></a>00531                         <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ <a class="code" href="Campaign_01Types_8h.html#65a8130020b0f5722cda500f2e67acc21c670a66f69c3feb7e9e631b2351738b">SAND_SAM_SITE</a> ] );
<a name="l00532"></a>00532                   <span class="keywordflow">break</span>;
<a name="l00533"></a>00533             <span class="comment">// SAM Site 4 in Meduna is within town limits, so it's handled in AddTextToTownBox()</span>
<a name="l00534"></a>00534 
<a name="l00535"></a>00535             <span class="keywordflow">default</span>:
<a name="l00536"></a>00536                   <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, <a class="code" href="__DutchText_8cpp.html#3946dc4c36ce2ef2314801447e3437c9">pLandTypeStrings</a>[ ( <a class="code" href="Campaign_01Types_8h.html#d83c6f699f17a47cf6a662c91d959126">SectorInfo</a>[ usSectorValue ].ubTraversability[ 4 ] ) ] );
<a name="l00537"></a>00537                   <span class="keywordflow">break</span>;
<a name="l00538"></a>00538       }
<a name="l00539"></a>00539 
<a name="l00540"></a>00540       <span class="comment">// blank line</span>
<a name="l00541"></a>00541       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, L<span class="stringliteral">""</span> );
<a name="l00542"></a>00542 
<a name="l00543"></a>00543       <span class="comment">// sector</span>
<a name="l00544"></a>00544       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#42e78ef6390bdfc999422e58ca54ef3b">AddSectorToBox</a>();
<a name="l00545"></a>00545 }
<a name="l00546"></a>00546 
<a name="l00547"></a>00547 
<a name="l00548"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#42e78ef6390bdfc999422e58ca54ef3b">00548</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#42e78ef6390bdfc999422e58ca54ef3b">AddSectorToBox</a>(<span class="keywordtype">void</span>)
<a name="l00549"></a>00549 {
<a name="l00550"></a>00550       <a class="code" href="Types_8h.html#fcdf88c1d4179fcd6d8a1fa9bbcb8a80">CHAR16</a> wString[ 64 ];
<a name="l00551"></a>00551       <a class="code" href="Types_8h.html#fcdf88c1d4179fcd6d8a1fa9bbcb8a80">CHAR16</a> wString2[ 10 ];
<a name="l00552"></a>00552       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> hStringHandle = 0;
<a name="l00553"></a>00553 
<a name="l00554"></a>00554       <span class="comment">// sector</span>
<a name="l00555"></a>00555       swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#c409782a695a2f4dbc772872d38f6ea0">pwMiscSectorStrings</a>[ 1 ]);
<a name="l00556"></a>00556       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00557"></a>00557 
<a name="l00558"></a>00558       <a class="code" href="strategicmap_8cpp.html#8b80a7fbb7d36b5ac32f928b8a0c7085">GetShortSectorString</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, wString );
<a name="l00559"></a>00559       <span class="keywordflow">if</span> (<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#414e5c7ed81e53640148703081de1766">bCurrentTownMineSectorZ</a> != 0 )
<a name="l00560"></a>00560       {
<a name="l00561"></a>00561             swprintf( wString2, L<span class="stringliteral">"-%d"</span>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#414e5c7ed81e53640148703081de1766">bCurrentTownMineSectorZ</a> );
<a name="l00562"></a>00562             <a class="code" href="Sys_01Globals_8h.html#92a23b0a8bea9679b6f78aa26b1715e7">wcscat</a>( wString, wString2 );
<a name="l00563"></a>00563       }
<a name="l00564"></a>00564 
<a name="l00565"></a>00565       <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00566"></a>00566 }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568 
<a name="l00569"></a>00569 
<a name="l00570"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#760b0face895630fed1052532335b39c">00570</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#760b0face895630fed1052532335b39c">AddCommonInfoToBox</a>(<span class="keywordtype">void</span>)
<a name="l00571"></a>00571 {
<a name="l00572"></a>00572       <a class="code" href="Types_8h.html#fcdf88c1d4179fcd6d8a1fa9bbcb8a80">CHAR16</a> wString[ 64 ];
<a name="l00573"></a>00573       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> hStringHandle = 0;
<a name="l00574"></a>00574       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fUnknownSAMSite = FALSE;
<a name="l00575"></a>00575       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubMilitiaTotal = 0;
<a name="l00576"></a>00576       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubNumEnemies;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578 
<a name="l00579"></a>00579       <span class="keywordflow">switch</span>( SECTOR( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> ) )
<a name="l00580"></a>00580       {
<a name="l00581"></a>00581             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c66026434ecb02d9115f4d616bfb077c756523a9">SEC_D2</a>: <span class="comment">//Chitzena SAM</span>
<a name="l00582"></a>00582                   <span class="keywordflow">if</span>( !<a class="code" href="strategicmap_8cpp.html#4bd9ad7468be30de044b81f9fee6172f">fSamSiteFound</a>[ <a class="code" href="Map_01Screen_01Helicopter_8h.html#a2baea0e4a061cf7eda1c9589fd7c4feb12457b3e347a7cd6b2e31b2240b2417">SAM_SITE_ONE</a> ] )
<a name="l00583"></a>00583                         fUnknownSAMSite = TRUE;
<a name="l00584"></a>00584                   <span class="keywordflow">break</span>;
<a name="l00585"></a>00585             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c6602643a6b93766e638fc1877d78e6209cfb7dc">SEC_D15</a>: <span class="comment">//Drassen SAM</span>
<a name="l00586"></a>00586                   <span class="keywordflow">if</span>( !<a class="code" href="strategicmap_8cpp.html#4bd9ad7468be30de044b81f9fee6172f">fSamSiteFound</a>[ <a class="code" href="Map_01Screen_01Helicopter_8h.html#a2baea0e4a061cf7eda1c9589fd7c4fecf475e986cdf1f7942aaae1028b3054c">SAM_SITE_TWO</a> ] )
<a name="l00587"></a>00587                         fUnknownSAMSite = TRUE;
<a name="l00588"></a>00588                   <span class="keywordflow">break</span>;
<a name="l00589"></a>00589             <span class="keywordflow">case</span> <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c660264303e0da7939fba7e3ffd739064bee4abd">SEC_I8</a>: <span class="comment">//Cambria SAM</span>
<a name="l00590"></a>00590                   <span class="keywordflow">if</span>( !<a class="code" href="strategicmap_8cpp.html#4bd9ad7468be30de044b81f9fee6172f">fSamSiteFound</a>[ <a class="code" href="Map_01Screen_01Helicopter_8h.html#a2baea0e4a061cf7eda1c9589fd7c4fe19b95fb5b66be2899c95eaf371b739e1">SAM_SITE_THREE</a> ] )
<a name="l00591"></a>00591                         fUnknownSAMSite = TRUE;
<a name="l00592"></a>00592                   <span class="keywordflow">break</span>;
<a name="l00593"></a>00593             <span class="comment">// SAM Site 4 in Meduna is within town limits, so it's always controllable</span>
<a name="l00594"></a>00594             <span class="keywordflow">default</span>:
<a name="l00595"></a>00595                   <span class="keywordflow">break</span>;
<a name="l00596"></a>00596       }
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 
<a name="l00599"></a>00599       <span class="comment">// in sector where militia can be trained,</span>
<a name="l00600"></a>00600       <span class="comment">// control of the sector matters, display who controls this sector.  Map brightness no longer gives this!</span>
<a name="l00601"></a>00601       <span class="keywordflow">if</span> ( <a class="code" href="Town_01Militia_8cpp.html#e674aa192c58edfe28bc9ae3eb37dedf">MilitiaTrainingAllowedInSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, 0 ) &amp;&amp; !fUnknownSAMSite )
<a name="l00602"></a>00602       {
<a name="l00603"></a>00603             <span class="comment">// controlled:</span>
<a name="l00604"></a>00604             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#c409782a695a2f4dbc772872d38f6ea0">pwMiscSectorStrings</a>[ 4 ] );
<a name="l00605"></a>00605             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00606"></a>00606 
<a name="l00607"></a>00607             <span class="comment">// No/Yes</span>
<a name="l00608"></a>00608             swprintf( wString, L<span class="stringliteral">"%s"</span>, <a class="code" href="__DutchText_8cpp.html#c409782a695a2f4dbc772872d38f6ea0">pwMiscSectorStrings</a>[ ( <a class="code" href="strategic_8cpp.html#6f48fb0ea28e3d4889423290f1a6ede8">StrategicMap</a>[ CALCULATE_STRATEGIC_INDEX( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> ) ].fEnemyControlled ) ? 6 : 5 ] );
<a name="l00609"></a>00609             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 
<a name="l00612"></a>00612             <span class="comment">// militia - is there any?</span>
<a name="l00613"></a>00613             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#142ec6a905fde7af35bfed514478bc13">pwTownInfoStrings</a>[ 11 ] );
<a name="l00614"></a>00614             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00615"></a>00615 
<a name="l00616"></a>00616             ubMilitiaTotal = <a class="code" href="Town_01Militia_8cpp.html#d5f4d1a7e2d1489b786239270acbdda1">CountAllMilitiaInSector</a>(bCurrentTownMineSectorX, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>);
<a name="l00617"></a>00617             <span class="keywordflow">if</span> (ubMilitiaTotal &gt; 0)
<a name="l00618"></a>00618             {
<a name="l00619"></a>00619                   <span class="comment">// some militia, show total &amp; their breakdown by level</span>
<a name="l00620"></a>00620                   swprintf( wString, L<span class="stringliteral">"%d  (%d/%d/%d)"</span>, ubMilitiaTotal,
<a name="l00621"></a>00621                                                                         <a class="code" href="Town_01Militia_8cpp.html#5d75ed19e423a36b9384185bc181fcb3">MilitiaInSectorOfRank</a>(bCurrentTownMineSectorX, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, <a class="code" href="Campaign_01Types_8h.html#6fde86696b9fb4575b16ddc150ff0a840b225c8d872b15875355f348d6e3335b">GREEN_MILITIA</a>),
<a name="l00622"></a>00622                                                                         <a class="code" href="Town_01Militia_8cpp.html#5d75ed19e423a36b9384185bc181fcb3">MilitiaInSectorOfRank</a>(bCurrentTownMineSectorX, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, <a class="code" href="Campaign_01Types_8h.html#6fde86696b9fb4575b16ddc150ff0a845612214b681e2988ea93890806802cc9">REGULAR_MILITIA</a>),
<a name="l00623"></a>00623                                                                         <a class="code" href="Town_01Militia_8cpp.html#5d75ed19e423a36b9384185bc181fcb3">MilitiaInSectorOfRank</a>(bCurrentTownMineSectorX, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, <a class="code" href="Campaign_01Types_8h.html#6fde86696b9fb4575b16ddc150ff0a840fcf7fc556b8af2f6d3ec39652d3a927">ELITE_MILITIA</a>));
<a name="l00624"></a>00624                   <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00625"></a>00625             }
<a name="l00626"></a>00626             <span class="keywordflow">else</span>
<a name="l00627"></a>00627             {
<a name="l00628"></a>00628                   <span class="comment">// no militia: don't bother displaying level breakdown</span>
<a name="l00629"></a>00629                   <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>( wString, L<span class="stringliteral">"0"</span>);
<a name="l00630"></a>00630                   <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00631"></a>00631             }
<a name="l00632"></a>00632 
<a name="l00633"></a>00633 
<a name="l00634"></a>00634             <span class="comment">// percentage of current militia squad training completed</span>
<a name="l00635"></a>00635             swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#142ec6a905fde7af35bfed514478bc13">pwTownInfoStrings</a>[ 10 ] );
<a name="l00636"></a>00636             <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00637"></a>00637             swprintf( wString, L<span class="stringliteral">"%d%%%%"</span>, <a class="code" href="Campaign_01Types_8h.html#d83c6f699f17a47cf6a662c91d959126">SectorInfo</a>[ SECTOR( bCurrentTownMineSectorX, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> ) ].ubMilitiaTrainingPercentDone );
<a name="l00638"></a>00638             <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00639"></a>00639       }
<a name="l00640"></a>00640 
<a name="l00641"></a>00641 
<a name="l00642"></a>00642       <span class="comment">// enemy forces</span>
<a name="l00643"></a>00643       swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#c409782a695a2f4dbc772872d38f6ea0">pwMiscSectorStrings</a>[ 0 ] );
<a name="l00644"></a>00644       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00645"></a>00645 
<a name="l00646"></a>00646       <span class="comment">// how many are there, really?</span>
<a name="l00647"></a>00647       ubNumEnemies = <a class="code" href="Queen_01Command_8cpp.html#d8bc05237d5fab5063d680045f945c48">NumEnemiesInSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> );
<a name="l00648"></a>00648       
<a name="l00649"></a>00649       <span class="keywordflow">switch</span> ( <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#99ee2ace6b31b31373d011ccd7409bc3">WhatPlayerKnowsAboutEnemiesInSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a> ) )
<a name="l00650"></a>00650       {
<a name="l00651"></a>00651             <span class="keywordflow">case</span> <a class="code" href="Map_01Screen_01Interface_01Map_8h.html#ff3701dfcc246bf08b07f25a2cfd9e6d3451cb25dd13c653b430acf439889442">KNOWS_NOTHING</a>:
<a name="l00652"></a>00652                   <span class="comment">// show "Unknown"</span>
<a name="l00653"></a>00653                   <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>(wString, <a class="code" href="__DutchText_8cpp.html#c409782a695a2f4dbc772872d38f6ea0">pwMiscSectorStrings</a>[ 3 ] );
<a name="l00654"></a>00654                   <span class="keywordflow">break</span>;
<a name="l00655"></a>00655 
<a name="l00656"></a>00656             <span class="keywordflow">case</span> <a class="code" href="Map_01Screen_01Interface_01Map_8h.html#ff3701dfcc246bf08b07f25a2cfd9e6dc20c4064d8844ee111c7edd29c8e1ea9">KNOWS_THEYRE_THERE</a>:
<a name="l00657"></a>00657                   <span class="comment">// if there are any there</span>
<a name="l00658"></a>00658                   <span class="keywordflow">if</span> ( ubNumEnemies &gt; 0 )
<a name="l00659"></a>00659                   {
<a name="l00660"></a>00660                         <span class="comment">// show "?", but not exactly how many</span>
<a name="l00661"></a>00661                         <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>(wString, L<span class="stringliteral">"?"</span> );
<a name="l00662"></a>00662                   }
<a name="l00663"></a>00663                   <span class="keywordflow">else</span>
<a name="l00664"></a>00664                   {
<a name="l00665"></a>00665                         <span class="comment">// we know there aren't any (or we'd be seing them on map, too)</span>
<a name="l00666"></a>00666                         <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>(wString, L<span class="stringliteral">"0"</span> );
<a name="l00667"></a>00667                   }
<a name="l00668"></a>00668                   <span class="keywordflow">break</span>;
<a name="l00669"></a>00669 
<a name="l00670"></a>00670             <span class="keywordflow">case</span> <a class="code" href="Map_01Screen_01Interface_01Map_8h.html#ff3701dfcc246bf08b07f25a2cfd9e6d263c4c345350a75664423455311cdc1d">KNOWS_HOW_MANY</a>:
<a name="l00671"></a>00671                   <span class="comment">// show exactly how many</span>
<a name="l00672"></a>00672                   swprintf( wString, L<span class="stringliteral">"%d"</span>, ubNumEnemies );
<a name="l00673"></a>00673                   <span class="keywordflow">break</span>;
<a name="l00674"></a>00674       }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676       <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00677"></a>00677 }
<a name="l00678"></a>00678 
<a name="l00679"></a>00679 
<a name="l00680"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#14e7f61f81ea6ce8daa83d5639b4a029">00680</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#14e7f61f81ea6ce8daa83d5639b4a029">AddItemsInSectorToBox</a>(<span class="keywordtype">void</span>)
<a name="l00681"></a>00681 {
<a name="l00682"></a>00682       <a class="code" href="Types_8h.html#fcdf88c1d4179fcd6d8a1fa9bbcb8a80">CHAR16</a> wString[ 64 ];
<a name="l00683"></a>00683       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> hStringHandle = 0;
<a name="l00684"></a>00684 
<a name="l00685"></a>00685       <span class="comment">// items in sector (this works even for underground)</span>
<a name="l00686"></a>00686 
<a name="l00687"></a>00687       swprintf( wString, L<span class="stringliteral">"%s:"</span>, <a class="code" href="__DutchText_8cpp.html#c409782a695a2f4dbc772872d38f6ea0">pwMiscSectorStrings</a>[ 2 ] );
<a name="l00688"></a>00688       <a class="code" href="PopUpBox_8cpp.html#cbaac232b24b49dfbfb4a315a345671e">AddMonoString</a>( &amp;hStringHandle, wString );
<a name="l00689"></a>00689 
<a name="l00690"></a>00690 <span class="comment">//    swprintf( wString, L"%d", GetSizeOfStashInSector( bCurrentTownMineSectorX, bCurrentTownMineSectorY, bCurrentTownMineSectorZ, FALSE ));</span>
<a name="l00691"></a>00691       swprintf( wString, L<span class="stringliteral">"%d"</span>, <a class="code" href="Tactical_01Save_8cpp.html#fe298cab0837f7028ea0891b37498f8f">GetNumberOfVisibleWorldItemsFromSectorStructureForSector</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#414e5c7ed81e53640148703081de1766">bCurrentTownMineSectorZ</a> ));
<a name="l00692"></a>00692       <a class="code" href="PopUpBox_8cpp.html#f11d86d76b40a0830cbe1ab8f09f12ad">AddSecondColumnMonoString</a>( &amp;hStringHandle, wString );
<a name="l00693"></a>00693 }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695 
<a name="l00696"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#a98bdfba3b56a920320edcfa6f3e949a">00696</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#a98bdfba3b56a920320edcfa6f3e949a">PositionTownMineInfoBox</a>( <span class="keywordtype">void</span> )
<a name="l00697"></a>00697 {
<a name="l00698"></a>00698       <span class="comment">// position town mine info box</span>
<a name="l00699"></a>00699       <a class="code" href="structSGPRect.html">SGPRect</a> pDimensions;
<a name="l00700"></a>00700       <a class="code" href="structSGPPoint.html">SGPPoint</a> pPosition;
<a name="l00701"></a>00701       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sX =0, sY = 0;
<a name="l00702"></a>00702       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sNewMargin = 0;
<a name="l00703"></a>00703 
<a name="l00704"></a>00704       <span class="comment">// position the box based on x and y of the selected sector</span>
<a name="l00705"></a>00705   <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#917041ee85b8bfbe1a319c050e137073">GetScreenXYFromMapXY</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#354911565cbb30da6e7e00603550528d">bCurrentTownMineSectorX</a>, <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e9a2aa3546f03c3b89fc644634a63b00">bCurrentTownMineSectorY</a>, &amp;sX, &amp;sY);
<a name="l00706"></a>00706 
<a name="l00707"></a>00707       <span class="comment">// set box position</span>
<a name="l00708"></a>00708       pPosition.<a class="code" href="structSGPPoint.html#544942cdf34b38a75c6b1e16cc74df92">iX</a> = sX;
<a name="l00709"></a>00709       pPosition.<a class="code" href="structSGPPoint.html#9517aacfe3059f66c6b90074d3bf0623">iY</a> = sY;
<a name="l00710"></a>00710 
<a name="l00711"></a>00711       <span class="comment">// set new position</span>
<a name="l00712"></a>00712       <a class="code" href="PopUpBox_8cpp.html#5385234d53764dc901583cd867312a9a">SetBoxPosition</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, pPosition );
<a name="l00713"></a>00713 
<a name="l00714"></a>00714       <span class="comment">// get box size</span>
<a name="l00715"></a>00715       <a class="code" href="PopUpBox_8cpp.html#672b85cdbfdc5424b94152b87814728a">GetBoxSize</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, &amp;pDimensions );
<a name="l00716"></a>00716 
<a name="l00717"></a>00717       <span class="comment">// get position</span>
<a name="l00718"></a>00718       <a class="code" href="PopUpBox_8cpp.html#ddc91043fa299ba2bbf66faaa9340247">GetBoxPosition</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, &amp;pPosition);
<a name="l00719"></a>00719 
<a name="l00720"></a>00720       <span class="keywordflow">if</span>( pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> &lt; ( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#732f2fa46361d4d77f209131ec00fcd5">sTotalButtonWidth</a> + 30 ) )
<a name="l00721"></a>00721       {
<a name="l00722"></a>00722             <a class="code" href="PopUpBox_8cpp.html#daa5fcdf95fcf4ffd83afab7fd21f9a7">SpecifyBoxMinWidth</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, ( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#732f2fa46361d4d77f209131ec00fcd5">sTotalButtonWidth</a> + 30 )  );
<a name="l00723"></a>00723             pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> = <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#732f2fa46361d4d77f209131ec00fcd5">sTotalButtonWidth</a> + 30;
<a name="l00724"></a>00724       }
<a name="l00725"></a>00725 
<a name="l00726"></a>00726       <span class="comment">// now position box - the x axis</span>
<a name="l00727"></a>00727       <span class="keywordflow">if</span>( pPosition.<a class="code" href="structSGPPoint.html#544942cdf34b38a75c6b1e16cc74df92">iX</a> &lt; <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#7a5ec290dc3b07a397fd9ddb6ead8fec">MapScreenRect</a>.<a class="code" href="structSGPRect.html#ff8e2060cadeb6fe24800e83e9eb7041">iLeft</a> )
<a name="l00728"></a>00728       {
<a name="l00729"></a>00729             pPosition.<a class="code" href="structSGPPoint.html#544942cdf34b38a75c6b1e16cc74df92">iX</a> = <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#7a5ec290dc3b07a397fd9ddb6ead8fec">MapScreenRect</a>.<a class="code" href="structSGPRect.html#ff8e2060cadeb6fe24800e83e9eb7041">iLeft</a> + 5;
<a name="l00730"></a>00730       }
<a name="l00731"></a>00731 
<a name="l00732"></a>00732       <span class="keywordflow">if</span>( pPosition.<a class="code" href="structSGPPoint.html#544942cdf34b38a75c6b1e16cc74df92">iX</a> + pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> &gt; <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#7a5ec290dc3b07a397fd9ddb6ead8fec">MapScreenRect</a>.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> )
<a name="l00733"></a>00733       {
<a name="l00734"></a>00734             pPosition.<a class="code" href="structSGPPoint.html#544942cdf34b38a75c6b1e16cc74df92">iX</a> = <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#7a5ec290dc3b07a397fd9ddb6ead8fec">MapScreenRect</a>.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> - pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> - 5; 
<a name="l00735"></a>00735       }
<a name="l00736"></a>00736 
<a name="l00737"></a>00737 
<a name="l00738"></a>00738       <span class="comment">// position - the y axis</span>
<a name="l00739"></a>00739       <span class="keywordflow">if</span>( pPosition.<a class="code" href="structSGPPoint.html#9517aacfe3059f66c6b90074d3bf0623">iY</a> &lt; <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#7a5ec290dc3b07a397fd9ddb6ead8fec">MapScreenRect</a>.<a class="code" href="structSGPRect.html#d4c794d3a2deda1031b2bd5fa500dea7">iTop</a> )
<a name="l00740"></a>00740       {
<a name="l00741"></a>00741             pPosition.<a class="code" href="structSGPPoint.html#9517aacfe3059f66c6b90074d3bf0623">iY</a> = <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#7a5ec290dc3b07a397fd9ddb6ead8fec">MapScreenRect</a>.<a class="code" href="structSGPRect.html#d4c794d3a2deda1031b2bd5fa500dea7">iTop</a> + 5;
<a name="l00742"></a>00742       }
<a name="l00743"></a>00743 
<a name="l00744"></a>00744       <span class="keywordflow">if</span>(  pPosition.<a class="code" href="structSGPPoint.html#9517aacfe3059f66c6b90074d3bf0623">iY</a> + pDimensions.<a class="code" href="structSGPRect.html#3da8351ad1e68d9f710a57d7a7d8cb21">iBottom</a> &gt; <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#7a5ec290dc3b07a397fd9ddb6ead8fec">MapScreenRect</a>.<a class="code" href="structSGPRect.html#3da8351ad1e68d9f710a57d7a7d8cb21">iBottom</a> )
<a name="l00745"></a>00745       {
<a name="l00746"></a>00746             pPosition.<a class="code" href="structSGPPoint.html#9517aacfe3059f66c6b90074d3bf0623">iY</a> = <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#7a5ec290dc3b07a397fd9ddb6ead8fec">MapScreenRect</a>.<a class="code" href="structSGPRect.html#3da8351ad1e68d9f710a57d7a7d8cb21">iBottom</a> - pDimensions.<a class="code" href="structSGPRect.html#3da8351ad1e68d9f710a57d7a7d8cb21">iBottom</a> - 8; 
<a name="l00747"></a>00747       }
<a name="l00748"></a>00748 
<a name="l00749"></a>00749       
<a name="l00750"></a>00750 
<a name="l00751"></a>00751       <span class="comment">// reset position</span>
<a name="l00752"></a>00752       <a class="code" href="PopUpBox_8cpp.html#5385234d53764dc901583cd867312a9a">SetBoxPosition</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, pPosition );
<a name="l00753"></a>00753 
<a name="l00754"></a>00754       <span class="keywordflow">return</span>;
<a name="l00755"></a>00755 }
<a name="l00756"></a>00756 
<a name="l00757"></a>00757 
<a name="l00758"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e29ae8f1268caa7043020884ec4d2145">00758</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#e29ae8f1268caa7043020884ec4d2145">AddInventoryButtonForMapPopUpBox</a>( <span class="keywordtype">void</span> )
<a name="l00759"></a>00759 {
<a name="l00760"></a>00760       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sX, sY;
<a name="l00761"></a>00761       <a class="code" href="structSGPRect.html">SGPRect</a> pDimensions;
<a name="l00762"></a>00762       <a class="code" href="structSGPPoint.html">SGPPoint</a> pPosition;
<a name="l00763"></a>00763       <a class="code" href="structVOBJECT__DESC.html">VOBJECT_DESC</a> VObjectDesc;
<a name="l00764"></a>00764       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiObject;
<a name="l00765"></a>00765       <a class="code" href="structtagETRLEObject.html">ETRLEObject</a> *pTrav;
<a name="l00766"></a>00766       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sWidthA = 0, sWidthB = 0, sTotalBoxWidth = 0;
<a name="l00767"></a>00767       <a class="code" href="structTAG__HVOBJECT.html">HVOBJECT</a> hHandle;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769       
<a name="l00770"></a>00770       <span class="comment">// load the button</span>
<a name="l00771"></a>00771       VObjectDesc.<a class="code" href="structVOBJECT__DESC.html#2df21c3aa88a0442d5d81b021fa15bf4">fCreateFlags</a> = VOBJECT_CREATE_FROMFILE;
<a name="l00772"></a>00772       <a class="code" href="Utilities_8cpp.html#a5e70f75b6f0518668a489ce02e007b7">FilenameForBPP</a>(<span class="stringliteral">"INTERFACE\\mapinvbtns.sti"</span>, VObjectDesc.<a class="code" href="structVOBJECT__DESC.html#6dbe3d70c19525e407a05e537cfb22f3">ImageFile</a>);
<a name="l00773"></a>00773       AddVideoObject( &amp;VObjectDesc, &amp;uiObject ); 
<a name="l00774"></a>00774 
<a name="l00775"></a>00775       <span class="comment">// Calculate smily face positions...</span>
<a name="l00776"></a>00776       <a class="code" href="vobject_8cpp.html#bda2b0eae4cb40e612dffd307ad5c692">GetVideoObject</a>( &amp;hHandle, uiObject );
<a name="l00777"></a>00777       pTrav = &amp;(hHandle-&gt;<a class="code" href="structTAG__HVOBJECT.html#5af164bcbef17ed088d55268ea4d7ffd">pETRLEObject</a>[ 0 ] );
<a name="l00778"></a>00778 
<a name="l00779"></a>00779       sWidthA = pTrav-&gt;<a class="code" href="structtagETRLEObject.html#77505acd5ca79cbc055f7c9e840d5996">usWidth</a>;
<a name="l00780"></a>00780       
<a name="l00781"></a>00781       pTrav = &amp;(hHandle-&gt;<a class="code" href="structTAG__HVOBJECT.html#5af164bcbef17ed088d55268ea4d7ffd">pETRLEObject</a>[ 1 ] );
<a name="l00782"></a>00782       sWidthB = pTrav-&gt;<a class="code" href="structtagETRLEObject.html#77505acd5ca79cbc055f7c9e840d5996">usWidth</a>;
<a name="l00783"></a>00783       
<a name="l00784"></a>00784       sTotalBoxWidth = <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#732f2fa46361d4d77f209131ec00fcd5">sTotalButtonWidth</a>;
<a name="l00785"></a>00785 
<a name="l00786"></a>00786       <a class="code" href="PopUpBox_8cpp.html#672b85cdbfdc5424b94152b87814728a">GetBoxSize</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a> , &amp;pDimensions );
<a name="l00787"></a>00787       <a class="code" href="PopUpBox_8cpp.html#ddc91043fa299ba2bbf66faaa9340247">GetBoxPosition</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#5bd1db3a2b858a2209af613e9da7d329">ghTownMineBox</a>, &amp;pPosition );
<a name="l00788"></a>00788 
<a name="l00789"></a>00789       sX = pPosition.<a class="code" href="structSGPPoint.html#544942cdf34b38a75c6b1e16cc74df92">iX</a> + ( pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> - sTotalBoxWidth ) / 3;
<a name="l00790"></a>00790       sY = pPosition.<a class="code" href="structSGPPoint.html#9517aacfe3059f66c6b90074d3bf0623">iY</a> + pDimensions.<a class="code" href="structSGPRect.html#3da8351ad1e68d9f710a57d7a7d8cb21">iBottom</a> - ( (  BOX_BUTTON_HEIGHT + 5 ) );
<a name="l00791"></a>00791 
<a name="l00792"></a>00792       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4a0a21687f84d927f08284af03963a1b">guiMapButtonInventoryImage</a>[0] =  <a class="code" href="Button_01System_8cpp.html#b0e9fca124dbbab5ea6581af91600feb">LoadButtonImage</a>( <span class="stringliteral">"INTERFACE\\mapinvbtns.sti"</span> ,-1,0,-1,2,-1 );
<a name="l00793"></a>00793 
<a name="l00794"></a>00794       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6203d8a242fb4e060520bb7097e1bacf">guiMapButtonInventory</a>[0] = <a class="code" href="Button_01System_8cpp.html#7ce7fb088f021fe5e24070b768cc72cd">CreateIconAndTextButton</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4a0a21687f84d927f08284af03963a1b">guiMapButtonInventoryImage</a>[0], <a class="code" href="__DutchText_8cpp.html#902ffbe42b6b24735b4a1e5825b66171">pMapPopUpInventoryText</a>[ 0 ], BLOCKFONT2, 
<a name="l00795"></a>00795                                                                                      FONT_WHITE, FONT_BLACK, 
<a name="l00796"></a>00796                                                                                      FONT_WHITE, FONT_BLACK, 
<a name="l00797"></a>00797                                                                                      TEXT_CJUSTIFIED, 
<a name="l00798"></a>00798                                                                                      (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)(sX ), (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)( sY ), BUTTON_TOGGLE , MSYS_PRIORITY_HIGHEST - 1,
<a name="l00799"></a>00799                                                                                      DEFAULT_MOVE_CALLBACK, (<a class="code" href="Button_01System_8h.html#bd566aec25d6e1a33f91530f21194cf3">GUI_CALLBACK</a>)<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#dd723017092a8379247370c6b09e22f3">MapTownMineInventoryButtonCallBack</a> );
<a name="l00800"></a>00800 
<a name="l00801"></a>00801       
<a name="l00802"></a>00802       sX = sX + sWidthA + ( pDimensions.<a class="code" href="structSGPRect.html#555fe85d97dec81ee8fe61c365bf741a">iRight</a> - sTotalBoxWidth ) / 3;
<a name="l00803"></a>00803       sY = pPosition.<a class="code" href="structSGPPoint.html#9517aacfe3059f66c6b90074d3bf0623">iY</a> + pDimensions.<a class="code" href="structSGPRect.html#3da8351ad1e68d9f710a57d7a7d8cb21">iBottom</a> - ( ( BOX_BUTTON_HEIGHT + 5) );
<a name="l00804"></a>00804 
<a name="l00805"></a>00805       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4a0a21687f84d927f08284af03963a1b">guiMapButtonInventoryImage</a>[1] =  <a class="code" href="Button_01System_8cpp.html#b0e9fca124dbbab5ea6581af91600feb">LoadButtonImage</a>( <span class="stringliteral">"INTERFACE\\mapinvbtns.sti"</span> ,-1,1,-1,3,-1 );
<a name="l00806"></a>00806 
<a name="l00807"></a>00807       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6203d8a242fb4e060520bb7097e1bacf">guiMapButtonInventory</a>[1] = <a class="code" href="Button_01System_8cpp.html#7ce7fb088f021fe5e24070b768cc72cd">CreateIconAndTextButton</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4a0a21687f84d927f08284af03963a1b">guiMapButtonInventoryImage</a>[1], <a class="code" href="__DutchText_8cpp.html#902ffbe42b6b24735b4a1e5825b66171">pMapPopUpInventoryText</a>[ 1 ], BLOCKFONT2, 
<a name="l00808"></a>00808                                                                                      FONT_WHITE, FONT_BLACK, 
<a name="l00809"></a>00809                                                                                      FONT_WHITE, FONT_BLACK, 
<a name="l00810"></a>00810                                                                                      TEXT_CJUSTIFIED, 
<a name="l00811"></a>00811                                                                                      (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)(sX ), (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)( sY ), BUTTON_TOGGLE , MSYS_PRIORITY_HIGHEST - 1,
<a name="l00812"></a>00812                                                                                      DEFAULT_MOVE_CALLBACK, (<a class="code" href="Button_01System_8h.html#bd566aec25d6e1a33f91530f21194cf3">GUI_CALLBACK</a>)<a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#feda735a47fec26e616f89b2072568ce">MapTownMineExitButtonCallBack</a> );
<a name="l00813"></a>00813 
<a name="l00814"></a>00814       <span class="comment">// delete video object</span>
<a name="l00815"></a>00815       <a class="code" href="vobject_8cpp.html#94715e750fad7cebd3d9d388cdff59e2">DeleteVideoObjectFromIndex</a>( uiObject );
<a name="l00816"></a>00816 
<a name="l00817"></a>00817 <span class="comment">/*</span>
<a name="l00818"></a>00818 <span class="comment">      // if below ground disable</span>
<a name="l00819"></a>00819 <span class="comment">      if( iCurrentMapSectorZ )</span>
<a name="l00820"></a>00820 <span class="comment">      {</span>
<a name="l00821"></a>00821 <span class="comment">            DisableButton( guiMapButtonInventory[ 0 ] );</span>
<a name="l00822"></a>00822 <span class="comment">      }</span>
<a name="l00823"></a>00823 <span class="comment">*/</span>
<a name="l00824"></a>00824 
<a name="l00825"></a>00825       <span class="keywordflow">return</span>;
<a name="l00826"></a>00826 }
<a name="l00827"></a>00827 
<a name="l00828"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#991b06dbe08e14b2e60dc5f5b089f5d4">00828</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#991b06dbe08e14b2e60dc5f5b089f5d4">RemoveInventoryButtonForMapPopUpBox</a>( <span class="keywordtype">void</span> )
<a name="l00829"></a>00829 {
<a name="l00830"></a>00830 
<a name="l00831"></a>00831       <span class="comment">// get rid of button</span>
<a name="l00832"></a>00832       <a class="code" href="Button_01System_8cpp.html#daa181fdf3d05f2242b5d9cbeb91e9bf">RemoveButton</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6203d8a242fb4e060520bb7097e1bacf">guiMapButtonInventory</a>[0] );
<a name="l00833"></a>00833   <a class="code" href="Button_01System_8cpp.html#97a9df228f6eb3a96d06196263d6dc3a">UnloadButtonImage</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4a0a21687f84d927f08284af03963a1b">guiMapButtonInventoryImage</a>[0] );
<a name="l00834"></a>00834 
<a name="l00835"></a>00835       <a class="code" href="Button_01System_8cpp.html#daa181fdf3d05f2242b5d9cbeb91e9bf">RemoveButton</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#6203d8a242fb4e060520bb7097e1bacf">guiMapButtonInventory</a>[1] );
<a name="l00836"></a>00836   <a class="code" href="Button_01System_8cpp.html#97a9df228f6eb3a96d06196263d6dc3a">UnloadButtonImage</a>( <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#4a0a21687f84d927f08284af03963a1b">guiMapButtonInventoryImage</a>[1] );
<a name="l00837"></a>00837       
<a name="l00838"></a>00838       <span class="keywordflow">return</span>;
<a name="l00839"></a>00839 }
<a name="l00840"></a>00840 
<a name="l00841"></a>00841 
<a name="l00842"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#dd723017092a8379247370c6b09e22f3">00842</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#dd723017092a8379247370c6b09e22f3">MapTownMineInventoryButtonCallBack</a>( <a class="code" href="struct__GUI__BUTTON.html">GUI_BUTTON</a> *btn, <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> reason )
<a name="l00843"></a>00843 {
<a name="l00844"></a>00844       <span class="keywordflow">if</span>(reason &amp; MSYS_CALLBACK_REASON_LBUTTON_DWN )
<a name="l00845"></a>00845       {
<a name="l00846"></a>00846         btn-&gt;<a class="code" href="struct__GUI__BUTTON.html#1ad6f5c9eb46ea98b25449008c9563d0">uiFlags</a>|=(BUTTON_CLICKED_ON);   
<a name="l00847"></a>00847       }
<a name="l00848"></a>00848       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(reason &amp; MSYS_CALLBACK_REASON_LBUTTON_UP )
<a name="l00849"></a>00849   {
<a name="l00850"></a>00850     <span class="keywordflow">if</span> (btn-&gt;<a class="code" href="struct__GUI__BUTTON.html#1ad6f5c9eb46ea98b25449008c9563d0">uiFlags</a> &amp; BUTTON_CLICKED_ON)
<a name="l00851"></a>00851             {
<a name="l00852"></a>00852       btn-&gt;<a class="code" href="struct__GUI__BUTTON.html#1ad6f5c9eb46ea98b25449008c9563d0">uiFlags</a>&amp;=~(BUTTON_CLICKED_ON);
<a name="l00853"></a>00853 
<a name="l00854"></a>00854                   <span class="comment">// done</span>
<a name="l00855"></a>00855                   <a class="code" href="HelpScreen_8cpp.html#2f4cf093fe7eaaf55cbbf5898cd93ce7">fShowMapInventoryPool</a> = TRUE;
<a name="l00856"></a>00856                   <a class="code" href="HelpScreen_8cpp.html#be83f0093f2fba05817df5b4592ab0f0">fMapPanelDirty</a> = TRUE;
<a name="l00857"></a>00857                   <a class="code" href="HelpScreen_8cpp.html#76b028059427f50dbfcd71e9a289d81a">fMapScreenBottomDirty</a> = TRUE;
<a name="l00858"></a>00858                   <a class="code" href="Assignments_8cpp.html#199f71b31d6be32a5bb716c33ece4396">fShowTownInfo</a> = FALSE;
<a name="l00859"></a>00859 
<a name="l00860"></a>00860                   <span class="comment">//since we are bring up the sector inventory, check to see if the help screen should come up</span>
<a name="l00861"></a>00861                   <span class="keywordflow">if</span>( <a class="code" href="HelpScreen_8cpp.html#2fd8678afc37965e49a0ff9025ab4583">ShouldTheHelpScreenComeUp</a>( <a class="code" href="HelpScreen_8h.html#edcf2109f459315e1a7f2af73ec9b603e8a48c330c5fd5dd26ff9467990450fc">HELP_SCREEN_MAPSCREEN_SECTOR_INVENTORY</a>, FALSE ) )
<a name="l00862"></a>00862                   {
<a name="l00863"></a>00863                         <span class="comment">//normally this is handled in the screen handler, we have to set up a little different this time around</span>
<a name="l00864"></a>00864                         <a class="code" href="HelpScreen_8cpp.html#2fd8678afc37965e49a0ff9025ab4583">ShouldTheHelpScreenComeUp</a>( <a class="code" href="HelpScreen_8h.html#edcf2109f459315e1a7f2af73ec9b603e8a48c330c5fd5dd26ff9467990450fc">HELP_SCREEN_MAPSCREEN_SECTOR_INVENTORY</a>, TRUE );
<a name="l00865"></a>00865                   }
<a name="l00866"></a>00866             }
<a name="l00867"></a>00867       }     
<a name="l00868"></a>00868 }
<a name="l00869"></a>00869 
<a name="l00870"></a>00870 
<a name="l00871"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#feda735a47fec26e616f89b2072568ce">00871</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#feda735a47fec26e616f89b2072568ce">MapTownMineExitButtonCallBack</a>( <a class="code" href="struct__GUI__BUTTON.html">GUI_BUTTON</a> *btn, <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> reason )
<a name="l00872"></a>00872 {
<a name="l00873"></a>00873       <span class="keywordflow">if</span>(reason &amp; MSYS_CALLBACK_REASON_LBUTTON_DWN )
<a name="l00874"></a>00874       {
<a name="l00875"></a>00875         btn-&gt;<a class="code" href="struct__GUI__BUTTON.html#1ad6f5c9eb46ea98b25449008c9563d0">uiFlags</a>|=(BUTTON_CLICKED_ON);   
<a name="l00876"></a>00876       }
<a name="l00877"></a>00877       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(reason &amp; MSYS_CALLBACK_REASON_LBUTTON_UP )
<a name="l00878"></a>00878   {
<a name="l00879"></a>00879     <span class="keywordflow">if</span> (btn-&gt;<a class="code" href="struct__GUI__BUTTON.html#1ad6f5c9eb46ea98b25449008c9563d0">uiFlags</a> &amp; BUTTON_CLICKED_ON)
<a name="l00880"></a>00880             {
<a name="l00881"></a>00881       btn-&gt;<a class="code" href="struct__GUI__BUTTON.html#1ad6f5c9eb46ea98b25449008c9563d0">uiFlags</a>&amp;=~(BUTTON_CLICKED_ON);
<a name="l00882"></a>00882 
<a name="l00883"></a>00883                   <span class="comment">// done</span>
<a name="l00884"></a>00884                   <a class="code" href="HelpScreen_8cpp.html#be83f0093f2fba05817df5b4592ab0f0">fMapPanelDirty</a> = TRUE;
<a name="l00885"></a>00885                   <a class="code" href="HelpScreen_8cpp.html#76b028059427f50dbfcd71e9a289d81a">fMapScreenBottomDirty</a> = TRUE;
<a name="l00886"></a>00886                   <a class="code" href="Assignments_8cpp.html#199f71b31d6be32a5bb716c33ece4396">fShowTownInfo</a> = FALSE;
<a name="l00887"></a>00887 
<a name="l00888"></a>00888             }
<a name="l00889"></a>00889       }     
<a name="l00890"></a>00890 }
<a name="l00891"></a>00891 
<a name="l00892"></a>00892 
<a name="l00893"></a>00893 <span class="comment">// get the min width of the town mine info pop up box</span>
<a name="l00894"></a><a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#de3c17d3b745e232dad6be8784830482">00894</a> <span class="keywordtype">void</span> <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#de3c17d3b745e232dad6be8784830482">MinWidthOfTownMineInfoBox</a>( <span class="keywordtype">void</span> )
<a name="l00895"></a>00895 {
<a name="l00896"></a>00896       <a class="code" href="structTAG__HVOBJECT.html">HVOBJECT</a> hHandle;
<a name="l00897"></a>00897       <a class="code" href="structVOBJECT__DESC.html">VOBJECT_DESC</a> VObjectDesc;
<a name="l00898"></a>00898       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sWidthA = 0, sWidthB = 0, sTotalBoxWidth = 0;
<a name="l00899"></a>00899       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiObject;
<a name="l00900"></a>00900       <a class="code" href="structtagETRLEObject.html">ETRLEObject</a> *pTrav;
<a name="l00901"></a>00901 
<a name="l00902"></a>00902       VObjectDesc.<a class="code" href="structVOBJECT__DESC.html#2df21c3aa88a0442d5d81b021fa15bf4">fCreateFlags</a> = VOBJECT_CREATE_FROMFILE;
<a name="l00903"></a>00903       <a class="code" href="Utilities_8cpp.html#a5e70f75b6f0518668a489ce02e007b7">FilenameForBPP</a>(<span class="stringliteral">"INTERFACE\\mapinvbtns.sti"</span>, VObjectDesc.<a class="code" href="structVOBJECT__DESC.html#6dbe3d70c19525e407a05e537cfb22f3">ImageFile</a>);
<a name="l00904"></a>00904       AddVideoObject( &amp;VObjectDesc, &amp;uiObject ); 
<a name="l00905"></a>00905 
<a name="l00906"></a>00906       <span class="comment">// Calculate smily face positions...</span>
<a name="l00907"></a>00907       <a class="code" href="vobject_8cpp.html#bda2b0eae4cb40e612dffd307ad5c692">GetVideoObject</a>( &amp;hHandle, uiObject );
<a name="l00908"></a>00908       pTrav = &amp;(hHandle-&gt;<a class="code" href="structTAG__HVOBJECT.html#5af164bcbef17ed088d55268ea4d7ffd">pETRLEObject</a>[ 0 ] );
<a name="l00909"></a>00909 
<a name="l00910"></a>00910       sWidthA = pTrav-&gt;<a class="code" href="structtagETRLEObject.html#77505acd5ca79cbc055f7c9e840d5996">usWidth</a>;
<a name="l00911"></a>00911       
<a name="l00912"></a>00912       pTrav = &amp;(hHandle-&gt;<a class="code" href="structTAG__HVOBJECT.html#5af164bcbef17ed088d55268ea4d7ffd">pETRLEObject</a>[ 1 ] );
<a name="l00913"></a>00913       sWidthB = pTrav-&gt;<a class="code" href="structtagETRLEObject.html#77505acd5ca79cbc055f7c9e840d5996">usWidth</a>;
<a name="l00914"></a>00914       
<a name="l00915"></a>00915       sTotalBoxWidth = sWidthA + sWidthB;
<a name="l00916"></a>00916       <a class="code" href="Map_01Screen_01Interface_01TownMine_01Info_8cpp.html#732f2fa46361d4d77f209131ec00fcd5">sTotalButtonWidth</a> = sTotalBoxWidth;
<a name="l00917"></a>00917 
<a name="l00918"></a>00918       <span class="comment">// delete video object</span>
<a name="l00919"></a>00919       <a class="code" href="vobject_8cpp.html#94715e750fad7cebd3d9d388cdff59e2">DeleteVideoObjectFromIndex</a>( uiObject );
<a name="l00920"></a>00920 
<a name="l00921"></a>00921       <span class="keywordflow">return</span>;
<a name="l00922"></a>00922 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Sep 9 13:48:33 2006 for Build by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
