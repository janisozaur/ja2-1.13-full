<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Build: Meanwhile.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_3179ea33d55a76dc38212d9eab798728.html">export</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e5664b4b56927c8728eb3192fa60e338.html">hdc2</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_1eb12a41a47efb9efcd82fa98f4f4dbd.html">FTP</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_80cc1f21a78ab7941088ea567f236150.html">ja2src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_994ab287602efefceafe55287a3657d6.html">Build</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5aba590d477d4824a9090ab3f8850834.html">Strategic</a></div>
<h1>Meanwhile.cpp</h1><a href="Meanwhile_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifdef PRECOMPILEDHEADERS</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="Strategic_01All_8h.html">Strategic All.h</a>"</span>
<a name="l00003"></a>00003 <span class="preprocessor">#else</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="sgp_8h.html">sgp.h</a>"</span>
<a name="l00005"></a>00005 <span class="preprocessor">      #include "meanwhile.h"</span>
<a name="l00006"></a>00006 <span class="preprocessor">      #include "<a class="code" href="PreBattle_01Interface_8h.html">PreBattle Interface.h</a>"</span>
<a name="l00007"></a>00007 <span class="preprocessor">      #include "messageboxscreen.h"</span>
<a name="l00008"></a>00008 <span class="preprocessor">      #include "<a class="code" href="strategicmap_8h.html">strategicmap.h</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">      #include "fade screen.h"</span>
<a name="l00010"></a>00010 <span class="preprocessor">      #include "<a class="code" href="screenids_8h.html">screenids.h</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">      #include "<a class="code" href="jascreens_8h.html">jascreens.h</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">      #include "npc.h"</span>
<a name="l00013"></a>00013 <span class="preprocessor">      #include "game event hook.h"</span>
<a name="l00014"></a>00014 <span class="preprocessor">      #include "game clock.h"</span>
<a name="l00015"></a>00015 <span class="preprocessor">      #include "tactical save.h"</span>
<a name="l00016"></a>00016 <span class="preprocessor">      #include "soldier profile.h"</span>
<a name="l00017"></a>00017 <span class="preprocessor">      #include "overhead.h"</span>
<a name="l00018"></a>00018 <span class="preprocessor">      #include "dialogue control.h"</span>
<a name="l00019"></a>00019 <span class="preprocessor">      #include "<a class="code" href="gameloop_8h.html">gameloop.h</a>"</span>
<a name="l00020"></a>00020 <span class="preprocessor">      #include "npc.h"</span>
<a name="l00021"></a>00021 <span class="preprocessor">      #include "assignments.h"</span>
<a name="l00022"></a>00022 <span class="preprocessor">      #include "<a class="code" href="strategic_8h.html">strategic.h</a>"</span>
<a name="l00023"></a>00023 <span class="preprocessor">      #include "text.h"</span>
<a name="l00024"></a>00024 <span class="preprocessor">#endif</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a>00026 <span class="preprocessor">#define MAX_MEANWHILE_PROFILES      10</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a><a class="code" href="Meanwhile_8cpp.html#47cb03a4ef2dc2cbd160eefdb8e59c38">00028</a> <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> <a class="code" href="Meanwhile_8cpp.html#47cb03a4ef2dc2cbd160eefdb8e59c38">gzMeanwhileStr</a>[][30] = 
<a name="l00029"></a>00029 {
<a name="l00030"></a>00030       <span class="stringliteral">"End of player's first battle"</span>,
<a name="l00031"></a>00031       <span class="stringliteral">"Drassen Lib. "</span>,
<a name="l00032"></a>00032       <span class="stringliteral">"Cambria Lib."</span>,
<a name="l00033"></a>00033       <span class="stringliteral">"Alma Lib."</span>,
<a name="l00034"></a>00034       <span class="stringliteral">"Grumm lib."</span>,
<a name="l00035"></a>00035       <span class="stringliteral">"Chitzena Lib."</span>,
<a name="l00036"></a>00036       <span class="stringliteral">"NW SAM"</span>,
<a name="l00037"></a>00037       <span class="stringliteral">"NE SAM"</span>,
<a name="l00038"></a>00038       <span class="stringliteral">"Central SAM"</span>,
<a name="l00039"></a>00039       <span class="stringliteral">"Flowers"</span>,
<a name="l00040"></a>00040       <span class="stringliteral">"Lost town"</span>,
<a name="l00041"></a>00041       <span class="stringliteral">"Interrogation"</span>,
<a name="l00042"></a>00042       <span class="stringliteral">"Creatures"</span>,
<a name="l00043"></a>00043       <span class="stringliteral">"Kill Chopper"</span>,
<a name="l00044"></a>00044       <span class="stringliteral">"AWOL Madlab"</span>,
<a name="l00045"></a>00045       <span class="stringliteral">"Outskirts Meduna"</span>,
<a name="l00046"></a>00046       <span class="stringliteral">"Balime Lib."</span>,
<a name="l00047"></a>00047 };
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="comment">// the snap to grid nos for meanwhile scenes</span>
<a name="l00051"></a><a class="code" href="Meanwhile_8cpp.html#b076cfd0ac2b7f344395fb21c4b924fc">00051</a> <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> <a class="code" href="Meanwhile_8cpp.html#b076cfd0ac2b7f344395fb21c4b924fc">gusMeanWhileGridNo</a>[]=
<a name="l00052"></a>00052 {
<a name="l00053"></a>00053       12248,
<a name="l00054"></a>00054       12248,
<a name="l00055"></a>00055       12248,
<a name="l00056"></a>00056       12248,
<a name="l00057"></a>00057       12248,
<a name="l00058"></a>00058       12248,
<a name="l00059"></a>00059       12248,
<a name="l00060"></a>00060       12248,
<a name="l00061"></a>00061       12248,
<a name="l00062"></a>00062       12248,
<a name="l00063"></a>00063       12248,
<a name="l00064"></a>00064       8075,
<a name="l00065"></a>00065       12248,
<a name="l00066"></a>00066       12248,
<a name="l00067"></a>00067       12248,
<a name="l00068"></a>00068       12248,
<a name="l00069"></a>00069       12248,
<a name="l00070"></a>00070 };
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="structNPC__SAVE__INFO.html">00073</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00074"></a>00074 <span class="keyword"></span>{
<a name="l00075"></a><a class="code" href="structNPC__SAVE__INFO.html#0b677f68f64034eb80bcedcaf7071b60">00075</a>       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>       ubProfile;
<a name="l00076"></a><a class="code" href="structNPC__SAVE__INFO.html#e46e7f056def9cc03240ae9c531b705b">00076</a>       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>       sX;
<a name="l00077"></a><a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">00077</a>       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>       sY;
<a name="l00078"></a><a class="code" href="structNPC__SAVE__INFO.html#19e11b85afabb1c9025866a1b2fe7258">00078</a>       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>       sZ;
<a name="l00079"></a><a class="code" href="structNPC__SAVE__INFO.html#f3c67391334904bf6d23aeb22c471abc">00079</a>       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>       sGridNo;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 } <a class="code" href="structNPC__SAVE__INFO.html">NPC_SAVE_INFO</a>;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">// BEGIN SERALIZATION </span>
<a name="l00085"></a><a class="code" href="Meanwhile_8h.html#745d0431d8594106910050555032db41">00085</a> <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a>    <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>;
<a name="l00086"></a><a class="code" href="Meanwhile_8h.html#6c95eb472859c1c38abada5d2ff56e52">00086</a> <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a>    <a class="code" href="Meanwhile_8cpp.html#6c95eb472859c1c38abada5d2ff56e52">gMeanwhileDef</a>[<a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada125b18398f1c5f88a505179a9ba1c2078e">NUM_MEANWHILES</a>];
<a name="l00087"></a><a class="code" href="Meanwhile_8h.html#3ac720ee7ebc84de5c219f902904b101">00087</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>                                               <a class="code" href="Meanwhile_8cpp.html#3ac720ee7ebc84de5c219f902904b101">gfMeanwhileTryingToStart</a> = FALSE;
<a name="l00088"></a><a class="code" href="Tactical_01Save_8cpp.html#32e5c67eaaf12be98450e586fb4a1928">00088</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>                                               <a class="code" href="Meanwhile_8cpp.html#32e5c67eaaf12be98450e586fb4a1928">gfInMeanwhile</a> = FALSE;
<a name="l00089"></a>00089 <span class="comment">// END SERIALIZATION</span>
<a name="l00090"></a><a class="code" href="Meanwhile_8cpp.html#e7b564aafa98f2c11525c252b3d3948f">00090</a> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                                                 <a class="code" href="Meanwhile_8cpp.html#e7b564aafa98f2c11525c252b3d3948f">gsOldSectorX</a>;
<a name="l00091"></a><a class="code" href="Meanwhile_8cpp.html#1000f751ae234aacf3ea95a1160918ec">00091</a> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                                                 <a class="code" href="Meanwhile_8cpp.html#1000f751ae234aacf3ea95a1160918ec">gsOldSectorY</a>;
<a name="l00092"></a><a class="code" href="Meanwhile_8cpp.html#442c942b39de522e23de87d1882dbf28">00092</a> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                                                 <a class="code" href="Meanwhile_8cpp.html#442c942b39de522e23de87d1882dbf28">gsOldSectorZ</a>;
<a name="l00093"></a><a class="code" href="Meanwhile_8cpp.html#f3a01fddf0281d91dff819c7a2df88d9">00093</a> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                                                 <a class="code" href="Meanwhile_8cpp.html#f3a01fddf0281d91dff819c7a2df88d9">gsOldSelectedSectorX</a>;
<a name="l00094"></a><a class="code" href="Meanwhile_8cpp.html#13d0544b8541c9f8984c797097ba89e0">00094</a> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                                                 <a class="code" href="Meanwhile_8cpp.html#13d0544b8541c9f8984c797097ba89e0">gsOldSelectedSectorY</a>;
<a name="l00095"></a><a class="code" href="Meanwhile_8cpp.html#307369c57f19a928b693ee052be95eaf">00095</a> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                                                 <a class="code" href="Meanwhile_8cpp.html#307369c57f19a928b693ee052be95eaf">gsOldSelectedSectorZ</a>;
<a name="l00096"></a>00096 
<a name="l00097"></a><a class="code" href="Meanwhile_8cpp.html#70fceee8a8129c0dbbebbfa6d7b0527e">00097</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                                                <a class="code" href="Meanwhile_8cpp.html#70fceee8a8129c0dbbebbfa6d7b0527e">guiOldScreen</a>;
<a name="l00098"></a><a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">00098</a> <a class="code" href="structNPC__SAVE__INFO.html">NPC_SAVE_INFO</a>                             <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ MAX_MEANWHILE_PROFILES ];
<a name="l00099"></a><a class="code" href="Meanwhile_8cpp.html#cb817875ad808b37e91e01aeb769ad96">00099</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                                                <a class="code" href="Meanwhile_8cpp.html#cb817875ad808b37e91e01aeb769ad96">guiNumNPCSaves</a> = 0;
<a name="l00100"></a><a class="code" href="Meanwhile_8cpp.html#07d6936f4a7a98eba729fd998d6cbaf7">00100</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>                                               <a class="code" href="Meanwhile_8cpp.html#07d6936f4a7a98eba729fd998d6cbaf7">gfReloadingScreenFromMeanwhile</a> = FALSE;
<a name="l00101"></a><a class="code" href="Meanwhile_8cpp.html#ff1995859756a7c315b62d1ccecdfc89">00101</a> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                                                 <a class="code" href="Meanwhile_8cpp.html#ff1995859756a7c315b62d1ccecdfc89">gsOldCurInterfacePanel</a> = 0;          
<a name="l00102"></a><a class="code" href="Meanwhile_8cpp.html#e6c8e29bafe7ff2eab9e9d942dc3e2b5">00102</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>                                               <a class="code" href="Meanwhile_8cpp.html#e6c8e29bafe7ff2eab9e9d942dc3e2b5">gfWorldWasLoaded</a> = FALSE;
<a name="l00103"></a><a class="code" href="Meanwhile_8cpp.html#c87b1ea8eadfa64e7b825d211f41a64b">00103</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                                                 <a class="code" href="Meanwhile_8cpp.html#c87b1ea8eadfa64e7b825d211f41a64b">ubCurrentMeanWhileId</a> = 0;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#b922edfb04fb7843b8770b7c15a72192">BeginMeanwhileCallBack</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> bExitValue );
<a name="l00106"></a>00106 <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#b70ba740a5062c2d2cd0744d8fd447f8">DoneFadeOutMeanwhile</a>( <span class="keywordtype">void</span> );
<a name="l00107"></a>00107 <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#5bfb601f17c3a6f54b7e090f305533d0">DoneFadeInMeanwhile</a>( <span class="keywordtype">void</span> );
<a name="l00108"></a>00108 <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#2ca39751ebb9d3ea383bbc35f1a238c4">DoneFadeOutMeanwhileOnceDone</a>( <span class="keywordtype">void</span> );
<a name="l00109"></a>00109 <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#7463e59dabed5d72c65cec7f0a2f31a2">DoneFadeInMeanwhileOnceDone</a>( <span class="keywordtype">void</span> );
<a name="l00110"></a>00110 <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#af9dff30deb6d6bf243f23bef08917e6">LocateMeanWhileGrid</a>( <span class="keywordtype">void</span> );
<a name="l00111"></a>00111 
<a name="l00112"></a><a class="code" href="Meanwhile_8h.html#2acea5fee65b14f2e4cb786043dcf4cc">00112</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> = 0;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="comment">// meanwhile flag defines</span>
<a name="l00115"></a>00115 <span class="preprocessor">#define END_OF_PLAYERS_FIRST_BATTLE_FLAG              0x00000001</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span><span class="preprocessor">#define     DRASSEN_LIBERATED_FLAG                                            0x00000002</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span><span class="preprocessor">#define     CAMBRIA_LIBERATED_FLAG                                            0x00000004</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span><span class="preprocessor">#define     ALMA_LIBERATED_FLAG                                                           0x00000008</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span><span class="preprocessor">#define     GRUMM_LIBERATED_FLAG                                                    0x00000010</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span><span class="preprocessor">#define     CHITZENA_LIBERATED_FLAG                                           0x00000020</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span><span class="preprocessor">#define     NW_SAM_FLAG                                                                               0x00000040</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span><span class="preprocessor">#define     NE_SAM_FLAG                                                                               0x00000080</span>
<a name="l00123"></a>00123 <span class="preprocessor"></span><span class="preprocessor">#define     CENTRAL_SAM_FLAG                                                              0x00000100</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span><span class="preprocessor">#define     FLOWERS_FLAG                                                                              0x00000200</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span><span class="preprocessor">#define     LOST_TOWN_FLAG                                                                      0x00000400</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span><span class="preprocessor">#define     CREATURES_FLAG                                                                      0x00000800</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span><span class="preprocessor">#define     KILL_CHOPPER_FLAG                                                             0x00001000</span>
<a name="l00128"></a>00128 <span class="preprocessor"></span><span class="preprocessor">#define     AWOL_SCIENTIST_FLAG                                                           0x00002000</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span><span class="preprocessor">#define     OUTSKIRTS_MEDUNA_FLAG                                                   0x00004000</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span><span class="preprocessor">#define INTERROGATION_FLAG                                                          0x00008000                                            </span>
<a name="l00131"></a>00131 <span class="preprocessor"></span><span class="preprocessor">#define BALIME_LIBERATED_FLAG                                                 0x00010000</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span>
<a name="l00133"></a>00133 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="gamescreen_8cpp.html#cd1695c871c6118fa171244681bd0531">InternalLocateGridNo</a>( <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> sGridNo, <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fForce );
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#d9944f75b78ab139547682fa7298a4df">ProcessImplicationsOfMeanwhile</a>( <span class="keywordtype">void</span> );
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="comment">// set flag for this event</span>
<a name="l00139"></a><a class="code" href="Meanwhile_8cpp.html#310818c0f15d5423e437097c634700af">00139</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#310818c0f15d5423e437097c634700af">SetMeanWhileFlag</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubMeanwhileID )
<a name="l00140"></a>00140 {
<a name="l00141"></a>00141       <span class="keywordflow">switch</span>( ubMeanwhileID )
<a name="l00142"></a>00142       {
<a name="l00143"></a>00143             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a>:
<a name="l00144"></a>00144                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= END_OF_PLAYERS_FIRST_BATTLE_FLAG;
<a name="l00145"></a>00145                   <span class="keywordflow">break</span>;
<a name="l00146"></a>00146             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d29556ae653737931d1a49b105bf84b0">DRASSEN_LIBERATED</a>:
<a name="l00147"></a>00147                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= DRASSEN_LIBERATED_FLAG;
<a name="l00148"></a>00148                   <span class="keywordflow">break</span>;
<a name="l00149"></a>00149             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1276763b4569d319cf68459e27856b2d6c">CAMBRIA_LIBERATED</a>:
<a name="l00150"></a>00150                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= CAMBRIA_LIBERATED_FLAG;
<a name="l00151"></a>00151                   <span class="keywordflow">break</span>;
<a name="l00152"></a>00152             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128ff81a06855c45f24d8049d50ad987fb">ALMA_LIBERATED</a>:
<a name="l00153"></a>00153                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= ALMA_LIBERATED_FLAG;
<a name="l00154"></a>00154                   <span class="keywordflow">break</span>;
<a name="l00155"></a>00155             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1248c47c785b1eeb73dad2907b67fd77ed">GRUMM_LIBERATED</a>:
<a name="l00156"></a>00156                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= GRUMM_LIBERATED_FLAG;
<a name="l00157"></a>00157                   <span class="keywordflow">break</span>;
<a name="l00158"></a>00158             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada121fe872649d08bacd239bb47b6cdb628b">CHITZENA_LIBERATED</a>:
<a name="l00159"></a>00159                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= CHITZENA_LIBERATED_FLAG;
<a name="l00160"></a>00160                   <span class="keywordflow">break</span>;
<a name="l00161"></a>00161             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada125fa0e5a8a1dc1075ad962b302a0feede">BALIME_LIBERATED</a>:
<a name="l00162"></a>00162                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= BALIME_LIBERATED_FLAG;
<a name="l00163"></a>00163                   <span class="keywordflow">break</span>;
<a name="l00164"></a>00164             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12cdcb1756cf7e52c0aade4438797b161b">NW_SAM</a>:
<a name="l00165"></a>00165                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= NW_SAM_FLAG;
<a name="l00166"></a>00166                   <span class="keywordflow">break</span>;
<a name="l00167"></a>00167             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d6942d4b65256c18df3f55a11076a0c4">NE_SAM</a>:
<a name="l00168"></a>00168                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= NE_SAM_FLAG;
<a name="l00169"></a>00169                   <span class="keywordflow">break</span>;
<a name="l00170"></a>00170             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada123d86ab30202124b1d6691aa9f13e5eb2">CENTRAL_SAM</a>:
<a name="l00171"></a>00171                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= CENTRAL_SAM_FLAG;
<a name="l00172"></a>00172                   <span class="keywordflow">break</span>;
<a name="l00173"></a>00173             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12db78f45746f3e3732bf5d7c9d4c9966d">FLOWERS</a>:
<a name="l00174"></a>00174                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= FLOWERS_FLAG;
<a name="l00175"></a>00175                   <span class="keywordflow">break</span>;
<a name="l00176"></a>00176             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f8ff4ee76992d1ff1a69dced984d4c3f">LOST_TOWN</a>:
<a name="l00177"></a>00177                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= LOST_TOWN_FLAG;
<a name="l00178"></a>00178                   <span class="keywordflow">break</span>;
<a name="l00179"></a>00179             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada127beff12c6e5e62da4e2f661e5db280b0">CREATURES</a>:
<a name="l00180"></a>00180                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= CREATURES_FLAG;
<a name="l00181"></a>00181                   <span class="keywordflow">break</span>;
<a name="l00182"></a>00182             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f37c0403de6e994c1b1517bfb4cc63d3">KILL_CHOPPER</a>:
<a name="l00183"></a>00183                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= KILL_CHOPPER_FLAG;
<a name="l00184"></a>00184                   <span class="keywordflow">break</span>;
<a name="l00185"></a>00185             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12ff0c681e1645a1473be2b47e8de07644">AWOL_SCIENTIST</a>:
<a name="l00186"></a>00186                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= AWOL_SCIENTIST_FLAG;
<a name="l00187"></a>00187                   <span class="keywordflow">break</span>;
<a name="l00188"></a>00188             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12de84dd0a8c461b54c07c324e7d070873">OUTSKIRTS_MEDUNA</a>:
<a name="l00189"></a>00189                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= OUTSKIRTS_MEDUNA_FLAG;
<a name="l00190"></a>00190                   <span class="keywordflow">break</span>;
<a name="l00191"></a>00191             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a>:
<a name="l00192"></a>00192                   <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> |= INTERROGATION_FLAG;
<a name="l00193"></a>00193                   <span class="keywordflow">break</span>;
<a name="l00194"></a>00194       }
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="comment">// is this flag set?</span>
<a name="l00198"></a><a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">00198</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubMeanwhileID )
<a name="l00199"></a>00199 {
<a name="l00200"></a>00200       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTrue = FALSE;
<a name="l00201"></a>00201       <span class="keywordflow">switch</span>( ubMeanwhileID )
<a name="l00202"></a>00202       {
<a name="l00203"></a>00203             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a>:
<a name="l00204"></a>00204                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; END_OF_PLAYERS_FIRST_BATTLE_FLAG );
<a name="l00205"></a>00205                   <span class="keywordflow">break</span>;
<a name="l00206"></a>00206             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d29556ae653737931d1a49b105bf84b0">DRASSEN_LIBERATED</a>:
<a name="l00207"></a>00207                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; DRASSEN_LIBERATED_FLAG );
<a name="l00208"></a>00208                   <span class="keywordflow">break</span>;
<a name="l00209"></a>00209             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1276763b4569d319cf68459e27856b2d6c">CAMBRIA_LIBERATED</a>:
<a name="l00210"></a>00210                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; CAMBRIA_LIBERATED_FLAG );
<a name="l00211"></a>00211                   <span class="keywordflow">break</span>;
<a name="l00212"></a>00212             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128ff81a06855c45f24d8049d50ad987fb">ALMA_LIBERATED</a>:
<a name="l00213"></a>00213                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; ALMA_LIBERATED_FLAG );
<a name="l00214"></a>00214                   <span class="keywordflow">break</span>;
<a name="l00215"></a>00215             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1248c47c785b1eeb73dad2907b67fd77ed">GRUMM_LIBERATED</a>:
<a name="l00216"></a>00216                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; GRUMM_LIBERATED_FLAG );
<a name="l00217"></a>00217                   <span class="keywordflow">break</span>;
<a name="l00218"></a>00218             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada121fe872649d08bacd239bb47b6cdb628b">CHITZENA_LIBERATED</a>:
<a name="l00219"></a>00219                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; CHITZENA_LIBERATED_FLAG );
<a name="l00220"></a>00220                   <span class="keywordflow">break</span>;
<a name="l00221"></a>00221             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada125fa0e5a8a1dc1075ad962b302a0feede">BALIME_LIBERATED</a>:
<a name="l00222"></a>00222                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; BALIME_LIBERATED_FLAG );
<a name="l00223"></a>00223                   <span class="keywordflow">break</span>;
<a name="l00224"></a>00224             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12cdcb1756cf7e52c0aade4438797b161b">NW_SAM</a>:
<a name="l00225"></a>00225                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; NW_SAM_FLAG );
<a name="l00226"></a>00226                   <span class="keywordflow">break</span>;
<a name="l00227"></a>00227             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d6942d4b65256c18df3f55a11076a0c4">NE_SAM</a>:
<a name="l00228"></a>00228                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; NE_SAM_FLAG );
<a name="l00229"></a>00229                   <span class="keywordflow">break</span>;
<a name="l00230"></a>00230             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada123d86ab30202124b1d6691aa9f13e5eb2">CENTRAL_SAM</a>:
<a name="l00231"></a>00231                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; CENTRAL_SAM_FLAG );
<a name="l00232"></a>00232                   <span class="keywordflow">break</span>;
<a name="l00233"></a>00233             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12db78f45746f3e3732bf5d7c9d4c9966d">FLOWERS</a>:
<a name="l00234"></a>00234                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; FLOWERS_FLAG );
<a name="l00235"></a>00235                   <span class="keywordflow">break</span>;
<a name="l00236"></a>00236             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f8ff4ee76992d1ff1a69dced984d4c3f">LOST_TOWN</a>:
<a name="l00237"></a>00237                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; LOST_TOWN_FLAG );
<a name="l00238"></a>00238                   <span class="keywordflow">break</span>;
<a name="l00239"></a>00239             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada127beff12c6e5e62da4e2f661e5db280b0">CREATURES</a>:
<a name="l00240"></a>00240                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; CREATURES_FLAG );
<a name="l00241"></a>00241                   <span class="keywordflow">break</span>;
<a name="l00242"></a>00242             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f37c0403de6e994c1b1517bfb4cc63d3">KILL_CHOPPER</a>:
<a name="l00243"></a>00243                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; KILL_CHOPPER_FLAG );
<a name="l00244"></a>00244                   <span class="keywordflow">break</span>;
<a name="l00245"></a>00245             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12ff0c681e1645a1473be2b47e8de07644">AWOL_SCIENTIST</a>:
<a name="l00246"></a>00246                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; AWOL_SCIENTIST_FLAG );
<a name="l00247"></a>00247                   <span class="keywordflow">break</span>;
<a name="l00248"></a>00248             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12de84dd0a8c461b54c07c324e7d070873">OUTSKIRTS_MEDUNA</a>:
<a name="l00249"></a>00249                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; OUTSKIRTS_MEDUNA_FLAG );
<a name="l00250"></a>00250                   <span class="keywordflow">break</span>;
<a name="l00251"></a>00251             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a>:
<a name="l00252"></a>00252                   uiTrue = ( <a class="code" href="Creature_01Spreading_8cpp.html#2acea5fee65b14f2e4cb786043dcf4cc">uiMeanWhileFlags</a> &amp; INTERROGATION_FLAG );
<a name="l00253"></a>00253                   <span class="keywordflow">break</span>;
<a name="l00254"></a>00254       }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256       <span class="keywordflow">if</span>( uiTrue )
<a name="l00257"></a>00257       {
<a name="l00258"></a>00258             <span class="keywordflow">return</span>( TRUE );
<a name="l00259"></a>00259       }
<a name="l00260"></a>00260       <span class="keywordflow">else</span>
<a name="l00261"></a>00261       {
<a name="l00262"></a>00262             <span class="keywordflow">return</span>( FALSE );
<a name="l00263"></a>00263       }
<a name="l00264"></a>00264 }
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 
<a name="l00267"></a><a class="code" href="Meanwhile_8cpp.html#4e28963f9a744b83f701f613af5d9e79">00267</a> <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> <a class="code" href="Meanwhile_8cpp.html#4e28963f9a744b83f701f613af5d9e79">GetFreeNPCSave</a>( <span class="keywordtype">void</span> )
<a name="l00268"></a>00268 {
<a name="l00269"></a>00269       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiCount;
<a name="l00270"></a>00270 
<a name="l00271"></a>00271       <span class="keywordflow">for</span>(uiCount=0; uiCount &lt; <a class="code" href="Meanwhile_8cpp.html#cb817875ad808b37e91e01aeb769ad96">guiNumNPCSaves</a>; uiCount++)
<a name="l00272"></a>00272       {
<a name="l00273"></a>00273             <span class="keywordflow">if</span>(( <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[uiCount].ubProfile == NO_PROFILE ) )
<a name="l00274"></a>00274                   <span class="keywordflow">return</span>( (<a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a>)uiCount );
<a name="l00275"></a>00275       }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277       <span class="keywordflow">if</span>( guiNumNPCSaves &lt; MAX_MEANWHILE_PROFILES )
<a name="l00278"></a>00278             <span class="keywordflow">return</span>( (<a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a>) guiNumNPCSaves++ );
<a name="l00279"></a>00279 
<a name="l00280"></a>00280       <span class="keywordflow">return</span>( -1 );
<a name="l00281"></a>00281 }
<a name="l00282"></a>00282 
<a name="l00283"></a><a class="code" href="Meanwhile_8cpp.html#a6cc6c772a19360e16736c1c298ed236">00283</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#a6cc6c772a19360e16736c1c298ed236">RecountNPCSaves</a>( <span class="keywordtype">void</span> )
<a name="l00284"></a>00284 {
<a name="l00285"></a>00285       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> uiCount;
<a name="l00286"></a>00286 
<a name="l00287"></a>00287       <span class="keywordflow">for</span>(uiCount=<a class="code" href="Meanwhile_8cpp.html#cb817875ad808b37e91e01aeb769ad96">guiNumNPCSaves</a>-1; (uiCount &gt;=0) ; uiCount--)
<a name="l00288"></a>00288       {
<a name="l00289"></a>00289             <span class="keywordflow">if</span>( ( <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[uiCount].ubProfile != NO_PROFILE ) )
<a name="l00290"></a>00290             {
<a name="l00291"></a>00291                   <a class="code" href="Meanwhile_8cpp.html#cb817875ad808b37e91e01aeb769ad96">guiNumNPCSaves</a>=(<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)(uiCount+1);
<a name="l00292"></a>00292                   <span class="keywordflow">break</span>;
<a name="l00293"></a>00293             }
<a name="l00294"></a>00294       }
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 
<a name="l00299"></a><a class="code" href="Meanwhile_8h.html#319c41df9a2f206f705304e057a064a4">00299</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> *pMeanwhileDef, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime )
<a name="l00300"></a>00300 {
<a name="l00301"></a>00301       <span class="comment">// event scheduled to happen before, ignore</span>
<a name="l00302"></a>00302       <span class="keywordflow">if</span>( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( pMeanwhileDef-&gt;<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> )== TRUE )
<a name="l00303"></a>00303       {
<a name="l00304"></a>00304             <span class="keywordflow">return</span>;
<a name="l00305"></a>00305       }
<a name="l00306"></a>00306       
<a name="l00307"></a>00307       <span class="comment">// set the meanwhile flag for this event</span>
<a name="l00308"></a>00308       <a class="code" href="Meanwhile_8cpp.html#310818c0f15d5423e437097c634700af">SetMeanWhileFlag</a>( pMeanwhileDef-&gt;<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> );
<a name="l00309"></a>00309 
<a name="l00310"></a>00310       <span class="comment">// set the id value</span>
<a name="l00311"></a>00311       <a class="code" href="Meanwhile_8cpp.html#c87b1ea8eadfa64e7b825d211f41a64b">ubCurrentMeanWhileId</a> = pMeanwhileDef-&gt;<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a>;
<a name="l00312"></a>00312 
<a name="l00313"></a>00313       <span class="comment">// Copy definiaiotn structure into position in global array....</span>
<a name="l00314"></a>00314       memcpy( &amp;(<a class="code" href="Meanwhile_8cpp.html#6c95eb472859c1c38abada5d2ff56e52">gMeanwhileDef</a>[pMeanwhileDef-&gt;<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a>]), pMeanwhileDef, <span class="keyword">sizeof</span>( <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> ) );
<a name="l00315"></a>00315 
<a name="l00316"></a>00316   <span class="comment">// A meanwhile.. poor elliot!</span>
<a name="l00317"></a>00317   <span class="comment">// increment his slapped count...</span>
<a name="l00318"></a>00318 
<a name="l00319"></a>00319   <span class="comment">// We need to do it here 'cause they may skip it...</span>
<a name="l00320"></a>00320   <span class="keywordflow">if</span> ( <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].bNPCData != 17 )
<a name="l00321"></a>00321   {
<a name="l00322"></a>00322     <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#2383e5671eb993c3061bad92ab884550">bNPCData</a>++;
<a name="l00323"></a>00323   }
<a name="l00324"></a>00324 
<a name="l00325"></a>00325       <a class="code" href="Game_01Event_01Hook_8h.html#d0da2cc582f16f4f54f328db96d7ca56">AddStrategicEvent</a>( <a class="code" href="Game_01Event_01Hook_8h.html#08f51f22ad2ed13a25181c26045731106763d600336f4623b92c2a869d5b488c">EVENT_MEANWHILE</a>, uiTime, pMeanwhileDef-&gt;<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> );
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 
<a name="l00329"></a><a class="code" href="Meanwhile_8h.html#35e3e3f345345692a516401d85beb773">00329</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Meanwhile_8cpp.html#35e3e3f345345692a516401d85beb773">BeginMeanwhile</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubMeanwhileID )
<a name="l00330"></a>00330 {
<a name="l00331"></a>00331       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> cnt;
<a name="l00332"></a>00332 
<a name="l00333"></a>00333       <span class="comment">// copy meanwhile data from array to structure for current</span>
<a name="l00334"></a>00334       memcpy( &amp;<a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>, &amp;(<a class="code" href="Meanwhile_8cpp.html#6c95eb472859c1c38abada5d2ff56e52">gMeanwhileDef</a>[ubMeanwhileID]), <span class="keyword">sizeof</span>( <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> ) );
<a name="l00335"></a>00335 
<a name="l00336"></a>00336       <a class="code" href="Meanwhile_8cpp.html#3ac720ee7ebc84de5c219f902904b101">gfMeanwhileTryingToStart</a> = TRUE;
<a name="l00337"></a>00337       <a class="code" href="Game_01Clock_8cpp.html#426aeef836203b725ffe02df6a9a9299">PauseGame</a>();
<a name="l00338"></a>00338       <span class="comment">// prevent anyone from messing with the pause!</span>
<a name="l00339"></a>00339       <a class="code" href="Game_01Clock_8cpp.html#4b28955e12b707b3a642529b787ec142">LockPauseState</a>( 6 );
<a name="l00340"></a>00340 
<a name="l00341"></a>00341       <span class="comment">// Set NO_PROFILE info....</span>
<a name="l00342"></a>00342       <span class="keywordflow">for</span> ( cnt = 0; cnt &lt; MAX_MEANWHILE_PROFILES; cnt++ )
<a name="l00343"></a>00343       {
<a name="l00344"></a>00344             <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].ubProfile = NO_PROFILE;
<a name="l00345"></a>00345       }
<a name="l00346"></a>00346 
<a name="l00347"></a>00347       <span class="keywordflow">return</span>( TRUE );
<a name="l00348"></a>00348 }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 
<a name="l00351"></a><a class="code" href="Meanwhile_8cpp.html#9244f6d31cd3cb0bd58ac6d85f8ef345">00351</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#9244f6d31cd3cb0bd58ac6d85f8ef345">BringupMeanwhileBox</a>( )
<a name="l00352"></a>00352 {
<a name="l00353"></a>00353       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> zStr[256];
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 <span class="preprocessor">#ifdef JA2TESTVERSION</span>
<a name="l00356"></a>00356 <span class="preprocessor"></span>      swprintf( (<span class="keywordtype">wchar_t</span> *)zStr, (<span class="keywordtype">wchar_t</span> *)L<span class="stringliteral">"Meanwhile..... ( %S : Remember to make sure towns are controlled if required by script )"</span>, <a class="code" href="Meanwhile_8cpp.html#47cb03a4ef2dc2cbd160eefdb8e59c38">gzMeanwhileStr</a>[ <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> ] );
<a name="l00357"></a>00357 <span class="preprocessor">#else</span>
<a name="l00358"></a>00358 <span class="preprocessor"></span>      swprintf( (<span class="keywordtype">wchar_t</span> *)zStr, (<span class="keywordtype">wchar_t</span> *)L<span class="stringliteral">"%s....."</span>, <a class="code" href="__DutchText_8cpp.html#a8c622dca23483187a6840e6a69c5902">pMessageStrings</a>[ <a class="code" href="Text_8h.html#99df18b74eba4f54aca738a63fbff1706f7d9443003787cfc42f9bd44a4d3569">MSG_MEANWHILE</a> ] );
<a name="l00359"></a>00359 <span class="preprocessor">#endif</span>
<a name="l00360"></a>00360 <span class="preprocessor"></span>
<a name="l00361"></a>00361 <span class="preprocessor">#ifdef JA2TESTVERSION</span>
<a name="l00362"></a>00362 <span class="preprocessor"></span>      <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> != <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a> )
<a name="l00363"></a>00363 <span class="preprocessor">#else</span>
<a name="l00364"></a>00364 <span class="preprocessor"></span>      <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> != <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a> &amp;&amp; <a class="code" href="GameSettings_8cpp.html#81530769a6bcccef5f74786650fd2dca">MeanwhileSceneSeen</a>( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> ) )
<a name="l00365"></a>00365 <span class="preprocessor">#endif</span>
<a name="l00366"></a>00366 <span class="preprocessor"></span>      {
<a name="l00367"></a>00367             <a class="code" href="MessageBoxScreen_8cpp.html#ff890475da4a6f8d61959852ea396a03">DoMessageBox</a>( <a class="code" href="MessageBoxScreen_8h.html#2f1398dba5e4a5616b83437528bdb28edfaaee6cf60e9dcec27ec0650dbbc39f">MSG_BOX_BASIC_STYLE</a>, zStr, <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a>, MSG_BOX_FLAG_OKSKIP, <a class="code" href="Meanwhile_8cpp.html#b922edfb04fb7843b8770b7c15a72192">BeginMeanwhileCallBack</a>, NULL );
<a name="l00368"></a>00368       }
<a name="l00369"></a>00369       <span class="keywordflow">else</span>
<a name="l00370"></a>00370       {
<a name="l00371"></a>00371             <span class="comment">//DoMessageBox( MSG_BOX_BASIC_STYLE, zStr, guiCurrentScreen, ( UINT8 )MSG_BOX_FLAG_OK, BeginMeanwhileCallBack, NULL );</span>
<a name="l00372"></a>00372             <a class="code" href="MessageBoxScreen_8cpp.html#ff890475da4a6f8d61959852ea396a03">DoMessageBox</a>( <a class="code" href="MessageBoxScreen_8h.html#2f1398dba5e4a5616b83437528bdb28edfaaee6cf60e9dcec27ec0650dbbc39f">MSG_BOX_BASIC_STYLE</a>, zStr, <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a>, MSG_BOX_FLAG_OKSKIP, <a class="code" href="Meanwhile_8cpp.html#b922edfb04fb7843b8770b7c15a72192">BeginMeanwhileCallBack</a>, NULL );
<a name="l00373"></a>00373       }
<a name="l00374"></a>00374 }
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="Meanwhile_8h.html#fe57ecbd53a2dc9aaccafe1b7e05eba0">00376</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#fe57ecbd53a2dc9aaccafe1b7e05eba0">CheckForMeanwhileOKStart</a>( )
<a name="l00377"></a>00377 {
<a name="l00378"></a>00378       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#3ac720ee7ebc84de5c219f902904b101">gfMeanwhileTryingToStart</a> )
<a name="l00379"></a>00379       {
<a name="l00380"></a>00380             <span class="comment">// Are we in prebattle interface?</span>
<a name="l00381"></a>00381             <span class="keywordflow">if</span> ( <a class="code" href="PreBattle_01Interface_8cpp.html#8c8a157a83efed4b0a96da642776f816">gfPreBattleInterfaceActive</a> )
<a name="l00382"></a>00382             {
<a name="l00383"></a>00383                   <span class="keywordflow">return</span>;
<a name="l00384"></a>00384             }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386             <span class="keywordflow">if</span> ( !<a class="code" href="Interface_01Control_8cpp.html#7151e784f856908a342173d727648414">InterfaceOKForMeanwhilePopup</a>() )
<a name="l00387"></a>00387             {
<a name="l00388"></a>00388                   <span class="keywordflow">return</span>;
<a name="l00389"></a>00389             }
<a name="l00390"></a>00390 
<a name="l00391"></a>00391         <span class="keywordflow">if</span> ( !<a class="code" href="Dialogue_01Control_8cpp.html#8710feb26eb01848af5f613c7ea1d770">DialogueQueueIsEmptyOrSomebodyTalkingNow</a>( ) )
<a name="l00392"></a>00392         {
<a name="l00393"></a>00393       <span class="keywordflow">return</span>;
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396             <a class="code" href="Meanwhile_8cpp.html#3ac720ee7ebc84de5c219f902904b101">gfMeanwhileTryingToStart</a> = FALSE;
<a name="l00397"></a>00397 
<a name="l00398"></a>00398             <a class="code" href="Meanwhile_8cpp.html#70fceee8a8129c0dbbebbfa6d7b0527e">guiOldScreen</a> = <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a>;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     <span class="keywordflow">if</span> ( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> == <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf29873e16bc1530dedb416060abbeea6d0">GAME_SCREEN</a> )
<a name="l00401"></a>00401     {
<a name="l00402"></a>00402             <a class="code" href="gamescreen_8cpp.html#6c021c5ce37d65213ffb685392d69c31">LeaveTacticalScreen</a>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf29873e16bc1530dedb416060abbeea6d0">GAME_SCREEN</a> );    
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404 
<a name="l00405"></a>00405 
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <span class="comment">// We need to make sure we have no item - at least in tactical</span>
<a name="l00408"></a>00408     <span class="comment">// In mapscreen, time is paused when manipulating items...</span>
<a name="l00409"></a>00409     <a class="code" href="Interface_01Items_8cpp.html#f8ebcc7be6a490468d936b32465538b1">CancelItemPointer</a>( );
<a name="l00410"></a>00410 
<a name="l00411"></a>00411             <a class="code" href="Meanwhile_8cpp.html#9244f6d31cd3cb0bd58ac6d85f8ef345">BringupMeanwhileBox</a>( );
<a name="l00412"></a>00412       }
<a name="l00413"></a>00413 }
<a name="l00414"></a>00414 
<a name="l00415"></a><a class="code" href="Meanwhile_8cpp.html#0fa35adf4c71fe0204f5c8026cfe150a">00415</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#0fa35adf4c71fe0204f5c8026cfe150a">StartMeanwhile</a>( )
<a name="l00416"></a>00416 {
<a name="l00417"></a>00417       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> iIndex;
<a name="l00418"></a>00418       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>  bNumDone = 0;
<a name="l00419"></a>00419 
<a name="l00420"></a>00420       <span class="comment">// OK, save old position...</span>
<a name="l00421"></a>00421       <span class="keywordflow">if</span> ( <a class="code" href="Map_01Information_8cpp.html#0d739dcb74321d819ef2bfcb1eb5a669">gfWorldLoaded</a> )
<a name="l00422"></a>00422       {
<a name="l00423"></a>00423             <a class="code" href="Meanwhile_8cpp.html#e7b564aafa98f2c11525c252b3d3948f">gsOldSectorX</a> = <a class="code" href="strategicmap_8cpp.html#49d9aed144a633fda4ba1990f002d703">gWorldSectorX</a>;
<a name="l00424"></a>00424             <a class="code" href="Meanwhile_8cpp.html#1000f751ae234aacf3ea95a1160918ec">gsOldSectorY</a> = <a class="code" href="strategicmap_8cpp.html#ea322310ced0e35ee18a2ee7b32aac5b">gWorldSectorY</a>;
<a name="l00425"></a>00425             <a class="code" href="Meanwhile_8cpp.html#442c942b39de522e23de87d1882dbf28">gsOldSectorZ</a> = <a class="code" href="strategicmap_8cpp.html#da715721a8ceedd42acf6ddb33e63ce0">gbWorldSectorZ</a>;
<a name="l00426"></a>00426       }
<a name="l00427"></a>00427 
<a name="l00428"></a>00428       <a class="code" href="Meanwhile_8cpp.html#f3a01fddf0281d91dff819c7a2df88d9">gsOldSelectedSectorX</a> = <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#db5e700c27f1673be3250fa875d4af87">sSelMapX</a>;
<a name="l00429"></a>00429       <a class="code" href="Meanwhile_8cpp.html#13d0544b8541c9f8984c797097ba89e0">gsOldSelectedSectorY</a> = <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#b4658c32a43a079f3804a635a62b2067">sSelMapY</a>;
<a name="l00430"></a>00430       <a class="code" href="Meanwhile_8cpp.html#307369c57f19a928b693ee052be95eaf">gsOldSelectedSectorZ</a> = (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>) <a class="code" href="Map_01Screen_01Interface_01Map_8cpp.html#b52d71b8f7dc10a22568eb52e0c51a3e">iCurrentMapSectorZ</a>;
<a name="l00431"></a>00431 
<a name="l00432"></a>00432       <a class="code" href="Meanwhile_8cpp.html#32e5c67eaaf12be98450e586fb4a1928">gfInMeanwhile</a> = TRUE;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434       <span class="comment">// ATE: Change music before load</span>
<a name="l00435"></a>00435       <a class="code" href="Music_01Control_8cpp.html#6048469cd3be966558a4ba87cbbf41ef">SetMusicMode</a>( <a class="code" href="Music_01Control_8h.html#537bb0477379f935f13aee9969289d1fbb6f624ccbe410e54bf1ef384615a023">MUSIC_MAIN_MENU</a> );          
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 
<a name="l00438"></a>00438       <a class="code" href="Meanwhile_8cpp.html#e6c8e29bafe7ff2eab9e9d942dc3e2b5">gfWorldWasLoaded</a> = <a class="code" href="Map_01Information_8cpp.html#0d739dcb74321d819ef2bfcb1eb5a669">gfWorldLoaded</a>;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440       <span class="comment">// OK, we have been told to start.....</span>
<a name="l00441"></a>00441       <a class="code" href="Interface_8cpp.html#edc512850cb730e5501105e3de43b213">SetCurrentInterfacePanel</a>( (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Interface_8h.html#366cb4f305f8652d6d094e461a23d775565a7cf4953add143c5fea45076abc43">TEAM_PANEL</a> );
<a name="l00442"></a>00442       
<a name="l00443"></a>00443       <span class="comment">// Setup NPC locations, depending on meanwhile type...</span>
<a name="l00444"></a>00444       <span class="keywordflow">switch</span>( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> )
<a name="l00445"></a>00445       {
<a name="l00446"></a>00446             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a>:
<a name="l00447"></a>00447             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d29556ae653737931d1a49b105bf84b0">DRASSEN_LIBERATED</a>:
<a name="l00448"></a>00448             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1276763b4569d319cf68459e27856b2d6c">CAMBRIA_LIBERATED</a>:
<a name="l00449"></a>00449             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128ff81a06855c45f24d8049d50ad987fb">ALMA_LIBERATED</a>:
<a name="l00450"></a>00450             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1248c47c785b1eeb73dad2907b67fd77ed">GRUMM_LIBERATED</a>:
<a name="l00451"></a>00451             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada121fe872649d08bacd239bb47b6cdb628b">CHITZENA_LIBERATED</a>:
<a name="l00452"></a>00452             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada125fa0e5a8a1dc1075ad962b302a0feede">BALIME_LIBERATED</a>:
<a name="l00453"></a>00453             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12cdcb1756cf7e52c0aade4438797b161b">NW_SAM</a>:
<a name="l00454"></a>00454             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d6942d4b65256c18df3f55a11076a0c4">NE_SAM</a>:
<a name="l00455"></a>00455             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada123d86ab30202124b1d6691aa9f13e5eb2">CENTRAL_SAM</a>:
<a name="l00456"></a>00456             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12db78f45746f3e3732bf5d7c9d4c9966d">FLOWERS</a>:
<a name="l00457"></a>00457             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f8ff4ee76992d1ff1a69dced984d4c3f">LOST_TOWN</a>:
<a name="l00458"></a>00458             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada127beff12c6e5e62da4e2f661e5db280b0">CREATURES</a>:
<a name="l00459"></a>00459             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f37c0403de6e994c1b1517bfb4cc63d3">KILL_CHOPPER</a>:
<a name="l00460"></a>00460             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12ff0c681e1645a1473be2b47e8de07644">AWOL_SCIENTIST</a>:
<a name="l00461"></a>00461             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12de84dd0a8c461b54c07c324e7d070873">OUTSKIRTS_MEDUNA</a>:
<a name="l00462"></a>00462 
<a name="l00463"></a>00463                         <span class="comment">// SAVE QUEEN!</span>
<a name="l00464"></a>00464                         iIndex = <a class="code" href="Meanwhile_8cpp.html#4e28963f9a744b83f701f613af5d9e79">GetFreeNPCSave</a>( );
<a name="l00465"></a>00465                         <span class="keywordflow">if</span> ( iIndex != -1 )
<a name="l00466"></a>00466                         {
<a name="l00467"></a>00467                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#0b677f68f64034eb80bcedcaf7071b60">ubProfile</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l00468"></a>00468                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#e46e7f056def9cc03240ae9c531b705b">sX</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a>;
<a name="l00469"></a>00469                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">sY</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a>;
<a name="l00470"></a>00470                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#19e11b85afabb1c9025866a1b2fe7258">sZ</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a>;
<a name="l00471"></a>00471                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#f3c67391334904bf6d23aeb22c471abc">sGridNo</a>       = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#49b76d0b059c1acd5618a7af884a0edb">sGridNo</a>;
<a name="l00472"></a>00472 
<a name="l00473"></a>00473                               <span class="comment">// Force reload of NPC files...</span>
<a name="l00474"></a>00474                               <a class="code" href="NPC_8cpp.html#8ec5f7422162c6ceb2d0ce53c7460c9f">ReloadQuoteFile</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> );
<a name="l00475"></a>00475 
<a name="l00476"></a>00476                               <a class="code" href="Tactical_01Save_8cpp.html#7afd883e19e5bf23659aecbcf34e762d">ChangeNpcToDifferentSector</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>, 3, 16, 0 );
<a name="l00477"></a>00477                         }
<a name="l00478"></a>00478 
<a name="l00479"></a>00479                         <span class="comment">// SAVE MESSANGER!</span>
<a name="l00480"></a>00480                         iIndex = <a class="code" href="Meanwhile_8cpp.html#4e28963f9a744b83f701f613af5d9e79">GetFreeNPCSave</a>( );
<a name="l00481"></a>00481                         <span class="keywordflow">if</span> ( iIndex != -1 )
<a name="l00482"></a>00482                         {
<a name="l00483"></a>00483                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#0b677f68f64034eb80bcedcaf7071b60">ubProfile</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a>;
<a name="l00484"></a>00484                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#e46e7f056def9cc03240ae9c531b705b">sX</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a>;
<a name="l00485"></a>00485                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">sY</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a>;
<a name="l00486"></a>00486                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#19e11b85afabb1c9025866a1b2fe7258">sZ</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a>;
<a name="l00487"></a>00487                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#f3c67391334904bf6d23aeb22c471abc">sGridNo</a>       = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#49b76d0b059c1acd5618a7af884a0edb">sGridNo</a>;
<a name="l00488"></a>00488 
<a name="l00489"></a>00489                               <span class="comment">// Force reload of NPC files...</span>
<a name="l00490"></a>00490                               <a class="code" href="NPC_8cpp.html#8ec5f7422162c6ceb2d0ce53c7460c9f">ReloadQuoteFile</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> );
<a name="l00491"></a>00491 
<a name="l00492"></a>00492                               <a class="code" href="Tactical_01Save_8cpp.html#7afd883e19e5bf23659aecbcf34e762d">ChangeNpcToDifferentSector</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a>, 3, 16, 0 );
<a name="l00493"></a>00493                         }
<a name="l00494"></a>00494 
<a name="l00495"></a>00495                         <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> == <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12de84dd0a8c461b54c07c324e7d070873">OUTSKIRTS_MEDUNA</a> )
<a name="l00496"></a>00496                         {
<a name="l00497"></a>00497                               <span class="comment">// SAVE JOE!</span>
<a name="l00498"></a>00498                               iIndex = <a class="code" href="Meanwhile_8cpp.html#4e28963f9a744b83f701f613af5d9e79">GetFreeNPCSave</a>( );
<a name="l00499"></a>00499                               <span class="keywordflow">if</span> ( iIndex != -1 )
<a name="l00500"></a>00500                               {
<a name="l00501"></a>00501                                     <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#0b677f68f64034eb80bcedcaf7071b60">ubProfile</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a>;
<a name="l00502"></a>00502                                     <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#e46e7f056def9cc03240ae9c531b705b">sX</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a>;
<a name="l00503"></a>00503                                     <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">sY</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a>;
<a name="l00504"></a>00504                                     <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#19e11b85afabb1c9025866a1b2fe7258">sZ</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a>;
<a name="l00505"></a>00505                                     <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#f3c67391334904bf6d23aeb22c471abc">sGridNo</a>       = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#49b76d0b059c1acd5618a7af884a0edb">sGridNo</a>;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507                                     <span class="comment">// Force reload of NPC files...</span>
<a name="l00508"></a>00508                                     <a class="code" href="NPC_8cpp.html#8ec5f7422162c6ceb2d0ce53c7460c9f">ReloadQuoteFile</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> );
<a name="l00509"></a>00509 
<a name="l00510"></a>00510                                     <a class="code" href="Tactical_01Save_8cpp.html#7afd883e19e5bf23659aecbcf34e762d">ChangeNpcToDifferentSector</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a>, 3, 16, 0 );
<a name="l00511"></a>00511                               }
<a name="l00512"></a>00512                         }
<a name="l00513"></a>00513 
<a name="l00514"></a>00514                   <span class="keywordflow">break</span>;
<a name="l00515"></a>00515 
<a name="l00516"></a>00516 
<a name="l00517"></a>00517             <span class="keywordflow">case</span>  <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a>:
<a name="l00518"></a>00518 
<a name="l00519"></a>00519                         <span class="comment">// SAVE QUEEN!</span>
<a name="l00520"></a>00520                         iIndex = <a class="code" href="Meanwhile_8cpp.html#4e28963f9a744b83f701f613af5d9e79">GetFreeNPCSave</a>( );
<a name="l00521"></a>00521                         <span class="keywordflow">if</span> ( iIndex != -1 )
<a name="l00522"></a>00522                         {
<a name="l00523"></a>00523                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#0b677f68f64034eb80bcedcaf7071b60">ubProfile</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l00524"></a>00524                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#e46e7f056def9cc03240ae9c531b705b">sX</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a>;
<a name="l00525"></a>00525                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">sY</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a>;
<a name="l00526"></a>00526                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#19e11b85afabb1c9025866a1b2fe7258">sZ</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a>;
<a name="l00527"></a>00527                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#f3c67391334904bf6d23aeb22c471abc">sGridNo</a>       = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#49b76d0b059c1acd5618a7af884a0edb">sGridNo</a>;
<a name="l00528"></a>00528 
<a name="l00529"></a>00529                               <span class="comment">// Force reload of NPC files...</span>
<a name="l00530"></a>00530                               <a class="code" href="NPC_8cpp.html#8ec5f7422162c6ceb2d0ce53c7460c9f">ReloadQuoteFile</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a> );
<a name="l00531"></a>00531 
<a name="l00532"></a>00532                               <a class="code" href="Tactical_01Save_8cpp.html#7afd883e19e5bf23659aecbcf34e762d">ChangeNpcToDifferentSector</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>, 7, 14, 0 );
<a name="l00533"></a>00533                         }
<a name="l00534"></a>00534 
<a name="l00535"></a>00535                         <span class="comment">// SAVE MESSANGER!</span>
<a name="l00536"></a>00536                         iIndex = <a class="code" href="Meanwhile_8cpp.html#4e28963f9a744b83f701f613af5d9e79">GetFreeNPCSave</a>( );
<a name="l00537"></a>00537                         <span class="keywordflow">if</span> ( iIndex != -1 )
<a name="l00538"></a>00538                         {
<a name="l00539"></a>00539                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#0b677f68f64034eb80bcedcaf7071b60">ubProfile</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a>;
<a name="l00540"></a>00540                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#e46e7f056def9cc03240ae9c531b705b">sX</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a>;
<a name="l00541"></a>00541                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">sY</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a>;
<a name="l00542"></a>00542                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#19e11b85afabb1c9025866a1b2fe7258">sZ</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a>;
<a name="l00543"></a>00543                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#f3c67391334904bf6d23aeb22c471abc">sGridNo</a>       = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#49b76d0b059c1acd5618a7af884a0edb">sGridNo</a>;
<a name="l00544"></a>00544 
<a name="l00545"></a>00545                               <span class="comment">// Force reload of NPC files...</span>
<a name="l00546"></a>00546                               <a class="code" href="NPC_8cpp.html#8ec5f7422162c6ceb2d0ce53c7460c9f">ReloadQuoteFile</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a> );
<a name="l00547"></a>00547 
<a name="l00548"></a>00548                               <a class="code" href="Tactical_01Save_8cpp.html#7afd883e19e5bf23659aecbcf34e762d">ChangeNpcToDifferentSector</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa16960fe1226f34f684b9dbdf6ab84817f">ELLIOT</a>, 7, 14, 0 );
<a name="l00549"></a>00549                         }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551                         <span class="comment">// SAVE JOE!</span>
<a name="l00552"></a>00552                         iIndex = <a class="code" href="Meanwhile_8cpp.html#4e28963f9a744b83f701f613af5d9e79">GetFreeNPCSave</a>( );
<a name="l00553"></a>00553                         <span class="keywordflow">if</span> ( iIndex != -1 )
<a name="l00554"></a>00554                         {
<a name="l00555"></a>00555                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#0b677f68f64034eb80bcedcaf7071b60">ubProfile</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a>;
<a name="l00556"></a>00556                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#e46e7f056def9cc03240ae9c531b705b">sX</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a>;
<a name="l00557"></a>00557                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">sY</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a>;
<a name="l00558"></a>00558                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#19e11b85afabb1c9025866a1b2fe7258">sZ</a>                        = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a>;
<a name="l00559"></a>00559                               <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ iIndex ].<a class="code" href="structNPC__SAVE__INFO.html#f3c67391334904bf6d23aeb22c471abc">sGridNo</a>       = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#49b76d0b059c1acd5618a7af884a0edb">sGridNo</a>;
<a name="l00560"></a>00560 
<a name="l00561"></a>00561                               <span class="comment">// Force reload of NPC files...</span>
<a name="l00562"></a>00562                               <a class="code" href="NPC_8cpp.html#8ec5f7422162c6ceb2d0ce53c7460c9f">ReloadQuoteFile</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a> );
<a name="l00563"></a>00563 
<a name="l00564"></a>00564                               <a class="code" href="Tactical_01Save_8cpp.html#7afd883e19e5bf23659aecbcf34e762d">ChangeNpcToDifferentSector</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa192316e5a46397f20e0a7d967488a290a">JOE</a>, 7, 14, 0 );
<a name="l00565"></a>00565                         }
<a name="l00566"></a>00566 
<a name="l00567"></a>00567                   <span class="keywordflow">break</span>;
<a name="l00568"></a>00568 
<a name="l00569"></a>00569 
<a name="l00570"></a>00570       }
<a name="l00571"></a>00571 
<a name="l00572"></a>00572       <span class="comment">// fade out old screen....</span>
<a name="l00573"></a>00573       <a class="code" href="Fade_01Screen_8cpp.html#122853961c3e0edb0912d78055adda93">FadeOutNextFrame</a>( );
<a name="l00574"></a>00574 
<a name="l00575"></a>00575       <span class="comment">// Load new map....</span>
<a name="l00576"></a>00576       <a class="code" href="Fade_01Screen_8cpp.html#94519d7763062ac6c03c761cbf2af2e3">gFadeOutDoneCallback</a> = <a class="code" href="Meanwhile_8cpp.html#b70ba740a5062c2d2cd0744d8fd447f8">DoneFadeOutMeanwhile</a>;
<a name="l00577"></a>00577 
<a name="l00578"></a>00578 
<a name="l00579"></a>00579 }
<a name="l00580"></a>00580 
<a name="l00581"></a>00581 
<a name="l00582"></a><a class="code" href="Meanwhile_8cpp.html#b70ba740a5062c2d2cd0744d8fd447f8">00582</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#b70ba740a5062c2d2cd0744d8fd447f8">DoneFadeOutMeanwhile</a>( )
<a name="l00583"></a>00583 {
<a name="l00584"></a>00584       <span class="comment">// OK, insertion data found, enter sector!</span>
<a name="l00585"></a>00585       
<a name="l00586"></a>00586       <a class="code" href="strategicmap_8cpp.html#ed1731dd2cd018974e5f92118e13c7a1">SetCurrentWorldSector</a>( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a>, <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a>, 0 );
<a name="l00587"></a>00587 
<a name="l00588"></a>00588       <span class="comment">//LocateToMeanwhileCharacter( );</span>
<a name="l00589"></a>00589       <a class="code" href="Meanwhile_8cpp.html#af9dff30deb6d6bf243f23bef08917e6">LocateMeanWhileGrid</a>( );
<a name="l00590"></a>00590 
<a name="l00591"></a>00591       <a class="code" href="Fade_01Screen_8cpp.html#cb4087996c1c2bd1383f2b7224505fdc">gFadeInDoneCallback</a> = <a class="code" href="Meanwhile_8cpp.html#5bfb601f17c3a6f54b7e090f305533d0">DoneFadeInMeanwhile</a>;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593       <a class="code" href="Fade_01Screen_8cpp.html#c34fbd8d879c4be1ffff9e183b20fd8c">FadeInNextFrame</a>( );
<a name="l00594"></a>00594 }
<a name="l00595"></a>00595 
<a name="l00596"></a>00596 
<a name="l00597"></a><a class="code" href="Meanwhile_8cpp.html#5bfb601f17c3a6f54b7e090f305533d0">00597</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#5bfb601f17c3a6f54b7e090f305533d0">DoneFadeInMeanwhile</a>( )
<a name="l00598"></a>00598 {
<a name="l00599"></a>00599       <span class="comment">// ATE: double check that we are in meanwhile</span>
<a name="l00600"></a>00600       <span class="comment">// this is if we cancel right away.....</span>
<a name="l00601"></a>00601       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#32e5c67eaaf12be98450e586fb4a1928">gfInMeanwhile</a> )
<a name="l00602"></a>00602       {
<a name="l00603"></a>00603             <a class="code" href="Dialogue_01Control_8cpp.html#802eda027df54e41eebb6020bfe41b46">giNPCReferenceCount</a> = 1;
<a name="l00604"></a>00604 
<a name="l00605"></a>00605             <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> != <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a> )
<a name="l00606"></a>00606             {
<a name="l00607"></a>00607                   <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#89eb954f99ad4f28b84d7cf675c8ed32">uiFlags</a> |= SHOW_ALL_MERCS;
<a name="l00608"></a>00608             }
<a name="l00609"></a>00609 
<a name="l00610"></a>00610             <a class="code" href="NPC_8cpp.html#e001fe367bf9edf08b486f360857531e">TriggerNPCRecordImmediately</a>( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a>, (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> );
<a name="l00611"></a>00611       }
<a name="l00612"></a>00612 }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 
<a name="l00615"></a>00615 
<a name="l00616"></a>00616 
<a name="l00617"></a><a class="code" href="Meanwhile_8cpp.html#b922edfb04fb7843b8770b7c15a72192">00617</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#b922edfb04fb7843b8770b7c15a72192">BeginMeanwhileCallBack</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> bExitValue )
<a name="l00618"></a>00618 {
<a name="l00619"></a>00619       <span class="keywordflow">if</span> ( bExitValue == MSG_BOX_RETURN_OK || bExitValue == MSG_BOX_RETURN_YES )
<a name="l00620"></a>00620       {
<a name="l00621"></a>00621             <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#89eb954f99ad4f28b84d7cf675c8ed32">uiFlags</a> |= ENGAGED_IN_CONV;
<a name="l00622"></a>00622             <span class="comment">// Increment reference count...</span>
<a name="l00623"></a>00623             <a class="code" href="Dialogue_01Control_8cpp.html#802eda027df54e41eebb6020bfe41b46">giNPCReferenceCount</a> = 1;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625             <a class="code" href="Meanwhile_8cpp.html#0fa35adf4c71fe0204f5c8026cfe150a">StartMeanwhile</a>( );
<a name="l00626"></a>00626       }
<a name="l00627"></a>00627       <span class="keywordflow">else</span>
<a name="l00628"></a>00628       {
<a name="l00629"></a>00629             <span class="comment">// skipped scene!</span>
<a name="l00630"></a>00630             <a class="code" href="Meanwhile_8cpp.html#d9944f75b78ab139547682fa7298a4df">ProcessImplicationsOfMeanwhile</a>();
<a name="l00631"></a>00631             <a class="code" href="Game_01Clock_8cpp.html#cf4980190f40f44eb6f289b4c401a3d5">UnLockPauseState</a>();
<a name="l00632"></a>00632             <a class="code" href="Game_01Clock_8cpp.html#de921a6d608034d1e9af613c36a39bf7">UnPauseGame</a>();
<a name="l00633"></a>00633       }
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00636"></a>00636 
<a name="l00637"></a><a class="code" href="Meanwhile_8h.html#469f9fe7efd5677c25840cf980c1fb55">00637</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Meanwhile_8cpp.html#469f9fe7efd5677c25840cf980c1fb55">AreInMeanwhile</a>( )
<a name="l00638"></a>00638 {
<a name="l00639"></a>00639       <a class="code" href="structSTRATEGICEVENT.html">STRATEGICEVENT</a> *curr;
<a name="l00640"></a>00640 
<a name="l00641"></a>00641       <span class="comment">//KM:  April 6, 1999</span>
<a name="l00642"></a>00642       <span class="comment">//Tactical traversal needs to take precedence over meanwhile events.  When tactically traversing, we</span>
<a name="l00643"></a>00643       <span class="comment">//expect to make it to the other side without interruption.</span>
<a name="l00644"></a>00644       <span class="keywordflow">if</span>( <a class="code" href="PreBattle_01Interface_8cpp.html#b63bc2c71a7f99c29899a3c46180807b">gfTacticalTraversal</a> )
<a name="l00645"></a>00645       {
<a name="l00646"></a>00646             <span class="keywordflow">return</span> FALSE;
<a name="l00647"></a>00647       }
<a name="l00648"></a>00648 
<a name="l00649"></a>00649       <span class="keywordflow">if</span>( <a class="code" href="Meanwhile_8cpp.html#32e5c67eaaf12be98450e586fb4a1928">gfInMeanwhile</a> )
<a name="l00650"></a>00650       {
<a name="l00651"></a>00651             <span class="keywordflow">return</span> TRUE;
<a name="l00652"></a>00652       }
<a name="l00653"></a>00653       <span class="comment">//Check to make sure a meanwhile scene isn't in the event list occurring at the exact same time as this call.  Meanwhile</span>
<a name="l00654"></a>00654       <span class="comment">//scenes have precedence over a new battle if they occur in the same second.</span>
<a name="l00655"></a>00655       curr = <a class="code" href="Game_01Events_8cpp.html#331a04faec0db96ce0e72b2ce68056e9">gpEventList</a>;
<a name="l00656"></a>00656       <span class="keywordflow">while</span>( curr )
<a name="l00657"></a>00657       {
<a name="l00658"></a>00658             <span class="keywordflow">if</span>( curr-&gt;<a class="code" href="structSTRATEGICEVENT.html#4f59caed9200138c8bfbdee6a0754d4f">uiTimeStamp</a> == <a class="code" href="Game_01Clock_8cpp.html#44b17d324c70be123694dba2deca1b89">GetWorldTotalSeconds</a>() )
<a name="l00659"></a>00659             {
<a name="l00660"></a>00660                   <span class="keywordflow">if</span>( curr-&gt;<a class="code" href="structSTRATEGICEVENT.html#97db0880a4e44b57614b8a0a75212dff">ubCallbackID</a> == <a class="code" href="Game_01Event_01Hook_8h.html#08f51f22ad2ed13a25181c26045731106763d600336f4623b92c2a869d5b488c">EVENT_MEANWHILE</a> )
<a name="l00661"></a>00661                   {
<a name="l00662"></a>00662                         <span class="keywordflow">return</span> TRUE;
<a name="l00663"></a>00663                   }
<a name="l00664"></a>00664             }
<a name="l00665"></a>00665             <span class="keywordflow">else</span>
<a name="l00666"></a>00666             {
<a name="l00667"></a>00667                   <span class="keywordflow">return</span> FALSE;
<a name="l00668"></a>00668             }
<a name="l00669"></a>00669             curr = curr-&gt;<a class="code" href="structSTRATEGICEVENT.html#851915c28926997a02d16678d5213711">next</a>;
<a name="l00670"></a>00670       }
<a name="l00671"></a>00671 
<a name="l00672"></a>00672       <span class="keywordflow">return</span>( FALSE );
<a name="l00673"></a>00673 }
<a name="l00674"></a>00674 
<a name="l00675"></a><a class="code" href="Meanwhile_8cpp.html#d9944f75b78ab139547682fa7298a4df">00675</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#d9944f75b78ab139547682fa7298a4df">ProcessImplicationsOfMeanwhile</a>( <span class="keywordtype">void</span> )
<a name="l00676"></a>00676 {
<a name="l00677"></a>00677       <span class="keywordflow">switch</span>( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> )
<a name="l00678"></a>00678       {
<a name="l00679"></a>00679             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a>:
<a name="l00680"></a>00680                   <span class="keywordflow">if</span>( <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a> &gt;= <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87edd3d0b73026f1c7122798d578613aa4575">DIF_LEVEL_HARD</a> )
<a name="l00681"></a>00681                   { <span class="comment">//Wake up the queen earlier to punish the good players!</span>
<a name="l00682"></a>00682                         <a class="code" href="Strategic_01AI_8cpp.html#230d26f39269ac3fbef951d4dda19c6d">ExecuteStrategicAIAction</a>( <a class="code" href="Strategic_01AI_8h.html#b79db5277fcbe695243c6d68332cbf4cc6dfe62b651f77f4837391448d452c04">STRATEGIC_AI_ACTION_WAKE_QUEEN</a>, 0, 0 );
<a name="l00683"></a>00683                   }
<a name="l00684"></a>00684                   <span class="comment">//HandleNPCDoAction( QUEEN, NPC_ACTION_SEND_SOLDIERS_TO_BATTLE_LOCATION, 0 );</span>
<a name="l00685"></a>00685                   <a class="code" href="Strategic_01AI_8cpp.html#230d26f39269ac3fbef951d4dda19c6d">ExecuteStrategicAIAction</a>( <a class="code" href="interface_01Dialogue_8h.html#2ae95ea8e60178fe99580d5142f0ec7eb4d495d93072e5209a8a328bd62c38ba">NPC_ACTION_SEND_SOLDIERS_TO_BATTLE_LOCATION</a>, 0, 0 );
<a name="l00686"></a>00686                   <span class="keywordflow">break</span>;
<a name="l00687"></a>00687             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1276763b4569d319cf68459e27856b2d6c">CAMBRIA_LIBERATED</a>:
<a name="l00688"></a>00688             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128ff81a06855c45f24d8049d50ad987fb">ALMA_LIBERATED</a>:
<a name="l00689"></a>00689             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1248c47c785b1eeb73dad2907b67fd77ed">GRUMM_LIBERATED</a>:
<a name="l00690"></a>00690             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada121fe872649d08bacd239bb47b6cdb628b">CHITZENA_LIBERATED</a>:
<a name="l00691"></a>00691             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada125fa0e5a8a1dc1075ad962b302a0feede">BALIME_LIBERATED</a>:
<a name="l00692"></a>00692                   <a class="code" href="Strategic_01AI_8cpp.html#230d26f39269ac3fbef951d4dda19c6d">ExecuteStrategicAIAction</a>( <a class="code" href="Strategic_01AI_8h.html#b79db5277fcbe695243c6d68332cbf4cc6dfe62b651f77f4837391448d452c04">STRATEGIC_AI_ACTION_WAKE_QUEEN</a>, 0, 0 );
<a name="l00693"></a>00693                   <span class="keywordflow">break</span>;
<a name="l00694"></a>00694             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d29556ae653737931d1a49b105bf84b0">DRASSEN_LIBERATED</a>:
<a name="l00695"></a>00695                   <a class="code" href="Strategic_01AI_8cpp.html#230d26f39269ac3fbef951d4dda19c6d">ExecuteStrategicAIAction</a>( <a class="code" href="Strategic_01AI_8h.html#b79db5277fcbe695243c6d68332cbf4cc6dfe62b651f77f4837391448d452c04">STRATEGIC_AI_ACTION_WAKE_QUEEN</a>, 0, 0 );
<a name="l00696"></a>00696                   <span class="comment">//HandleNPCDoAction( QUEEN, NPC_ACTION_SEND_SOLDIERS_TO_DRASSEN, 0 );</span>
<a name="l00697"></a>00697                   <a class="code" href="Strategic_01AI_8cpp.html#230d26f39269ac3fbef951d4dda19c6d">ExecuteStrategicAIAction</a>( <a class="code" href="interface_01Dialogue_8h.html#2ae95ea8e60178fe99580d5142f0ec7ef8f949ca2f7f72fb9aa87858f80e50f4">NPC_ACTION_SEND_SOLDIERS_TO_DRASSEN</a>, 13, 4 );
<a name="l00698"></a>00698                   <span class="keywordflow">break</span>;
<a name="l00699"></a>00699             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada127beff12c6e5e62da4e2f661e5db280b0">CREATURES</a>:
<a name="l00700"></a>00700                   <span class="comment">// add Rat</span>
<a name="l00701"></a>00701                   <a class="code" href="Interface_01Dialogue_8cpp.html#584dff7dd6df4aa518083d0fe53a8bf5">HandleNPCDoAction</a>( <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>, <a class="code" href="interface_01Dialogue_8h.html#2ae95ea8e60178fe99580d5142f0ec7e5d94ee832c0eb8f7ffeaaff726d714cf">NPC_ACTION_ADD_RAT</a>, 0 );
<a name="l00702"></a>00702                   <span class="keywordflow">break</span>;
<a name="l00703"></a>00703             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12ff0c681e1645a1473be2b47e8de07644">AWOL_SCIENTIST</a>:
<a name="l00704"></a>00704                   {
<a name="l00705"></a>00705                         <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sSectorX, sSectorY;
<a name="l00706"></a>00706 
<a name="l00707"></a>00707                         <a class="code" href="Quests_8cpp.html#b15ae2863af85cdf282fef27e4e33efb">StartQuest</a>( <a class="code" href="Quests_8h.html#2f2591166460d6d958c50f3317939e229bd5ebb753fd400afa67d31f642f4d21">QUEST_FIND_SCIENTIST</a>, -1, -1 );
<a name="l00708"></a>00708                         <span class="comment">// place Madlab and robot!</span>
<a name="l00709"></a>00709                         <span class="keywordflow">if</span> ( <a class="code" href="Campaign_01Types_8h.html#d83c6f699f17a47cf6a662c91d959126">SectorInfo</a>[ SECTOR( 7, MAP_ROW_H ) ].uiFlags &amp; SF_USE_ALTERNATE_MAP )
<a name="l00710"></a>00710                         {
<a name="l00711"></a>00711                               sSectorX = 7;
<a name="l00712"></a>00712                               sSectorY = MAP_ROW_H;
<a name="l00713"></a>00713                         }
<a name="l00714"></a>00714                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="Campaign_01Types_8h.html#d83c6f699f17a47cf6a662c91d959126">SectorInfo</a>[ SECTOR( 16, MAP_ROW_H ) ].uiFlags &amp; SF_USE_ALTERNATE_MAP )
<a name="l00715"></a>00715                         {
<a name="l00716"></a>00716                               sSectorX = 16;
<a name="l00717"></a>00717                               sSectorY = MAP_ROW_H;
<a name="l00718"></a>00718                         }
<a name="l00719"></a>00719                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="Campaign_01Types_8h.html#d83c6f699f17a47cf6a662c91d959126">SectorInfo</a>[ SECTOR( 11, MAP_ROW_I ) ].uiFlags &amp; SF_USE_ALTERNATE_MAP )
<a name="l00720"></a>00720                         {
<a name="l00721"></a>00721                               sSectorX = 11;
<a name="l00722"></a>00722                               sSectorY = MAP_ROW_I;
<a name="l00723"></a>00723                         }
<a name="l00724"></a>00724                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="Campaign_01Types_8h.html#d83c6f699f17a47cf6a662c91d959126">SectorInfo</a>[ SECTOR( 4, MAP_ROW_E ) ].uiFlags &amp; SF_USE_ALTERNATE_MAP )
<a name="l00725"></a>00725                         {
<a name="l00726"></a>00726                               sSectorX = 4;
<a name="l00727"></a>00727                               sSectorY = MAP_ROW_E;
<a name="l00728"></a>00728                         }
<a name="l00729"></a>00729                         <span class="keywordflow">else</span>
<a name="l00730"></a>00730                         {
<a name="l00731"></a>00731                               Assert( 0 );
<a name="l00732"></a>00732                         }
<a name="l00733"></a>00733                         <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa1e3e70fd0c3400c224c8acd33955e52e6">MADLAB</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a> = sSectorX;
<a name="l00734"></a>00734                         <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa1e3e70fd0c3400c224c8acd33955e52e6">MADLAB</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a> = sSectorY;
<a name="l00735"></a>00735                         <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa1e3e70fd0c3400c224c8acd33955e52e6">MADLAB</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a> = 0;
<a name="l00736"></a>00736 
<a name="l00737"></a>00737                         <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa1abea9be20feeb2150a8ffbd68625beb4">ROBOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a> = sSectorX;
<a name="l00738"></a>00738                         <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa1abea9be20feeb2150a8ffbd68625beb4">ROBOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a> = sSectorY;
<a name="l00739"></a>00739                         <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa1abea9be20feeb2150a8ffbd68625beb4">ROBOT</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a> = 0;
<a name="l00740"></a>00740                   }
<a name="l00741"></a>00741                   <span class="keywordflow">break</span>;
<a name="l00742"></a>00742             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12cdcb1756cf7e52c0aade4438797b161b">NW_SAM</a>:
<a name="l00743"></a>00743                   <a class="code" href="Strategic_01AI_8cpp.html#230d26f39269ac3fbef951d4dda19c6d">ExecuteStrategicAIAction</a>( <a class="code" href="interface_01Dialogue_8h.html#2ae95ea8e60178fe99580d5142f0ec7e9f13da050b090138638c57e3c03a24de">NPC_ACTION_SEND_TROOPS_TO_SAM</a>, SAM_1_X, SAM_1_Y );
<a name="l00744"></a>00744                   <span class="keywordflow">break</span>;
<a name="l00745"></a>00745             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d6942d4b65256c18df3f55a11076a0c4">NE_SAM</a>:
<a name="l00746"></a>00746                   <a class="code" href="Strategic_01AI_8cpp.html#230d26f39269ac3fbef951d4dda19c6d">ExecuteStrategicAIAction</a>( <a class="code" href="interface_01Dialogue_8h.html#2ae95ea8e60178fe99580d5142f0ec7e9f13da050b090138638c57e3c03a24de">NPC_ACTION_SEND_TROOPS_TO_SAM</a>, SAM_2_X, SAM_2_Y );
<a name="l00747"></a>00747                   <span class="keywordflow">break</span>;
<a name="l00748"></a>00748             <span class="keywordflow">case</span> <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada123d86ab30202124b1d6691aa9f13e5eb2">CENTRAL_SAM</a>:
<a name="l00749"></a>00749                   <a class="code" href="Strategic_01AI_8cpp.html#230d26f39269ac3fbef951d4dda19c6d">ExecuteStrategicAIAction</a>( <a class="code" href="interface_01Dialogue_8h.html#2ae95ea8e60178fe99580d5142f0ec7e9f13da050b090138638c57e3c03a24de">NPC_ACTION_SEND_TROOPS_TO_SAM</a>, SAM_3_X, SAM_3_X );
<a name="l00750"></a>00750                   <span class="keywordflow">break</span>;
<a name="l00751"></a>00751                   
<a name="l00752"></a>00752             <span class="keywordflow">default</span>:
<a name="l00753"></a>00753                   <span class="keywordflow">break</span>;
<a name="l00754"></a>00754       }
<a name="l00755"></a>00755 }
<a name="l00756"></a>00756 
<a name="l00757"></a><a class="code" href="Meanwhile_8h.html#4906061e430565c5d67f35ad7952ea60">00757</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#4906061e430565c5d67f35ad7952ea60">EndMeanwhile</a>( )
<a name="l00758"></a>00758 {
<a name="l00759"></a>00759       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>            cnt;
<a name="l00760"></a>00760       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>       ubProfile;
<a name="l00761"></a>00761 
<a name="l00762"></a>00762       <a class="code" href="Dialogue_01Control_8cpp.html#860770d61d947eadbcabcb0add8bacbe">EmptyDialogueQueue</a>();
<a name="l00763"></a>00763       <a class="code" href="Meanwhile_8cpp.html#d9944f75b78ab139547682fa7298a4df">ProcessImplicationsOfMeanwhile</a>();
<a name="l00764"></a>00764       <a class="code" href="GameSettings_8cpp.html#eb60bb2a974b1ffc49bebe943a47bbbe">SetMeanwhileSceneSeen</a>( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> );
<a name="l00765"></a>00765 
<a name="l00766"></a>00766       <a class="code" href="Meanwhile_8cpp.html#32e5c67eaaf12be98450e586fb4a1928">gfInMeanwhile</a> = FALSE;
<a name="l00767"></a>00767       <a class="code" href="Dialogue_01Control_8cpp.html#802eda027df54e41eebb6020bfe41b46">giNPCReferenceCount</a> = 0;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769       <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#89eb954f99ad4f28b84d7cf675c8ed32">uiFlags</a> &amp;= (~ENGAGED_IN_CONV );
<a name="l00770"></a>00770 
<a name="l00771"></a>00771       <a class="code" href="Game_01Clock_8cpp.html#cf4980190f40f44eb6f289b4c401a3d5">UnLockPauseState</a>();
<a name="l00772"></a>00772       <a class="code" href="Game_01Clock_8cpp.html#de921a6d608034d1e9af613c36a39bf7">UnPauseGame</a>();
<a name="l00773"></a>00773 
<a name="l00774"></a>00774   <span class="comment">// ATE: Make sure!</span>
<a name="l00775"></a>00775   <a class="code" href="Map_01Screen_01Interface_8cpp.html#b734f897edde5f81b24e5c5f1adeb612">TurnOffSectorLocator</a>();
<a name="l00776"></a>00776 
<a name="l00777"></a>00777       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> != <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a> )
<a name="l00778"></a>00778       {
<a name="l00779"></a>00779             <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#89eb954f99ad4f28b84d7cf675c8ed32">uiFlags</a> &amp;= (~SHOW_ALL_MERCS);
<a name="l00780"></a>00780 
<a name="l00781"></a>00781             <span class="comment">// OK, load old sector again.....</span>
<a name="l00782"></a>00782             <a class="code" href="Fade_01Screen_8cpp.html#122853961c3e0edb0912d78055adda93">FadeOutNextFrame</a>( );
<a name="l00783"></a>00783 
<a name="l00784"></a>00784             <span class="comment">// Load new map....</span>
<a name="l00785"></a>00785             <a class="code" href="Fade_01Screen_8cpp.html#94519d7763062ac6c03c761cbf2af2e3">gFadeOutDoneCallback</a> = <a class="code" href="Meanwhile_8cpp.html#2ca39751ebb9d3ea383bbc35f1a238c4">DoneFadeOutMeanwhileOnceDone</a>;
<a name="l00786"></a>00786       }
<a name="l00787"></a>00787       <span class="keywordflow">else</span>
<a name="l00788"></a>00788       {
<a name="l00789"></a>00789             <span class="comment">// We leave this sector open for our POWs to escape!</span>
<a name="l00790"></a>00790             <span class="comment">// Set music mode to enemy present!</span>
<a name="l00791"></a>00791             <a class="code" href="Music_01Control_8cpp.html#6048469cd3be966558a4ba87cbbf41ef">SetMusicMode</a>( <a class="code" href="Music_01Control_8h.html#537bb0477379f935f13aee9969289d1fb3b52e76f6bb01ef84e4d97f3865a9a6">MUSIC_TACTICAL_ENEMYPRESENT</a> );
<a name="l00792"></a>00792 
<a name="l00793"></a>00793     <span class="comment">// ATE: Restore people to saved positions...</span>
<a name="l00794"></a>00794         <span class="comment">// OK, restore NPC save info...</span>
<a name="l00795"></a>00795         <span class="keywordflow">for</span> ( cnt = 0; cnt &lt; <a class="code" href="Meanwhile_8cpp.html#cb817875ad808b37e91e01aeb769ad96">guiNumNPCSaves</a>; cnt++ )
<a name="l00796"></a>00796         {
<a name="l00797"></a>00797               ubProfile = <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].ubProfile;
<a name="l00798"></a>00798 
<a name="l00799"></a>00799               <span class="keywordflow">if</span> ( ubProfile != NO_PROFILE )
<a name="l00800"></a>00800               {
<a name="l00801"></a>00801                     <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ].sSectorX = <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].sX;
<a name="l00802"></a>00802                     <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a> = <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].<a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">sY</a>;
<a name="l00803"></a>00803                     <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].sZ;
<a name="l00804"></a>00804                     <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ].<a class="code" href="structMERCPROFILESTRUCT.html#49b76d0b059c1acd5618a7af884a0edb">sGridNo</a>  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].sGridNo;
<a name="l00805"></a>00805 
<a name="l00806"></a>00806                     <span class="comment">// Ensure NPC files loaded...</span>
<a name="l00807"></a>00807                     <a class="code" href="NPC_8cpp.html#8ec5f7422162c6ceb2d0ce53c7460c9f">ReloadQuoteFile</a>( ubProfile );
<a name="l00808"></a>00808               }
<a name="l00809"></a>00809         }
<a name="l00810"></a>00810 
<a name="l00811"></a>00811       }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813 }
<a name="l00814"></a>00814 
<a name="l00815"></a><a class="code" href="Meanwhile_8cpp.html#2ca39751ebb9d3ea383bbc35f1a238c4">00815</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#2ca39751ebb9d3ea383bbc35f1a238c4">DoneFadeOutMeanwhileOnceDone</a>( )
<a name="l00816"></a>00816 {
<a name="l00817"></a>00817       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>            cnt;
<a name="l00818"></a>00818       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>       ubProfile;
<a name="l00819"></a>00819 
<a name="l00820"></a>00820       <span class="comment">// OK, insertion data found, enter sector!</span>
<a name="l00821"></a>00821       <a class="code" href="Meanwhile_8cpp.html#07d6936f4a7a98eba729fd998d6cbaf7">gfReloadingScreenFromMeanwhile</a> = TRUE;
<a name="l00822"></a>00822 
<a name="l00823"></a>00823       
<a name="l00824"></a>00824       <span class="keywordflow">if</span>( <a class="code" href="Meanwhile_8cpp.html#e6c8e29bafe7ff2eab9e9d942dc3e2b5">gfWorldWasLoaded</a> )
<a name="l00825"></a>00825       {
<a name="l00826"></a>00826             <a class="code" href="strategicmap_8cpp.html#ed1731dd2cd018974e5f92118e13c7a1">SetCurrentWorldSector</a>( <a class="code" href="Meanwhile_8cpp.html#e7b564aafa98f2c11525c252b3d3948f">gsOldSectorX</a>, <a class="code" href="Meanwhile_8cpp.html#1000f751ae234aacf3ea95a1160918ec">gsOldSectorY</a>, (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Meanwhile_8cpp.html#442c942b39de522e23de87d1882dbf28">gsOldSectorZ</a> );
<a name="l00827"></a>00827 
<a name="l00828"></a>00828       <a class="code" href="Squads_8cpp.html#c89f5487d293858cf1b67f7b75421acf">ExamineCurrentSquadLights</a>( );
<a name="l00829"></a>00829       }     
<a name="l00830"></a>00830       <span class="keywordflow">else</span>
<a name="l00831"></a>00831       {
<a name="l00832"></a>00832             <a class="code" href="worlddef_8cpp.html#277660833023d16be35705160e4f29e3">TrashWorld</a>( );
<a name="l00833"></a>00833             <span class="comment">// NB no world is loaded!</span>
<a name="l00834"></a>00834             <a class="code" href="strategicmap_8cpp.html#49d9aed144a633fda4ba1990f002d703">gWorldSectorX</a> = 0;
<a name="l00835"></a>00835             <a class="code" href="strategicmap_8cpp.html#ea322310ced0e35ee18a2ee7b32aac5b">gWorldSectorY</a> = 0;
<a name="l00836"></a>00836             <a class="code" href="strategicmap_8cpp.html#da715721a8ceedd42acf6ddb33e63ce0">gbWorldSectorZ</a> = -1;
<a name="l00837"></a>00837       }
<a name="l00838"></a>00838 
<a name="l00839"></a>00839       <a class="code" href="mapscreen_8cpp.html#62df7d90919403ca38b1585753f9bf7a">ChangeSelectedMapSector</a>( <a class="code" href="Meanwhile_8cpp.html#f3a01fddf0281d91dff819c7a2df88d9">gsOldSelectedSectorX</a>, <a class="code" href="Meanwhile_8cpp.html#13d0544b8541c9f8984c797097ba89e0">gsOldSelectedSectorY</a>, (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) <a class="code" href="Meanwhile_8cpp.html#307369c57f19a928b693ee052be95eaf">gsOldSelectedSectorZ</a> );
<a name="l00840"></a>00840 
<a name="l00841"></a>00841       <a class="code" href="Meanwhile_8cpp.html#07d6936f4a7a98eba729fd998d6cbaf7">gfReloadingScreenFromMeanwhile</a> = FALSE;
<a name="l00842"></a>00842 
<a name="l00843"></a>00843       <span class="comment">// OK, restore NPC save info...</span>
<a name="l00844"></a>00844       <span class="keywordflow">for</span> ( cnt = 0; cnt &lt; <a class="code" href="Meanwhile_8cpp.html#cb817875ad808b37e91e01aeb769ad96">guiNumNPCSaves</a>; cnt++ )
<a name="l00845"></a>00845       {
<a name="l00846"></a>00846             ubProfile = <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].ubProfile;
<a name="l00847"></a>00847 
<a name="l00848"></a>00848             <span class="keywordflow">if</span> ( ubProfile != NO_PROFILE )
<a name="l00849"></a>00849             {
<a name="l00850"></a>00850                   <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ].sSectorX = <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].sX;
<a name="l00851"></a>00851                   <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a> = <a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].<a class="code" href="structNPC__SAVE__INFO.html#77488385d153c623634f4e8f319f5db9">sY</a>;
<a name="l00852"></a>00852                   <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].sZ;
<a name="l00853"></a>00853                   <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ].<a class="code" href="structMERCPROFILESTRUCT.html#49b76d0b059c1acd5618a7af884a0edb">sGridNo</a>  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Meanwhile_8cpp.html#c81314b2a6d11fabc2c6c652175ffd82">gNPCSaveData</a>[ cnt ].sGridNo;
<a name="l00854"></a>00854 
<a name="l00855"></a>00855                   <span class="comment">// Ensure NPC files loaded...</span>
<a name="l00856"></a>00856                   <a class="code" href="NPC_8cpp.html#8ec5f7422162c6ceb2d0ce53c7460c9f">ReloadQuoteFile</a>( ubProfile );
<a name="l00857"></a>00857             }
<a name="l00858"></a>00858       }
<a name="l00859"></a>00859 
<a name="l00860"></a>00860       <a class="code" href="Fade_01Screen_8cpp.html#cb4087996c1c2bd1383f2b7224505fdc">gFadeInDoneCallback</a> = <a class="code" href="Meanwhile_8cpp.html#7463e59dabed5d72c65cec7f0a2f31a2">DoneFadeInMeanwhileOnceDone</a>;
<a name="l00861"></a>00861 
<a name="l00862"></a>00862       <span class="comment">// OK, based on screen we were in....</span>
<a name="l00863"></a>00863       <span class="keywordflow">switch</span>( <a class="code" href="Meanwhile_8cpp.html#70fceee8a8129c0dbbebbfa6d7b0527e">guiOldScreen</a> )
<a name="l00864"></a>00864       {
<a name="l00865"></a>00865             <span class="keywordflow">case</span> <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf26f9c31d9e3c6ef2f0d8e4917d387b871">MAP_SCREEN</a>:
<a name="l00866"></a>00866                   <a class="code" href="gamescreen_8cpp.html#91036b4d0b9a861fdc906f07f19d35da">InternalLeaveTacticalScreen</a>( <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf26f9c31d9e3c6ef2f0d8e4917d387b871">MAP_SCREEN</a> );
<a name="l00867"></a>00867                   <span class="comment">//gfEnteringMapScreen = TRUE;</span>
<a name="l00868"></a>00868                   <span class="keywordflow">break</span>;
<a name="l00869"></a>00869 
<a name="l00870"></a>00870             <span class="keywordflow">case</span> <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf29873e16bc1530dedb416060abbeea6d0">GAME_SCREEN</a>:
<a name="l00871"></a>00871                   <span class="comment">// restore old interface panel flag</span>
<a name="l00872"></a>00872                   <a class="code" href="Interface_8cpp.html#edc512850cb730e5501105e3de43b213">SetCurrentInterfacePanel</a>( (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Interface_8h.html#366cb4f305f8652d6d094e461a23d775565a7cf4953add143c5fea45076abc43">TEAM_PANEL</a> );
<a name="l00873"></a>00873                   <span class="keywordflow">break</span>;
<a name="l00874"></a>00874       }
<a name="l00875"></a>00875 
<a name="l00876"></a>00876       <a class="code" href="Fade_01Screen_8cpp.html#c34fbd8d879c4be1ffff9e183b20fd8c">FadeInNextFrame</a>( );
<a name="l00877"></a>00877 
<a name="l00878"></a>00878 }
<a name="l00879"></a>00879 
<a name="l00880"></a><a class="code" href="Meanwhile_8cpp.html#7463e59dabed5d72c65cec7f0a2f31a2">00880</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#7463e59dabed5d72c65cec7f0a2f31a2">DoneFadeInMeanwhileOnceDone</a>( )
<a name="l00881"></a>00881 {
<a name="l00882"></a>00882       
<a name="l00883"></a>00883 }
<a name="l00884"></a>00884 
<a name="l00885"></a><a class="code" href="Meanwhile_8cpp.html#af9dff30deb6d6bf243f23bef08917e6">00885</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#af9dff30deb6d6bf243f23bef08917e6">LocateMeanWhileGrid</a>( <span class="keywordtype">void</span> )
<a name="l00886"></a>00886 {
<a name="l00887"></a>00887       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sGridNo = 0;
<a name="l00888"></a>00888 
<a name="l00889"></a>00889       <span class="comment">// go to the approp. gridno</span>
<a name="l00890"></a>00890       sGridNo = <a class="code" href="Meanwhile_8cpp.html#b076cfd0ac2b7f344395fb21c4b924fc">gusMeanWhileGridNo</a>[ <a class="code" href="Meanwhile_8cpp.html#c87b1ea8eadfa64e7b825d211f41a64b">ubCurrentMeanWhileId</a> ];
<a name="l00891"></a>00891 
<a name="l00892"></a>00892       <a class="code" href="gamescreen_8cpp.html#cd1695c871c6118fa171244681bd0531">InternalLocateGridNo</a>( sGridNo, TRUE );
<a name="l00893"></a>00893 
<a name="l00894"></a>00894       <span class="keywordflow">return</span>;
<a name="l00895"></a>00895 }
<a name="l00896"></a>00896 
<a name="l00897"></a><a class="code" href="Meanwhile_8h.html#c75579aa592703d5a1fb85355be92a0c">00897</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#c75579aa592703d5a1fb85355be92a0c">LocateToMeanwhileCharacter</a>( )
<a name="l00898"></a>00898 {
<a name="l00899"></a>00899       <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l00900"></a>00900 
<a name="l00901"></a>00901       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#32e5c67eaaf12be98450e586fb4a1928">gfInMeanwhile</a> )
<a name="l00902"></a>00902       {
<a name="l00903"></a>00903             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Profile_8cpp.html#2a54c4a06df8ed61529646f23682ef9d">FindSoldierByProfileID</a>( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a>, FALSE );
<a name="l00904"></a>00904 
<a name="l00905"></a>00905             <span class="keywordflow">if</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> != NULL )
<a name="l00906"></a>00906             {
<a name="l00907"></a>00907                   <a class="code" href="Overhead_8cpp.html#c813c6ef53a718cac0170274abda7593">LocateSoldier</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#18aef170576da81b10d00e7b6cd3627b">ubID</a>, FALSE );
<a name="l00908"></a>00908             }
<a name="l00909"></a>00909       }
<a name="l00910"></a>00910 }
<a name="l00911"></a>00911 
<a name="l00912"></a>00912 
<a name="l00913"></a><a class="code" href="Meanwhile_8h.html#0575dc7cf0ca7dc897ee0a74169a54c5">00913</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Meanwhile_8cpp.html#0575dc7cf0ca7dc897ee0a74169a54c5">AreReloadingFromMeanwhile</a>( )
<a name="l00914"></a>00914 {
<a name="l00915"></a>00915       <span class="keywordflow">return</span>( <a class="code" href="Meanwhile_8cpp.html#07d6936f4a7a98eba729fd998d6cbaf7">gfReloadingScreenFromMeanwhile</a> );
<a name="l00916"></a>00916 }
<a name="l00917"></a>00917 
<a name="l00918"></a><a class="code" href="Meanwhile_8h.html#e6e124f29bc5117d6b2ec9c540ae8c60">00918</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> <a class="code" href="Meanwhile_8cpp.html#e6e124f29bc5117d6b2ec9c540ae8c60">GetMeanwhileID</a>( )
<a name="l00919"></a>00919 {
<a name="l00920"></a>00920       <span class="keywordflow">return</span>( <a class="code" href="Meanwhile_8cpp.html#745d0431d8594106910050555032db41">gCurrentMeanwhileDef</a>.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> );
<a name="l00921"></a>00921 }
<a name="l00922"></a>00922 
<a name="l00923"></a>00923 
<a name="l00924"></a><a class="code" href="Meanwhile_8h.html#6421bb08583e8264f79e5cba2a2d545d">00924</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#6421bb08583e8264f79e5cba2a2d545d">HandleCreatureRelease</a>( <span class="keywordtype">void</span> )
<a name="l00925"></a>00925 {
<a name="l00926"></a>00926       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l00927"></a>00927       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l00928"></a>00928       
<a name="l00929"></a>00929       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l00930"></a>00930       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l00931"></a>00931       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l00932"></a>00932       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l00933"></a>00933 
<a name="l00934"></a>00934       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 5;
<a name="l00935"></a>00935       
<a name="l00936"></a>00936       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada127beff12c6e5e62da4e2f661e5db280b0">CREATURES</a>;
<a name="l00937"></a>00937 
<a name="l00938"></a>00938       <span class="comment">// schedule the event</span>
<a name="l00939"></a>00939       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l00940"></a>00940 }
<a name="l00941"></a>00941 
<a name="l00942"></a>00942 
<a name="l00943"></a><a class="code" href="Meanwhile_8h.html#c18f665beffee0dc16b42dc13050e5b9">00943</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#c18f665beffee0dc16b42dc13050e5b9">HandleMeanWhileEventPostingForTownLiberation</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> bTownId )
<a name="l00944"></a>00944 {
<a name="l00945"></a>00945       <span class="comment">// post event for meanwhile whithin the next 6 hours if it still will be daylight, otherwise the next morning</span>
<a name="l00946"></a>00946       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l00947"></a>00947       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l00948"></a>00948       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l00949"></a>00949       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fHandled = FALSE;
<a name="l00950"></a>00950 
<a name="l00951"></a>00951       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l00952"></a>00952       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l00953"></a>00953       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l00954"></a>00954       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 5;
<a name="l00957"></a>00957       
<a name="l00958"></a>00958       <span class="comment">// which town iberated?</span>
<a name="l00959"></a>00959       <span class="keywordflow">switch</span>( bTownId )
<a name="l00960"></a>00960       {
<a name="l00961"></a>00961             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe1052d90315dc5189006a917572886dd5919">DRASSEN</a>:
<a name="l00962"></a>00962                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d29556ae653737931d1a49b105bf84b0">DRASSEN_LIBERATED</a>;
<a name="l00963"></a>00963                   fHandled = TRUE;
<a name="l00964"></a>00964                   <span class="keywordflow">break</span>;
<a name="l00965"></a>00965             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe105457ae8d0acf7ebe5ad016ecdf6020b3e">CAMBRIA</a>:
<a name="l00966"></a>00966                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1276763b4569d319cf68459e27856b2d6c">CAMBRIA_LIBERATED</a>;
<a name="l00967"></a>00967                   fHandled = TRUE;
<a name="l00968"></a>00968                   <span class="keywordflow">break</span>;
<a name="l00969"></a>00969             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe105b27f427a025e60b9feb35edaa5556f63">ALMA</a>:
<a name="l00970"></a>00970                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128ff81a06855c45f24d8049d50ad987fb">ALMA_LIBERATED</a>;
<a name="l00971"></a>00971                   fHandled = TRUE;
<a name="l00972"></a>00972                   <span class="keywordflow">break</span>;
<a name="l00973"></a>00973             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe10582fb82fae08599485a465d9f342a0e80">GRUMM</a>:
<a name="l00974"></a>00974                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada1248c47c785b1eeb73dad2907b67fd77ed">GRUMM_LIBERATED</a>;
<a name="l00975"></a>00975                   fHandled = TRUE;
<a name="l00976"></a>00976                   <span class="keywordflow">break</span>;
<a name="l00977"></a>00977             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe10577a4855ca65fb8eae6e8e89bef607477">CHITZENA</a>:
<a name="l00978"></a>00978                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada121fe872649d08bacd239bb47b6cdb628b">CHITZENA_LIBERATED</a>;
<a name="l00979"></a>00979                   fHandled = TRUE;
<a name="l00980"></a>00980                   <span class="keywordflow">break</span>;
<a name="l00981"></a>00981             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe105e70227c42a462ac01e06b19638569574">BALIME</a>:
<a name="l00982"></a>00982                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada125fa0e5a8a1dc1075ad962b302a0feede">BALIME_LIBERATED</a>;
<a name="l00983"></a>00983                   fHandled = TRUE;
<a name="l00984"></a>00984                   <span class="keywordflow">break</span>;
<a name="l00985"></a>00985       }
<a name="l00986"></a>00986 
<a name="l00987"></a>00987       <span class="keywordflow">if</span>( fHandled )
<a name="l00988"></a>00988       {
<a name="l00989"></a>00989             MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = ubId;
<a name="l00990"></a>00990 
<a name="l00991"></a>00991             <span class="comment">// schedule the event</span>
<a name="l00992"></a>00992             <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l00993"></a>00993       }
<a name="l00994"></a>00994 }     
<a name="l00995"></a>00995 
<a name="l00996"></a><a class="code" href="Meanwhile_8h.html#6a483002df0798137c5792ac5d692db6">00996</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#6a483002df0798137c5792ac5d692db6">HandleMeanWhileEventPostingForTownLoss</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> bTownId )
<a name="l00997"></a>00997 {     
<a name="l00998"></a>00998       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l00999"></a>00999       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01000"></a>01000 
<a name="l01001"></a>01001       <span class="comment">// make sure scene hasn't been used before</span>
<a name="l01002"></a>01002       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f8ff4ee76992d1ff1a69dced984d4c3f">LOST_TOWN</a> ) )
<a name="l01003"></a>01003       {
<a name="l01004"></a>01004             <span class="keywordflow">return</span>;
<a name="l01005"></a>01005       }
<a name="l01006"></a>01006 
<a name="l01007"></a>01007       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l01008"></a>01008       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l01009"></a>01009       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01010"></a>01010       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01011"></a>01011 
<a name="l01012"></a>01012       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 5;
<a name="l01013"></a>01013       
<a name="l01014"></a>01014       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f8ff4ee76992d1ff1a69dced984d4c3f">LOST_TOWN</a>;
<a name="l01015"></a>01015 
<a name="l01016"></a>01016       <span class="comment">// schedule the event</span>
<a name="l01017"></a>01017       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01018"></a>01018 }
<a name="l01019"></a>01019 
<a name="l01020"></a><a class="code" href="Meanwhile_8h.html#f51bcc702ecaec75b92a5fb0c441f710">01020</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#cf58a4d419caf72c444dd6a567c44217">HandleMeanWhileEventPostingForSAMLiberation</a>( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bSamId )
<a name="l01021"></a>01021 {
<a name="l01022"></a>01022       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l01023"></a>01023       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01024"></a>01024       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l01025"></a>01025       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fHandled = FALSE;
<a name="l01026"></a>01026 
<a name="l01027"></a>01027       <span class="keywordflow">if</span> ( bSamId == -1 )
<a name="l01028"></a>01028       {
<a name="l01029"></a>01029             <span class="comment">// invalid parameter!</span>
<a name="l01030"></a>01030             <span class="keywordflow">return</span>;
<a name="l01031"></a>01031       }
<a name="l01032"></a>01032       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( bSamId == 3 )
<a name="l01033"></a>01033       {
<a name="l01034"></a>01034             <span class="comment">// no meanwhile scene for this SAM site</span>
<a name="l01035"></a>01035             <span class="keywordflow">return</span>;
<a name="l01036"></a>01036       }
<a name="l01037"></a>01037 
<a name="l01038"></a>01038       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l01039"></a>01039       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l01040"></a>01040       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01041"></a>01041       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01042"></a>01042       
<a name="l01043"></a>01043       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 5;
<a name="l01044"></a>01044       
<a name="l01045"></a>01045       <span class="comment">// which SAM iberated?</span>
<a name="l01046"></a>01046       <span class="keywordflow">switch</span>( bSamId )
<a name="l01047"></a>01047       {
<a name="l01048"></a>01048             <span class="keywordflow">case</span> 0:
<a name="l01049"></a>01049                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12cdcb1756cf7e52c0aade4438797b161b">NW_SAM</a>;
<a name="l01050"></a>01050                   fHandled = TRUE;
<a name="l01051"></a>01051                   <span class="keywordflow">break</span>;
<a name="l01052"></a>01052             <span class="keywordflow">case</span> 1:
<a name="l01053"></a>01053                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12d6942d4b65256c18df3f55a11076a0c4">NE_SAM</a>;
<a name="l01054"></a>01054                   fHandled = TRUE;
<a name="l01055"></a>01055                   <span class="keywordflow">break</span>;
<a name="l01056"></a>01056             <span class="keywordflow">case</span> 2:
<a name="l01057"></a>01057                   ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada123d86ab30202124b1d6691aa9f13e5eb2">CENTRAL_SAM</a>;
<a name="l01058"></a>01058                   fHandled = TRUE;
<a name="l01059"></a>01059                   <span class="keywordflow">break</span>;
<a name="l01060"></a>01060             <span class="keywordflow">default</span>:
<a name="l01061"></a>01061                   <span class="comment">// wtf?</span>
<a name="l01062"></a>01062                   <span class="keywordflow">break</span>;
<a name="l01063"></a>01063       }
<a name="l01064"></a>01064 
<a name="l01065"></a>01065       <span class="keywordflow">if</span>( fHandled )
<a name="l01066"></a>01066       {
<a name="l01067"></a>01067             MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = ubId;
<a name="l01068"></a>01068 
<a name="l01069"></a>01069             <span class="comment">// schedule the event</span>
<a name="l01070"></a>01070             <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01071"></a>01071       }
<a name="l01072"></a>01072 
<a name="l01073"></a>01073       
<a name="l01074"></a>01074 }
<a name="l01075"></a>01075 
<a name="l01076"></a><a class="code" href="Meanwhile_8h.html#abb0c81349475ca3ce3ca58185d27646">01076</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#abb0c81349475ca3ce3ca58185d27646">HandleFlowersMeanwhileScene</a>( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bTimeCode )
<a name="l01077"></a>01077 {
<a name="l01078"></a>01078       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l01079"></a>01079       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01080"></a>01080       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l01081"></a>01081 
<a name="l01082"></a>01082       <span class="comment">// make sure scene hasn't been used before</span>
<a name="l01083"></a>01083       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12db78f45746f3e3732bf5d7c9d4c9966d">FLOWERS</a> ) )
<a name="l01084"></a>01084       {
<a name="l01085"></a>01085             <span class="keywordflow">return</span>;
<a name="l01086"></a>01086       }
<a name="l01087"></a>01087 
<a name="l01088"></a>01088       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l01089"></a>01089       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l01090"></a>01090       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01091"></a>01091       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01092"></a>01092 
<a name="l01093"></a>01093       <span class="comment">// time delay should be based on time code, 0 next day, 1 seeral days (random)</span>
<a name="l01094"></a>01094       <span class="keywordflow">if</span> ( bTimeCode == 0 )
<a name="l01095"></a>01095       {
<a name="l01096"></a>01096             <span class="comment">// 20-24 hours later</span>
<a name="l01097"></a>01097             uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 60 * ( 20 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 5 ) );
<a name="l01098"></a>01098       }
<a name="l01099"></a>01099       <span class="keywordflow">else</span>
<a name="l01100"></a>01100       {
<a name="l01101"></a>01101             <span class="comment">// 2-4 days later</span>
<a name="l01102"></a>01102             uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 60 * ( 24 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 48 ) );
<a name="l01103"></a>01103       }
<a name="l01104"></a>01104       
<a name="l01105"></a>01105       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12db78f45746f3e3732bf5d7c9d4c9966d">FLOWERS</a>;
<a name="l01106"></a>01106 
<a name="l01107"></a>01107       <span class="comment">// schedule the event</span>
<a name="l01108"></a>01108       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01109"></a>01109 }
<a name="l01110"></a>01110 
<a name="l01111"></a><a class="code" href="Meanwhile_8h.html#20c35ef3752cc2292b227e350185e4d8">01111</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#20c35ef3752cc2292b227e350185e4d8">HandleOutskirtsOfMedunaMeanwhileScene</a>( <span class="keywordtype">void</span> )
<a name="l01112"></a>01112 {
<a name="l01113"></a>01113       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l01114"></a>01114       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01115"></a>01115       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l01116"></a>01116 
<a name="l01117"></a>01117       <span class="comment">// make sure scene hasn't been used before</span>
<a name="l01118"></a>01118       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12de84dd0a8c461b54c07c324e7d070873">OUTSKIRTS_MEDUNA</a> ) )
<a name="l01119"></a>01119       {
<a name="l01120"></a>01120             <span class="keywordflow">return</span>;
<a name="l01121"></a>01121       }
<a name="l01122"></a>01122 
<a name="l01123"></a>01123       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l01124"></a>01124       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l01125"></a>01125       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01126"></a>01126       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01127"></a>01127 
<a name="l01128"></a>01128       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 5;
<a name="l01129"></a>01129       
<a name="l01130"></a>01130       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12de84dd0a8c461b54c07c324e7d070873">OUTSKIRTS_MEDUNA</a>;
<a name="l01131"></a>01131 
<a name="l01132"></a>01132       <span class="comment">// schedule the event</span>
<a name="l01133"></a>01133       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01134"></a>01134 }
<a name="l01135"></a>01135 
<a name="l01136"></a><a class="code" href="Meanwhile_8h.html#bbfe7221dafc67216c43df22b0341f9c">01136</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#bbfe7221dafc67216c43df22b0341f9c">HandleKillChopperMeanwhileScene</a>( <span class="keywordtype">void</span> )
<a name="l01137"></a>01137 {
<a name="l01138"></a>01138       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l01139"></a>01139       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01140"></a>01140       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l01141"></a>01141 
<a name="l01142"></a>01142       <span class="comment">// make sure scene hasn't been used before</span>
<a name="l01143"></a>01143       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f37c0403de6e994c1b1517bfb4cc63d3">KILL_CHOPPER</a> ) )
<a name="l01144"></a>01144       {
<a name="l01145"></a>01145             <span class="keywordflow">return</span>;
<a name="l01146"></a>01146       }
<a name="l01147"></a>01147 
<a name="l01148"></a>01148       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l01149"></a>01149       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l01150"></a>01150       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01151"></a>01151       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01152"></a>01152 
<a name="l01153"></a>01153       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 55 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 10 );
<a name="l01154"></a>01154       
<a name="l01155"></a>01155       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12f37c0403de6e994c1b1517bfb4cc63d3">KILL_CHOPPER</a>;
<a name="l01156"></a>01156 
<a name="l01157"></a>01157       <span class="comment">// schedule the event</span>
<a name="l01158"></a>01158       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01159"></a>01159 }
<a name="l01160"></a>01160 
<a name="l01161"></a><a class="code" href="Meanwhile_8h.html#66ce00e97411d0965e923155175973ec">01161</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#66ce00e97411d0965e923155175973ec">HandleScientistAWOLMeanwhileScene</a>( <span class="keywordtype">void</span> )
<a name="l01162"></a>01162 {
<a name="l01163"></a>01163       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l01164"></a>01164       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01165"></a>01165       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l01166"></a>01166 
<a name="l01167"></a>01167       <span class="comment">// make sure scene hasn't been used before</span>
<a name="l01168"></a>01168       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12ff0c681e1645a1473be2b47e8de07644">AWOL_SCIENTIST</a> ) )
<a name="l01169"></a>01169       {
<a name="l01170"></a>01170             <span class="keywordflow">return</span>;
<a name="l01171"></a>01171       }
<a name="l01172"></a>01172 
<a name="l01173"></a>01173       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l01174"></a>01174       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l01175"></a>01175       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01176"></a>01176       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01177"></a>01177 
<a name="l01178"></a>01178       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 5;
<a name="l01179"></a>01179       
<a name="l01180"></a>01180       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada12ff0c681e1645a1473be2b47e8de07644">AWOL_SCIENTIST</a>;
<a name="l01181"></a>01181 
<a name="l01182"></a>01182       <span class="comment">// schedule the event</span>
<a name="l01183"></a>01183       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01184"></a>01184 }
<a name="l01185"></a>01185 
<a name="l01186"></a><a class="code" href="Meanwhile_8h.html#2a7c02edec665f23911b9f7500f75746">01186</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#2a7c02edec665f23911b9f7500f75746">HandleInterrogationMeanwhileScene</a>( <span class="keywordtype">void</span> )
<a name="l01187"></a>01187 {
<a name="l01188"></a>01188             <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l01189"></a>01189       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01190"></a>01190       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l01191"></a>01191 
<a name="l01192"></a>01192       <span class="comment">// make sure scene hasn't been used before</span>
<a name="l01193"></a>01193       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a> ) )
<a name="l01194"></a>01194       {
<a name="l01195"></a>01195             <span class="keywordflow">return</span>;
<a name="l01196"></a>01196       }
<a name="l01197"></a>01197 
<a name="l01198"></a>01198       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 7; <span class="comment">// what sector?</span>
<a name="l01199"></a>01199       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = MAP_ROW_N;
<a name="l01200"></a>01200       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01201"></a>01201       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01202"></a>01202 
<a name="l01203"></a>01203       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 60;
<a name="l01204"></a>01204       
<a name="l01205"></a>01205       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada124d56e720789c0383910a0b9b198546d0">INTERROGATION</a>;
<a name="l01206"></a>01206 
<a name="l01207"></a>01207       <span class="comment">// schedule the event</span>
<a name="l01208"></a>01208       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01209"></a>01209 }
<a name="l01210"></a>01210 
<a name="l01211"></a><a class="code" href="Meanwhile_8h.html#722b338a745d2d7d914cfa57c750c1ef">01211</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#722b338a745d2d7d914cfa57c750c1ef">HandleFirstBattleVictory</a>( <span class="keywordtype">void</span> )
<a name="l01212"></a>01212 {
<a name="l01213"></a>01213       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l01214"></a>01214       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01215"></a>01215       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l01216"></a>01216 
<a name="l01217"></a>01217       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a> ) )
<a name="l01218"></a>01218       {
<a name="l01219"></a>01219             <span class="keywordflow">return</span>;
<a name="l01220"></a>01220       }
<a name="l01221"></a>01221       
<a name="l01222"></a>01222       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l01223"></a>01223       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l01224"></a>01224       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01225"></a>01225       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01226"></a>01226 
<a name="l01227"></a>01227       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 5;
<a name="l01228"></a>01228       
<a name="l01229"></a>01229       ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a>;
<a name="l01230"></a>01230 
<a name="l01231"></a>01231       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = ubId;
<a name="l01232"></a>01232 
<a name="l01233"></a>01233       <span class="comment">// schedule the event</span>
<a name="l01234"></a>01234       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01235"></a>01235 
<a name="l01236"></a>01236 }
<a name="l01237"></a>01237 
<a name="l01238"></a>01238 
<a name="l01239"></a><a class="code" href="Meanwhile_8cpp.html#3c4e345d61b03d61a2d596cf4b401436">01239</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#3c4e345d61b03d61a2d596cf4b401436">HandleDelayedFirstBattleVictory</a>( <span class="keywordtype">void</span> )
<a name="l01240"></a>01240 {
<a name="l01241"></a>01241       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiTime = 0;
<a name="l01242"></a>01242       <a class="code" href="structMEANWHILE__DEFINITION.html">MEANWHILE_DEFINITION</a> MeanwhileDef;
<a name="l01243"></a>01243       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubId = 0;
<a name="l01244"></a>01244 
<a name="l01245"></a>01245       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a> ) )
<a name="l01246"></a>01246       {
<a name="l01247"></a>01247             <span class="keywordflow">return</span>;
<a name="l01248"></a>01248       }
<a name="l01249"></a>01249       
<a name="l01250"></a>01250       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#b5b8a95212293b7bf5253b0275159134">sSectorX</a> = 3;
<a name="l01251"></a>01251       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3e2587a91bfa23a9dbd621c824d3c2fc">sSectorY</a> = 16;
<a name="l01252"></a>01252       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#8928ecbeeba02f576cdf9d491a9f4466">ubNPCNumber</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa158561257be7e2f96f82c0fdb51d7f964">QUEEN</a>;
<a name="l01253"></a>01253       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#275bbf19c74cd4c6aeb4c0c6d6cc7431">usTriggerEvent</a> = 0;
<a name="l01254"></a>01254 
<a name="l01255"></a>01255       <span class="comment">/*</span>
<a name="l01256"></a>01256 <span class="comment">      //It is theoretically impossible to liberate a town within 60 minutes of the first battle (which is supposed to</span>
<a name="l01257"></a>01257 <span class="comment">      //occur outside of a town in this scenario).  The delay is attributed to the info taking longer to reach the queen.</span>
<a name="l01258"></a>01258 <span class="comment">      uiTime = GetWorldTotalMin() + 60;</span>
<a name="l01259"></a>01259 <span class="comment">      */</span>
<a name="l01260"></a>01260       uiTime = <a class="code" href="Game_01Clock_8cpp.html#4d255e800fba4d64144a7639d5f3421d">GetWorldTotalMin</a>() + 5;
<a name="l01261"></a>01261       
<a name="l01262"></a>01262       ubId = <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a>;
<a name="l01263"></a>01263 
<a name="l01264"></a>01264       MeanwhileDef.<a class="code" href="structMEANWHILE__DEFINITION.html#3d543f605b114af73848d5f646e53a2c">ubMeanwhileID</a> = ubId;
<a name="l01265"></a>01265 
<a name="l01266"></a>01266       <span class="comment">// schedule the event</span>
<a name="l01267"></a>01267       <a class="code" href="Meanwhile_8cpp.html#319c41df9a2f206f705304e057a064a4">ScheduleMeanwhileEvent</a>( &amp;MeanwhileDef, uiTime );
<a name="l01268"></a>01268 
<a name="l01269"></a>01269 }
<a name="l01270"></a>01270 
<a name="l01271"></a>01271 
<a name="l01272"></a><a class="code" href="Meanwhile_8h.html#8333661e55091ae68de6deef6ba5a840">01272</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#8333661e55091ae68de6deef6ba5a840">HandleFirstBattleEndingWhileInTown</a>( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sSectorX, <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sSectorY, <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> bSectorZ, <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fFromAutoResolve )
<a name="l01273"></a>01273 {
<a name="l01274"></a>01274       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bTownId = 0;
<a name="l01275"></a>01275       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sSector = 0;
<a name="l01276"></a>01276 
<a name="l01277"></a>01277       <span class="keywordflow">if</span> ( <a class="code" href="Meanwhile_8cpp.html#a6bbd2b8385b370a7a504f92d55a0832">GetMeanWhileFlag</a>( <a class="code" href="Meanwhile_8h.html#3d3667ada0f76359974e3bdb799ada128d5a17e06a6cfdb0aaf2fabb2133021b">END_OF_PLAYERS_FIRST_BATTLE</a> ) )
<a name="l01278"></a>01278       {
<a name="l01279"></a>01279             <span class="keywordflow">return</span>;
<a name="l01280"></a>01280       }
<a name="l01281"></a>01281 
<a name="l01282"></a>01282       <span class="comment">// if this is in fact a town and it is the first battle, then set gfFirstBattleMeanwhileScenePending true</span>
<a name="l01283"></a>01283       <span class="comment">// if  is true then this is the end of the second battle, post the first meanwhile OR, on call to trash world, that</span>
<a name="l01284"></a>01284       <span class="comment">// means player is leaving sector</span>
<a name="l01285"></a>01285 
<a name="l01286"></a>01286       <span class="comment">// grab sector value</span>
<a name="l01287"></a>01287       sSector = sSectorX + sSectorY * MAP_WORLD_X;
<a name="l01288"></a>01288 
<a name="l01289"></a>01289       <span class="comment">// get town name id</span>
<a name="l01290"></a>01290       bTownId = <a class="code" href="strategic_8cpp.html#6f48fb0ea28e3d4889423290f1a6ede8">StrategicMap</a>[ sSector ].<a class="code" href="structstrategicmapelement.html#88b09d3c6cd00efaeace5c705929ba87">bNameId</a>;
<a name="l01291"></a>01291 
<a name="l01292"></a>01292       <span class="keywordflow">if</span> ( bTownId == <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe105d008cfe091b982e6d052565ed0b5acd8">BLANK_SECTOR</a> )
<a name="l01293"></a>01293       {
<a name="l01294"></a>01294             <span class="comment">// invalid town</span>
<a name="l01295"></a>01295             <a class="code" href="Meanwhile_8cpp.html#3c4e345d61b03d61a2d596cf4b401436">HandleDelayedFirstBattleVictory</a>( );
<a name="l01296"></a>01296             <a class="code" href="Strategic_01AI_8cpp.html#25242025da42191e44f15d6f90efbaf7">gfFirstBattleMeanwhileScenePending</a> = FALSE;
<a name="l01297"></a>01297       }
<a name="l01298"></a>01298       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="Strategic_01AI_8cpp.html#25242025da42191e44f15d6f90efbaf7">gfFirstBattleMeanwhileScenePending</a> || fFromAutoResolve )
<a name="l01299"></a>01299       {
<a name="l01300"></a>01300             <a class="code" href="Meanwhile_8cpp.html#722b338a745d2d7d914cfa57c750c1ef">HandleFirstBattleVictory</a>( );
<a name="l01301"></a>01301             <a class="code" href="Strategic_01AI_8cpp.html#25242025da42191e44f15d6f90efbaf7">gfFirstBattleMeanwhileScenePending</a> = FALSE;
<a name="l01302"></a>01302       }
<a name="l01303"></a>01303       <span class="keywordflow">else</span>
<a name="l01304"></a>01304       {
<a name="l01305"></a>01305             <a class="code" href="Strategic_01AI_8cpp.html#25242025da42191e44f15d6f90efbaf7">gfFirstBattleMeanwhileScenePending</a> = TRUE;
<a name="l01306"></a>01306       }
<a name="l01307"></a>01307 
<a name="l01308"></a>01308       <span class="keywordflow">return</span>;
<a name="l01309"></a>01309 }
<a name="l01310"></a>01310 
<a name="l01311"></a>01311 
<a name="l01312"></a><a class="code" href="Meanwhile_8h.html#7ce5cf16c508b1accbc7c2b069b181ae">01312</a> <span class="keywordtype">void</span> <a class="code" href="Meanwhile_8cpp.html#7ce5cf16c508b1accbc7c2b069b181ae">HandleFirstMeanWhileSetUpWithTrashWorld</a>( <span class="keywordtype">void</span> )
<a name="l01313"></a>01313 {
<a name="l01314"></a>01314 
<a name="l01315"></a>01315       <span class="comment">// exiting sector after first battle fought</span>
<a name="l01316"></a>01316       <span class="keywordflow">if</span>( <a class="code" href="Strategic_01AI_8cpp.html#25242025da42191e44f15d6f90efbaf7">gfFirstBattleMeanwhileScenePending</a> )
<a name="l01317"></a>01317       {
<a name="l01318"></a>01318             <a class="code" href="Meanwhile_8cpp.html#722b338a745d2d7d914cfa57c750c1ef">HandleFirstBattleVictory</a>( );
<a name="l01319"></a>01319             <a class="code" href="Strategic_01AI_8cpp.html#25242025da42191e44f15d6f90efbaf7">gfFirstBattleMeanwhileScenePending</a> = FALSE;
<a name="l01320"></a>01320       }
<a name="l01321"></a>01321 
<a name="l01322"></a>01322 }
<a name="l01323"></a>01323 
<a name="l01324"></a>01324 
<a name="l01325"></a>01325 
<a name="l01326"></a>01326 
<a name="l01327"></a>01327  
<a name="l01328"></a>01328 
<a name="l01329"></a>01329 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Sep 9 13:48:36 2006 for Build by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
