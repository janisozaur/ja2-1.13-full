<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Build: Rain.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_3179ea33d55a76dc38212d9eab798728.html">export</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e5664b4b56927c8728eb3192fa60e338.html">hdc2</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_1eb12a41a47efb9efcd82fa98f4f4dbd.html">FTP</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_80cc1f21a78ab7941088ea567f236150.html">ja2src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_994ab287602efefceafe55287a3657d6.html">Build</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_43ed33c8f48e75fecb0508860a16371c.html">Tactical</a></div>
<h1>Rain.cpp</h1><a href="Rain_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// WANNE 2 &lt;changed some lines&gt;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#ifdef PRECOMPILEDHEADERS</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="Tactical_01All_8h.html">Tactical All.h</a>"</span>
<a name="l00004"></a>00004 <span class="preprocessor">#else</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">      #include "types.h"</span>
<a name="l00006"></a>00006 <span class="preprocessor">      #include "soldier control.h"</span>
<a name="l00007"></a>00007 <span class="preprocessor">      #include "overhead.h"</span>
<a name="l00008"></a>00008 <span class="preprocessor">      #include "animation control.h"</span>
<a name="l00009"></a>00009 <span class="preprocessor">      #include "points.h"</span>
<a name="l00010"></a>00010 <span class="preprocessor">      #include "<a class="code" href="opplist_8h.html">opplist.h</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">      #include "<a class="code" href="timer_8h.html">timer.h</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">      #include "event pump.h"</span>
<a name="l00013"></a>00013 <span class="preprocessor">      #include "<a class="code" href="Sound_01Control_8h.html">Sound Control.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">      #include "interface.h"</span>
<a name="l00015"></a>00015 <span class="preprocessor">      #include "<a class="code" href="Isometric_01Utils_8h.html">Isometric Utils.h</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">      #include "Font Control.H"</span>
<a name="l00017"></a>00017 <span class="preprocessor">      #include "<a class="code" href="ai_8h.html">ai.h</a>"</span>
<a name="l00018"></a>00018 <span class="preprocessor">      #include "interface.h"</span>
<a name="l00019"></a>00019 <span class="preprocessor">      #include "<a class="code" href="message_8h.html">message.h</a>"</span>
<a name="l00020"></a>00020 <span class="preprocessor">      #include "text.h"</span>
<a name="l00021"></a>00021 <span class="preprocessor">      #include "<a class="code" href="TeamTurns_8h.html">TeamTurns.h</a>"</span>
<a name="l00022"></a>00022 <span class="preprocessor">      #include "<a class="code" href="Smell_8h.html">Smell.h</a>"</span>
<a name="l00023"></a>00023 <span class="preprocessor">      #include "game clock.h"</span>
<a name="l00024"></a>00024 <span class="preprocessor">      #include "<a class="code" href="Soldier_01Functions_8h.html">Soldier Functions.h</a>"</span>
<a name="l00025"></a>00025 <span class="preprocessor">      #include "cursors.h"</span>
<a name="l00026"></a>00026 <span class="preprocessor">      #include "<a class="code" href="Queen_01Command_8h.html">Queen Command.h</a>"</span>
<a name="l00027"></a>00027 <span class="preprocessor">      #include "Pathai.h"</span>
<a name="l00028"></a>00028 <span class="preprocessor">      #include "<a class="code" href="Music_01Control_8h.html">Music Control.h</a>"</span>
<a name="l00029"></a>00029 <span class="preprocessor">      #include "<a class="code" href="Strategic_01Turns_8h.html">Strategic Turns.h</a>"</span>
<a name="l00030"></a>00030 <span class="preprocessor">      #include "<a class="code" href="lighting_8h.html">lighting.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">      #include "<a class="code" href="environment_8h.html">environment.h</a>"</span>
<a name="l00032"></a>00032 <span class="preprocessor">      #include "<a class="code" href="Explosion_01Control_8h.html">Explosion Control.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">      #include "dialogue control.h"</span>
<a name="l00034"></a>00034 <span class="preprocessor">      #include "Soldier Profile Type.h"</span>
<a name="l00035"></a>00035 <span class="preprocessor">      #include "<a class="code" href="SmokeEffects_8h.html">SmokeEffects.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">      #include "lighteffects.h"</span>
<a name="l00037"></a>00037 <span class="preprocessor">      #include "air raid.h"</span>
<a name="l00038"></a>00038 <span class="preprocessor">      #include "meanwhile.h"</span>
<a name="l00039"></a>00039 <span class="preprocessor">      #include "<a class="code" href="SkillCheck_8h.html">SkillCheck.h</a>"</span>
<a name="l00040"></a>00040 <span class="preprocessor">      #include "<a class="code" href="AIInternals_8h.html">AIInternals.h</a>"</span>
<a name="l00041"></a>00041 <span class="preprocessor">      #include "<a class="code" href="AIList_8h.html">AIList.h</a>"</span>
<a name="l00042"></a>00042 <span class="preprocessor">      #ifdef DEBUG_INTERRUPTS</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">            #include "debug.h"</span>
<a name="l00044"></a>00044 <span class="preprocessor">      #endif</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#include "<a class="code" href="Rain_8h.html">Rain.h</a>"</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="comment">// WANNE 2</span>
<a name="l00050"></a>00050 <span class="comment">// Shop Keeper Interface</span>
<a name="l00051"></a>00051 <span class="preprocessor">#define SKI_X_OFFSET                                  (((SCREEN_WIDTH - 536) / 2))</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#define SKI_Y_OFFSET                                  ((((SCREEN_HEIGHT - 140) - 340) / 2))</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00054"></a>00054 <span class="comment">// WANNE 2</span>
<a name="l00055"></a>00055 <span class="comment">// Overhead Map</span>
<a name="l00056"></a>00056 <span class="preprocessor">#define OM_X_OFFSET                                         0</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">#define OM_Y_OFFSET                                         0</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="preprocessor">#define RAIN_UPDATE_RATE 60</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#define PERCENT_OF_DROPS_GOING_TO_THE_EDGE_OF_SCREEN 0.25f</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a>00065 <span class="preprocessor">#define DROP_ANGLE_CHANGE_RATE  1.0f</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="preprocessor">#define MIN_DROP_LENGTH 2.0f</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">#define ADD_DROP_LENGTH_IF_STORM 2.0f</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span><span class="preprocessor">#define DROP_LENGTH_RANGE 2.0f</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">#define DROP_LENGTH_CHANGE_RATE 0.1f</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">#define DROP_LENGTH_RAND 2.0f</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00073"></a>00073 <span class="preprocessor">#define BASE_DROP_SPEED 7.0f</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span><span class="preprocessor">#define DROP_SPEED_RANGE 3.5f</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">#define DROP_SPEED_CHANGE_RATE 0.1f</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">#define DROP_SPEED_RAND 5.0f</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="Rain_8cpp.html#21ac27052a42fc9967e782a5892e2b9f">00078</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Rain_8cpp.html#21ac27052a42fc9967e782a5892e2b9f">guiMaxRainDrops</a> = 79;
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="preprocessor">#define RESOLUTION_FACTOR_ON_MAXIMUM_DROPS                  ((FLOAT) ( SCREEN_WIDTH * SCREEN_HEIGHT ) / ((FLOAT) 640 * 480 ) ) </span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">#define BASE_MAXIMUM_DROPS                                                                             guiMaxRainDrops * RESOLUTION_FACTOR_ON_MAXIMUM_DROPS</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a>00083 <span class="preprocessor">#define DEGREE(a) ( 3.14159 / 180 * a )</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span>
<a name="l00085"></a><a class="code" href="structTRainDrop.html">00085</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>
<a name="l00086"></a>00086 <span class="keyword"></span>{
<a name="l00087"></a><a class="code" href="structTRainDrop.html#05fee36f2172baf2d6dc44b20f0bbf77">00087</a>       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fAlive;
<a name="l00088"></a>00088 
<a name="l00089"></a><a class="code" href="structTRainDrop.html#56f5ae77cd0b17e7cdd4a543dbdd8052">00089</a>       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpX;
<a name="l00090"></a><a class="code" href="structTRainDrop.html#69a3fa728c9734f586d45b34e4570c2d">00090</a>       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpY;
<a name="l00091"></a><a class="code" href="structTRainDrop.html#4f02b8ff954039deccb8ec8303efcb58">00091</a>       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpIncrX;
<a name="l00092"></a><a class="code" href="structTRainDrop.html#38d93d91ada71852223e6610c00e6a82">00092</a>       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpIncrY;
<a name="l00093"></a>00093       
<a name="l00094"></a><a class="code" href="structTRainDrop.html#c92845adb75c61291c00a4a0d403ee1e">00094</a>       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpEndRelX;
<a name="l00095"></a><a class="code" href="structTRainDrop.html#25c961f3e4cc4061e8d6fecc89dfa16d">00095</a>       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpEndRelY;
<a name="l00096"></a>00096 
<a name="l00097"></a><a class="code" href="structTRainDrop.html#9c7add16dadbbce27427bbef14b8f01a">00097</a>       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiAmountOfTicksToLive;
<a name="l00098"></a>00098 }<a class="code" href="structTRainDrop.html">TRainDrop</a>;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 
<a name="l00101"></a><a class="code" href="Rain_8cpp.html#ea86d0b0f3567d58907af3936e1b0959">00101</a> <span class="keyword">static</span> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="email_8cpp.html#ea86d0b0f3567d58907af3936e1b0959">fFirstTime</a> = TRUE;
<a name="l00102"></a><a class="code" href="Rain_8cpp.html#505fb50317c4df73b837ac4730a10177">00102</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a> = 0;
<a name="l00103"></a><a class="code" href="Rain_8cpp.html#e32c4e16de1550a8d1fb00cfdbe9fdfa">00103</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Rain_8cpp.html#e32c4e16de1550a8d1fb00cfdbe9fdfa">guiLastRainUpdate</a> = 0;
<a name="l00104"></a><a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">00104</a> RECT <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>;
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">00106</a> <a class="code" href="structTRainDrop.html">TRainDrop</a> *<a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a> = 0;
<a name="l00107"></a><a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">00107</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a> = 0;
<a name="l00108"></a><a class="code" href="Rain_8cpp.html#456aace5b153d21afd6715a6908ac76d">00108</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Rain_8cpp.html#456aace5b153d21afd6715a6908ac76d">guiCurrAmountOfDeadRainDrops</a> = 0;
<a name="l00109"></a>00109 
<a name="l00110"></a><a class="code" href="Weapons_8cpp.html#2758c798d78a14ad7f1703663223fb2b">00110</a> <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a> = 0;
<a name="l00111"></a>00111 
<a name="l00112"></a><a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">00112</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a> = 0;
<a name="l00113"></a><a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">00113</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a> = 0;
<a name="l00114"></a><a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">00114</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a> = 0;
<a name="l00115"></a>00115 
<a name="l00116"></a><a class="code" href="Rain_8cpp.html#9b9bf455e1d688ae1034a800e4cfe3d0">00116</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#9b9bf455e1d688ae1034a800e4cfe3d0">fpMaxDropAngleOfFalling</a> = 0;
<a name="l00117"></a><a class="code" href="Rain_8cpp.html#bcc338f8e7d4da59064470c4a5f08a0d">00117</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#bcc338f8e7d4da59064470c4a5f08a0d">fpMaxDropLength</a> = 0;
<a name="l00118"></a><a class="code" href="Rain_8cpp.html#add3c23ce8c4f34c41534cae0ad1db74">00118</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#add3c23ce8c4f34c41534cae0ad1db74">fpMaxDropSpeed</a> = 0;
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="Rain_8cpp.html#773602d05fdf2d9c10e497b86688f43d">00120</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#773602d05fdf2d9c10e497b86688f43d">fpMinDropAngleOfFalling</a> = 0;
<a name="l00121"></a><a class="code" href="Rain_8cpp.html#f4eb91340ae2589be3a68911e5f34f02">00121</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#f4eb91340ae2589be3a68911e5f34f02">fpMinDropLength</a> = 0;
<a name="l00122"></a><a class="code" href="Rain_8cpp.html#f4a318f46d96eaf46ee0c58da5e32322">00122</a> <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> <a class="code" href="Rain_8cpp.html#f4a318f46d96eaf46ee0c58da5e32322">fpMinDropSpeed</a> = 0;
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="keyword">extern</span> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a>;
<a name="l00126"></a>00126 <span class="comment">//extern BOOLEAN gfAllowRain;</span>
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <span class="keyword">extern</span> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> <a class="code" href="Rain_8cpp.html#0ede431be7bee28b1b16ea6c33921553">gsVIEWPORT_WINDOW_END_Y</a>;                 
<a name="l00129"></a>00129 <span class="keyword">extern</span> <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> <a class="code" href="Rain_8cpp.html#4227e29b8d1a98d8a9f917db0d782ff5">gsVIEWPORT_WINDOW_START_Y</a>;
<a name="l00130"></a>00130 
<a name="l00131"></a>00131 <span class="preprocessor">#define VIDEO_OVERLAYS 100</span>
<a name="l00132"></a>00132 <span class="preprocessor"></span><span class="keyword">extern</span> <a class="code" href="struct__VIDEO__OVERLAY.html">VIDEO_OVERLAY</a> <a class="code" href="Rain_8cpp.html#3330d48fd71d6f27e6144a8836d799c2">gVideoOverlays</a>[ VIDEO_OVERLAYS ];
<a name="l00133"></a>00133 <span class="keyword">extern</span> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="Rain_8cpp.html#71d38868ef8af5154c25f9c1b8651107">guiNumVideoOverlays</a>;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <span class="keyword">extern</span> <a class="code" href="structMercPopUpBox.html">MercPopUpBox</a> *<a class="code" href="Rain_8cpp.html#fb29d4c437ea2e4ce77b2102c9ab6cda">gPopUpTextBox</a>;
<a name="l00136"></a>00136 
<a name="l00137"></a><a class="code" href="Rain_8cpp.html#7fa17a4a8adbb1ade2cda979078de711">00137</a> <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> <a class="code" href="Rain_8cpp.html#7fa17a4a8adbb1ade2cda979078de711">GetRainIntensityFromEnvWeather</a>()
<a name="l00138"></a>00138 {
<a name="l00139"></a>00139       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bRes = 0;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141       <span class="comment">// Debug!!!</span>
<a name="l00142"></a>00142 <span class="comment">//    guiEnvWeather |= WEATHER_FORECAST_THUNDERSHOWERS;</span>
<a name="l00143"></a>00143 
<a name="l00144"></a>00144       <span class="keywordflow">if</span>( <a class="code" href="environment_8cpp.html#33ba942fb68684de1f6d6702ab45602c">guiEnvWeather</a> &amp; WEATHER_FORECAST_SHOWERS ) bRes += 1;
<a name="l00145"></a>00145       <span class="keywordflow">if</span>( <a class="code" href="environment_8cpp.html#33ba942fb68684de1f6d6702ab45602c">guiEnvWeather</a> &amp; WEATHER_FORECAST_THUNDERSHOWERS ) bRes += 2;
<a name="l00146"></a>00146 
<a name="l00147"></a>00147       <span class="keywordflow">return</span> bRes;
<a name="l00148"></a>00148 }
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="Rain_8h.html#afab3eef2b599d1a4b3ab8ff14999e74">00150</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="video_8cpp.html#afab3eef2b599d1a4b3ab8ff14999e74">IsItAllowedToRenderRain</a>()
<a name="l00151"></a>00151 {
<a name="l00152"></a>00152       <span class="keywordflow">if</span>( !<a class="code" href="GameSettings_8cpp.html#5c32f930e2fef384505c4b91803a92c2">gGameExternalOptions</a>.<a class="code" href="structGAME__EXTERNAL__OPTIONS.html#b71279124f7ba75c81b72f5e8abe26d3">gfAllowRain</a> )<span class="keywordflow">return</span> FALSE;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154       <span class="keywordflow">if</span>( !( <a class="code" href="environment_8cpp.html#33ba942fb68684de1f6d6702ab45602c">guiEnvWeather</a> &amp; (WEATHER_FORECAST_THUNDERSHOWERS | WEATHER_FORECAST_SHOWERS) ) )<span class="keywordflow">return</span> FALSE;
<a name="l00155"></a>00155 
<a name="l00156"></a>00156       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> != <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf29873e16bc1530dedb416060abbeea6d0">GAME_SCREEN</a> &amp;&amp; <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> != <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2347a303c10ab85b1fc3607b9259e82f2">SHOPKEEPER_SCREEN</a> ) <span class="keywordflow">return</span> FALSE;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158       <span class="keywordflow">return</span> TRUE;
<a name="l00159"></a>00159 }
<a name="l00160"></a>00160 
<a name="l00161"></a><a class="code" href="Rain_8cpp.html#bdde3e9176b435cc7c6ed47d482137f6">00161</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#bdde3e9176b435cc7c6ed47d482137f6">InitializeRainVideoObject</a>( )
<a name="l00162"></a>00162 {
<a name="l00163"></a>00163       <a class="code" href="structVSURFACE__DESC.html">VSURFACE_DESC</a>           vs_desc;
<a name="l00164"></a>00164       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                              usWidth;
<a name="l00165"></a>00165       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                              usHeight;
<a name="l00166"></a>00166       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                               ubBitDepth;
<a name="l00167"></a>00167       
<a name="l00168"></a>00168       <span class="comment">// Create render buffer</span>
<a name="l00169"></a>00169       <a class="code" href="video_8cpp.html#bc04d2de6be3480bda1fb7769be1cbee">GetCurrentVideoSettings</a>( &amp;usWidth, &amp;usHeight, &amp;ubBitDepth );
<a name="l00170"></a>00170       vs_desc.<a class="code" href="structVSURFACE__DESC.html#6f5ea5573c06b47d45a3c305058ad276">fCreateFlags</a> = VSURFACE_CREATE_DEFAULT | VSURFACE_SYSTEM_MEM_USAGE;
<a name="l00171"></a>00171       vs_desc.<a class="code" href="structVSURFACE__DESC.html#08079d897e0be871f41c02269b95bff8">usWidth</a> = usWidth;
<a name="l00172"></a>00172       vs_desc.<a class="code" href="structVSURFACE__DESC.html#c9458c47824c10e7e1003bef5e32fa5d">usHeight</a> = usHeight;
<a name="l00173"></a>00173       vs_desc.<a class="code" href="structVSURFACE__DESC.html#740a7ed2fb0cc5b6f40838e9e7736c10">ubBitDepth</a> = ubBitDepth;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175       AddVideoSurface( &amp;vs_desc, &amp;<a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a> );
<a name="l00176"></a>00176 }
<a name="l00177"></a>00177 
<a name="l00178"></a><a class="code" href="Rain_8cpp.html#bf4a3bfc82cb8b845eda42bf28cb3027">00178</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#bf4a3bfc82cb8b845eda42bf28cb3027">InitializeRainData</a>()
<a name="l00179"></a>00179 {
<a name="l00180"></a>00180       <a class="code" href="Rain_8cpp.html#bdde3e9176b435cc7c6ed47d482137f6">InitializeRainVideoObject</a>();
<a name="l00181"></a>00181 
<a name="l00182"></a>00182       <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left = 0;
<a name="l00183"></a>00183       <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top = 0;
<a name="l00184"></a>00184       <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right = <a class="code" href="local_8h.html#599adbe412c60e0cc5abb86be7ee4507">SCREEN_WIDTH</a>;
<a name="l00185"></a>00185       <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom = <a class="code" href="local_8h.html#f1c710caf1e3a9e81829078054e83799">SCREEN_HEIGHT</a> - 120;
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 
<a name="l00188"></a><a class="code" href="Rain_8cpp.html#48caef69d5caf57ade5bfeae4bac2a26">00188</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#48caef69d5caf57ade5bfeae4bac2a26">ResetRain</a>()
<a name="l00189"></a>00189 {
<a name="l00190"></a>00190       <span class="keywordflow">if</span>( <a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a> )
<a name="l00191"></a>00191       {
<a name="l00192"></a>00192             MemFree( <a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a> );
<a name="l00193"></a>00193             pRainDrops = NULL;
<a name="l00194"></a>00194       }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196       <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a> = 0;
<a name="l00197"></a>00197 }
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="Rain_8cpp.html#53c9515f94f35bc77b9aca55843a1055">00199</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#53c9515f94f35bc77b9aca55843a1055">GenerateRainDropsList</a>()
<a name="l00200"></a>00200 {
<a name="l00201"></a>00201       <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a> = (<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)(BASE_MAXIMUM_DROPS) * <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a>;
<a name="l00202"></a>00202 
<a name="l00203"></a>00203       <a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a> = (<a class="code" href="structTRainDrop.html">TRainDrop</a> *)MemAlloc( <span class="keyword">sizeof</span>( <a class="code" href="structTRainDrop.html">TRainDrop</a> ) * <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a> );
<a name="l00204"></a>00204       memset( <a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a>, 0, <span class="keyword">sizeof</span>( TRainDrop ) * guiCurrMaxAmountOfRainDrops );
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 
<a name="l00207"></a><a class="code" href="Rain_8cpp.html#3fa61f07b91e67391d45ca8d99edd0c8">00207</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#3fa61f07b91e67391d45ca8d99edd0c8">KillOutOfRegionRainDrops</a>()
<a name="l00208"></a>00208 {
<a name="l00209"></a>00209       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiIndex;
<a name="l00210"></a>00210 
<a name="l00211"></a>00211       <span class="keywordflow">for</span>( uiIndex = 0; uiIndex &lt; <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a>; ++uiIndex )
<a name="l00212"></a>00212       {
<a name="l00213"></a>00213             <a class="code" href="structTRainDrop.html">TRainDrop</a> *pCurr = &amp;<a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a>[ uiIndex ];
<a name="l00214"></a>00214 
<a name="l00215"></a>00215             <span class="keywordflow">if</span>( ( pCurr-&gt;fpX &lt; <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left || pCurr-&gt;fpX &gt;= <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right ||
<a name="l00216"></a>00216                   pCurr-&gt;fpY &lt; <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top || pCurr-&gt;fpY &gt;= <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom ) &amp;&amp; 
<a name="l00217"></a>00217                   ( pCurr-&gt;fpX + pCurr-&gt;fpEndRelX &lt; <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left || pCurr-&gt;fpX + pCurr-&gt;fpEndRelX &gt;= <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right ||
<a name="l00218"></a>00218                   pCurr-&gt;fpY + pCurr-&gt;fpEndRelY &lt; <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top || pCurr-&gt;fpY + pCurr-&gt;fpEndRelY &gt;= <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom ) )
<a name="l00219"></a>00219             {
<a name="l00220"></a>00220                         pCurr-&gt;<a class="code" href="structTRainDrop.html#05fee36f2172baf2d6dc44b20f0bbf77">fAlive</a> = FALSE;
<a name="l00221"></a>00221                         <a class="code" href="Rain_8cpp.html#456aace5b153d21afd6715a6908ac76d">guiCurrAmountOfDeadRainDrops</a>++;
<a name="l00222"></a>00222             }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224       }
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 
<a name="l00227"></a><a class="code" href="Rain_8cpp.html#3051653e0843f62176692e52e555c3b7">00227</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#3051653e0843f62176692e52e555c3b7">CreateRainDrops</a>()
<a name="l00228"></a>00228 {
<a name="l00229"></a>00229       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiIndex;
<a name="l00230"></a>00230       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiCreatedDrops = 0;
<a name="l00231"></a>00231       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpCos, fpSin, fpAbsTg;
<a name="l00232"></a>00232       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpDropLength = <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a>;
<a name="l00233"></a>00233       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpDropSpeed = <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a>;
<a name="l00234"></a>00234       <a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a> fpNumDropsToXBorder = 0;
<a name="l00235"></a>00235       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fLoopIsDone;
<a name="l00236"></a>00236       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiIndRand;
<a name="l00237"></a>00237 
<a name="l00238"></a>00238       fpCos = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(cos( DEGREE(<a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a>) ));
<a name="l00239"></a>00239       fpSin = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(sin( DEGREE(<a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a>) ));
<a name="l00240"></a>00240 
<a name="l00241"></a>00241       <span class="keywordflow">if</span>( fpCos )
<a name="l00242"></a>00242             fpAbsTg = fabs( fpSin / fpCos ); <span class="comment">// take only absolute valuse</span>
<a name="l00243"></a>00243       <span class="keywordflow">else</span>
<a name="l00244"></a>00244             fpAbsTg = 0; <span class="comment">// well, it can't really be ;)</span>
<a name="l00245"></a>00245 
<a name="l00246"></a>00246       <span class="keywordflow">for</span>( uiIndex = 0; uiIndex &lt; <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a>; ++uiIndex )
<a name="l00247"></a>00247       {
<a name="l00248"></a>00248             <a class="code" href="structTRainDrop.html">TRainDrop</a> *pCurr = &amp;<a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a>[ uiIndex ];
<a name="l00249"></a>00249 
<a name="l00250"></a>00250             <span class="keywordflow">if</span>( pCurr-&gt;fAlive )<span class="keywordflow">continue</span>;
<a name="l00251"></a>00251 
<a name="l00252"></a>00252             uiIndRand  = (((<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)pCurr) / <span class="keyword">sizeof</span>(<a class="code" href="structTRainDrop.html">TRainDrop</a>) ) % 20;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254             fpDropLength = <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a> + ( (((<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)pCurr) / <span class="keyword">sizeof</span>(TRainDrop) ) % 7 ) * DROP_LENGTH_RAND / 6;
<a name="l00255"></a>00255             fpDropSpeed = <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a> + ( ( ((<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)pCurr) / <span class="keyword">sizeof</span>(TRainDrop) + 43 ) % 13 ) * DROP_SPEED_RAND / 12;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257             pCurr-&gt;fAlive = TRUE;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259             pCurr-&gt;fpIncrX = fpCos * fpDropSpeed;
<a name="l00260"></a>00260             pCurr-&gt;fpIncrY = fpSin * fpDropSpeed;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262             pCurr-&gt;fpEndRelX = -fpCos * fpDropLength;
<a name="l00263"></a>00263             pCurr-&gt;fpEndRelY = -fpSin * fpDropLength;
<a name="l00264"></a>00264 
<a name="l00265"></a>00265             <span class="comment">// where we want the drops to fall</span>
<a name="l00266"></a>00266 
<a name="l00267"></a>00267             <span class="keywordflow">if</span>( uiIndex &lt; guiCurrMaxAmountOfRainDrops * PERCENT_OF_DROPS_GOING_TO_THE_EDGE_OF_SCREEN )
<a name="l00268"></a>00268             {
<a name="l00269"></a>00269                   <span class="keywordflow">if</span>( !fpCos ) 
<a name="l00270"></a>00270                         fpNumDropsToXBorder = 0;
<a name="l00271"></a>00271                   <span class="keywordflow">else</span>
<a name="l00272"></a>00272                   {
<a name="l00273"></a>00273                         <span class="keywordflow">if</span>( fpAbsTg &lt; 1 )
<a name="l00274"></a>00274                         {
<a name="l00275"></a>00275                               fpNumDropsToXBorder = 1.0f - fpAbsTg;
<a name="l00276"></a>00276                               fpNumDropsToXBorder *= (((<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)<a class="code" href="local_8h.html#f1c710caf1e3a9e81829078054e83799">SCREEN_HEIGHT</a> - 120) / (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)<a class="code" href="local_8h.html#599adbe412c60e0cc5abb86be7ee4507">SCREEN_WIDTH</a>);
<a name="l00277"></a>00277                               fpNumDropsToXBorder *= guiCurrMaxAmountOfRainDrops * PERCENT_OF_DROPS_GOING_TO_THE_EDGE_OF_SCREEN / 2;
<a name="l00278"></a>00278 
<a name="l00279"></a>00279                               fpNumDropsToXBorder += guiCurrMaxAmountOfRainDrops * PERCENT_OF_DROPS_GOING_TO_THE_EDGE_OF_SCREEN / 2;
<a name="l00280"></a>00280                         }
<a name="l00281"></a>00281                         <span class="keywordflow">else</span>
<a name="l00282"></a>00282                         {
<a name="l00283"></a>00283                               fpNumDropsToXBorder = 1 / fpAbsTg;
<a name="l00284"></a>00284                               fpNumDropsToXBorder *= (((<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)<a class="code" href="local_8h.html#f1c710caf1e3a9e81829078054e83799">SCREEN_HEIGHT</a> - 120) / (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)<a class="code" href="local_8h.html#599adbe412c60e0cc5abb86be7ee4507">SCREEN_WIDTH</a>);
<a name="l00285"></a>00285                               fpNumDropsToXBorder *= guiCurrMaxAmountOfRainDrops * PERCENT_OF_DROPS_GOING_TO_THE_EDGE_OF_SCREEN / 2;
<a name="l00286"></a>00286                         }
<a name="l00287"></a>00287                   }
<a name="l00288"></a>00288 
<a name="l00289"></a>00289                   <span class="keywordflow">if</span>( uiIndex &gt;= fpNumDropsToXBorder )
<a name="l00290"></a>00290                   {
<a name="l00291"></a>00291                         pCurr-&gt;fpX = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(<a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right - <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left ));
<a name="l00292"></a>00292                         pCurr-&gt;fpY = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(<a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom - 1);
<a name="l00293"></a>00293                   }
<a name="l00294"></a>00294                   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fpCos &gt; 0 )
<a name="l00295"></a>00295                   {
<a name="l00296"></a>00296                         pCurr-&gt;fpX = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(<a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right - 1);
<a name="l00297"></a>00297                         pCurr-&gt;fpY = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(<a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom - <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top ));
<a name="l00298"></a>00298                   }<span class="keywordflow">else</span>{
<a name="l00299"></a>00299                         pCurr-&gt;fpX = 0;
<a name="l00300"></a>00300                         pCurr-&gt;fpY = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(<a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom - <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top ));
<a name="l00301"></a>00301                   }
<a name="l00302"></a>00302             }<span class="keywordflow">else</span>{
<a name="l00303"></a>00303                   pCurr-&gt;fpX = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(<a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right - <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left ));
<a name="l00304"></a>00304                   pCurr-&gt;fpY = (<a class="code" href="Types_8h.html#8d06b04c04132c6f7c0fcb08c6167455">FLOAT</a>)(<a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom - <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top ));
<a name="l00305"></a>00305             }
<a name="l00306"></a>00306 
<a name="l00307"></a>00307             pCurr-&gt;uiAmountOfTicksToLive = 0;
<a name="l00308"></a>00308             fLoopIsDone = FALSE;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310             <span class="keywordflow">while</span>( !fLoopIsDone )
<a name="l00311"></a>00311             {
<a name="l00312"></a>00312                   pCurr-&gt;fpX -= pCurr-&gt;fpIncrX;
<a name="l00313"></a>00313                   pCurr-&gt;fpY -= pCurr-&gt;fpIncrY;
<a name="l00314"></a>00314                   pCurr-&gt;uiAmountOfTicksToLive++;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316                   <span class="keywordflow">if</span>( pCurr-&gt;fpX &gt;= <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right - 1 )
<a name="l00317"></a>00317                   {
<a name="l00318"></a>00318                         pCurr-&gt;fpX = <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right - 1 - uiIndRand * pCurr-&gt;fpIncrX / 20 ;
<a name="l00319"></a>00319                         fLoopIsDone = TRUE;
<a name="l00320"></a>00320                   }
<a name="l00321"></a>00321                   <span class="keywordflow">if</span>( pCurr-&gt;fpX &lt; <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left )
<a name="l00322"></a>00322                   {
<a name="l00323"></a>00323                         pCurr-&gt;fpX = <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left - uiIndRand * pCurr-&gt;fpIncrX / 20 ;
<a name="l00324"></a>00324                         fLoopIsDone = TRUE;
<a name="l00325"></a>00325                   }
<a name="l00326"></a>00326                   <span class="keywordflow">if</span>( pCurr-&gt;fpY &gt;= <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom - 1 )
<a name="l00327"></a>00327                   {
<a name="l00328"></a>00328                         pCurr-&gt;fpY = <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom - 1 - uiIndRand * pCurr-&gt;fpIncrX / 20 ;
<a name="l00329"></a>00329                         fLoopIsDone = TRUE;
<a name="l00330"></a>00330                   }
<a name="l00331"></a>00331                   <span class="keywordflow">if</span>( pCurr-&gt;fpY &lt; <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top )
<a name="l00332"></a>00332                   {
<a name="l00333"></a>00333                         pCurr-&gt;fpY = <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top - uiIndRand * pCurr-&gt;fpIncrX / 20 ;
<a name="l00334"></a>00334                         fLoopIsDone = TRUE;
<a name="l00335"></a>00335                   }
<a name="l00336"></a>00336             }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338             uiCreatedDrops++;
<a name="l00339"></a>00339 
<a name="l00340"></a>00340             <span class="comment">// drop creation is done!!!</span>
<a name="l00341"></a>00341 
<a name="l00342"></a>00342       }
<a name="l00343"></a>00343 }
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="Rain_8cpp.html#5eee0b60f73a970b0d6be2111883d380">00345</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#5eee0b60f73a970b0d6be2111883d380">UpdateRainDrops</a>()
<a name="l00346"></a>00346 {
<a name="l00347"></a>00347       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiIndex;
<a name="l00348"></a>00348 
<a name="l00349"></a>00349       <span class="keywordflow">for</span>( uiIndex = 0; uiIndex &lt; <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a>; ++uiIndex )
<a name="l00350"></a>00350       {
<a name="l00351"></a>00351             <a class="code" href="structTRainDrop.html">TRainDrop</a> *pCurr = &amp;<a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a>[ uiIndex ];
<a name="l00352"></a>00352 
<a name="l00353"></a>00353             <span class="keywordflow">if</span>( !pCurr-&gt;fAlive )<span class="keywordflow">continue</span>;
<a name="l00354"></a>00354 
<a name="l00355"></a>00355             <span class="keywordflow">if</span>( pCurr-&gt;uiAmountOfTicksToLive )
<a name="l00356"></a>00356             {
<a name="l00357"></a>00357                   pCurr-&gt;<a class="code" href="structTRainDrop.html#56f5ae77cd0b17e7cdd4a543dbdd8052">fpX</a> += pCurr-&gt;fpIncrX;
<a name="l00358"></a>00358                   pCurr-&gt;fpY += pCurr-&gt;fpIncrY;
<a name="l00359"></a>00359                   pCurr-&gt;uiAmountOfTicksToLive--;
<a name="l00360"></a>00360             }<span class="keywordflow">else</span>{
<a name="l00361"></a>00361                   pCurr-&gt;fpEndRelX += pCurr-&gt;fpIncrX;
<a name="l00362"></a>00362                   pCurr-&gt;fpEndRelY += pCurr-&gt;fpIncrY;
<a name="l00363"></a>00363                   
<a name="l00364"></a>00364                   <span class="keywordflow">if</span>( ( pCurr-&gt;fpEndRelX &gt; 0 &amp;&amp; pCurr-&gt;fpIncrX &gt; 0 ) ||
<a name="l00365"></a>00365                         ( pCurr-&gt;fpEndRelX &lt; 0 &amp;&amp; pCurr-&gt;fpIncrX &lt; 0 ) ||
<a name="l00366"></a>00366                         ( pCurr-&gt;fpEndRelY &gt; 0 &amp;&amp; pCurr-&gt;fpIncrY &gt; 0 ) ||
<a name="l00367"></a>00367                         ( pCurr-&gt;fpEndRelY &lt; 0 &amp;&amp; pCurr-&gt;fpIncrY &lt; 0 ) )
<a name="l00368"></a>00368                   {
<a name="l00369"></a>00369                         pCurr-&gt;fAlive = FALSE;
<a name="l00370"></a>00370                         <a class="code" href="Rain_8cpp.html#456aace5b153d21afd6715a6908ac76d">guiCurrAmountOfDeadRainDrops</a>++;
<a name="l00371"></a>00371                   }
<a name="l00372"></a>00372             }
<a name="l00373"></a>00373       }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 }
<a name="l00376"></a>00376 
<a name="l00377"></a><a class="code" href="Rain_8cpp.html#7a8032e8d24dabc37373236c2e88787e">00377</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#7a8032e8d24dabc37373236c2e88787e">BlankRainRenderSurface</a>()
<a name="l00378"></a>00378 {
<a name="l00379"></a>00379       <a class="code" href="vsurface_8cpp.html#10d0257b54c4d27b2d82ead2a46cd581">ColorFillVideoSurfaceArea</a>( <a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a>, <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left, <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top, <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right, <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom, <a class="code" href="himage_8cpp.html#d29939ffcd39c7d1cc0a91222702d361">Get16BPPColor</a>( FROMRGB( 0, 0, 0 ) ) );
<a name="l00380"></a>00380 }
<a name="l00381"></a>00381 
<a name="l00382"></a><a class="code" href="Rain_8cpp.html#5660e0cd4a5b3fe48e25de3a0c664385">00382</a> <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> <a class="code" href="Rain_8cpp.html#5660e0cd4a5b3fe48e25de3a0c664385">GetDropColor</a>()
<a name="l00383"></a>00383 {
<a name="l00384"></a>00384       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiRGBPart = 32 + ( 15 - <a class="code" href="environment_8cpp.html#b23817de506192a339a3a9b0c2470baf">GetTimeOfDayAmbientLightLevel</a>() ) * 8;
<a name="l00385"></a>00385 
<a name="l00386"></a>00386       uiRGBPart = max( 0, uiRGBPart );
<a name="l00387"></a>00387       uiRGBPart = min( 255, uiRGBPart );
<a name="l00388"></a>00388 
<a name="l00389"></a>00389       <span class="keywordflow">return</span> <a class="code" href="himage_8cpp.html#d29939ffcd39c7d1cc0a91222702d361">Get16BPPColor</a>( FROMRGB( uiRGBPart, uiRGBPart, uiRGBPart ) );
<a name="l00390"></a>00390 }
<a name="l00391"></a>00391 
<a name="l00392"></a><a class="code" href="Rain_8cpp.html#daa0e77eb4115501f07c111732102a1c">00392</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#daa0e77eb4115501f07c111732102a1c">RenderRainOnSurface</a>()
<a name="l00393"></a>00393 {
<a name="l00394"></a>00394       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *pDestBuf;
<a name="l00395"></a>00395       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiDestPitchBYTES;
<a name="l00396"></a>00396       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiIndex;
<a name="l00397"></a>00397       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> sDropsColor = <a class="code" href="Rain_8cpp.html#5660e0cd4a5b3fe48e25de3a0c664385">GetDropColor</a>();
<a name="l00398"></a>00398 
<a name="l00399"></a>00399       pDestBuf = <a class="code" href="vsurface_8cpp.html#592b2aeda6075fcbf9d7c67dc44fbd47">LockVideoSurface</a>( <a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a>, &amp;uiDestPitchBYTES );
<a name="l00400"></a>00400       <a class="code" href="line_8cpp.html#03cb6a8fa3b4bbdfcdab02c903bc7b7e">SetClippingRegionAndImageWidth</a>( uiDestPitchBYTES, 0, <a class="code" href="Rain_8cpp.html#4227e29b8d1a98d8a9f917db0d782ff5">gsVIEWPORT_WINDOW_START_Y</a>, <a class="code" href="local_8h.html#599adbe412c60e0cc5abb86be7ee4507">SCREEN_WIDTH</a>, <a class="code" href="Rain_8cpp.html#0ede431be7bee28b1b16ea6c33921553">gsVIEWPORT_WINDOW_END_Y</a> - <a class="code" href="Rain_8cpp.html#4227e29b8d1a98d8a9f917db0d782ff5">gsVIEWPORT_WINDOW_START_Y</a> );
<a name="l00401"></a>00401 
<a name="l00402"></a>00402       <span class="keywordflow">for</span>( uiIndex = 0; uiIndex &lt; <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a>; ++uiIndex )
<a name="l00403"></a>00403       {
<a name="l00404"></a>00404             <a class="code" href="structTRainDrop.html">TRainDrop</a> *pCurr = &amp;<a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a>[ uiIndex ];
<a name="l00405"></a>00405 
<a name="l00406"></a>00406             <span class="keywordflow">if</span>( !pCurr-&gt;fAlive )<span class="keywordflow">continue</span>;
<a name="l00407"></a>00407             
<a name="l00408"></a>00408             <a class="code" href="line_8cpp.html#aa92e189d27648ae67b8b8f5de610f42">LineDraw</a>( TRUE, (<span class="keywordtype">int</span>)pCurr-&gt;fpX, (<span class="keywordtype">int</span>)pCurr-&gt;fpY, (<span class="keywordtype">int</span>)pCurr-&gt;fpX + (<span class="keywordtype">int</span>)pCurr-&gt;fpEndRelX, (<span class="keywordtype">int</span>)(pCurr-&gt;fpY + pCurr-&gt;fpEndRelY),  sDropsColor, pDestBuf );
<a name="l00409"></a>00409       }
<a name="l00410"></a>00410 
<a name="l00411"></a>00411       <a class="code" href="vsurface_8cpp.html#abe4e4124597b70b046a3b3567002cb2">UnLockVideoSurface</a>( <a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a> );
<a name="l00412"></a>00412 }
<a name="l00413"></a>00413 
<a name="l00414"></a><a class="code" href="Rain_8cpp.html#860bf8919bc0ded05baf2286f887c8dc">00414</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#860bf8919bc0ded05baf2286f887c8dc">GenerateRainMaximums</a>()
<a name="l00415"></a>00415 {
<a name="l00416"></a>00416       <span class="keywordflow">if</span>( <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a> == 1 )
<a name="l00417"></a>00417       {
<a name="l00418"></a>00418             <a class="code" href="Rain_8cpp.html#773602d05fdf2d9c10e497b86688f43d">fpMinDropAngleOfFalling</a> = 45;
<a name="l00419"></a>00419             <a class="code" href="Rain_8cpp.html#9b9bf455e1d688ae1034a800e4cfe3d0">fpMaxDropAngleOfFalling</a> = 135;
<a name="l00420"></a>00420       }<span class="keywordflow">else</span>
<a name="l00421"></a>00421             <span class="keywordflow">if</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 2 ) )
<a name="l00422"></a>00422       {
<a name="l00423"></a>00423             <a class="code" href="Rain_8cpp.html#773602d05fdf2d9c10e497b86688f43d">fpMinDropAngleOfFalling</a> = 20;
<a name="l00424"></a>00424             <a class="code" href="Rain_8cpp.html#9b9bf455e1d688ae1034a800e4cfe3d0">fpMaxDropAngleOfFalling</a> = 70;
<a name="l00425"></a>00425       }<span class="keywordflow">else</span>{
<a name="l00426"></a>00426             <a class="code" href="Rain_8cpp.html#773602d05fdf2d9c10e497b86688f43d">fpMinDropAngleOfFalling</a> = 110;
<a name="l00427"></a>00427             <a class="code" href="Rain_8cpp.html#9b9bf455e1d688ae1034a800e4cfe3d0">fpMaxDropAngleOfFalling</a> = 160;
<a name="l00428"></a>00428       }
<a name="l00429"></a>00429 
<a name="l00430"></a>00430       <a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a> = <a class="code" href="Rain_8cpp.html#773602d05fdf2d9c10e497b86688f43d">fpMinDropAngleOfFalling</a> + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( (<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)(<a class="code" href="Rain_8cpp.html#9b9bf455e1d688ae1034a800e4cfe3d0">fpMaxDropAngleOfFalling</a> - <a class="code" href="Rain_8cpp.html#773602d05fdf2d9c10e497b86688f43d">fpMinDropAngleOfFalling</a>) );
<a name="l00431"></a>00431       
<a name="l00432"></a>00432       <a class="code" href="Rain_8cpp.html#f4eb91340ae2589be3a68911e5f34f02">fpMinDropLength</a> = MIN_DROP_LENGTH + ADD_DROP_LENGTH_IF_STORM * ( <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a> - 1 );
<a name="l00433"></a>00433       <a class="code" href="Rain_8cpp.html#bcc338f8e7d4da59064470c4a5f08a0d">fpMaxDropLength</a> = <a class="code" href="Rain_8cpp.html#f4eb91340ae2589be3a68911e5f34f02">fpMinDropLength</a> + DROP_LENGTH_RANGE;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435       <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a> = <a class="code" href="Rain_8cpp.html#f4eb91340ae2589be3a68911e5f34f02">fpMinDropLength</a> + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( (<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)(fpMaxDropLength - <a class="code" href="Rain_8cpp.html#f4eb91340ae2589be3a68911e5f34f02">fpMinDropLength</a>) );
<a name="l00436"></a>00436 
<a name="l00437"></a>00437       <a class="code" href="Rain_8cpp.html#f4a318f46d96eaf46ee0c58da5e32322">fpMinDropSpeed</a> = BASE_DROP_SPEED * <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a>;
<a name="l00438"></a>00438       <a class="code" href="Rain_8cpp.html#add3c23ce8c4f34c41534cae0ad1db74">fpMaxDropSpeed</a> = <a class="code" href="Rain_8cpp.html#f4a318f46d96eaf46ee0c58da5e32322">fpMinDropSpeed</a> + DROP_SPEED_RANGE;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440       <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a> = <a class="code" href="Rain_8cpp.html#f4a318f46d96eaf46ee0c58da5e32322">fpMinDropSpeed</a> + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( (<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)(<a class="code" href="Rain_8cpp.html#add3c23ce8c4f34c41534cae0ad1db74">fpMaxDropSpeed</a> - <a class="code" href="Rain_8cpp.html#f4a318f46d96eaf46ee0c58da5e32322">fpMinDropSpeed</a>) );
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 }
<a name="l00443"></a>00443 
<a name="l00444"></a><a class="code" href="Rain_8cpp.html#8d0ed8dc6b0f767d87f10c9c00ef1fd5">00444</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#8d0ed8dc6b0f767d87f10c9c00ef1fd5">UpdateRainDropsProperities</a>()
<a name="l00445"></a>00445 {
<a name="l00446"></a>00446       <a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a> += <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( (<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)(1000 * DROP_ANGLE_CHANGE_RATE * <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a> * 2 )) / 1000.0f - DROP_ANGLE_CHANGE_RATE * gbCurrentRainIntensity;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448       <a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a> = max( <a class="code" href="Rain_8cpp.html#773602d05fdf2d9c10e497b86688f43d">fpMinDropAngleOfFalling</a>, <a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a> );
<a name="l00449"></a>00449       <a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a> = min( <a class="code" href="Rain_8cpp.html#9b9bf455e1d688ae1034a800e4cfe3d0">fpMaxDropAngleOfFalling</a>, <a class="code" href="Rain_8cpp.html#3b8a7aeea3a003f04947f68a9df50bba">fpCurrDropAngleOfFalling</a> );
<a name="l00450"></a>00450 
<a name="l00451"></a>00451 
<a name="l00452"></a>00452       <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a> += <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( (<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)(1000 * DROP_LENGTH_CHANGE_RATE * 2 )) / 1000.0f - DROP_LENGTH_CHANGE_RATE;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454       <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a> = max( <a class="code" href="Rain_8cpp.html#f4eb91340ae2589be3a68911e5f34f02">fpMinDropLength</a>, <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a> );
<a name="l00455"></a>00455       <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a> = min( <a class="code" href="Rain_8cpp.html#bcc338f8e7d4da59064470c4a5f08a0d">fpMaxDropLength</a>, <a class="code" href="Rain_8cpp.html#a17df6d4ec1a86f459f420b0f65e45ad">fpCurrDropLength</a> );
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 
<a name="l00458"></a>00458       <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a> += <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( (<a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>)(1000 * DROP_SPEED_CHANGE_RATE * 2 )) / 1000.0f - DROP_SPEED_CHANGE_RATE;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460       <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a> = max( <a class="code" href="Rain_8cpp.html#f4a318f46d96eaf46ee0c58da5e32322">fpMinDropSpeed</a>, <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a> );
<a name="l00461"></a>00461       <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a> = min( <a class="code" href="Rain_8cpp.html#add3c23ce8c4f34c41534cae0ad1db74">fpMaxDropSpeed</a>, <a class="code" href="Rain_8cpp.html#ea8af0ba6bd2d64eab56f54bd5d9b82a">fpCurrDropSpeed</a> );
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 
<a name="l00464"></a>00464 }
<a name="l00465"></a>00465 
<a name="l00466"></a><a class="code" href="Rain_8cpp.html#b6e53cb5e04cd57350ebb3f5f9507083">00466</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#b6e53cb5e04cd57350ebb3f5f9507083">RandomizeRainDropsPosition</a>()
<a name="l00467"></a>00467 {
<a name="l00468"></a>00468       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiIndex;
<a name="l00469"></a>00469       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> ubMoveTo;
<a name="l00470"></a>00470 
<a name="l00471"></a>00471       <span class="keywordflow">for</span>( uiIndex = 0; uiIndex &lt; <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a>; ++uiIndex )
<a name="l00472"></a>00472       {
<a name="l00473"></a>00473             <a class="code" href="structTRainDrop.html">TRainDrop</a> *pCurr = &amp;<a class="code" href="Rain_8cpp.html#1e293d77405ff254a272829321132176">pRainDrops</a>[ uiIndex ];
<a name="l00474"></a>00474 
<a name="l00475"></a>00475             <span class="keywordflow">if</span>( !pCurr-&gt;fAlive )<span class="keywordflow">continue</span>;
<a name="l00476"></a>00476 
<a name="l00477"></a>00477             <span class="keywordflow">if</span>( pCurr-&gt;uiAmountOfTicksToLive )
<a name="l00478"></a>00478             {
<a name="l00479"></a>00479                   ubMoveTo = <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( pCurr-&gt;uiAmountOfTicksToLive ) + 1;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481                   <span class="keywordflow">while</span>( ubMoveTo &lt; pCurr-&gt;uiAmountOfTicksToLive )
<a name="l00482"></a>00482                   {
<a name="l00483"></a>00483                         pCurr-&gt;fpX += pCurr-&gt;fpIncrX;
<a name="l00484"></a>00484                         pCurr-&gt;fpY += pCurr-&gt;fpIncrY;
<a name="l00485"></a>00485                         pCurr-&gt;uiAmountOfTicksToLive--;
<a name="l00486"></a>00486                   }
<a name="l00487"></a>00487             }
<a name="l00488"></a>00488       }
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 }
<a name="l00491"></a>00491 
<a name="l00492"></a><a class="code" href="Rain_8cpp.html#f59c83b44a71009fbb75f9acd3519fbc">00492</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#f59c83b44a71009fbb75f9acd3519fbc">RainClipVideoOverlay</a>()
<a name="l00493"></a>00493 {
<a name="l00494"></a>00494       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiIndex;
<a name="l00495"></a>00495       <a class="code" href="structBACKGROUND__SAVE.html">BACKGROUND_SAVE</a> *pCurr;
<a name="l00496"></a>00496 
<a name="l00497"></a>00497       <span class="keywordflow">for</span>( uiIndex = 0; uiIndex &lt; <a class="code" href="Rain_8cpp.html#71d38868ef8af5154c25f9c1b8651107">guiNumVideoOverlays</a> ; ++uiIndex )
<a name="l00498"></a>00498       {
<a name="l00499"></a>00499             pCurr = <a class="code" href="Rain_8cpp.html#3330d48fd71d6f27e6144a8836d799c2">gVideoOverlays</a>[ uiIndex ].pBackground;
<a name="l00500"></a>00500 
<a name="l00501"></a>00501             <span class="keywordflow">if</span>( pCurr-&gt;<a class="code" href="structBACKGROUND__SAVE.html#b488986350bb3b593255c8f0166449f5">sLeft</a> &lt; <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.right ||
<a name="l00502"></a>00502                    pCurr-&gt;<a class="code" href="structBACKGROUND__SAVE.html#6c9662363ce0257ad117bd9c06c28483">sTop</a> &lt; <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.bottom ||
<a name="l00503"></a>00503                    pCurr-&gt;<a class="code" href="structBACKGROUND__SAVE.html#b5b5c450a112c02944763a92df4fab96">sRight</a> &gt;= <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.left ||
<a name="l00504"></a>00504                    pCurr-&gt;<a class="code" href="structBACKGROUND__SAVE.html#67481604f6780a02d5abb00994f88a44">sBottom</a> &gt;= <a class="code" href="Rain_8cpp.html#501670067d52e79af0bd406d277fec66">gRainRegion</a>.top )
<a name="l00505"></a>00505                         <a class="code" href="vsurface_8cpp.html#10d0257b54c4d27b2d82ead2a46cd581">ColorFillVideoSurfaceArea</a>( <a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a>, pCurr-&gt;<a class="code" href="structBACKGROUND__SAVE.html#b488986350bb3b593255c8f0166449f5">sLeft</a>, pCurr-&gt;<a class="code" href="structBACKGROUND__SAVE.html#6c9662363ce0257ad117bd9c06c28483">sTop</a>, pCurr-&gt;<a class="code" href="structBACKGROUND__SAVE.html#b5b5c450a112c02944763a92df4fab96">sRight</a>, pCurr-&gt;<a class="code" href="structBACKGROUND__SAVE.html#67481604f6780a02d5abb00994f88a44">sBottom</a>, <a class="code" href="himage_8cpp.html#d29939ffcd39c7d1cc0a91222702d361">Get16BPPColor</a>( FROMRGB( 0, 0, 0 ) ) );
<a name="l00506"></a>00506       }
<a name="l00507"></a>00507 }
<a name="l00508"></a>00508 
<a name="l00509"></a><a class="code" href="Rain_8h.html#df88e54de66cc9defd0dba3d8ce14a7f">00509</a> <span class="keywordtype">void</span> <a class="code" href="Rain_8cpp.html#df88e54de66cc9defd0dba3d8ce14a7f">RenderRain</a>()
<a name="l00510"></a>00510 {
<a name="l00511"></a>00511       <span class="keywordflow">if</span>( !<a class="code" href="Rain_8cpp.html#7fa17a4a8adbb1ade2cda979078de711">GetRainIntensityFromEnvWeather</a>() &amp;&amp; <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a> )
<a name="l00512"></a>00512       {
<a name="l00513"></a>00513             <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a> = <a class="code" href="Rain_8cpp.html#7fa17a4a8adbb1ade2cda979078de711">GetRainIntensityFromEnvWeather</a>();
<a name="l00514"></a>00514             <a class="code" href="Rain_8cpp.html#48caef69d5caf57ade5bfeae4bac2a26">ResetRain</a>();
<a name="l00515"></a>00515       }
<a name="l00516"></a>00516 
<a name="l00517"></a>00517       <span class="keywordflow">if</span>( !<a class="code" href="video_8cpp.html#afab3eef2b599d1a4b3ab8ff14999e74">IsItAllowedToRenderRain</a>() )<span class="keywordflow">return</span>;
<a name="l00518"></a>00518 
<a name="l00519"></a>00519       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> == <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2347a303c10ab85b1fc3607b9259e82f2">SHOPKEEPER_SCREEN</a> )
<a name="l00520"></a>00520       {
<a name="l00521"></a>00521             <a class="code" href="vsurface_8cpp.html#10d0257b54c4d27b2d82ead2a46cd581">ColorFillVideoSurfaceArea</a>( <a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a>, SKI_X_OFFSET, SKI_Y_OFFSET, 535, 340, <a class="code" href="himage_8cpp.html#d29939ffcd39c7d1cc0a91222702d361">Get16BPPColor</a>( FROMRGB( 0, 0, 0 ) ) );
<a name="l00522"></a>00522             <span class="keywordflow">return</span>;
<a name="l00523"></a>00523       }
<a name="l00524"></a>00524 
<a name="l00525"></a>00525       <span class="keywordflow">if</span>( <a class="code" href="overhead_01map_8cpp.html#81b21f30bc370df2ea0bf170a89ff063">InOverheadMap</a>() )
<a name="l00526"></a>00526       {
<a name="l00527"></a>00527             <span class="comment">// WANNE 2</span>
<a name="l00528"></a>00528             <a class="code" href="vsurface_8cpp.html#10d0257b54c4d27b2d82ead2a46cd581">ColorFillVideoSurfaceArea</a>( <a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a>, OM_X_OFFSET, OM_Y_OFFSET, <a class="code" href="local_8h.html#599adbe412c60e0cc5abb86be7ee4507">SCREEN_WIDTH</a>, <a class="code" href="local_8h.html#f1c710caf1e3a9e81829078054e83799">SCREEN_HEIGHT</a> - 120, <a class="code" href="himage_8cpp.html#d29939ffcd39c7d1cc0a91222702d361">Get16BPPColor</a>( FROMRGB( 0, 0, 0 ) ) );
<a name="l00529"></a>00529             <span class="keywordflow">return</span>;
<a name="l00530"></a>00530       }
<a name="l00531"></a>00531 
<a name="l00532"></a>00532       <span class="keywordflow">if</span>( <a class="code" href="email_8cpp.html#ea86d0b0f3567d58907af3936e1b0959">fFirstTime</a> )
<a name="l00533"></a>00533       {
<a name="l00534"></a>00534             <a class="code" href="Rain_8cpp.html#bf4a3bfc82cb8b845eda42bf28cb3027">InitializeRainData</a>();
<a name="l00535"></a>00535             <a class="code" href="email_8cpp.html#ea86d0b0f3567d58907af3936e1b0959">fFirstTime</a> = FALSE;
<a name="l00536"></a>00536       }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538       <span class="keywordflow">if</span>( GetJA2Clock() &lt; <a class="code" href="Rain_8cpp.html#e32c4e16de1550a8d1fb00cfdbe9fdfa">guiLastRainUpdate</a> )
<a name="l00539"></a>00539             <a class="code" href="Rain_8cpp.html#e32c4e16de1550a8d1fb00cfdbe9fdfa">guiLastRainUpdate</a> = GetJA2Clock();
<a name="l00540"></a>00540 
<a name="l00541"></a>00541       <span class="keywordflow">if</span>( GetJA2Clock() &lt; <a class="code" href="Rain_8cpp.html#e32c4e16de1550a8d1fb00cfdbe9fdfa">guiLastRainUpdate</a> + 1000 / RAIN_UPDATE_RATE )
<a name="l00542"></a>00542             <span class="keywordflow">return</span>;
<a name="l00543"></a>00543       <span class="keywordflow">else</span>
<a name="l00544"></a>00544             <a class="code" href="Rain_8cpp.html#e32c4e16de1550a8d1fb00cfdbe9fdfa">guiLastRainUpdate</a> = GetJA2Clock();
<a name="l00545"></a>00545 
<a name="l00546"></a>00546       <span class="keywordflow">if</span>( <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a> != <a class="code" href="Rain_8cpp.html#7fa17a4a8adbb1ade2cda979078de711">GetRainIntensityFromEnvWeather</a>() )
<a name="l00547"></a>00547       {
<a name="l00548"></a>00548             <a class="code" href="opplist_8cpp.html#2758c798d78a14ad7f1703663223fb2b">gbCurrentRainIntensity</a> = <a class="code" href="Rain_8cpp.html#7fa17a4a8adbb1ade2cda979078de711">GetRainIntensityFromEnvWeather</a>();
<a name="l00549"></a>00549             <a class="code" href="Rain_8cpp.html#48caef69d5caf57ade5bfeae4bac2a26">ResetRain</a>();
<a name="l00550"></a>00550             <a class="code" href="Rain_8cpp.html#53c9515f94f35bc77b9aca55843a1055">GenerateRainDropsList</a>();
<a name="l00551"></a>00551             <a class="code" href="Rain_8cpp.html#860bf8919bc0ded05baf2286f887c8dc">GenerateRainMaximums</a>();
<a name="l00552"></a>00552 
<a name="l00553"></a>00553 
<a name="l00554"></a>00554             <a class="code" href="Rain_8cpp.html#456aace5b153d21afd6715a6908ac76d">guiCurrAmountOfDeadRainDrops</a> = <a class="code" href="Rain_8cpp.html#ea2a53ed82bcf13a8bfbd834da89c57a">guiCurrMaxAmountOfRainDrops</a>;
<a name="l00555"></a>00555             
<a name="l00556"></a>00556             <a class="code" href="Rain_8cpp.html#3051653e0843f62176692e52e555c3b7">CreateRainDrops</a>();
<a name="l00557"></a>00557             <a class="code" href="Rain_8cpp.html#b6e53cb5e04cd57350ebb3f5f9507083">RandomizeRainDropsPosition</a>();
<a name="l00558"></a>00558       }
<a name="l00559"></a>00559 
<a name="l00560"></a>00560       <a class="code" href="Rain_8cpp.html#456aace5b153d21afd6715a6908ac76d">guiCurrAmountOfDeadRainDrops</a> = 0;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562       <a class="code" href="Rain_8cpp.html#8d0ed8dc6b0f767d87f10c9c00ef1fd5">UpdateRainDropsProperities</a>();
<a name="l00563"></a>00563       <a class="code" href="Rain_8cpp.html#5eee0b60f73a970b0d6be2111883d380">UpdateRainDrops</a>();
<a name="l00564"></a>00564       <a class="code" href="Rain_8cpp.html#3fa61f07b91e67391d45ca8d99edd0c8">KillOutOfRegionRainDrops</a>();
<a name="l00565"></a>00565       <a class="code" href="Rain_8cpp.html#3051653e0843f62176692e52e555c3b7">CreateRainDrops</a>();
<a name="l00566"></a>00566 
<a name="l00567"></a>00567       <a class="code" href="Rain_8cpp.html#7a8032e8d24dabc37373236c2e88787e">BlankRainRenderSurface</a>();
<a name="l00568"></a>00568       <a class="code" href="Rain_8cpp.html#daa0e77eb4115501f07c111732102a1c">RenderRainOnSurface</a>();
<a name="l00569"></a>00569 
<a name="l00570"></a>00570       <a class="code" href="Rain_8cpp.html#f59c83b44a71009fbb75f9acd3519fbc">RainClipVideoOverlay</a>();
<a name="l00571"></a>00571 
<a name="l00572"></a>00572       <span class="keywordflow">if</span>( <a class="code" href="Interface_01Dialogue_8cpp.html#b341ced3aaefe419e0cc1e62711da1de">gfInTalkPanel</a> )
<a name="l00573"></a>00573       {
<a name="l00574"></a>00574             <a class="code" href="vsurface_8cpp.html#10d0257b54c4d27b2d82ead2a46cd581">ColorFillVideoSurfaceArea</a>( <a class="code" href="video_8cpp.html#505fb50317c4df73b837ac4730a10177">guiRainRenderSurface</a>, <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#620ebee2d84baeb0e2682310fdb8127d">sX</a>, <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#0ad9134310b7c642e02cf6682797c6b6">sY</a>, <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#620ebee2d84baeb0e2682310fdb8127d">sX</a> + <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#8044dd72ad3c06a40d4f1109d4695c26">usWidth</a>, <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#0ad9134310b7c642e02cf6682797c6b6">sY</a> + <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#cbab81b48996ed9d06218cf31b54dc85">usHeight</a>, <a class="code" href="himage_8cpp.html#d29939ffcd39c7d1cc0a91222702d361">Get16BPPColor</a>( FROMRGB( 0, 0, 0 ) ) );
<a name="l00575"></a>00575             <span class="keywordflow">if</span> ( <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#916e34f712b00d500711dd64c5591fe1">fRenderSubTitlesNow</a> )
<a name="l00576"></a>00576             {
<a name="l00577"></a>00577                   <span class="keywordflow">if</span>( <a class="code" href="Rain_8cpp.html#fb29d4c437ea2e4ce77b2102c9ab6cda">gPopUpTextBox</a> )
<a name="l00578"></a>00578                         <a class="code" href="vsurface_8cpp.html#10d0257b54c4d27b2d82ead2a46cd581">ColorFillVideoSurfaceArea</a>( guiRainRenderSurface, <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#ecaaa164db4d7f89cd5769c63bfcacf5">sPopupX</a>, <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#8a21e9e6960b46361e84577591717da3">sPopupY</a>, (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)( <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#ecaaa164db4d7f89cd5769c63bfcacf5">sPopupX</a> + <a class="code" href="Rain_8cpp.html#fb29d4c437ea2e4ce77b2102c9ab6cda">gPopUpTextBox</a>-&gt;<a class="code" href="structMercPopUpBox.html#fb97add8dd7f405235108e8957f81608">sWidth</a> ), (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)( <a class="code" href="Interface_01Dialogue_8cpp.html#96687692e3f323344c26cd8bc0e9dc38">gTalkPanel</a>.<a class="code" href="structNPC__DIALOGUE__TYPE.html#8a21e9e6960b46361e84577591717da3">sPopupY</a> + <a class="code" href="Rain_8cpp.html#fb29d4c437ea2e4ce77b2102c9ab6cda">gPopUpTextBox</a>-&gt;<a class="code" href="structMercPopUpBox.html#891b4e69335c93491c0abe2235133bc6">sHeight</a> ), <a class="code" href="himage_8cpp.html#d29939ffcd39c7d1cc0a91222702d361">Get16BPPColor</a>( FROMRGB( 0, 0, 0 ) ) );
<a name="l00579"></a>00579             }
<a name="l00580"></a>00580       }
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Sep 9 13:48:50 2006 for Build by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
