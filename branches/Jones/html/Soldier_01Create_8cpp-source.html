<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Build: Soldier Create.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_3179ea33d55a76dc38212d9eab798728.html">export</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e5664b4b56927c8728eb3192fa60e338.html">hdc2</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_1eb12a41a47efb9efcd82fa98f4f4dbd.html">FTP</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_80cc1f21a78ab7941088ea567f236150.html">ja2src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_994ab287602efefceafe55287a3657d6.html">Build</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_43ed33c8f48e75fecb0508860a16371c.html">Tactical</a></div>
<h1>Soldier Create.cpp</h1><a href="Soldier_01Create_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifdef PRECOMPILEDHEADERS</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="Tactical_01All_8h.html">Tactical All.h</a>"</span>
<a name="l00003"></a>00003 <span class="preprocessor">      #include "<a class="code" href="PreBattle_01Interface_8h.html">PreBattle Interface.h</a>"</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include "saveloadgame.h"</span>
<a name="l00005"></a>00005 <span class="preprocessor">#else</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="sgp_8h.html">sgp.h</a>"</span>
<a name="l00007"></a>00007 <span class="preprocessor">      #include "<a class="code" href="Soldier_01Create_8h.html">Soldier Create.h</a>"</span>
<a name="l00008"></a>00008 <span class="preprocessor">      #include "overhead.h"</span>
<a name="l00009"></a>00009 <span class="preprocessor">      #include "wcheck.h"</span>
<a name="l00010"></a>00010 <span class="preprocessor">      #include "soldier profile.h"</span>
<a name="l00011"></a>00011 <span class="preprocessor">      #include "animation control.h"</span>
<a name="l00012"></a>00012 <span class="preprocessor">      #include "animation data.h"</span>
<a name="l00013"></a>00013 <span class="preprocessor">      #include "sound control.h"</span>
<a name="l00014"></a>00014 <span class="preprocessor">      #include "overhead types.h"</span>
<a name="l00015"></a>00015 <span class="preprocessor">      #include "<a class="code" href="faces_8h.html">faces.h</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">      #include "isometric utils.h"</span>
<a name="l00017"></a>00017 <span class="preprocessor">      #include "<a class="code" href="worldman_8h.html">worldman.h</a>"</span>
<a name="l00018"></a>00018 <span class="preprocessor">      #include "items.h"</span>
<a name="l00019"></a>00019 <span class="preprocessor">      #include "weapons.h"</span>
<a name="l00020"></a>00020 <span class="preprocessor">      #include "<a class="code" href="opplist_8h.html">opplist.h</a>"</span>
<a name="l00021"></a>00021 <span class="preprocessor">      #include "<a class="code" href="random_8h.html">random.h</a>"</span>
<a name="l00022"></a>00022 <span class="preprocessor">      #include "<a class="code" href="Assignments_8h.html">Assignments.h</a>"</span>
<a name="l00023"></a>00023 <span class="preprocessor">      #include "<a class="code" href="Soldier_01Init_01List_8h.html">Soldier Init List.h</a>"</span>
<a name="l00024"></a>00024 <span class="preprocessor">      #include "<a class="code" href="EditorMercs_8h.html">EditorMercs.h</a>"</span>
<a name="l00025"></a>00025 <span class="preprocessor">      #include "<a class="code" href="Smell_8h.html">Smell.h</a>"</span>
<a name="l00026"></a>00026 <span class="preprocessor">      #include "<a class="code" href="Squads_8h.html">Squads.h</a>"</span>
<a name="l00027"></a>00027 <span class="preprocessor">      #include "<a class="code" href="Interface_01Panels_8h.html">Interface Panels.h</a>"</span>
<a name="l00028"></a>00028 <span class="preprocessor">      #include "Strategicmap.h"</span>
<a name="l00029"></a>00029 <span class="preprocessor">      #include "<a class="code" href="Inventory_01Choosing_8h.html">Inventory Choosing.h</a>"</span>
<a name="l00030"></a>00030 <span class="preprocessor">      #include "<a class="code" href="Queen_01Command_8h.html">Queen Command.h</a>"</span>
<a name="l00031"></a>00031 <span class="preprocessor">      #include "<a class="code" href="Soldier_01Add_8h.html">Soldier Add.h</a>"</span>
<a name="l00032"></a>00032 <span class="preprocessor">      #include "<a class="code" href="SaveLoadGame_8h.html">SaveLoadGame.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">      #include "<a class="code" href="Quests_8h.html">Quests.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">      #include "<a class="code" href="Sys_01Globals_8h.html">Sys Globals.h</a>"</span>
<a name="l00035"></a>00035 <span class="preprocessor">      #include "<a class="code" href="Scheduling_8h.html">Scheduling.h</a>"</span>
<a name="l00036"></a>00036 <span class="preprocessor">      #include "<a class="code" href="Rotting_01Corpses_8h.html">Rotting Corpses.h</a>"</span>
<a name="l00037"></a>00037 <span class="preprocessor">      #include "vehicles.h"</span>
<a name="l00038"></a>00038 <span class="preprocessor">      #include "handle ui.h"</span>
<a name="l00039"></a>00039 <span class="preprocessor">      #include "text.h"</span>
<a name="l00040"></a>00040 <span class="preprocessor">      #include "<a class="code" href="Campaign_8h.html">Campaign.h</a>"</span>
<a name="l00041"></a>00041 <span class="preprocessor">      #include "<a class="code" href="GameSettings_8h.html">GameSettings.h</a>"</span>
<a name="l00042"></a>00042 <span class="preprocessor">      #include "<a class="code" href="PreBattle_01Interface_8h.html">PreBattle Interface.h</a>"</span>
<a name="l00043"></a>00043 <span class="preprocessor">      #include "<a class="code" href="Auto_01Resolve_8h.html">Auto Resolve.h</a>"</span>
<a name="l00044"></a>00044 <span class="preprocessor">      #include "<a class="code" href="Morale_8h.html">Morale.h</a>"</span>
<a name="l00045"></a>00045 <span class="preprocessor">#endif</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="comment">// THESE 3 DIFFICULTY FACTORS MUST ALWAYS ADD UP TO 100% EXACTLY!!!</span>
<a name="l00049"></a>00049 <span class="preprocessor">#define DIFF_FACTOR_PLAYER_PROGRESS             50</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#define DIFF_FACTOR_PALACE_DISTANCE             30</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#define DIFF_FACTOR_GAME_DIFFICULTY             20</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00053"></a>00053 <span class="comment">// additional difficulty modifiers</span>
<a name="l00054"></a>00054 <span class="preprocessor">#define DIFF_MODIFIER_SOME_PROGRESS             +5</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#define DIFF_MODIFIER_NO_INCOME                             -5</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor">#define DIFF_MODIFIER_DRASSEN_MILITIA           +10</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="preprocessor">#define PALACE_SECTOR_X 3</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="preprocessor">#define PALACE_SECTOR_Y 16</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00062"></a>00062 <span class="preprocessor">#define MAX_PALACE_DISTANCE         20</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <span class="comment">//Private functions used within TacticalCreateStruct()</span>
<a name="l00066"></a>00066 <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#a80898424cc4b623520c250ecccd607e">InitSoldierStruct</a>( <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l00067"></a>00067 <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Soldier_01Create_8cpp.html#e5a6ef9c711125386d7c024ae3db4b4b">TacticalCopySoldierFromProfile</a>( <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pCreateStruct );
<a name="l00068"></a>00068 <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Soldier_01Create_8cpp.html#db6ef459ffdff4fbaac6024db991ca0a">TacticalCopySoldierFromCreateStruct</a>( <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pCreateStruct );
<a name="l00069"></a>00069 <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#4dec121f35f85b44ec2030167e53e688">CopyProfileItems</a>( <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pCreateStruct );
<a name="l00070"></a>00070 <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> <a class="code" href="Soldier_01Create_8cpp.html#0be6563e41a5ee887f115ca4f84c59f0">GetLocationModifier</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSoldierClass );
<a name="l00071"></a>00071 <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#fb6085cce840d328643552797aa3ee0f">ReduceHighExpLevels</a>( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> *pbExpLevel );
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="Soldier_01Create_8h.html#7b183c22c3d7f98a9e33932fc3997a89">00074</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Soldier_01Create_8cpp.html#7b183c22c3d7f98a9e33932fc3997a89">gfProfiledEnemyAdded</a> = FALSE;
<a name="l00075"></a>00075 
<a name="l00076"></a><a class="code" href="Soldier_01Create_8cpp.html#2028c4133c32b572fe57b2088403d06f">00076</a> <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="SaveLoadGame_8cpp.html#2028c4133c32b572fe57b2088403d06f">guiCurrentUniqueSoldierId</a> = 1;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">// CJC note: trust me, it's easiest just to put this here; this is the only</span>
<a name="l00079"></a>00079 <span class="comment">// place it should need to be used</span>
<a name="l00080"></a><a class="code" href="Soldier_01Create_8cpp.html#6dc43f7808994e9356c9399ef75f0ecd">00080</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> <a class="code" href="Soldier_01Create_8cpp.html#6dc43f7808994e9356c9399ef75f0ecd">gubItemDroppableFlag</a>[<a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a>] =
<a name="l00081"></a>00081 {
<a name="l00082"></a>00082       0x01,
<a name="l00083"></a>00083       0x02,
<a name="l00084"></a>00084       0x04,
<a name="l00085"></a>00085       0,
<a name="l00086"></a>00086       0,
<a name="l00087"></a>00087       0x08,
<a name="l00088"></a>00088       0,
<a name="l00089"></a>00089       0x10,
<a name="l00090"></a>00090       0x20,
<a name="l00091"></a>00091       0x40,
<a name="l00092"></a>00092       0x80,
<a name="l00093"></a>00093       0,
<a name="l00094"></a>00094       0,
<a name="l00095"></a>00095       0,
<a name="l00096"></a>00096       0,
<a name="l00097"></a>00097       0,
<a name="l00098"></a>00098       0,
<a name="l00099"></a>00099       0,
<a name="l00100"></a>00100       0
<a name="l00101"></a>00101 };
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="Soldier_01Create_8h.html#61eecbf43a5419be6c1b8891e7de1e32">00104</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#61eecbf43a5419be6c1b8891e7de1e32">RandomizeNewSoldierStats</a>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pCreateStruct )
<a name="l00105"></a>00105 {
<a name="l00106"></a>00106       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>                                           = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00107"></a>00107       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>                                              = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>;
<a name="l00108"></a>00108       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>                                           = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00109"></a>00109       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>                                         = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00110"></a>00110       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a>                                          = 1 + (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(4);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112       <span class="comment">// Randomize skills (for now)</span>
<a name="l00113"></a>00113       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a>                          = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00114"></a>00114       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>                                           = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00115"></a>00115       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>                                  = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00116"></a>00116       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>                                         = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00117"></a>00117       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>                                  = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00118"></a>00118       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>                                          = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00119"></a>00119       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>                                            = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(50)+50;
<a name="l00120"></a>00120       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#d9cd617657bb1765b57e7647ff2b0a92">bAttitude</a>                                          = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Overhead_01Types_8h.html#731c15105066cc17fd55a258db2879d318853594333cd376ff96348884974512">MAXATTITUDES</a> );
<a name="l00121"></a>00121       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a>                                            = <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138fddbbeee5695e4be7e9f148315873ce2b">FARPATROL</a>;
<a name="l00122"></a>00122       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>                                            = 50;
<a name="l00123"></a>00123       pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#7b9636f83cba71d8cd81f2ec419ddc52">bAIMorale</a>                                          = <a class="code" href="Overhead_01Types_8h.html#5bc6c193b77b15ca30bb8821799616e34e0b5e2e2be99f4e43c1321cf58b19ad">MORALE_FEARLESS</a>;
<a name="l00124"></a>00124 }
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="Soldier_01Create_8cpp.html#0923fccb5699d7aef9dd49e92c8f75e6">00126</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#0923fccb5699d7aef9dd49e92c8f75e6">DecideToAssignSniperOrders</a>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> * pp )
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128       <span class="comment">//Madd: decide if soldier should be a sniper</span>
<a name="l00129"></a>00129 
<a name="l00130"></a>00130       <span class="keywordflow">if</span> ( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a> == <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138fc84bd0ee013c388bd7cc8139be7206a2">STATIONARY</a> || pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a> == <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138fdb56c8891ff3ae7edaab609e648d959e">ONGUARD</a> )
<a name="l00131"></a>00131       {
<a name="l00132"></a>00132             <span class="comment">// 30% of anybody w/a scope and decent range being a sniper, 80% chance of a guy w/a sniper rifle being a sniper</span>
<a name="l00133"></a>00133             <span class="keywordflow">if</span> ( (<a class="code" href="Weapons_8cpp.html#b73cec2c5b3b1f683e559be52c8fa535">GunRange</a>(&amp;pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[<a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc87855408e678e638d95e18d5e9a2a64a96e2e">HANDPOS</a>]) &gt;= 40 &amp;&amp; <a class="code" href="Items_8cpp.html#b7014ddea7d8c7348c7a0bad7e707152">IsScoped</a>(&amp;pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[HANDPOS]) &amp;&amp; <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(100) &lt; 30) || ( <a class="code" href="Weapons_8cpp.html#fac72e30bc7c36f55257eac0542ce51d">Weapon</a>[pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[HANDPOS].<a class="code" href="structOBJECTTYPE.html#4fbe05335f161f08f354566b8e5a0a19">usItem</a>].ubWeaponType == <a class="code" href="Weapons_8h.html#ff0a3b1f6b4b74365e6016c44095ed31520c1662bd8af54af780415c24112621">GUN_SN_RIFLE</a> &amp;&amp; <a class="code" href="Items_8cpp.html#b7014ddea7d8c7348c7a0bad7e707152">IsScoped</a>(&amp;pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[HANDPOS]) &amp;&amp; <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(100) &lt; 80 ) )
<a name="l00134"></a>00134             {
<a name="l00135"></a>00135                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a> = <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138f3ccb90f0745801f31a0175bebe2261ae">SNIPER</a>;
<a name="l00136"></a>00136 
<a name="l00137"></a>00137                   DebugMsg ( <a class="code" href="DEBUG_8cpp.html#e69a17b3d16566410d9b3cf08cb469a7">TOPIC_JA2AI</a> , DBG_LEVEL_3 , <a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"Sniper Created"</span>) );
<a name="l00138"></a>00138             }
<a name="l00139"></a>00139       }
<a name="l00140"></a>00140 }
<a name="l00141"></a>00141 
<a name="l00142"></a><a class="code" href="Soldier_01Create_8h.html#9012dd4ad15957a14b023ae9fee7c862">00142</a> <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a>* <a class="code" href="Soldier_01Create_8cpp.html#9012dd4ad15957a14b023ae9fee7c862">TacticalCreateSoldier</a>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pCreateStruct, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *pubID )
<a name="l00143"></a>00143 {
<a name="l00144"></a>00144       <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a>             Soldier;
<a name="l00145"></a>00145       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a>                               cnt;
<a name="l00146"></a>00146       <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a>             *pTeamSoldier;
<a name="l00147"></a>00147       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>                             fGuyAvail = FALSE;
<a name="l00148"></a>00148       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                               bLastTeamID;
<a name="l00149"></a>00149       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                               ubVehicleID = 0;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151       *pubID = NOBODY;
<a name="l00152"></a>00152       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"TacticalCreateSoldier"</span>));
<a name="l00153"></a>00153 
<a name="l00154"></a>00154             <span class="comment">//Kris:</span>
<a name="l00155"></a>00155       <span class="comment">//Huge no no!  See the header file for description of static detailed placements.</span>
<a name="l00156"></a>00156       <span class="comment">//If this expression ever evaluates to true, then it will expose serious problems.</span>
<a name="l00157"></a>00157       <span class="comment">//Simply returning won't help.</span>
<a name="l00158"></a>00158       <span class="keywordflow">if</span>( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f018fea6cfb1b744a620745d7d16cb54">fStatic</a> )
<a name="l00159"></a>00159       { 
<a name="l00160"></a>00160             Assert( 0 );
<a name="l00161"></a>00161       }
<a name="l00162"></a>00162       
<a name="l00163"></a>00163       <span class="comment">// Some values initialized here but could be changed before going to the common one</span>
<a name="l00164"></a>00164       <a class="code" href="Soldier_01Create_8cpp.html#a80898424cc4b623520c250ecccd607e">InitSoldierStruct</a>( &amp;Soldier );
<a name="l00165"></a>00165 
<a name="l00166"></a>00166       Soldier.<a class="code" href="structSOLDIERTYPE.html#60a04bd22cd1bd105c4dfc8b474c7f77">uiUniqueSoldierIdValue</a> = <a class="code" href="SaveLoadGame_8cpp.html#2028c4133c32b572fe57b2088403d06f">guiCurrentUniqueSoldierId</a>;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168       <a class="code" href="SaveLoadGame_8cpp.html#2028c4133c32b572fe57b2088403d06f">guiCurrentUniqueSoldierId</a>++;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170       <span class="comment">// OK, CHECK IF WE HAVE A VALID PROFILE ID!</span>
<a name="l00171"></a>00171       <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> != NO_PROFILE )
<a name="l00172"></a>00172       {
<a name="l00173"></a>00173             <span class="comment">// We have a merc created by profile, do this!</span>
<a name="l00174"></a>00174             <a class="code" href="Soldier_01Create_8cpp.html#e5a6ef9c711125386d7c024ae3db4b4b">TacticalCopySoldierFromProfile</a>( &amp;Soldier, pCreateStruct );
<a name="l00175"></a>00175       }
<a name="l00176"></a>00176       <span class="keywordflow">else</span>
<a name="l00177"></a>00177       {
<a name="l00178"></a>00178             <a class="code" href="Soldier_01Create_8cpp.html#db6ef459ffdff4fbaac6024db991ca0a">TacticalCopySoldierFromCreateStruct</a>( &amp;Soldier, pCreateStruct );
<a name="l00179"></a>00179       }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181       <span class="comment">// If we are NOT creating an existing soldier ( ie, this is not from a save game ), create soldier normally</span>
<a name="l00182"></a>00182       <span class="keywordflow">if</span>( !pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#48062058637be2c4789e7b61e9e19bc0">fUseExistingSoldier</a> )
<a name="l00183"></a>00183       {
<a name="l00184"></a>00184             <span class="comment">// We want to determine what team to place these guys in...</span>
<a name="l00185"></a>00185 
<a name="l00186"></a>00186             <span class="comment">// First off, force player team if they are a player guy! ( do some other stuff for only our guys!</span>
<a name="l00187"></a>00187             <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4754277f31a04d79a679b00a5e5dd198">fPlayerMerc</a> )
<a name="l00188"></a>00188             {
<a name="l00189"></a>00189                   Soldier.<a class="code" href="structSOLDIERTYPE.html#eb633099940bc20ff5a969bce84eab42">uiStatusFlags</a> |= SOLDIER_PC;
<a name="l00190"></a>00190                   Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> = <a class="code" href="Campaign_8cpp.html#47b2067ff75193e24776eda5297400ff">gbPlayerNum</a>;
<a name="l00191"></a>00191                   Soldier.<a class="code" href="structSOLDIERTYPE.html#73246323764393ce2a5ece7fcb7b7cf8">bVisible</a> = 1;
<a name="l00192"></a>00192             }
<a name="l00193"></a>00193             <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ccbdb6d232dab083430791ef7ecc2224">fPlayerPlan</a> )
<a name="l00194"></a>00194             {
<a name="l00195"></a>00195                   Soldier.<a class="code" href="structSOLDIERTYPE.html#eb633099940bc20ff5a969bce84eab42">uiStatusFlags</a> |= SOLDIER_PC;
<a name="l00196"></a>00196                   Soldier.<a class="code" href="structSOLDIERTYPE.html#73246323764393ce2a5ece7fcb7b7cf8">bVisible</a> = 1;
<a name="l00197"></a>00197             }
<a name="l00198"></a>00198             <span class="keywordflow">else</span>
<a name="l00199"></a>00199             {
<a name="l00200"></a>00200                   Soldier.<a class="code" href="structSOLDIERTYPE.html#eb633099940bc20ff5a969bce84eab42">uiStatusFlags</a> |= SOLDIER_ENEMY;
<a name="l00201"></a>00201             }
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 
<a name="l00204"></a>00204             <span class="comment">// Check for auto team</span>
<a name="l00205"></a>00205             <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ebcd52cb950a237b1fa9d7de49227dad">bTeam</a> == SOLDIER_CREATE_AUTO_TEAM )
<a name="l00206"></a>00206             {
<a name="l00207"></a>00207                   <span class="comment">// Auto determine!</span>
<a name="l00208"></a>00208                   <span class="comment">// OK, if this is our guy, set team as ours!</span>
<a name="l00209"></a>00209                   <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4754277f31a04d79a679b00a5e5dd198">fPlayerMerc</a> )
<a name="l00210"></a>00210                   {
<a name="l00211"></a>00211                         Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> = OUR_TEAM;           
<a name="l00212"></a>00212                         Soldier.<a class="code" href="structSOLDIERTYPE.html#1d2f7622e92da60974fe6682514ac514">bNormalSmell</a> = NORMAL_HUMAN_SMELL_STRENGTH;
<a name="l00213"></a>00213                   }
<a name="l00214"></a>00214                   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ccbdb6d232dab083430791ef7ecc2224">fPlayerPlan</a> )
<a name="l00215"></a>00215                   {
<a name="l00216"></a>00216                         Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> = PLAYER_PLAN;
<a name="l00217"></a>00217                   }
<a name="l00218"></a>00218                   <span class="keywordflow">else</span>
<a name="l00219"></a>00219                   {
<a name="l00220"></a>00220                         <span class="comment">// LOOK AT BODY TYPE!</span>
<a name="l00221"></a>00221                         <span class="keywordflow">switch</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> )
<a name="l00222"></a>00222                         {
<a name="l00223"></a>00223                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a788083a907978249a0160b5b1dd9ee4a4">REGMALE</a>:
<a name="l00224"></a>00224                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7e6eac15857ce481c9ed507f7459a3507">BIGMALE</a>:
<a name="l00225"></a>00225                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a73a7e8d65cd007e97390c6a3ae18062ce">STOCKYMALE</a>:
<a name="l00226"></a>00226                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7040d5c40e76c4103ced101507f96e2f6">REGFEMALE</a>:
<a name="l00227"></a>00227             
<a name="l00228"></a>00228                                     Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> = ENEMY_TEAM;
<a name="l00229"></a>00229                                     <span class="keywordflow">break</span>;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a78e8f2de8ab141e991ee2b34ebb1dfda1">ADULTFEMALEMONSTER</a>:
<a name="l00232"></a>00232                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a79dec21a470d88f8b8a8704cb9b5ac827">AM_MONSTER</a>:
<a name="l00233"></a>00233                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f60be3c60e156d8cec34802d7f3607b">YAF_MONSTER</a>:
<a name="l00234"></a>00234                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a725460f03079c143c4456f779763fa23b">YAM_MONSTER</a>:
<a name="l00235"></a>00235                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7c6b7363ef12dbe5ad2377613a3d33db9">LARVAE_MONSTER</a>:
<a name="l00236"></a>00236                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7e687bcc336b8be3ac4aac1346046d095">INFANT_MONSTER</a>:
<a name="l00237"></a>00237                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f327a7c32f4f979f42e8d6f6adbf587">QUEENMONSTER</a>:
<a name="l00238"></a>00238 
<a name="l00239"></a>00239                                     Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> = CREATURE_TEAM;
<a name="l00240"></a>00240                                     <span class="keywordflow">break</span>;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a72254b6f06629056dd86be50df5347676">FATCIV</a>:
<a name="l00243"></a>00243                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7f084d9af5cfa408362f35095268783f6">MANCIV</a>:
<a name="l00244"></a>00244                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7af422ea2d015cab1eb7d0cf653186a05">MINICIV</a>:
<a name="l00245"></a>00245                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a734700b4c6e766408a86e53420c62163c">DRESSCIV</a>:
<a name="l00246"></a>00246                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7d280093211f32a309c7e52bc1e4570c8">HATKIDCIV</a>:
<a name="l00247"></a>00247                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7572e26862c1a3864663d8fe55b2f7f4d">KIDCIV</a>:
<a name="l00248"></a>00248                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a748505ba252c1ec37e34d882e6f4a3ecf">COW</a>:
<a name="l00249"></a>00249                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7143fbbb5aa867c244f7cf6a230545002">CROW</a>:
<a name="l00250"></a>00250                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7ecd13f015271b5b87d3e53037a5011bb">ROBOTNOWEAPON</a>:
<a name="l00251"></a>00251 
<a name="l00252"></a>00252                                     Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> = CIV_TEAM;
<a name="l00253"></a>00253                                     <span class="keywordflow">break</span>;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255                         }
<a name="l00256"></a>00256                   }
<a name="l00257"></a>00257             }
<a name="l00258"></a>00258             <span class="keywordflow">else</span>
<a name="l00259"></a>00259             {
<a name="l00260"></a>00260                   Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ebcd52cb950a237b1fa9d7de49227dad">bTeam</a>;
<a name="l00261"></a>00261                   <span class="comment">// if WE_SEE_WHAT_MILITIA_SEES</span>
<a name="l00262"></a>00262                   <span class="keywordflow">if</span> ( Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> == MILITIA_TEAM )
<a name="l00263"></a>00263                   {
<a name="l00264"></a>00264                         Soldier.<a class="code" href="structSOLDIERTYPE.html#73246323764393ce2a5ece7fcb7b7cf8">bVisible</a> = 1;
<a name="l00265"></a>00265                   }
<a name="l00266"></a>00266             }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268             <span class="comment">// Copy the items over for thew soldier, only if we have a valid profile id!</span>
<a name="l00269"></a>00269             <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> != NO_PROFILE )
<a name="l00270"></a>00270                   <a class="code" href="Soldier_01Create_8cpp.html#4dec121f35f85b44ec2030167e53e688">CopyProfileItems</a>( &amp;Soldier, pCreateStruct );
<a name="l00271"></a>00271 
<a name="l00272"></a>00272             <span class="comment">// Given team, get an ID for this guy!</span>
<a name="l00273"></a>00273 
<a name="l00274"></a>00274             <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> != <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> )
<a name="l00275"></a>00275             {
<a name="l00276"></a>00276                   cnt = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ Soldier.bTeam ].<a class="code" href="structTacticalTeamType.html#f8fe819ad07b242f5dbf97fd4c69b00d">bFirstID</a>;
<a name="l00277"></a>00277 
<a name="l00278"></a>00278                   <span class="comment">// ATE: If we are a vehicle, and a player, start at a different slot ( 2 - max )</span>
<a name="l00279"></a>00279                   <span class="keywordflow">if</span>( Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a76af8c23138db907d1a486cd724a86f5b">HUMVEE</a> ||
<a name="l00280"></a>00280                               Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f90b299525bc0859c82cf015baba03a">ELDORADO</a> ||
<a name="l00281"></a>00281                               Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a754252ec441c8e71f72eb60e34320e0c7">ICECREAMTRUCK</a> ||
<a name="l00282"></a>00282                               Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a795ca3a8c0c3270bc4d68f7b04553eaef">JEEP</a> )
<a name="l00283"></a>00283                   {
<a name="l00284"></a>00284                         <span class="keywordflow">if</span>( Soldier.bTeam == <a class="code" href="Campaign_8cpp.html#47b2067ff75193e24776eda5297400ff">gbPlayerNum</a> )
<a name="l00285"></a>00285                         {
<a name="l00286"></a>00286                               cnt = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ Soldier.bTeam ].<a class="code" href="structTacticalTeamType.html#6a887279dad735dc302f21c1e559d5ce">bLastID</a> - 1;
<a name="l00287"></a>00287                         }
<a name="l00288"></a>00288                   }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290                   bLastTeamID = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ Soldier.bTeam ].<a class="code" href="structTacticalTeamType.html#6a887279dad735dc302f21c1e559d5ce">bLastID</a>;
<a name="l00291"></a>00291 
<a name="l00292"></a>00292                   <span class="comment">// look for all mercs on the same team, </span>
<a name="l00293"></a>00293                   <span class="keywordflow">for</span> ( pTeamSoldier = <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ cnt ]; cnt &lt;= bLastTeamID; cnt++,pTeamSoldier++)
<a name="l00294"></a>00294                   {     
<a name="l00295"></a>00295                         <span class="keywordflow">if</span> ( !pTeamSoldier-&gt;<a class="code" href="structSOLDIERTYPE.html#653dad4e2520784e293eca9f948b8532">bActive</a> )
<a name="l00296"></a>00296                         {
<a name="l00297"></a>00297                               fGuyAvail = TRUE;
<a name="l00298"></a>00298                               <span class="keywordflow">break</span>;
<a name="l00299"></a>00299                         }
<a name="l00300"></a>00300                   }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302                   <span class="comment">// Check if there was space!</span>
<a name="l00303"></a>00303                   <span class="keywordflow">if</span> ( !fGuyAvail )
<a name="l00304"></a>00304                   { <span class="comment">//No space, so can't create the soldier.</span>
<a name="l00305"></a>00305                         <span class="keywordflow">return</span> NULL;
<a name="l00306"></a>00306                   }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308                   <span class="comment">// OK, set ID</span>
<a name="l00309"></a>00309                   Soldier.ubID = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)cnt;
<a name="l00310"></a>00310                   *pubID = Soldier.ubID;
<a name="l00311"></a>00311             }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313 
<a name="l00314"></a>00314             <span class="comment">// LOAD MERC's FACE!</span>
<a name="l00315"></a>00315             <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> != NO_PROFILE &amp;&amp; Soldier.<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> == OUR_TEAM )
<a name="l00316"></a>00316             {
<a name="l00317"></a>00317                   Soldier.<a class="code" href="structSOLDIERTYPE.html#d5f6fd345324ba5fdf49c5a0624f6620">iFaceIndex</a> = <a class="code" href="Faces_8cpp.html#f81d3e8c608f1e1c226d52d4929c3a7d">InitSoldierFace</a>( &amp;Soldier );
<a name="l00318"></a>00318             }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 
<a name="l00321"></a>00321             Soldier.bActionPoints                           = <a class="code" href="Soldier_01Control_8cpp.html#567738f5c11e8c81fa661e6aff177224">CalcActionPoints</a>( &amp;Soldier );
<a name="l00322"></a>00322             Soldier.bInitialActionPoints  = Soldier.bActionPoints;
<a name="l00323"></a>00323             Soldier.bSide                                                     = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ Soldier.bTeam ].<a class="code" href="structTacticalTeamType.html#ae2dc80f36a253171cbe752592926683">bSide</a>;
<a name="l00324"></a>00324             Soldier.bActive                                             = TRUE;
<a name="l00325"></a>00325             Soldier.sSectorX                                      = pCreateStruct-&gt;sSectorX;
<a name="l00326"></a>00326             Soldier.sSectorY                                      = pCreateStruct-&gt;sSectorY;
<a name="l00327"></a>00327             Soldier.bSectorZ                                      = pCreateStruct-&gt;bSectorZ;
<a name="l00328"></a>00328             Soldier.ubInsertionDirection  = pCreateStruct-&gt;bDirection;
<a name="l00329"></a>00329             Soldier.bDesiredDirection                 = pCreateStruct-&gt;bDirection;
<a name="l00330"></a>00330             Soldier.bDominantDir                            = pCreateStruct-&gt;bDirection;
<a name="l00331"></a>00331             Soldier.bDirection                                    = pCreateStruct-&gt;bDirection;
<a name="l00332"></a>00332 
<a name="l00333"></a>00333             Soldier.sInsertionGridNo                  = pCreateStruct-&gt;sInsertionGridNo;
<a name="l00334"></a>00334             Soldier.bOldLife                                      = Soldier.bLifeMax;
<a name="l00335"></a>00335 
<a name="l00336"></a>00336             <span class="comment">// If a civvy, set neutral</span>
<a name="l00337"></a>00337             <span class="keywordflow">if</span> ( Soldier.bTeam == CIV_TEAM )          
<a name="l00338"></a>00338             {
<a name="l00339"></a>00339                   <span class="keywordflow">if</span> (Soldier.ubProfile == <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa1b5483f377943cd6d7fb1589d0d391321">WARDEN</a> )
<a name="l00340"></a>00340                   {
<a name="l00341"></a>00341                         Soldier.bNeutral = FALSE;
<a name="l00342"></a>00342                   }
<a name="l00343"></a>00343                   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Soldier.ubCivilianGroup != <a class="code" href="Overhead_01Types_8h.html#e6cdb622357fec6e889e47579a078524cb5f7573455bdacd2b87a051da610c97">NON_CIV_GROUP</a>)
<a name="l00344"></a>00344                   {
<a name="l00345"></a>00345                         <span class="keywordflow">if</span> ( <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#879449ac79e1f0135ef15c76469bc7a8">fCivGroupHostile</a>[ Soldier.ubCivilianGroup ] == CIV_GROUP_HOSTILE )
<a name="l00346"></a>00346                         {
<a name="l00347"></a>00347                               Soldier.bNeutral = FALSE;
<a name="l00348"></a>00348                         }
<a name="l00349"></a>00349                         <span class="keywordflow">else</span>
<a name="l00350"></a>00350                         {
<a name="l00351"></a>00351                               Soldier.bNeutral = TRUE;
<a name="l00352"></a>00352                         }
<a name="l00353"></a>00353                   }
<a name="l00354"></a>00354                   <span class="keywordflow">else</span>
<a name="l00355"></a>00355                   {
<a name="l00356"></a>00356                         Soldier.bNeutral = TRUE;
<a name="l00357"></a>00357                   }
<a name="l00358"></a>00358                    
<a name="l00359"></a>00359                   <span class="comment">//Weaken stats based on the bodytype of the civilian.</span>
<a name="l00360"></a>00360                   <span class="keywordflow">if</span>( Soldier.ubProfile == NO_PROFILE )
<a name="l00361"></a>00361                   {
<a name="l00362"></a>00362                         <span class="keywordflow">switch</span>( Soldier.ubBodyType )
<a name="l00363"></a>00363                         {     
<a name="l00364"></a>00364                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a788083a907978249a0160b5b1dd9ee4a4">REGMALE</a>:
<a name="l00365"></a>00365                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7e6eac15857ce481c9ed507f7459a3507">BIGMALE</a>:
<a name="l00366"></a>00366                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a73a7e8d65cd007e97390c6a3ae18062ce">STOCKYMALE</a>:
<a name="l00367"></a>00367                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7040d5c40e76c4103ced101507f96e2f6">REGFEMALE</a>:
<a name="l00368"></a>00368                                     <span class="comment">//no adjustments necessary for these "healthy" bodytypes.</span>
<a name="l00369"></a>00369                                     <span class="keywordflow">break</span>;
<a name="l00370"></a>00370                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a72254b6f06629056dd86be50df5347676">FATCIV</a>:
<a name="l00371"></a>00371                                     <span class="comment">//fat, so slower</span>
<a name="l00372"></a>00372                                     Soldier.bAgility = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)( 30 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 26 ) ); <span class="comment">//30 - 55</span>
<a name="l00373"></a>00373                                     <span class="keywordflow">break</span>;
<a name="l00374"></a>00374                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7f084d9af5cfa408362f35095268783f6">MANCIV</a>:
<a name="l00375"></a>00375                                     Soldier.bLife = Soldier.bLifeMax = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)( 35 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 26 ) ); <span class="comment">//35 - 60</span>
<a name="l00376"></a>00376                                     <span class="keywordflow">break</span>;
<a name="l00377"></a>00377                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7af422ea2d015cab1eb7d0cf653186a05">MINICIV</a>:
<a name="l00378"></a>00378                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a734700b4c6e766408a86e53420c62163c">DRESSCIV</a>:
<a name="l00379"></a>00379                                     Soldier.bLife = Soldier.bLifeMax = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)( 30 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 16 ) ); <span class="comment">//30 - 45</span>
<a name="l00380"></a>00380                                     <span class="keywordflow">break</span>;
<a name="l00381"></a>00381                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7d280093211f32a309c7e52bc1e4570c8">HATKIDCIV</a>:
<a name="l00382"></a>00382                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7572e26862c1a3864663d8fe55b2f7f4d">KIDCIV</a>:
<a name="l00383"></a>00383                                     Soldier.bLife = Soldier.bLifeMax = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)( 20 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 16 ) ); <span class="comment">//20 - 35</span>
<a name="l00384"></a>00384                                     <span class="keywordflow">break</span>;
<a name="l00385"></a>00385                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75db4e8d299d195df30798a12cd332f5a">CRIPPLECIV</a>:
<a name="l00386"></a>00386                                     Soldier.bLife = Soldier.bLifeMax = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)( 20 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 26 ) ); <span class="comment">//20 - 45</span>
<a name="l00387"></a>00387                                     Soldier.bAgility = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)( 30 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 16 ) ); <span class="comment">// 30 - 45</span>
<a name="l00388"></a>00388                                     <span class="keywordflow">break</span>;
<a name="l00389"></a>00389                         }
<a name="l00390"></a>00390                   }
<a name="l00391"></a>00391             }
<a name="l00392"></a>00392             <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( Soldier.bTeam == CREATURE_TEAM )
<a name="l00393"></a>00393             {
<a name="l00394"></a>00394                   <span class="comment">// bloodcats are neutral to start out</span>
<a name="l00395"></a>00395                   <span class="keywordflow">if</span> ( Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7fa470b7d78ba43f21bfd04c49f02a70b">BLOODCAT</a> )
<a name="l00396"></a>00396                   {
<a name="l00397"></a>00397                         Soldier.bNeutral = TRUE;
<a name="l00398"></a>00398                   } <span class="comment">// otherwise (creatures) false</span>
<a name="l00399"></a>00399             }
<a name="l00400"></a>00400 
<a name="l00401"></a>00401             <span class="comment">// OK, If not given a profile num, set a randomized defualt battle sound set</span>
<a name="l00402"></a>00402             <span class="comment">// and then adjust it according to body type!</span>
<a name="l00403"></a>00403             <span class="keywordflow">if</span> ( Soldier.ubProfile == NO_PROFILE )
<a name="l00404"></a>00404             {
<a name="l00405"></a>00405                   Soldier.ubBattleSoundID = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 3 );
<a name="l00406"></a>00406             }
<a name="l00407"></a>00407 
<a name="l00408"></a>00408             <span class="comment">// ATE: TEMP : No enemy women mercs (unless elite)!</span>
<a name="l00409"></a>00409             <span class="keywordflow">if</span>( Soldier.ubProfile == NO_PROFILE &amp;&amp; Soldier.bTeam == ENEMY_TEAM &amp;&amp; 
<a name="l00410"></a>00410                         Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7040d5c40e76c4103ced101507f96e2f6">REGFEMALE</a> &amp;&amp; Soldier.ubSoldierClass != <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a> )
<a name="l00411"></a>00411             {
<a name="l00412"></a>00412                   Soldier.ubBodyType = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)( <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a788083a907978249a0160b5b1dd9ee4a4">REGMALE</a> + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 3 ) );
<a name="l00413"></a>00413             }
<a name="l00414"></a>00414 
<a name="l00415"></a>00415             <span class="comment">// ATE</span>
<a name="l00416"></a>00416             <span class="comment">// Set some values for variation in anims...</span>
<a name="l00417"></a>00417             <span class="keywordflow">if</span> ( Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7e6eac15857ce481c9ed507f7459a3507">BIGMALE</a> )
<a name="l00418"></a>00418             {
<a name="l00419"></a>00419                   Soldier.uiAnimSubFlags |= SUB_ANIM_BIGGUYTHREATENSTANCE;    
<a name="l00420"></a>00420             }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422             <span class="comment">//For inventory, look for any face class items that may be located in the big pockets and if found, move </span>
<a name="l00423"></a>00423             <span class="comment">//that item to a face slot and clear the pocket!</span>
<a name="l00424"></a>00424             <span class="keywordflow">if</span>( Soldier.bTeam != OUR_TEAM )
<a name="l00425"></a>00425             {
<a name="l00426"></a>00426                   <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> i;
<a name="l00427"></a>00427                   <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fSecondFaceItem = FALSE;
<a name="l00428"></a>00428                   <span class="keywordflow">for</span>( i = <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc8785521434ace88498823088a193622a0ab42">BIGPOCK1POS</a>; i &lt;= <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc8785571ec5bde48a89e74cbbb81af98298a4f">BIGPOCK4POS</a>; i++ )
<a name="l00429"></a>00429                   {
<a name="l00430"></a>00430                         <span class="keywordflow">if</span>( <a class="code" href="Item_01Types_8h.html#f9dc4cc7a3a99ad5944940cfb7c82237">Item</a>[ Soldier.inv[ i ].usItem ].<a class="code" href="structINVTYPE.html#1f63e61536407cc997a998585017ba07">usItemClass</a> &amp; IC_FACE )
<a name="l00431"></a>00431                         {
<a name="l00432"></a>00432                               <span class="keywordflow">if</span>( !fSecondFaceItem )
<a name="l00433"></a>00433                               { <span class="comment">//Don't check for compatibility...  automatically assume there are no head positions filled.</span>
<a name="l00434"></a>00434                                     fSecondFaceItem = TRUE;
<a name="l00435"></a>00435                                     memcpy( &amp;Soldier.inv[ <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc87855f026c5ea0db4ce18b3830d0c503fea79">HEAD1POS</a> ], &amp;Soldier.inv[ i ], <span class="keyword">sizeof</span>( <a class="code" href="structOBJECTTYPE.html">OBJECTTYPE</a> ) );
<a name="l00436"></a>00436                                     memset( &amp;Soldier.inv[ i ], 0, <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l00437"></a>00437                               }
<a name="l00438"></a>00438                               <span class="keywordflow">else</span>
<a name="l00439"></a>00439                               { <span class="comment">//if there is a second item, compare it to the first one we already added.</span>
<a name="l00440"></a>00440                                     <span class="keywordflow">if</span>( <a class="code" href="Items_8cpp.html#8a6f1f9d52b2e5248adb2dc725ca2ed1">CompatibleFaceItem</a>( Soldier.inv[ HEAD1POS ].usItem, Soldier.inv[ i ].usItem ) )
<a name="l00441"></a>00441                                     {
<a name="l00442"></a>00442                                           memcpy( &amp;Soldier.inv[ <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878557e4acf2c955802ba2a98a2bcb522ae70">HEAD2POS</a> ], &amp;Soldier.inv[ i ], <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l00443"></a>00443                                           memset( &amp;Soldier.inv[ i ], 0, <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l00444"></a>00444                                           <span class="keywordflow">break</span>;
<a name="l00445"></a>00445                                     }
<a name="l00446"></a>00446                               }
<a name="l00447"></a>00447                         }
<a name="l00448"></a>00448                   }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450                   <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> != <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> )
<a name="l00451"></a>00451                   {
<a name="l00452"></a>00452                         <span class="comment">// also, if an army guy has camouflage, roll to determine whether they start camouflaged</span>
<a name="l00453"></a>00453                         <span class="keywordflow">if</span> ( Soldier.bTeam == ENEMY_TEAM )
<a name="l00454"></a>00454                         {
<a name="l00455"></a>00455                               i = <a class="code" href="Items_8cpp.html#57ff1f8b2196b1821631a5679afa16ba">FindCamoKit</a> ( &amp;Soldier );
<a name="l00456"></a>00456 
<a name="l00457"></a>00457                               <span class="keywordflow">if</span> ( i != NO_SLOT &amp;&amp; <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 5 ) &lt; <a class="code" href="ai_8h.html#eb68d5bd7803b8c6d4637cf543b9372c">SoldierDifficultyLevel</a>( &amp;Soldier ))
<a name="l00458"></a>00458                               {
<a name="l00459"></a>00459                                     <span class="comment">// start camouflaged</span>
<a name="l00460"></a>00460                                     Soldier.bCamo = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Item_01Types_8h.html#f9dc4cc7a3a99ad5944940cfb7c82237">Item</a>[Soldier.inv[ i ].usItem].<a class="code" href="structINVTYPE.html#aef1992e54ef70792c12b2c328c93ad0">camobonus</a>;
<a name="l00461"></a>00461                                     Soldier.urbanCamo = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Item_01Types_8h.html#f9dc4cc7a3a99ad5944940cfb7c82237">Item</a>[Soldier.inv[ i ].usItem].<a class="code" href="structINVTYPE.html#72144ae92c427d000c636bb57d0f2d19">urbanCamobonus</a>;
<a name="l00462"></a>00462                                     Soldier.desertCamo = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Item_01Types_8h.html#f9dc4cc7a3a99ad5944940cfb7c82237">Item</a>[Soldier.inv[ i ].usItem].<a class="code" href="structINVTYPE.html#41af23d1b731ad4523b841ad59ff192e">desertCamobonus</a>;
<a name="l00463"></a>00463                                     Soldier.snowCamo = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Item_01Types_8h.html#f9dc4cc7a3a99ad5944940cfb7c82237">Item</a>[Soldier.inv[ i ].usItem].<a class="code" href="structINVTYPE.html#15177c91bf70e5ff56714ae92e8554c9">snowCamobonus</a>;
<a name="l00464"></a>00464                               }
<a name="l00465"></a>00465                         }
<a name="l00466"></a>00466                   }
<a name="l00467"></a>00467             }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469             <span class="comment">//Set some flags, actions based on what body type we are</span>
<a name="l00470"></a>00470             <span class="comment">//NOTE:  BE VERY CAREFUL WHAT YOU DO IN THIS SECTION!</span>
<a name="l00471"></a>00471             <span class="comment">//  It is very possible to override editor settings, especially orders and attitude.</span>
<a name="l00472"></a>00472             <span class="comment">//  In those cases, you can check for !gfEditMode (not in editor).</span>
<a name="l00473"></a>00473             <span class="keywordflow">switch</span> ( Soldier.ubBodyType )
<a name="l00474"></a>00474             {
<a name="l00475"></a>00475                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7d280093211f32a309c7e52bc1e4570c8">HATKIDCIV</a>:
<a name="l00476"></a>00476                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7572e26862c1a3864663d8fe55b2f7f4d">KIDCIV</a>:
<a name="l00477"></a>00477 
<a name="l00478"></a>00478                         Soldier.ubBattleSoundID = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 2 );
<a name="l00479"></a>00479                         <span class="keywordflow">break</span>;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7040d5c40e76c4103ced101507f96e2f6">REGFEMALE</a>:
<a name="l00482"></a>00482                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7af422ea2d015cab1eb7d0cf653186a05">MINICIV</a>:
<a name="l00483"></a>00483                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a734700b4c6e766408a86e53420c62163c">DRESSCIV</a>:
<a name="l00484"></a>00484 
<a name="l00485"></a>00485                         Soldier.ubBattleSoundID = 7 + (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>) <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 2 );
<a name="l00486"></a>00486                         Soldier.bNormalSmell = NORMAL_HUMAN_SMELL_STRENGTH;
<a name="l00487"></a>00487                         <span class="keywordflow">break</span>;
<a name="l00488"></a>00488 
<a name="l00489"></a>00489                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7fa470b7d78ba43f21bfd04c49f02a70b">BLOODCAT</a>:
<a name="l00490"></a>00490                         <a class="code" href="Inventory_01Choosing_8cpp.html#3720751e9cfe901bea91c7c5efeefcce">AssignCreatureInventory</a>( &amp;Soldier );
<a name="l00491"></a>00491                         Soldier.bNormalSmell = NORMAL_HUMAN_SMELL_STRENGTH;
<a name="l00492"></a>00492                         Soldier.uiStatusFlags |= SOLDIER_ANIMAL;
<a name="l00493"></a>00493                         <span class="keywordflow">break</span>;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a78e8f2de8ab141e991ee2b34ebb1dfda1">ADULTFEMALEMONSTER</a>:
<a name="l00496"></a>00496                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a79dec21a470d88f8b8a8704cb9b5ac827">AM_MONSTER</a>:
<a name="l00497"></a>00497                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f60be3c60e156d8cec34802d7f3607b">YAF_MONSTER</a>:
<a name="l00498"></a>00498                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a725460f03079c143c4456f779763fa23b">YAM_MONSTER</a>:
<a name="l00499"></a>00499                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7c6b7363ef12dbe5ad2377613a3d33db9">LARVAE_MONSTER</a>:
<a name="l00500"></a>00500                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7e687bcc336b8be3ac4aac1346046d095">INFANT_MONSTER</a>:
<a name="l00501"></a>00501                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f327a7c32f4f979f42e8d6f6adbf587">QUEENMONSTER</a>:
<a name="l00502"></a>00502 
<a name="l00503"></a>00503                         <a class="code" href="Inventory_01Choosing_8cpp.html#3720751e9cfe901bea91c7c5efeefcce">AssignCreatureInventory</a>( &amp;Soldier );
<a name="l00504"></a>00504                         Soldier.ubCaller = NOBODY;
<a name="l00505"></a>00505                         <span class="keywordflow">if</span>( !<a class="code" href="Sys_01Globals_8cpp.html#036664ef693d52ae3317ae8f916d3b29">gfEditMode</a> )
<a name="l00506"></a>00506                         {
<a name="l00507"></a>00507                               Soldier.bOrders = <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138fddbbeee5695e4be7e9f148315873ce2b">FARPATROL</a>;
<a name="l00508"></a>00508                               Soldier.bAttitude = <a class="code" href="Overhead_01Types_8h.html#731c15105066cc17fd55a258db2879d3128db069f37b5cd1b44901dff4db4ae0">AGGRESSIVE</a>;
<a name="l00509"></a>00509                         }
<a name="l00510"></a>00510                         Soldier.uiStatusFlags |= SOLDIER_MONSTER;
<a name="l00511"></a>00511                         Soldier.bMonsterSmell = NORMAL_CREATURE_SMELL_STRENGTH;
<a name="l00512"></a>00512                         <span class="keywordflow">break</span>;
<a name="l00513"></a>00513 
<a name="l00514"></a>00514                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a748505ba252c1ec37e34d882e6f4a3ecf">COW</a>:
<a name="l00515"></a>00515                         Soldier.uiStatusFlags |= SOLDIER_ANIMAL;
<a name="l00516"></a>00516                         Soldier.bNormalSmell = COW_SMELL_STRENGTH;
<a name="l00517"></a>00517                         <span class="keywordflow">break</span>;
<a name="l00518"></a>00518                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7143fbbb5aa867c244f7cf6a230545002">CROW</a>:
<a name="l00519"></a>00519 
<a name="l00520"></a>00520                         Soldier.uiStatusFlags |= SOLDIER_ANIMAL;
<a name="l00521"></a>00521                         <span class="keywordflow">break</span>;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7ecd13f015271b5b87d3e53037a5011bb">ROBOTNOWEAPON</a>:
<a name="l00524"></a>00524 
<a name="l00525"></a>00525                         Soldier.uiStatusFlags |= SOLDIER_ROBOT;
<a name="l00526"></a>00526                         <span class="keywordflow">break</span>;
<a name="l00527"></a>00527 
<a name="l00528"></a>00528                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a76af8c23138db907d1a486cd724a86f5b">HUMVEE</a>:
<a name="l00529"></a>00529                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f90b299525bc0859c82cf015baba03a">ELDORADO</a>:
<a name="l00530"></a>00530                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a754252ec441c8e71f72eb60e34320e0c7">ICECREAMTRUCK</a>:
<a name="l00531"></a>00531                   <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a795ca3a8c0c3270bc4d68f7b04553eaef">JEEP</a>:
<a name="l00532"></a>00532                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a708ba6f8fd9cf7e71998af76cccab9209">TANK_NW</a>:
<a name="l00533"></a>00533                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a774887c6043843fcb84d7e6b341257354">TANK_NE</a>:
<a name="l00534"></a>00534 
<a name="l00535"></a>00535                         Soldier.uiStatusFlags |= SOLDIER_VEHICLE;
<a name="l00536"></a>00536 
<a name="l00537"></a>00537                         <span class="keywordflow">switch</span>( Soldier.ubBodyType )
<a name="l00538"></a>00538                         {
<a name="l00539"></a>00539                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a76af8c23138db907d1a486cd724a86f5b">HUMVEE</a>:
<a name="l00540"></a>00540 
<a name="l00541"></a>00541                                     ubVehicleID = <a class="code" href="Vehicles_8h.html#ce732421f7fcef3496e066edfe51cfba7401e53cd69e26bb3614633a0727af82">HUMMER</a>;
<a name="l00542"></a>00542             Soldier.bNeutral = TRUE;
<a name="l00543"></a>00543                                     <span class="keywordflow">break</span>;
<a name="l00544"></a>00544 
<a name="l00545"></a>00545                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f90b299525bc0859c82cf015baba03a">ELDORADO</a>:
<a name="l00546"></a>00546 
<a name="l00547"></a>00547                                     ubVehicleID = <a class="code" href="Vehicles_8h.html#ce732421f7fcef3496e066edfe51cfba1aebd40523cfc0c506c2162c6ec7c318">ELDORADO_CAR</a>;
<a name="l00548"></a>00548             Soldier.bNeutral = TRUE;
<a name="l00549"></a>00549                                     <span class="keywordflow">break</span>;
<a name="l00550"></a>00550 
<a name="l00551"></a>00551                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a754252ec441c8e71f72eb60e34320e0c7">ICECREAMTRUCK</a>:
<a name="l00552"></a>00552 
<a name="l00553"></a>00553                                     ubVehicleID = <a class="code" href="Vehicles_8h.html#ce732421f7fcef3496e066edfe51cfba9fa2dbff138cccd66cdd29b6329e30f8">ICE_CREAM_TRUCK</a>;
<a name="l00554"></a>00554             Soldier.bNeutral = TRUE;
<a name="l00555"></a>00555                                     <span class="keywordflow">break</span>;
<a name="l00556"></a>00556 
<a name="l00557"></a>00557                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a795ca3a8c0c3270bc4d68f7b04553eaef">JEEP</a>:
<a name="l00558"></a>00558 
<a name="l00559"></a>00559                                     ubVehicleID = <a class="code" href="Vehicles_8h.html#ce732421f7fcef3496e066edfe51cfba4df532d0c0d2ca9a936550039c42004d">JEEP_CAR</a>;
<a name="l00560"></a>00560                                     <span class="keywordflow">break</span>;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a708ba6f8fd9cf7e71998af76cccab9209">TANK_NW</a>:
<a name="l00563"></a>00563                               <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a774887c6043843fcb84d7e6b341257354">TANK_NE</a>:
<a name="l00564"></a>00564 
<a name="l00565"></a>00565                                     ubVehicleID = <a class="code" href="Vehicles_8h.html#ce732421f7fcef3496e066edfe51cfbacbb068e9c4657f78dd19e76149b29520">TANK_CAR</a>;
<a name="l00566"></a>00566                                     <span class="keywordflow">break</span>;
<a name="l00567"></a>00567 
<a name="l00568"></a>00568                         }
<a name="l00569"></a>00569 
<a name="l00570"></a>00570                         <span class="keywordflow">if</span> ( pCreateStruct-&gt;fUseGivenVehicle )
<a name="l00571"></a>00571                         {
<a name="l00572"></a>00572                               Soldier.bVehicleID = pCreateStruct-&gt;bUseGivenVehicleID;
<a name="l00573"></a>00573                         }
<a name="l00574"></a>00574                         <span class="keywordflow">else</span>
<a name="l00575"></a>00575                         {
<a name="l00576"></a>00576                               <span class="comment">// Add vehicle to list....</span>
<a name="l00577"></a>00577                               Soldier.bVehicleID = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Vehicles_8cpp.html#194d6061832b005ff788ee1b452c780b">AddVehicleToList</a>( Soldier.sSectorX, Soldier.sSectorY, Soldier.bSectorZ, ubVehicleID );
<a name="l00578"></a>00578                         }
<a name="l00579"></a>00579                         <a class="code" href="Vehicles_8cpp.html#9d8620c3f15556bd302b5d7702f2b358">SetVehicleValuesIntoSoldierType</a>( &amp;Soldier );
<a name="l00580"></a>00580                         <span class="keywordflow">break</span>;
<a name="l00581"></a>00581                   
<a name="l00582"></a>00582                   <span class="keywordflow">default</span>:
<a name="l00583"></a>00583                         Soldier.bNormalSmell = NORMAL_HUMAN_SMELL_STRENGTH;
<a name="l00584"></a>00584                         <span class="keywordflow">break</span>;
<a name="l00585"></a>00585 
<a name="l00586"></a>00586             }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588             <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> != <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> )
<a name="l00589"></a>00589             {
<a name="l00590"></a>00590                   <span class="comment">// Copy into merc struct</span>
<a name="l00591"></a>00591                   memcpy( <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ Soldier.<a class="code" href="structSOLDIERTYPE.html#18aef170576da81b10d00e7b6cd3627b">ubID</a> ], &amp;Soldier, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> ) );
<a name="l00592"></a>00592                   <span class="comment">// Alrighty then, we are set to create the merc, stuff after here can fail!</span>
<a name="l00593"></a>00593                   CHECKF( <a class="code" href="Soldier_01Control_8cpp.html#a7a8fd9124d49a4076578db282934fd8">CreateSoldierCommon</a>( Soldier.ubBodyType, <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ Soldier.<a class="code" href="structSOLDIERTYPE.html#18aef170576da81b10d00e7b6cd3627b">ubID</a> ], Soldier.ubID, <a class="code" href="Animation_01Control_8h.html#9c02dc5e870a2c7d20bbaafb3e7be2eb61b6dd5eb66ef4c1c1c26ae5ed4cff43">STANDING</a> ) != FALSE );
<a name="l00594"></a>00594             }
<a name="l00595"></a>00595       }
<a name="l00596"></a>00596       <span class="keywordflow">else</span>
<a name="l00597"></a>00597       {
<a name="l00598"></a>00598             <span class="comment">//Copy the data from the existing soldier struct to the new soldier struct</span>
<a name="l00599"></a>00599             <span class="keywordflow">if</span>( !<a class="code" href="SaveLoadGame_8cpp.html#0ddd3b593ef97bd30ee6dcda793f1d78">CopySavedSoldierInfoToNewSoldier</a>( &amp;Soldier, pCreateStruct-&gt;pExistingSoldier ) )
<a name="l00600"></a>00600                   <span class="keywordflow">return</span>( FALSE );
<a name="l00601"></a>00601 
<a name="l00602"></a>00602             <span class="comment">//Reset the face index</span>
<a name="l00603"></a>00603             Soldier.iFaceIndex = -1;
<a name="l00604"></a>00604             Soldier.iFaceIndex = <a class="code" href="Faces_8cpp.html#f81d3e8c608f1e1c226d52d4929c3a7d">InitSoldierFace</a>( &amp;Soldier );
<a name="l00605"></a>00605 
<a name="l00606"></a>00606     <span class="comment">// ATE: Reset soldier's light value to -1....</span>
<a name="l00607"></a>00607     Soldier.iLight = -1;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609             <span class="keywordflow">if</span> ( Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a76af8c23138db907d1a486cd724a86f5b">HUMVEE</a> || Soldier.ubBodyType == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a754252ec441c8e71f72eb60e34320e0c7">ICECREAMTRUCK</a> )
<a name="l00610"></a>00610     {
<a name="l00611"></a>00611       Soldier.bNeutral = TRUE;
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614             <span class="comment">// Copy into merc struct</span>
<a name="l00615"></a>00615             memcpy( <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ Soldier.<a class="code" href="structSOLDIERTYPE.html#18aef170576da81b10d00e7b6cd3627b">ubID</a> ], &amp;Soldier, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> ) );
<a name="l00616"></a>00616 
<a name="l00617"></a>00617             <span class="comment">// Alrighty then, we are set to create the merc, stuff after here can fail!</span>
<a name="l00618"></a>00618             CHECKF( <a class="code" href="Soldier_01Control_8cpp.html#a7a8fd9124d49a4076578db282934fd8">CreateSoldierCommon</a>( Soldier.ubBodyType, <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ Soldier.<a class="code" href="structSOLDIERTYPE.html#18aef170576da81b10d00e7b6cd3627b">ubID</a> ], Soldier.ubID, <a class="code" href="Overhead_8cpp.html#f1785e87ea281d015350ec85b9bd8508">Menptr</a>[ Soldier.<a class="code" href="structSOLDIERTYPE.html#18aef170576da81b10d00e7b6cd3627b">ubID</a> ].usAnimState ) != FALSE );
<a name="l00619"></a>00619 
<a name="l00620"></a>00620             *pubID = Soldier.ubID;
<a name="l00621"></a>00621 
<a name="l00622"></a>00622             <span class="comment">// The soldiers animation frame gets reset, set</span>
<a name="l00623"></a>00623 <span class="comment">//          Menptr[ Soldier.ubID ].usAniCode = pCreateStruct-&gt;pExistingSoldier-&gt;usAniCode;</span>
<a name="l00624"></a>00624 <span class="comment">//          Menptr[ Soldier.ubID ].usAnimState = Soldier.usAnimState;</span>
<a name="l00625"></a>00625 <span class="comment">//          Menptr[ Soldier.ubID ].usAniFrame = Soldier.usAniFrame;</span>
<a name="l00626"></a>00626       }
<a name="l00627"></a>00627 
<a name="l00628"></a>00628 
<a name="l00629"></a>00629       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> != <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> )
<a name="l00630"></a>00630       {
<a name="l00631"></a>00631             <span class="keywordflow">if</span>( pCreateStruct-&gt;fOnRoof &amp;&amp; <a class="code" href="Overhead_8cpp.html#16380e271fdc03604152be2d9cca8867">FlatRoofAboveGridNo</a>( pCreateStruct-&gt;sInsertionGridNo ) )
<a name="l00632"></a>00632             {
<a name="l00633"></a>00633                   <a class="code" href="Soldier_01Control_8cpp.html#85356885ab89da0e5fdb7a225f7db225">SetSoldierHeight</a>( <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ Soldier.<a class="code" href="structSOLDIERTYPE.html#18aef170576da81b10d00e7b6cd3627b">ubID</a> ], 58.0 );
<a name="l00634"></a>00634             }
<a name="l00635"></a>00635 
<a name="l00636"></a>00636             <span class="comment">//if we are loading DONT add men to team, because the number is restored in gTacticalStatus</span>
<a name="l00637"></a>00637             <span class="keywordflow">if</span>( !( <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#89eb954f99ad4f28b84d7cf675c8ed32">uiFlags</a> &amp; LOADING_SAVED_GAME ) )
<a name="l00638"></a>00638             {
<a name="l00639"></a>00639                   <span class="comment">// Increment men in sector number!</span>
<a name="l00640"></a>00640                   <a class="code" href="Overhead_8cpp.html#3d71517ca6700b1ea6b582af906a6cba">AddManToTeam</a>( Soldier.bTeam );
<a name="l00641"></a>00641 
<a name="l00642"></a>00642                   <span class="comment">//Madd: pre-load launchers</span>
<a name="l00643"></a>00643                   <span class="comment">//DebugMsg(TOPIC_JA2,DBG_LEVEL_3,"TacticalCreateSoldier: Load launcher");</span>
<a name="l00644"></a>00644                   <span class="comment">//INT8 bSlot = FindObjClass(MercPtrs[ Soldier.ubID ],IC_LAUNCHER);</span>
<a name="l00645"></a>00645                   <span class="comment">//if ( bSlot != NO_SLOT )</span>
<a name="l00646"></a>00646                   <span class="comment">//{</span>
<a name="l00647"></a>00647                   <span class="comment">//    INT8 lSlot = FindNonSmokeLaunchable(MercPtrs[ Soldier.ubID ], Item[MercPtrs[ Soldier.ubID ]-&gt;inv[bSlot].usItem].ubClassIndex);</span>
<a name="l00648"></a>00648                   <span class="comment">//    AttachObject(MercPtrs[ Soldier.ubID ],&amp;MercPtrs[ Soldier.ubID ]-&gt;inv[bSlot],&amp;MercPtrs[ Soldier.ubID ]-&gt;inv[lSlot],FALSE);</span>
<a name="l00649"></a>00649                   <span class="comment">//}</span>
<a name="l00650"></a>00650             }
<a name="l00651"></a>00651 
<a name="l00652"></a>00652             <span class="keywordflow">return</span> <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ Soldier.ubID ];
<a name="l00653"></a>00653       }
<a name="l00654"></a>00654       <span class="keywordflow">else</span> 
<a name="l00655"></a>00655       { <span class="comment">//We are creating a dynamically allocated soldier for autoresolve.</span>
<a name="l00656"></a>00656             <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l00657"></a>00657             <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSectorID;
<a name="l00658"></a>00658             ubSectorID = <a class="code" href="Auto_01Resolve_8h.html#7eae6778b348c5acde79f8bf70e84082">GetAutoResolveSectorID</a>();
<a name="l00659"></a>00659             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = (<a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a>*)MemAlloc( <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERTYPE.html">SOLDIERTYPE</a> ) );
<a name="l00660"></a>00660             <span class="keywordflow">if</span>( !<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> )
<a name="l00661"></a>00661                   <span class="keywordflow">return</span> NULL;
<a name="l00662"></a>00662             memcpy( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, &amp;Soldier, <span class="keyword">sizeof</span>( SOLDIERTYPE ) );
<a name="l00663"></a>00663             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#18aef170576da81b10d00e7b6cd3627b">ubID</a> = 255;
<a name="l00664"></a>00664             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#6784346500db10daed06c2db02b855c0">sSectorX</a> = (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)SECTORX( ubSectorID );
<a name="l00665"></a>00665             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#6dd68e70c3000beb79e4ac45d28a0cbf">sSectorY</a> = (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)SECTORY( ubSectorID );
<a name="l00666"></a>00666             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b70b761f0405cc179c1ffba84484df28">bSectorZ</a> = 0;
<a name="l00667"></a>00667             *pubID = 255;
<a name="l00668"></a>00668             <span class="keywordflow">return</span> <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l00669"></a>00669       }
<a name="l00670"></a>00670 }
<a name="l00671"></a>00671 
<a name="l00672"></a><a class="code" href="Soldier_01Create_8cpp.html#e5a6ef9c711125386d7c024ae3db4b4b">00672</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Soldier_01Create_8cpp.html#e5a6ef9c711125386d7c024ae3db4b4b">TacticalCopySoldierFromProfile</a>( SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pCreateStruct )
<a name="l00673"></a>00673 {
<a name="l00674"></a>00674       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                               ubProfileIndex;
<a name="l00675"></a>00675       <a class="code" href="structMERCPROFILESTRUCT.html">MERCPROFILESTRUCT</a> * pProfile;
<a name="l00676"></a>00676 
<a name="l00677"></a>00677       ubProfileIndex = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a>;
<a name="l00678"></a>00678       pProfile = &amp;(<a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ubProfileIndex]);
<a name="l00679"></a>00679 
<a name="l00680"></a>00680       SET_PALETTEREP_ID ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7eac56265178b4c6b14b3c4e57b0cf59">HeadPal</a>,          pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#03c95342190035d6b22493c053663a60">HAIR</a> );
<a name="l00681"></a>00681       SET_PALETTEREP_ID ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>,          pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#0ca2f50b1cc301bdb8463951e8b91c46">VEST</a> );
<a name="l00682"></a>00682       SET_PALETTEREP_ID ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c138d8e83ecb9e6afc7fbe505f756775">SkinPal</a>,          pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#a64df0a52bdf68ce187225d89f02dac7">SKIN</a> );
<a name="l00683"></a>00683       SET_PALETTEREP_ID ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>,   pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#7038c71c245abd0a286e5cf2a17d954a">PANTS</a> );
<a name="l00684"></a>00684 
<a name="l00685"></a>00685       <span class="comment">// Set profile index!</span>
<a name="l00686"></a>00686       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#5a5648a1bb3507cc41f6be199c51a3f8">ubProfile</a>                                                     = ubProfileIndex;
<a name="l00687"></a>00687       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f42305317ffec1fd9d924ffc592896b6">ubScheduleID</a>                                      = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>;
<a name="l00688"></a>00688       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7f520f3cdb6d5f0d3db75e1e9ca3f29d">bHasKeys</a>                                                      = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#2406e9999b94e17cfb90786e671d6e90">fHasKeys</a>;
<a name="l00689"></a>00689 
<a name="l00690"></a>00690       <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7bf7231f416aa66f38010b7a7e8f2341">name</a>, pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#67765a16f1c6a2a9fc5d0a7cf6f830fd">zNickname</a> );
<a name="l00691"></a>00691 
<a name="l00692"></a>00692       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#e308dea18533bf5ab2bcee5bbe27391c">bLife</a>                                                         = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#09fbcd22d7fc230711c52e75231d8f79">bLife</a>;
<a name="l00693"></a>00693       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#600d382f89a391cdeb7bfe2580776866">bLifeMax</a>                                                      = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#fa85b8afa8461cbbdb7eb533eed28e31">bLifeMax</a>;
<a name="l00694"></a>00694       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#9e00ffce9fab366b226d73f77609c2f4">bAgility</a>                                                      = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#bd3daf02919f8e2b0883f7f087992ac2">bAgility</a>;
<a name="l00695"></a>00695       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#fd2d5a6ae419aeca68111c22f755974a">bLeadership</a>                                             = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#57bd8d3f6cd1b8018e27a5183cc66302">bLeadership</a>;
<a name="l00696"></a>00696       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#a6681185ba941c3a7bc8163310182478">bDexterity</a>                                              = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#aaab9a3e77856f91c988c009236d411b">bDexterity</a>;
<a name="l00697"></a>00697       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#66c3be01391ae0f34be79031a4e0f436">bStrength</a>                                                     = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#9fa8346f31e989f4be1ba37d847eab59">bStrength</a>;
<a name="l00698"></a>00698       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#4e9c2ad5d84963b9a6fc6f092bed8638">bWisdom</a>                                                       = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#8df4ce262d2419f83a35b988fd6bd3e4">bWisdom</a>;
<a name="l00699"></a>00699       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0becb3b2a6e15a9c7d60749a341aef38">bExpLevel</a>                                                     = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#38902687ff41c38a4110ab7599b23f51">bExpLevel</a>;
<a name="l00700"></a>00700       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7a9a17a9aff519efd7423c6b11cdb046">bMarksmanship</a>                                     = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#3d5a20873d37fe66c0e7dc88b24f8ad7">bMarksmanship</a>;
<a name="l00701"></a>00701       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#4035959182260cd84762a7e786a4c57b">bMedical</a>                                                      = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#71a09e46c3ceebced381a4e6ed631f71">bMedical</a>;
<a name="l00702"></a>00702       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#e527422adc5995d88b63f12b4dd9c38c">bMechanical</a>                                             = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#c1d3aecec4e7639c5225510c9c087500">bMechanical</a>;
<a name="l00703"></a>00703       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#1f8366811489062f9af672734c3e87f8">bExplosive</a>                                              = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#55a776cd5567f3b3cf91f100413786fa">bExplosive</a>;
<a name="l00704"></a>00704       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#807d674cf2ed059d28d0efdbc102291a">bScientific</a>                                             = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#5554922cefcd5ee40d5a74512a4c85a5">bScientific</a>;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#90bc1483db181a5cc731507f2e047e4e">bVocalVolume</a>                                      = MIDVOLUME;
<a name="l00707"></a>00707       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f4903bdb3f290855c89afc2c2ee2853b">uiAnimSubFlags</a>                                    = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#2c131966011929d2b57f92c677acde84">uiBodyTypeSubFlags</a>;
<a name="l00708"></a>00708       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a>                                              = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#e193a429e867757861825f442953a0d2">ubBodyType</a>;
<a name="l00709"></a>00709       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#d250d43185690987945d6884efdf79fc">ubCivilianGroup</a>                                   = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#52d7f1869cdda9b8fe067a6360e2c109">ubCivilianGroup</a>;
<a name="l00710"></a>00710       <span class="comment">//OK set initial duty</span>
<a name="l00711"></a>00711 <span class="comment">//  pSoldier-&gt;bAssignment=ON_DUTY;</span>
<a name="l00712"></a>00712 
<a name="l00713"></a>00713       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#5cdc5cd0a6d9a0dc4893c8986ae49d29">bOldAssignment</a> = NO_ASSIGNMENT;
<a name="l00714"></a>00714       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f2259cda9078478fb5253464809600f2">ubSkillTrait1</a> = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#e7fff11096903d6599d7ff021c9ad29d">bSkillTrait</a>;
<a name="l00715"></a>00715       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#15bcc71c0dc703eb0a34fc8fcbdf1f09">ubSkillTrait2</a> = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#28e21c3ba6ef3aecdf144effa20f5e49">bSkillTrait2</a>;
<a name="l00716"></a>00716 
<a name="l00717"></a>00717       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#76cf3cb25fe41d314c711377ee8dbfad">bOrders</a>                                           = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a>;
<a name="l00718"></a>00718       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c805687690b8b5573780d07fc3931a36">bAttitude</a>                                         = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#d9cd617657bb1765b57e7647ff2b0a92">bAttitude</a>;
<a name="l00719"></a>00719       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#8aa6174a253c3fa21a3ec41ce0174340">bDirection</a>                                  = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e7441ebda87cc863566264c163ccc211">bDirection</a>;
<a name="l00720"></a>00720       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#3617f93cf4f3f5adbe609960815ed569">bPatrolCnt</a>                                  = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#63f0be3b67f871f3d49cd09e88c5450f">bPatrolCnt</a>;
<a name="l00721"></a>00721       memcpy( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#8fdd768fde52511d085402060c856cf5">usPatrolGrid</a>, pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#72a68c367b8bc4fe932d78c53f8a522d">sPatrolGrid</a>, <span class="keyword">sizeof</span>( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> ) * MAXPATROLGRIDS );
<a name="l00722"></a>00722       
<a name="l00723"></a>00723       <span class="keywordflow">if</span> ( HAS_SKILL_TRAIT( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="soldier_01profile_01type_8h.html#88183a1fc58897e3edb65b354323264bb8b992f3301feb52bb26321dd2c14782">CAMOUFLAGED</a> ) )
<a name="l00724"></a>00724       {
<a name="l00725"></a>00725             <span class="comment">// set camouflaged to 100 automatically</span>
<a name="l00726"></a>00726             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c60466aaeb299f1fda56e20315b64d09">bCamo</a> = 100;
<a name="l00727"></a>00727       }
<a name="l00728"></a>00728       <span class="keywordflow">if</span> ( HAS_SKILL_TRAIT( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="soldier_01profile_01type_8h.html#88183a1fc58897e3edb65b354323264b8588daf5966f2fa8a001f223a2579d11">CAMOUFLAGED_URBAN</a> ) )
<a name="l00729"></a>00729       {
<a name="l00730"></a>00730             <span class="comment">// set camouflaged to 100 automatically</span>
<a name="l00731"></a>00731             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2773e58d78cb8aa468c1303557b20dca">urbanCamo</a> = 100;
<a name="l00732"></a>00732       }
<a name="l00733"></a>00733       <span class="keywordflow">if</span> ( HAS_SKILL_TRAIT( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="soldier_01profile_01type_8h.html#88183a1fc58897e3edb65b354323264b55edbfdfd1dbdc82096906478afef253">CAMOUFLAGED_DESERT</a> ) )
<a name="l00734"></a>00734       {
<a name="l00735"></a>00735             <span class="comment">// set camouflaged to 100 automatically</span>
<a name="l00736"></a>00736             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#397e202d9eaa84a06ada602a78b2509d">desertCamo</a> = 100;
<a name="l00737"></a>00737       }
<a name="l00738"></a>00738       <span class="keywordflow">if</span> ( HAS_SKILL_TRAIT( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="soldier_01profile_01type_8h.html#88183a1fc58897e3edb65b354323264b4db85986be8625b2cdf14ae620492a48">CAMOUFLAGED_SNOW</a> ) )
<a name="l00739"></a>00739       {
<a name="l00740"></a>00740             <span class="comment">// set camouflaged to 100 automatically</span>
<a name="l00741"></a>00741             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#9e817aa483e5129a53feef0a7b093580">snowCamo</a> = 100;
<a name="l00742"></a>00742       }
<a name="l00743"></a>00743       <span class="keywordflow">return</span>( TRUE );
<a name="l00744"></a>00744 }
<a name="l00745"></a>00745 
<a name="l00746"></a>00746 <span class="keyword">enum</span> { <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1eb21818b313fd6b874f31fb53bf6df7d3">PINKSKIN</a>, <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1e3863198148b82fd4f5151dce6ac070b9">TANSKIN</a>, <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1e7f2d66307256b19ac6345c172ba59f2e">DARKSKIN</a>, <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1ec0ce5435fd7fe82d79e53163585bb90d">BLACKSKIN</a>, <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1edc67b102e4c02797931c8d17d93b1b2f">NUMSKINS</a> };
<a name="l00747"></a>00747 <span class="keyword">enum</span> { 
<a name="l00748"></a>00748       <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e020dfc7c5d36584f4bdcd8b56cae0000a0">WHITEHEAD</a>, <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e027a8c87159fecb74bddda12f86bc1b33f">BLACKHEAD</a>, <span class="comment">//black skin (only this line )</span>
<a name="l00749"></a>00749       <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e02c7788ab64ad3f30e459014fd73f96380">BROWNHEAD</a>,                                <span class="comment">//dark skin (this line plus all above)</span>
<a name="l00750"></a>00750       <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e0233e625a1bab5167e426d21f63d803948">BLONDEHEAD</a>, <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e029953d99d24b290afc83f57475b4c5c86">REDHEAD</a>,   <span class="comment">//pink/tan skin (this line plus all above )</span>
<a name="l00751"></a>00751       <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e02d4f7802d50df2c0fa7ebae79a4c11d1c">NUMHEADS</a>  
<a name="l00752"></a>00752 };
<a name="l00753"></a>00753 
<a name="l00754"></a><a class="code" href="Soldier_01Create_8cpp.html#1377b573515446f11ebc9c3238590779">00754</a> <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> <a class="code" href="Soldier_01Create_8cpp.html#1377b573515446f11ebc9c3238590779">ChooseHairColor</a>( SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> skin )
<a name="l00755"></a>00755 {
<a name="l00756"></a>00756       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> iRandom;
<a name="l00757"></a>00757       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> hair = 0;
<a name="l00758"></a>00758       iRandom = <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 100 );
<a name="l00759"></a>00759       <span class="keywordflow">switch</span>( skin )
<a name="l00760"></a>00760       {
<a name="l00761"></a>00761             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1eb21818b313fd6b874f31fb53bf6df7d3">PINKSKIN</a>:
<a name="l00762"></a>00762             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1e3863198148b82fd4f5151dce6ac070b9">TANSKIN</a>:
<a name="l00763"></a>00763                   <span class="keywordflow">if</span>( iRandom &lt; 12 )
<a name="l00764"></a>00764                   {
<a name="l00765"></a>00765                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e029953d99d24b290afc83f57475b4c5c86">REDHEAD</a>;
<a name="l00766"></a>00766                   }
<a name="l00767"></a>00767                   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iRandom &lt; 34 )
<a name="l00768"></a>00768                   {
<a name="l00769"></a>00769                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e0233e625a1bab5167e426d21f63d803948">BLONDEHEAD</a>;
<a name="l00770"></a>00770                   }
<a name="l00771"></a>00771                   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iRandom &lt; 60 )
<a name="l00772"></a>00772                   {
<a name="l00773"></a>00773                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e02c7788ab64ad3f30e459014fd73f96380">BROWNHEAD</a>;
<a name="l00774"></a>00774                   }
<a name="l00775"></a>00775                   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iRandom &lt; 92 )
<a name="l00776"></a>00776                   {
<a name="l00777"></a>00777                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e027a8c87159fecb74bddda12f86bc1b33f">BLACKHEAD</a>;
<a name="l00778"></a>00778                   }
<a name="l00779"></a>00779                   <span class="keywordflow">else</span>
<a name="l00780"></a>00780                   {
<a name="l00781"></a>00781                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e020dfc7c5d36584f4bdcd8b56cae0000a0">WHITEHEAD</a>;
<a name="l00782"></a>00782                         <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7040d5c40e76c4103ced101507f96e2f6">REGFEMALE</a> ||
<a name="l00783"></a>00783                                 <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7af422ea2d015cab1eb7d0cf653186a05">MINICIV</a> ||
<a name="l00784"></a>00784                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a734700b4c6e766408a86e53420c62163c">DRESSCIV</a> ||
<a name="l00785"></a>00785                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7d280093211f32a309c7e52bc1e4570c8">HATKIDCIV</a> ||
<a name="l00786"></a>00786                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7572e26862c1a3864663d8fe55b2f7f4d">KIDCIV</a> )
<a name="l00787"></a>00787                         {
<a name="l00788"></a>00788                               hair = <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( NUMHEADS - 1 ) + 1;
<a name="l00789"></a>00789                         }
<a name="l00790"></a>00790                   }
<a name="l00791"></a>00791                   hair = <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( NUMHEADS );
<a name="l00792"></a>00792                   <span class="keywordflow">break</span>;
<a name="l00793"></a>00793             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1e7f2d66307256b19ac6345c172ba59f2e">DARKSKIN</a>:
<a name="l00794"></a>00794                   <span class="keywordflow">if</span>( iRandom &lt; 35 )
<a name="l00795"></a>00795                   {
<a name="l00796"></a>00796                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e02c7788ab64ad3f30e459014fd73f96380">BROWNHEAD</a>;
<a name="l00797"></a>00797                   }
<a name="l00798"></a>00798                   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iRandom &lt; 84 )
<a name="l00799"></a>00799                   {
<a name="l00800"></a>00800                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e027a8c87159fecb74bddda12f86bc1b33f">BLACKHEAD</a>;
<a name="l00801"></a>00801                   }
<a name="l00802"></a>00802                   <span class="keywordflow">else</span>
<a name="l00803"></a>00803                   {
<a name="l00804"></a>00804                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e020dfc7c5d36584f4bdcd8b56cae0000a0">WHITEHEAD</a>;
<a name="l00805"></a>00805                         <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7040d5c40e76c4103ced101507f96e2f6">REGFEMALE</a> ||
<a name="l00806"></a>00806                                 <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7af422ea2d015cab1eb7d0cf653186a05">MINICIV</a> ||
<a name="l00807"></a>00807                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a734700b4c6e766408a86e53420c62163c">DRESSCIV</a> ||
<a name="l00808"></a>00808                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7d280093211f32a309c7e52bc1e4570c8">HATKIDCIV</a> ||
<a name="l00809"></a>00809                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7572e26862c1a3864663d8fe55b2f7f4d">KIDCIV</a> )
<a name="l00810"></a>00810                         {
<a name="l00811"></a>00811                               hair = <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 2 ) + 1;
<a name="l00812"></a>00812                         }
<a name="l00813"></a>00813                   }
<a name="l00814"></a>00814                   <span class="keywordflow">break</span>;
<a name="l00815"></a>00815             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1ec0ce5435fd7fe82d79e53163585bb90d">BLACKSKIN</a>:
<a name="l00816"></a>00816                   <span class="keywordflow">if</span>( iRandom &lt; 84 )
<a name="l00817"></a>00817                   {
<a name="l00818"></a>00818                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e027a8c87159fecb74bddda12f86bc1b33f">BLACKHEAD</a>;
<a name="l00819"></a>00819                   }
<a name="l00820"></a>00820                   <span class="keywordflow">else</span>
<a name="l00821"></a>00821                   {
<a name="l00822"></a>00822                         hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e020dfc7c5d36584f4bdcd8b56cae0000a0">WHITEHEAD</a>;
<a name="l00823"></a>00823                         <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7040d5c40e76c4103ced101507f96e2f6">REGFEMALE</a> ||
<a name="l00824"></a>00824                                 <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7af422ea2d015cab1eb7d0cf653186a05">MINICIV</a> ||
<a name="l00825"></a>00825                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a734700b4c6e766408a86e53420c62163c">DRESSCIV</a> ||
<a name="l00826"></a>00826                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7d280093211f32a309c7e52bc1e4570c8">HATKIDCIV</a> ||
<a name="l00827"></a>00827                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7572e26862c1a3864663d8fe55b2f7f4d">KIDCIV</a> )
<a name="l00828"></a>00828                         {
<a name="l00829"></a>00829                               hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e027a8c87159fecb74bddda12f86bc1b33f">BLACKHEAD</a>;
<a name="l00830"></a>00830                         }
<a name="l00831"></a>00831                   }
<a name="l00832"></a>00832                   <span class="keywordflow">break</span>;
<a name="l00833"></a>00833             <span class="keywordflow">default</span>:
<a name="l00834"></a>00834                   AssertMsg( 0, <span class="stringliteral">"Skin type not accounted for."</span> );
<a name="l00835"></a>00835                   <span class="keywordflow">break</span>;
<a name="l00836"></a>00836       }
<a name="l00837"></a>00837       <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75db4e8d299d195df30798a12cd332f5a">CRIPPLECIV</a> )
<a name="l00838"></a>00838       {
<a name="l00839"></a>00839             <span class="keywordflow">if</span>( <a class="code" href="Random_8cpp.html#742221657b584d8416ada22fa8ff23dd">Chance</a>( 50 ) )
<a name="l00840"></a>00840             {
<a name="l00841"></a>00841                   hair = <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e020dfc7c5d36584f4bdcd8b56cae0000a0">WHITEHEAD</a>;
<a name="l00842"></a>00842             }
<a name="l00843"></a>00843       }
<a name="l00844"></a>00844       <span class="keywordflow">return</span> hair;
<a name="l00845"></a>00845 }
<a name="l00846"></a>00846 
<a name="l00847"></a><a class="code" href="Soldier_01Create_8h.html#2c1bc3a8473cac919acb055f502854cd">00847</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#2c1bc3a8473cac919acb055f502854cd">GeneratePaletteForSoldier</a>( SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSoldierClass )
<a name="l00848"></a>00848 {
<a name="l00849"></a>00849       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> skin, hair;
<a name="l00850"></a>00850       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fMercClothingScheme;
<a name="l00851"></a>00851       hair = -1;
<a name="l00852"></a>00852 
<a name="l00853"></a>00853       <span class="comment">//choose random skin tone which will limit the choice of hair colors.</span>
<a name="l00854"></a>00854       skin = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)<a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( NUMSKINS );
<a name="l00855"></a>00855       <span class="keywordflow">switch</span>( skin )
<a name="l00856"></a>00856       {
<a name="l00857"></a>00857             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1eb21818b313fd6b874f31fb53bf6df7d3">PINKSKIN</a>:
<a name="l00858"></a>00858                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c138d8e83ecb9e6afc7fbe505f756775">SkinPal</a>,  <span class="stringliteral">"PINKSKIN"</span> );
<a name="l00859"></a>00859                   <span class="keywordflow">break</span>;
<a name="l00860"></a>00860             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1e3863198148b82fd4f5151dce6ac070b9">TANSKIN</a>:
<a name="l00861"></a>00861                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c138d8e83ecb9e6afc7fbe505f756775">SkinPal</a>,  <span class="stringliteral">"TANSKIN"</span> );
<a name="l00862"></a>00862                   <span class="keywordflow">break</span>;
<a name="l00863"></a>00863             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1e7f2d66307256b19ac6345c172ba59f2e">DARKSKIN</a>:
<a name="l00864"></a>00864                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c138d8e83ecb9e6afc7fbe505f756775">SkinPal</a>,  <span class="stringliteral">"DARKSKIN"</span> );
<a name="l00865"></a>00865                   <span class="keywordflow">break</span>;
<a name="l00866"></a>00866             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#0e147611e2d3a8b602fa751868b4ad1ec0ce5435fd7fe82d79e53163585bb90d">BLACKSKIN</a>:
<a name="l00867"></a>00867                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c138d8e83ecb9e6afc7fbe505f756775">SkinPal</a>,  <span class="stringliteral">"BLACKSKIN"</span> );
<a name="l00868"></a>00868                   <span class="keywordflow">break</span>;
<a name="l00869"></a>00869             <span class="keywordflow">default</span>:
<a name="l00870"></a>00870                   AssertMsg( 0, <span class="stringliteral">"Skin type not accounted for."</span> );
<a name="l00871"></a>00871                   <span class="keywordflow">break</span>;
<a name="l00872"></a>00872       }
<a name="l00873"></a>00873 
<a name="l00874"></a>00874       <span class="comment">//Choose hair color which uses the skin color to limit choices</span>
<a name="l00875"></a>00875       hair = <a class="code" href="Soldier_01Create_8cpp.html#1377b573515446f11ebc9c3238590779">ChooseHairColor</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, skin );
<a name="l00876"></a>00876       <span class="keywordflow">switch</span>( hair )
<a name="l00877"></a>00877       {
<a name="l00878"></a>00878             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e02c7788ab64ad3f30e459014fd73f96380">BROWNHEAD</a>: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7eac56265178b4c6b14b3c4e57b0cf59">HeadPal</a>, <span class="stringliteral">"BROWNHEAD"</span> ); <span class="keywordflow">break</span>;
<a name="l00879"></a>00879             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e027a8c87159fecb74bddda12f86bc1b33f">BLACKHEAD</a>: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7eac56265178b4c6b14b3c4e57b0cf59">HeadPal</a>, <span class="stringliteral">"BLACKHEAD"</span> ); <span class="keywordflow">break</span>;
<a name="l00880"></a>00880             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e020dfc7c5d36584f4bdcd8b56cae0000a0">WHITEHEAD</a>: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7eac56265178b4c6b14b3c4e57b0cf59">HeadPal</a>, <span class="stringliteral">"WHITEHEAD"</span> ); <span class="keywordflow">break</span>;
<a name="l00881"></a>00881             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e0233e625a1bab5167e426d21f63d803948">BLONDEHEAD</a>:SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7eac56265178b4c6b14b3c4e57b0cf59">HeadPal</a>, <span class="stringliteral">"BLONDHEAD"</span> ); <span class="keywordflow">break</span>;
<a name="l00882"></a>00882             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Create_8cpp.html#e6f7b430ccd2b8df9ba02ada329b4e029953d99d24b290afc83f57475b4c5c86">REDHEAD</a>:   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7eac56265178b4c6b14b3c4e57b0cf59">HeadPal</a>, <span class="stringliteral">"REDHEAD"</span>   ); <span class="keywordflow">break</span>;
<a name="l00883"></a>00883             <span class="keywordflow">default</span>:  AssertMsg( 0, <span class="stringliteral">"Hair type not accounted for."</span>);                                   <span class="keywordflow">break</span>;
<a name="l00884"></a>00884       }
<a name="l00885"></a>00885 
<a name="l00886"></a>00886       <span class="comment">// OK, After skin, hair we could have a forced color scheme.. use here if so</span>
<a name="l00887"></a>00887       <span class="keywordflow">switch</span>( ubSoldierClass )
<a name="l00888"></a>00888       {
<a name="l00889"></a>00889             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61b149e8fdf658384dd176ef9e706f10dd">SOLDIER_CLASS_ADMINISTRATOR</a>:
<a name="l00890"></a>00890                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"YELLOWVEST"</span>  );
<a name="l00891"></a>00891                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"GREENPANTS"</span>   );
<a name="l00892"></a>00892                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> = ubSoldierClass;
<a name="l00893"></a>00893                   <span class="keywordflow">return</span>;
<a name="l00894"></a>00894             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a>:
<a name="l00895"></a>00895                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BLACKSHIRT"</span>  );
<a name="l00896"></a>00896                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"BLACKPANTS"</span>   );
<a name="l00897"></a>00897                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> = ubSoldierClass;
<a name="l00898"></a>00898                   <span class="keywordflow">return</span>;
<a name="l00899"></a>00899             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61e155251ca19fc71034c52119253642b8">SOLDIER_CLASS_ARMY</a>:
<a name="l00900"></a>00900                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"REDVEST"</span>  );
<a name="l00901"></a>00901                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"GREENPANTS"</span>   );
<a name="l00902"></a>00902                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> = ubSoldierClass;
<a name="l00903"></a>00903                   <span class="keywordflow">return</span>;
<a name="l00904"></a>00904             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de615d87e4b53a22c14df589d9df96ddb0dc">SOLDIER_CLASS_GREEN_MILITIA</a>:
<a name="l00905"></a>00905                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"GREENVEST"</span>  );
<a name="l00906"></a>00906                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"BEIGEPANTS"</span>   );
<a name="l00907"></a>00907                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> = ubSoldierClass;
<a name="l00908"></a>00908                   <span class="keywordflow">return</span>;
<a name="l00909"></a>00909             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de610534cbb3d918376e9f10be3bf049666e">SOLDIER_CLASS_REG_MILITIA</a>:
<a name="l00910"></a>00910                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"JEANVEST"</span>  );
<a name="l00911"></a>00911                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"BEIGEPANTS"</span>   );
<a name="l00912"></a>00912                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> = ubSoldierClass;
<a name="l00913"></a>00913                   <span class="keywordflow">return</span>;
<a name="l00914"></a>00914             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61f2c9f1bbece4a7bd58b4a83a54dac6b6">SOLDIER_CLASS_ELITE_MILITIA</a>:
<a name="l00915"></a>00915                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BLUEVEST"</span>  );
<a name="l00916"></a>00916                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"BEIGEPANTS"</span>   );
<a name="l00917"></a>00917                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> = ubSoldierClass;
<a name="l00918"></a>00918                   <span class="keywordflow">return</span>;
<a name="l00919"></a>00919             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de618d13f000b4b5195727feae9b48454950">SOLDIER_CLASS_MINER</a>:
<a name="l00920"></a>00920                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"greyVEST"</span>  );
<a name="l00921"></a>00921                   SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"BEIGEPANTS"</span>   );
<a name="l00922"></a>00922                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> = ubSoldierClass;
<a name="l00923"></a>00923                   <span class="keywordflow">return</span>;
<a name="l00924"></a>00924       }
<a name="l00925"></a>00925 
<a name="l00926"></a>00926       <span class="comment">//there are 2 clothing schemes, 1 for mercs and 1 for civilians.  The</span>
<a name="l00927"></a>00927       <span class="comment">//merc clothing scheme is much larger and general and is an exclusive superset</span>
<a name="l00928"></a>00928       <span class="comment">//of the civilian clothing scheme which means the civilians will choose the</span>
<a name="l00929"></a>00929       <span class="comment">//merc clothing scheme often ( actually 60% of the time ).</span>
<a name="l00930"></a>00930       <span class="keywordflow">if</span>( !<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>[0] || !<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>[0] )
<a name="l00931"></a>00931       {
<a name="l00932"></a>00932             fMercClothingScheme = TRUE;
<a name="l00933"></a>00933             <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> == CIV_TEAM &amp;&amp; <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 100 ) &lt; 40 ) 
<a name="l00934"></a>00934             { <span class="comment">//40% chance of using cheezy civilian colors</span>
<a name="l00935"></a>00935                   fMercClothingScheme = FALSE;
<a name="l00936"></a>00936             }
<a name="l00937"></a>00937             <span class="keywordflow">if</span>( !fMercClothingScheme ) <span class="comment">//CHEEZY CIVILIAN COLORS</span>
<a name="l00938"></a>00938             {
<a name="l00939"></a>00939                   <span class="keywordflow">if</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 100 ) &lt; 30 )
<a name="l00940"></a>00940                   { <span class="comment">//30% chance that the civilian will choose a gaudy yellow shirt with pants.</span>
<a name="l00941"></a>00941                         SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"GYELLOWSHIRT"</span> );
<a name="l00942"></a>00942                         <span class="keywordflow">switch</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 3 ) )
<a name="l00943"></a>00943                         {
<a name="l00944"></a>00944                               <span class="keywordflow">case</span> 0:     SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"TANPANTS"</span>   ); <span class="keywordflow">break</span>;
<a name="l00945"></a>00945                               <span class="keywordflow">case</span> 1: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"BEIGEPANTS"</span> ); <span class="keywordflow">break</span>;
<a name="l00946"></a>00946                               <span class="keywordflow">case</span> 2: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"GREENPANTS"</span> ); <span class="keywordflow">break</span>;
<a name="l00947"></a>00947                         }
<a name="l00948"></a>00948                   }
<a name="l00949"></a>00949                   <span class="keywordflow">else</span>
<a name="l00950"></a>00950                   { <span class="comment">//70% chance that the civilian will choose jeans with a shirt.</span>
<a name="l00951"></a>00951                         SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"JEANPANTS"</span> ); 
<a name="l00952"></a>00952                         <span class="keywordflow">switch</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 7 ) )
<a name="l00953"></a>00953                         {
<a name="l00954"></a>00954                               <span class="keywordflow">case</span> 0:     SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"WHITEVEST"</span>   ); <span class="keywordflow">break</span>;
<a name="l00955"></a>00955                               <span class="keywordflow">case</span> 1: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BLACKSHIRT"</span>  ); <span class="keywordflow">break</span>;
<a name="l00956"></a>00956                               <span class="keywordflow">case</span> 2: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"PURPLESHIRT"</span> ); <span class="keywordflow">break</span>;
<a name="l00957"></a>00957                               <span class="keywordflow">case</span> 3: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BLUEVEST"</span>    ); <span class="keywordflow">break</span>;
<a name="l00958"></a>00958                               <span class="keywordflow">case</span> 4: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BROWNVEST"</span>   ); <span class="keywordflow">break</span>;
<a name="l00959"></a>00959                               <span class="keywordflow">case</span> 5: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"JEANVEST"</span>    ); <span class="keywordflow">break</span>;
<a name="l00960"></a>00960                               <span class="keywordflow">case</span> 6: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"REDVEST"</span>     ); <span class="keywordflow">break</span>;
<a name="l00961"></a>00961                         }
<a name="l00962"></a>00962                   }
<a name="l00963"></a>00963                   <span class="keywordflow">return</span>;
<a name="l00964"></a>00964             }
<a name="l00965"></a>00965             <span class="comment">//MERC COLORS</span>
<a name="l00966"></a>00966             <span class="keywordflow">switch</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 3 ) )
<a name="l00967"></a>00967             {
<a name="l00968"></a>00968                   <span class="keywordflow">case</span> 0:
<a name="l00969"></a>00969                         SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"GREENPANTS"</span> );
<a name="l00970"></a>00970                         <span class="keywordflow">switch</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 4 ) )
<a name="l00971"></a>00971                         {
<a name="l00972"></a>00972                               <span class="keywordflow">case</span> 0: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"YELLOWVEST"</span> ); <span class="keywordflow">break</span>;
<a name="l00973"></a>00973                               <span class="keywordflow">case</span> 1: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"WHITEVEST"</span>  ); <span class="keywordflow">break</span>;
<a name="l00974"></a>00974                               <span class="keywordflow">case</span> 2: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BROWNVEST"</span>  ); <span class="keywordflow">break</span>;
<a name="l00975"></a>00975                               <span class="keywordflow">case</span> 3: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"GREENVEST"</span>  ); <span class="keywordflow">break</span>;
<a name="l00976"></a>00976                         }
<a name="l00977"></a>00977                         <span class="keywordflow">break</span>;
<a name="l00978"></a>00978                   <span class="keywordflow">case</span> 1:
<a name="l00979"></a>00979                         SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"TANPANTS"</span> );
<a name="l00980"></a>00980                         <span class="keywordflow">switch</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ) )
<a name="l00981"></a>00981                         {
<a name="l00982"></a>00982                               <span class="keywordflow">case</span> 0: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"YELLOWVEST"</span> ); <span class="keywordflow">break</span>;
<a name="l00983"></a>00983                               <span class="keywordflow">case</span> 1: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"WHITEVEST"</span>  ); <span class="keywordflow">break</span>;
<a name="l00984"></a>00984                               <span class="keywordflow">case</span> 2: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BLACKSHIRT"</span> ); <span class="keywordflow">break</span>;
<a name="l00985"></a>00985                               <span class="keywordflow">case</span> 3: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BLUEVEST"</span>   ); <span class="keywordflow">break</span>;
<a name="l00986"></a>00986                               <span class="keywordflow">case</span> 4: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BROWNVEST"</span>  ); <span class="keywordflow">break</span>;
<a name="l00987"></a>00987                               <span class="keywordflow">case</span> 5: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"GREENVEST"</span>  ); <span class="keywordflow">break</span>;
<a name="l00988"></a>00988                               <span class="keywordflow">case</span> 6: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"JEANVEST"</span>   ); <span class="keywordflow">break</span>;
<a name="l00989"></a>00989                               <span class="keywordflow">case</span> 7: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"REDVEST"</span>    ); <span class="keywordflow">break</span>;
<a name="l00990"></a>00990                         }
<a name="l00991"></a>00991                         <span class="keywordflow">break</span>;
<a name="l00992"></a>00992                   <span class="keywordflow">case</span> 2:
<a name="l00993"></a>00993                         SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, <span class="stringliteral">"BLUEPANTS"</span> );
<a name="l00994"></a>00994                         <span class="keywordflow">switch</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 4 ) )
<a name="l00995"></a>00995                         {
<a name="l00996"></a>00996                               <span class="keywordflow">case</span> 0: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"YELLOWVEST"</span> ); <span class="keywordflow">break</span>;
<a name="l00997"></a>00997                               <span class="keywordflow">case</span> 1: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"WHITEVEST"</span>  ); <span class="keywordflow">break</span>;
<a name="l00998"></a>00998                               <span class="keywordflow">case</span> 2: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"REDVEST"</span>    ); <span class="keywordflow">break</span>;
<a name="l00999"></a>00999                               <span class="keywordflow">case</span> 3: SET_PALETTEREP_ID( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, <span class="stringliteral">"BLACKSHIRT"</span> ); <span class="keywordflow">break</span>;
<a name="l01000"></a>01000                         }
<a name="l01001"></a>01001                         <span class="keywordflow">break</span>;
<a name="l01002"></a>01002             }
<a name="l01003"></a>01003       }
<a name="l01004"></a>01004 }
<a name="l01005"></a>01005 
<a name="l01006"></a><a class="code" href="Soldier_01Create_8cpp.html#db6ef459ffdff4fbaac6024db991ca0a">01006</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Soldier_01Create_8cpp.html#db6ef459ffdff4fbaac6024db991ca0a">TacticalCopySoldierFromCreateStruct</a>( SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pCreateStruct )
<a name="l01007"></a>01007 {
<a name="l01008"></a>01008       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#5a5648a1bb3507cc41f6be199c51a3f8">ubProfile</a>                                         = NO_PROFILE;
<a name="l01009"></a>01009 
<a name="l01010"></a>01010       <span class="comment">// Randomize attributes</span>
<a name="l01011"></a>01011       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#e308dea18533bf5ab2bcee5bbe27391c">bLife</a>                                             = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>;
<a name="l01012"></a>01012       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#600d382f89a391cdeb7bfe2580776866">bLifeMax</a>                                    = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>;
<a name="l01013"></a>01013       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#9e00ffce9fab366b226d73f77609c2f4">bAgility</a>                                          = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>;
<a name="l01014"></a>01014       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#a6681185ba941c3a7bc8163310182478">bDexterity</a>                                  = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>;
<a name="l01015"></a>01015       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0becb3b2a6e15a9c7d60749a341aef38">bExpLevel</a>                                         = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a>;
<a name="l01016"></a>01016 
<a name="l01017"></a>01017       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7a9a17a9aff519efd7423c6b11cdb046">bMarksmanship</a>                         = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a>;
<a name="l01018"></a>01018       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#4035959182260cd84762a7e786a4c57b">bMedical</a>                                          = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>;
<a name="l01019"></a>01019       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#e527422adc5995d88b63f12b4dd9c38c">bMechanical</a>                                 = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>;
<a name="l01020"></a>01020       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#1f8366811489062f9af672734c3e87f8">bExplosive</a>                                  = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>;
<a name="l01021"></a>01021       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#fd2d5a6ae419aeca68111c22f755974a">bLeadership</a>                                 = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>;
<a name="l01022"></a>01022       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#66c3be01391ae0f34be79031a4e0f436">bStrength</a>                                         = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>;
<a name="l01023"></a>01023       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#4e9c2ad5d84963b9a6fc6f092bed8638">bWisdom</a>                                           = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c805687690b8b5573780d07fc3931a36">bAttitude</a>                                         = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#d9cd617657bb1765b57e7647ff2b0a92">bAttitude</a>;
<a name="l01026"></a>01026       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#76cf3cb25fe41d314c711377ee8dbfad">bOrders</a>                                           = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a>;
<a name="l01027"></a>01027       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#49a3fb0d9318f044c9ad5774b0a89170">bMorale</a>                                           = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>;
<a name="l01028"></a>01028       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#eb4b32c781e304a9fa71ba95b75a49e6">bAIMorale</a>                                         = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#7b9636f83cba71d8cd81f2ec419ddc52">bAIMorale</a>;
<a name="l01029"></a>01029       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#90bc1483db181a5cc731507f2e047e4e">bVocalVolume</a>                          = MIDVOLUME;
<a name="l01030"></a>01030       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a>                                  = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a>;
<a name="l01031"></a>01031       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#d250d43185690987945d6884efdf79fc">ubCivilianGroup</a>                       = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1190d364df3bb96d0c0931d8b5126ac7">ubCivilianGroup</a>;
<a name="l01032"></a>01032 
<a name="l01033"></a>01033       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f42305317ffec1fd9d924ffc592896b6">ubScheduleID</a>                          = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>;
<a name="l01034"></a>01034       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7f520f3cdb6d5f0d3db75e1e9ca3f29d">bHasKeys</a>                                          = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#2406e9999b94e17cfb90786e671d6e90">fHasKeys</a>;
<a name="l01035"></a>01035       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a>                        = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a>;
<a name="l01036"></a>01036 
<a name="l01037"></a>01037       <span class="keywordflow">if</span>( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1e4eaba07de6a26b8c4c7d0ce1c231e2">fVisible</a> )
<a name="l01038"></a>01038       {
<a name="l01039"></a>01039             sprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7eac56265178b4c6b14b3c4e57b0cf59">HeadPal</a>, pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#11ce98982166c21bcd644f1a2e8bb45f">HeadPal</a> );
<a name="l01040"></a>01040             sprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2466fb9ff2f6d03d77f3d34eb6d2dba6">PantsPal</a>, pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#097969cce346702b9fd06ba5208a3276">PantsPal</a> );
<a name="l01041"></a>01041             sprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0234867384fe2f03608cf551edf81506">VestPal</a>, pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aea74efcf2f672bd7c398c360e5edc55">VestPal</a> );
<a name="l01042"></a>01042             sprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#c138d8e83ecb9e6afc7fbe505f756775">SkinPal</a>, pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e8ab217f813460200f9541afcba6c4c4">SkinPal</a> );
<a name="l01043"></a>01043       }
<a name="l01044"></a>01044 
<a name="l01045"></a>01045       <span class="comment">//KM:  March 25, 1999</span>
<a name="l01046"></a>01046       <span class="comment">//Assign nightops traits to enemies/militia</span>
<a name="l01047"></a>01047       <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> == <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a> || <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> == <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61f2c9f1bbece4a7bd58b4a83a54dac6b6">SOLDIER_CLASS_ELITE_MILITIA</a> )
<a name="l01048"></a>01048       {
<a name="l01049"></a>01049             <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> iChance;
<a name="l01050"></a>01050             <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubProgress;
<a name="l01051"></a>01051 
<a name="l01052"></a>01052             ubProgress = <a class="code" href="Campaign_8cpp.html#c301f0385a7e0d276efe888024738b09">HighestPlayerProgressPercentage</a>();
<a name="l01053"></a>01053 
<a name="l01054"></a>01054             <span class="keywordflow">if</span> ( ubProgress &lt; 60 )
<a name="l01055"></a>01055             {
<a name="l01056"></a>01056                   <span class="comment">// ramp chance from 40 to 80% over the course of 60% progress</span>
<a name="l01057"></a>01057                   <span class="comment">// 60 * 2/3 = 40, and 40+40 = 80</span>
<a name="l01058"></a>01058                   iChance = 40 + (ubProgress * 2) / 3;
<a name="l01059"></a>01059             }
<a name="l01060"></a>01060             <span class="keywordflow">else</span>
<a name="l01061"></a>01061             {
<a name="l01062"></a>01062                   iChance = 80;
<a name="l01063"></a>01063             }
<a name="l01064"></a>01064       
<a name="l01065"></a>01065             <span class="keywordflow">if</span> ( <a class="code" href="Random_8cpp.html#742221657b584d8416ada22fa8ff23dd">Chance</a>( iChance ) )
<a name="l01066"></a>01066             {
<a name="l01067"></a>01067                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f2259cda9078478fb5253464809600f2">ubSkillTrait1</a> = <a class="code" href="soldier_01profile_01type_8h.html#88183a1fc58897e3edb65b354323264b98b590ff5b126a99b72fd5670369d2b4">NIGHTOPS</a>;
<a name="l01068"></a>01068                   <span class="keywordflow">if</span> ( ubProgress &gt;= 40 &amp;&amp; <a class="code" href="Random_8cpp.html#742221657b584d8416ada22fa8ff23dd">Chance</a>( 30 ) )
<a name="l01069"></a>01069                   {
<a name="l01070"></a>01070                         <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#15bcc71c0dc703eb0a34fc8fcbdf1f09">ubSkillTrait2</a> = <a class="code" href="soldier_01profile_01type_8h.html#88183a1fc58897e3edb65b354323264b98b590ff5b126a99b72fd5670369d2b4">NIGHTOPS</a>;
<a name="l01071"></a>01071                   }
<a name="l01072"></a>01072             }
<a name="l01073"></a>01073       }
<a name="l01074"></a>01074       <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> == <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61e155251ca19fc71034c52119253642b8">SOLDIER_CLASS_ARMY</a> || <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> == <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de610534cbb3d918376e9f10be3bf049666e">SOLDIER_CLASS_REG_MILITIA</a> )
<a name="l01075"></a>01075       {
<a name="l01076"></a>01076             <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> iChance;
<a name="l01077"></a>01077             <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubProgress;
<a name="l01078"></a>01078 
<a name="l01079"></a>01079             ubProgress = <a class="code" href="Campaign_8cpp.html#c301f0385a7e0d276efe888024738b09">HighestPlayerProgressPercentage</a>();
<a name="l01080"></a>01080 
<a name="l01081"></a>01081             <span class="keywordflow">if</span> ( ubProgress &lt; 60 )
<a name="l01082"></a>01082             {
<a name="l01083"></a>01083                   <span class="comment">// ramp chance from 0 to 40% over the course of 60% progress</span>
<a name="l01084"></a>01084                   <span class="comment">// 60 * 2/3 = 40</span>
<a name="l01085"></a>01085                   iChance = (ubProgress * 2) / 3;
<a name="l01086"></a>01086             }
<a name="l01087"></a>01087             <span class="keywordflow">else</span>
<a name="l01088"></a>01088             {
<a name="l01089"></a>01089                   iChance = 40;
<a name="l01090"></a>01090             }
<a name="l01091"></a>01091 
<a name="l01092"></a>01092             <span class="keywordflow">if</span> ( <a class="code" href="Random_8cpp.html#742221657b584d8416ada22fa8ff23dd">Chance</a>( iChance ) )
<a name="l01093"></a>01093             {
<a name="l01094"></a>01094                   <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f2259cda9078478fb5253464809600f2">ubSkillTrait1</a> = <a class="code" href="soldier_01profile_01type_8h.html#88183a1fc58897e3edb65b354323264b98b590ff5b126a99b72fd5670369d2b4">NIGHTOPS</a>;
<a name="l01095"></a>01095                   <span class="keywordflow">if</span> ( ubProgress &gt;= 50 &amp;&amp; <a class="code" href="Random_8cpp.html#742221657b584d8416ada22fa8ff23dd">Chance</a>( 20 ) )
<a name="l01096"></a>01096                   {
<a name="l01097"></a>01097                         <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#15bcc71c0dc703eb0a34fc8fcbdf1f09">ubSkillTrait2</a> = <a class="code" href="soldier_01profile_01type_8h.html#88183a1fc58897e3edb65b354323264b98b590ff5b126a99b72fd5670369d2b4">NIGHTOPS</a>;
<a name="l01098"></a>01098                   }
<a name="l01099"></a>01099             }
<a name="l01100"></a>01100       }
<a name="l01101"></a>01101 
<a name="l01102"></a>01102       <span class="comment">//KM:  November 10, 1997</span>
<a name="l01103"></a>01103       <span class="comment">//Adding patrol points</span>
<a name="l01104"></a>01104       <span class="comment">//CAUTION:  CONVERTING SIGNED TO UNSIGNED though the values should never be negative.</span>
<a name="l01105"></a>01105       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#3617f93cf4f3f5adbe609960815ed569">bPatrolCnt</a>                                  = pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#63f0be3b67f871f3d49cd09e88c5450f">bPatrolCnt</a>;
<a name="l01106"></a>01106       memcpy( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#8fdd768fde52511d085402060c856cf5">usPatrolGrid</a>, pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#72a68c367b8bc4fe932d78c53f8a522d">sPatrolGrid</a>, <span class="keyword">sizeof</span>( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> ) * MAXPATROLGRIDS );
<a name="l01107"></a>01107                   
<a name="l01108"></a>01108       <span class="comment">//Kris:  November 10, 1997</span>
<a name="l01109"></a>01109       <span class="comment">//Expanded the default names based on team.</span>
<a name="l01110"></a>01110       <span class="keywordflow">switch</span>( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ebcd52cb950a237b1fa9d7de49227dad">bTeam</a> )
<a name="l01111"></a>01111       {
<a name="l01112"></a>01112             <span class="keywordflow">case</span> ENEMY_TEAM:        swprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7bf7231f416aa66f38010b7a7e8f2341">name</a>, <a class="code" href="__DutchText_8cpp.html#f69c72cc23fedc3149347ccb542af8f8">TacticalStr</a>[ <a class="code" href="Text_8h.html#d11a20102b8fc2e6eef5e2ce9afdfbe7896bce7f3bcfc0b9ec793d640bb178bb">ENEMY_TEAM_MERC_NAME</a> ] );        <span class="keywordflow">break</span>;
<a name="l01113"></a>01113             <span class="keywordflow">case</span> MILITIA_TEAM:      swprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7bf7231f416aa66f38010b7a7e8f2341">name</a>, <a class="code" href="__DutchText_8cpp.html#f69c72cc23fedc3149347ccb542af8f8">TacticalStr</a>[ <a class="code" href="Text_8h.html#d11a20102b8fc2e6eef5e2ce9afdfbe7fa2aaf06549ce457a22afae911d3e77f">MILITIA_TEAM_MERC_NAME</a> ] );      <span class="keywordflow">break</span>;
<a name="l01114"></a>01114             <span class="keywordflow">case</span> CIV_TEAM:                
<a name="l01115"></a>01115                   <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#44fa01e0e2eef538a2566810626be040">ubSoldierClass</a> == <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de618d13f000b4b5195727feae9b48454950">SOLDIER_CLASS_MINER</a> )
<a name="l01116"></a>01116                   {
<a name="l01117"></a>01117                         swprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7bf7231f416aa66f38010b7a7e8f2341">name</a>, <a class="code" href="__DutchText_8cpp.html#f69c72cc23fedc3149347ccb542af8f8">TacticalStr</a>[ <a class="code" href="Text_8h.html#d11a20102b8fc2e6eef5e2ce9afdfbe7bcf7db49e2a1571d7e1b24b7767f6a41">CIV_TEAM_MINER_NAME</a> ] );
<a name="l01118"></a>01118                   }
<a name="l01119"></a>01119                   <span class="keywordflow">else</span>
<a name="l01120"></a>01120                   {
<a name="l01121"></a>01121                         swprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7bf7231f416aa66f38010b7a7e8f2341">name</a>, <a class="code" href="__DutchText_8cpp.html#f69c72cc23fedc3149347ccb542af8f8">TacticalStr</a>[ <a class="code" href="Text_8h.html#d11a20102b8fc2e6eef5e2ce9afdfbe72fa8e11ab78b170c609f65f6f36b6009">CIV_TEAM_MERC_NAME</a> ] );    
<a name="l01122"></a>01122                   }
<a name="l01123"></a>01123                   <span class="keywordflow">break</span>;
<a name="l01124"></a>01124             <span class="keywordflow">case</span> CREATURE_TEAM:     
<a name="l01125"></a>01125                   <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7fa470b7d78ba43f21bfd04c49f02a70b">BLOODCAT</a> )
<a name="l01126"></a>01126                   {
<a name="l01127"></a>01127                         swprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7bf7231f416aa66f38010b7a7e8f2341">name</a>, <a class="code" href="__DutchText_8cpp.html#c5c7f48843bbaeab7848215f323578c9">gzLateLocalizedString</a>[ 36 ] );
<a name="l01128"></a>01128                   }
<a name="l01129"></a>01129                   <span class="keywordflow">else</span>
<a name="l01130"></a>01130                   {
<a name="l01131"></a>01131                         swprintf( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7bf7231f416aa66f38010b7a7e8f2341">name</a>, <a class="code" href="__DutchText_8cpp.html#f69c72cc23fedc3149347ccb542af8f8">TacticalStr</a>[ <a class="code" href="Text_8h.html#d11a20102b8fc2e6eef5e2ce9afdfbe7debd05c222bba825df59481b98122528">CREATURE_TEAM_MERC_NAME</a> ] );     <span class="keywordflow">break</span>;
<a name="l01132"></a>01132                   }
<a name="l01133"></a>01133                   <span class="keywordflow">break</span>;
<a name="l01134"></a>01134       }
<a name="l01135"></a>01135 
<a name="l01136"></a>01136       <span class="comment">//Generate colors for soldier based on the body type.</span>
<a name="l01137"></a>01137       <a class="code" href="Soldier_01Create_8cpp.html#2c1bc3a8473cac919acb055f502854cd">GeneratePaletteForSoldier</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a> );
<a name="l01138"></a>01138 
<a name="l01139"></a>01139       <span class="comment">// Copy item info over</span>
<a name="l01140"></a>01140       memcpy( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>, pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>, <span class="keyword">sizeof</span>( OBJECTTYPE ) * <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a> );  
<a name="l01141"></a>01141 
<a name="l01142"></a>01142       <span class="keywordflow">return</span>( TRUE );
<a name="l01143"></a>01143 }
<a name="l01144"></a>01144 
<a name="l01145"></a>01145 
<a name="l01146"></a><a class="code" href="Soldier_01Create_8cpp.html#a80898424cc4b623520c250ecccd607e">01146</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#a80898424cc4b623520c250ecccd607e">InitSoldierStruct</a>( SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> )
<a name="l01147"></a>01147 {
<a name="l01148"></a>01148       <span class="comment">// Memset values</span>
<a name="l01149"></a>01149       memset( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, 0, <span class="keyword">sizeof</span>( SOLDIERTYPE ) );
<a name="l01150"></a>01150 
<a name="l01151"></a>01151       <span class="comment">// Set default values</span>
<a name="l01152"></a>01152       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#73246323764393ce2a5ece7fcb7b7cf8">bVisible</a>                                          = -1;
<a name="l01153"></a>01153       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#d5f6fd345324ba5fdf49c5a0624f6620">iFaceIndex</a>                                  = -1;
<a name="l01154"></a>01154 
<a name="l01155"></a>01155       <span class="comment">// Set morale default</span>
<a name="l01156"></a>01156       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#49a3fb0d9318f044c9ad5774b0a89170">bMorale</a>                                           = DEFAULT_MORALE;
<a name="l01157"></a>01157 
<a name="l01158"></a>01158       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#d9c0383469bf58f73ba6bea3e8ebf22b">ubAttackerID</a>                          = NOBODY;
<a name="l01159"></a>01159       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#8c6d26292550a24f41a4741a654b4027">ubPreviousAttackerID</a>      = NOBODY;
<a name="l01160"></a>01160       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#edb9481dc1b4f6d41b667bba3c60aed2">ubNextToPreviousAttackerID</a>      = NOBODY;
<a name="l01161"></a>01161 
<a name="l01162"></a>01162       <span class="comment">//Set AI Delay!</span>
<a name="l01163"></a>01163       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#ec9d29da5d42b79d53721abd28e6583a">uiAIDelay</a>                                         = 100;
<a name="l01164"></a>01164 
<a name="l01165"></a>01165       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#243f529e9560d2f8e1554fa690bc044d">iLight</a>                                            = -1;
<a name="l01166"></a>01166       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#d5f6fd345324ba5fdf49c5a0624f6620">iFaceIndex</a>                                  = -1;
<a name="l01167"></a>01167 
<a name="l01168"></a>01168       <span class="comment">// Set update time to new speed</span>
<a name="l01169"></a>01169       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f33459812e24af812d6439d62959709a">ubDesiredHeight</a>                       = NO_DESIRED_HEIGHT;
<a name="l01170"></a>01170       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#9c0f3afbb419954bcbbdfa4ffb679b16">bViewRange</a>                                  = NORMAL_VIEW_RANGE;
<a name="l01171"></a>01171       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b0096f321a0de4f0617283f7b3212aa0">bInSector</a>                                         = FALSE;
<a name="l01172"></a>01172       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2ab66ee0f37902cd448f4a738df4f2bf">sGridNo</a>                                           = NO_MAP_POS;
<a name="l01173"></a>01173       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#9eb09711b01dd216b9d0d04a281355ee">iMuzFlash</a>                                         = -1;
<a name="l01174"></a>01174       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#10dcc042f40b20751530663b0bbbe289">usPendingAnimation</a>        = NO_PENDING_ANIMATION;
<a name="l01175"></a>01175       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#fbbac83b63f948835a517cb72fbfba71">usPendingAnimation2</a>       = NO_PENDING_ANIMATION;
<a name="l01176"></a>01176       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#cacedc167a4050b6fff17f9c8b0befd4">ubPendingStanceChange</a>     = NO_PENDING_STANCE;
<a name="l01177"></a>01177       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#dc9b23456f0c68646913efe937ca0d35">ubPendingDirection</a>        = NO_PENDING_DIRECTION;
<a name="l01178"></a>01178       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#77e9ca91b8a5b17fdc0acb99901cbdad">ubPendingAction</a>                       = NO_PENDING_ACTION;
<a name="l01179"></a>01179       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#a241a93ffddc42954bb878f9bcf4392c">bLastRenderVisibleValue</a>   = -1;
<a name="l01180"></a>01180       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2a44d10fbcd1df19ba5bdbb4c1e60a38">bBreath</a>                                           = 99;
<a name="l01181"></a>01181       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#1bcf825e550d7b1f2db4cbfe7a6782d3">bBreathMax</a>                                  = 100;
<a name="l01182"></a>01182       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#653dad4e2520784e293eca9f948b8532">bActive</a>                                                 = TRUE;
<a name="l01183"></a>01183       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#145d54c74863ffaae9b55515cd938903">fShowLocator</a>                                = FALSE;
<a name="l01184"></a>01184       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#cd62bec1ef14927e4fb8ef7540273beb">sLastTarget</a>                                       = NOWHERE;
<a name="l01185"></a>01185       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#e565cc6eb4167b009fc2dd1b99c824d3">sAbsoluteFinalDestination</a> = NOWHERE;
<a name="l01186"></a>01186       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#38beaf9cf30f3ceee9d0ce190ea80b36">sZLevelOverride</a>                             = -1;
<a name="l01187"></a>01187       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#fe3b06e2ba46bbcfad78e9e628d0aeb6">ubServicePartner</a>                      = NOBODY;
<a name="l01188"></a>01188       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#99a689d831418a5e3ed638a34761514e">ubAttackingHand</a>                             = <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc87855408e678e638d95e18d5e9a2a64a96e2e">HANDPOS</a>;
<a name="l01189"></a>01189       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#1f73b62a5ea0dd26fa1bec1d9f522b41">usAnimState</a>                                       = <a class="code" href="Animation_01Control_8h.html#9c02dc5e870a2c7d20bbaafb3e7be2eb61b6dd5eb66ef4c1c1c26ae5ed4cff43">STANDING</a>;
<a name="l01190"></a>01190       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#041daf8c77b17f894fc6b20b3d1d289b">bInterruptDuelPts</a>                     = NO_INTERRUPT;
<a name="l01191"></a>01191       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#3f58b0f6efbd23c543ea12258a2f9ef3">bMoved</a>                                                  = FALSE;
<a name="l01192"></a>01192       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#aae279c5f2bba1c95cc01a190531c14b">ubRobotRemoteHolderID</a>           = NOBODY;
<a name="l01193"></a>01193       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0fdab3f65adc00474d2f67655f77c6b9">sNoiseGridno</a>                                = NOWHERE;
<a name="l01194"></a>01194       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#2f3eaad74e1f28c654fa76976dea5c0a">ubPrevSectorID</a>                              = 255;
<a name="l01195"></a>01195       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7c718b87858d7b6cc894707b38d7739e">bNextPatrolPnt</a>                              = 1;
<a name="l01196"></a>01196       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#48ea85b88c93eb65c1afdc9618ab50a2">bCurrentCivQuote</a>                      = -1;
<a name="l01197"></a>01197       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#7d372b22295b3de710e36c7f3e9d4550">bCurrentCivQuoteDelta</a>           = 0;
<a name="l01198"></a>01198       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#ad22970b6b3093d56691828729c40b14">uiBattleSoundID</a>                             = NO_SAMPLE;
<a name="l01199"></a>01199       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#6010a217fb17086994830b10f1eeb5b7">ubXRayedBy</a>                                        = NOBODY;
<a name="l01200"></a>01200       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#9299c11c8b55232c4216f4533290f840">uiXRayActivatedTime</a>             = 0;
<a name="l01201"></a>01201       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#51424f18568b9ec62dcec930be427e75">bBulletsLeft</a>                                = 0;
<a name="l01202"></a>01202       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#df00cb51c710eabba90edc252d9cccda">bVehicleUnderRepairID</a>           = -1;
<a name="l01203"></a>01203 }
<a name="l01204"></a>01204 
<a name="l01205"></a>01205 
<a name="l01206"></a><a class="code" href="Soldier_01Create_8h.html#e189d2a81dbaf98fdcf29797fbfe7887">01206</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Soldier_01Create_8cpp.html#e189d2a81dbaf98fdcf29797fbfe7887">InternalTacticalRemoveSoldier</a>( <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usSoldierIndex, <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fRemoveVehicle )
<a name="l01207"></a>01207 {
<a name="l01208"></a>01208       SOLDIERTYPE *           <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l01209"></a>01209 
<a name="l01210"></a>01210       <span class="comment">// Check range of index given</span>
<a name="l01211"></a>01211       <span class="keywordflow">if</span> ( usSoldierIndex &lt; 0 || usSoldierIndex &gt; TOTAL_SOLDIERS-1 )
<a name="l01212"></a>01212       {
<a name="l01213"></a>01213             <span class="comment">// Set debug message</span>
<a name="l01214"></a>01214 
<a name="l01215"></a>01215             <span class="keywordflow">return</span>( FALSE );
<a name="l01216"></a>01216       }
<a name="l01217"></a>01217 
<a name="l01218"></a>01218 
<a name="l01219"></a>01219       <span class="comment">// ATE: If this guy is our global selected dude, take selection off...</span>
<a name="l01220"></a>01220       <span class="keywordflow">if</span> ( <a class="code" href="Handle_01UI_8cpp.html#e5371ebb87d28dc6ac9a9e31b6240b9b">gfUIFullTargetFound</a> &amp;&amp; <a class="code" href="Assignments_8cpp.html#0f5ec3a47f9c8bbd96557e71c1833d5e">gusUIFullTargetID</a> == usSoldierIndex )
<a name="l01221"></a>01221       {
<a name="l01222"></a>01222             <a class="code" href="Handle_01UI_8cpp.html#e5371ebb87d28dc6ac9a9e31b6240b9b">gfUIFullTargetFound</a> = FALSE;
<a name="l01223"></a>01223       }
<a name="l01224"></a>01224       <span class="comment">//This one is for a single-gridno guy.....</span>
<a name="l01225"></a>01225       <span class="keywordflow">if</span> ( <a class="code" href="Handle_01UI_8cpp.html#3ac0e0af51a2e9c78680f0e2de05f8d7">gfUISelectiveTargetFound</a> &amp;&amp; <a class="code" href="Handle_01UI_8cpp.html#17abc18a795cae368a63ac9155b00d46">gusUISelectiveTargetID</a> == usSoldierIndex )
<a name="l01226"></a>01226       {
<a name="l01227"></a>01227             <a class="code" href="Handle_01UI_8cpp.html#3ac0e0af51a2e9c78680f0e2de05f8d7">gfUISelectiveTargetFound</a> = FALSE;
<a name="l01228"></a>01228       }
<a name="l01229"></a>01229 
<a name="l01230"></a>01230       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ usSoldierIndex ];
<a name="l01231"></a>01231 
<a name="l01232"></a>01232       <span class="keywordflow">return</span> <a class="code" href="Soldier_01Create_8cpp.html#b2391db532c7f3cdbf6a8b380043a1db">TacticalRemoveSoldierPointer</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, fRemoveVehicle );
<a name="l01233"></a>01233 }
<a name="l01234"></a>01234 
<a name="l01235"></a><a class="code" href="Soldier_01Create_8h.html#b2391db532c7f3cdbf6a8b380043a1db">01235</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Soldier_01Create_8cpp.html#b2391db532c7f3cdbf6a8b380043a1db">TacticalRemoveSoldierPointer</a>( SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fRemoveVehicle )
<a name="l01236"></a>01236 {
<a name="l01237"></a>01237       <span class="keywordflow">if</span>( !<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#653dad4e2520784e293eca9f948b8532">bActive</a> )
<a name="l01238"></a>01238             <span class="keywordflow">return</span> FALSE;
<a name="l01239"></a>01239 
<a name="l01240"></a>01240       <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f42305317ffec1fd9d924ffc592896b6">ubScheduleID</a> )
<a name="l01241"></a>01241       {
<a name="l01242"></a>01242             <a class="code" href="Scheduling_8cpp.html#6e4696fdaba747a7b0263d4e233a310f">DeleteSchedule</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#f42305317ffec1fd9d924ffc592896b6">ubScheduleID</a> );
<a name="l01243"></a>01243       }
<a name="l01244"></a>01244 
<a name="l01245"></a>01245       <span class="keywordflow">if</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#eb633099940bc20ff5a969bce84eab42">uiStatusFlags</a> &amp; SOLDIER_VEHICLE &amp;&amp; fRemoveVehicle )
<a name="l01246"></a>01246       {
<a name="l01247"></a>01247             <span class="comment">// remove this vehicle from the list</span>
<a name="l01248"></a>01248             <a class="code" href="Vehicles_8cpp.html#e0c19d392653afb29046fd7ca1b43807">RemoveVehicleFromList</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#6b49c64abec6b8363ffa83c9cc308dd6">bVehicleID</a> );
<a name="l01249"></a>01249       }
<a name="l01250"></a>01250 
<a name="l01251"></a>01251       <span class="comment">// Handle crow leave....</span>
<a name="l01252"></a>01252       <span class="keywordflow">if</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#b082364eed3d7883662f69e1fd96be1a">ubBodyType</a> == <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7143fbbb5aa867c244f7cf6a230545002">CROW</a> )
<a name="l01253"></a>01253       {
<a name="l01254"></a>01254             <a class="code" href="Rotting_01Corpses_8cpp.html#619b1184c1b16ada1452c79458d5cdc9">HandleCrowLeave</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l01255"></a>01255       }
<a name="l01256"></a>01256 
<a name="l01257"></a>01257       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> != <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> )
<a name="l01258"></a>01258       {
<a name="l01259"></a>01259 
<a name="l01260"></a>01260             <span class="comment">// remove character from squad list.. if they are on one</span>
<a name="l01261"></a>01261             <a class="code" href="Squads_8cpp.html#2586d9acf930218a33a0d83ac760c240">RemoveCharacterFromSquads</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l01262"></a>01262 
<a name="l01263"></a>01263             <span class="comment">//remove the soldier from the interface panel</span>
<a name="l01264"></a>01264             <a class="code" href="Interface_01Panels_8cpp.html#24f267305f00303cc8dac7b204f946cf">RemovePlayerFromTeamSlotGivenMercID</a>( pSoldier-&gt;ubID );
<a name="l01265"></a>01265 
<a name="l01266"></a>01266             <span class="comment">// Check if a guy exists here</span>
<a name="l01267"></a>01267             <span class="comment">// Does another soldier exist here?</span>
<a name="l01268"></a>01268             <span class="keywordflow">if</span> ( pSoldier-&gt;bActive  )
<a name="l01269"></a>01269             {
<a name="l01270"></a>01270                   <a class="code" href="Soldier_01Control_8cpp.html#7ec903130d1d3ef490539b5ec11ba329">RemoveSoldierFromGridNo</a>( pSoldier );
<a name="l01271"></a>01271 
<a name="l01272"></a>01272       <span class="comment">// Delete shadow of crow....</span>
<a name="l01273"></a>01273                   <span class="keywordflow">if</span> ( pSoldier-&gt;pAniTile != NULL )
<a name="l01274"></a>01274                   {
<a name="l01275"></a>01275                         <a class="code" href="Tile_01Animation_8cpp.html#cb0457a000b6248ac45323b9514216d0">DeleteAniTile</a>( pSoldier-&gt;pAniTile );
<a name="l01276"></a>01276                         pSoldier-&gt;pAniTile = NULL;
<a name="l01277"></a>01277                   }
<a name="l01278"></a>01278 
<a name="l01279"></a>01279                   <span class="keywordflow">if</span> ( ! (pSoldier-&gt;uiStatusFlags &amp; SOLDIER_OFF_MAP) )
<a name="l01280"></a>01280                   {
<a name="l01281"></a>01281                         <span class="comment">// Decrement men in sector number!</span>
<a name="l01282"></a>01282                         <a class="code" href="Overhead_8cpp.html#e05935a173f0e4b2c5decb47a6f4e631">RemoveManFromTeam</a>( pSoldier-&gt;bTeam );
<a name="l01283"></a>01283                   } <span class="comment">// people specified off-map have already been removed from their team count</span>
<a name="l01284"></a>01284 
<a name="l01285"></a>01285                   pSoldier-&gt;bActive = FALSE;
<a name="l01286"></a>01286 
<a name="l01287"></a>01287                   <span class="comment">// Delete!</span>
<a name="l01288"></a>01288                   <a class="code" href="Soldier_01Control_8cpp.html#8025846bed16ea138c71d4c87530a36a">DeleteSoldier</a>( pSoldier );
<a name="l01289"></a>01289             }
<a name="l01290"></a>01290       }
<a name="l01291"></a>01291       <span class="keywordflow">else</span>
<a name="l01292"></a>01292       {
<a name="l01293"></a>01293             <span class="keywordflow">if</span>( <a class="code" href="PreBattle_01Interface_8cpp.html#2e77be6801f29c8e0e4bf9201cd52666">gfPersistantPBI</a> )
<a name="l01294"></a>01294             {
<a name="l01295"></a>01295                   <a class="code" href="Soldier_01Control_8cpp.html#8025846bed16ea138c71d4c87530a36a">DeleteSoldier</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l01296"></a>01296             }
<a name="l01297"></a>01297             MemFree( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l01298"></a>01298       }
<a name="l01299"></a>01299 
<a name="l01300"></a>01300       <span class="keywordflow">return</span>( TRUE );
<a name="l01301"></a>01301 }
<a name="l01302"></a>01302 
<a name="l01303"></a><a class="code" href="Soldier_01Create_8h.html#5761f369bb132d093e5ce84db76fd7cf">01303</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="Soldier_01Create_8cpp.html#5761f369bb132d093e5ce84db76fd7cf">TacticalRemoveSoldier</a>( <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usSoldierIndex )
<a name="l01304"></a>01304 {
<a name="l01305"></a>01305       <span class="keywordflow">return</span>( <a class="code" href="Soldier_01Create_8cpp.html#e189d2a81dbaf98fdcf29797fbfe7887">InternalTacticalRemoveSoldier</a>( usSoldierIndex, TRUE ) );
<a name="l01306"></a>01306 }
<a name="l01307"></a>01307 
<a name="l01308"></a>01308 
<a name="l01309"></a>01309 <span class="comment">// returns a soldier difficulty modifier from 0 to 100 based on player's progress, distance from the Palace, mining income, and</span>
<a name="l01310"></a>01310 <span class="comment">// playing difficulty level.  Used for generating soldier stats, equipment, and AI skill level.</span>
<a name="l01311"></a><a class="code" href="Soldier_01Create_8h.html#433ca5a6b48ed78de02acdf1408198b5">01311</a> <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> <a class="code" href="Soldier_01Create_8cpp.html#433ca5a6b48ed78de02acdf1408198b5">CalcDifficultyModifier</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSoldierClass )
<a name="l01312"></a>01312 {
<a name="l01313"></a>01313       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bDiffModifier = 0;
<a name="l01314"></a>01314       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubProgress;
<a name="l01315"></a>01315       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubProgressModifier;
<a name="l01316"></a>01316 
<a name="l01317"></a>01317       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CalcDifficultyModifier"</span>));
<a name="l01318"></a>01318 
<a name="l01319"></a>01319       <span class="keywordflow">if</span>( <a class="code" href="Sys_01Globals_8cpp.html#036664ef693d52ae3317ae8f916d3b29">gfEditMode</a> )
<a name="l01320"></a>01320       {
<a name="l01321"></a>01321             <span class="comment">// return an average rating for editor purposes</span>
<a name="l01322"></a>01322             <span class="keywordflow">return</span>( 50 );
<a name="l01323"></a>01323       }
<a name="l01324"></a>01324 
<a name="l01325"></a>01325 
<a name="l01326"></a>01326       <span class="comment">// THESE 3 DIFFICULTY FACTORS MUST ALWAYS ADD UP TO 100% EXACTLY!!!</span>
<a name="l01327"></a>01327       Assert( ( DIFF_FACTOR_PLAYER_PROGRESS     + DIFF_FACTOR_PALACE_DISTANCE + DIFF_FACTOR_GAME_DIFFICULTY ) == 100 );
<a name="l01328"></a>01328 
<a name="l01329"></a>01329 
<a name="l01330"></a>01330       <span class="comment">// adjust for game difficulty level</span>
<a name="l01331"></a>01331       <span class="keywordflow">switch</span>( <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a> )
<a name="l01332"></a>01332       {
<a name="l01333"></a>01333             <span class="keywordflow">case</span> <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87eddbd3b0d23f4dc30ef17b50a14c3f54589">DIF_LEVEL_EASY</a>:
<a name="l01334"></a>01334                   <span class="comment">// very strong militia, very weak enemies/cratures/bloodcats</span>
<a name="l01335"></a>01335                   <span class="keywordflow">if</span> ( SOLDIER_CLASS_MILITIA( ubSoldierClass ) )
<a name="l01336"></a>01336                   {
<a name="l01337"></a>01337                         <span class="comment">// +20</span>
<a name="l01338"></a>01338                         bDiffModifier += DIFF_FACTOR_GAME_DIFFICULTY;
<a name="l01339"></a>01339                   }
<a name="l01340"></a>01340                   <span class="keywordflow">break</span>;
<a name="l01341"></a>01341 
<a name="l01342"></a>01342             <span class="keywordflow">case</span> <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87edddd0259b09fef163c6aa62268574191cb">DIF_LEVEL_MEDIUM</a>:
<a name="l01343"></a>01343                   <span class="comment">// equally strong militia, enemies, creatures, bloodcats (+10)</span>
<a name="l01344"></a>01344                   bDiffModifier += ( DIFF_FACTOR_GAME_DIFFICULTY / 2 );
<a name="l01345"></a>01345                   <span class="keywordflow">break</span>;
<a name="l01346"></a>01346 
<a name="l01347"></a>01347             <span class="keywordflow">case</span> <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87edd3d0b73026f1c7122798d578613aa4575">DIF_LEVEL_HARD</a>:
<a name="l01348"></a>01348                   <span class="comment">// equally stronger militia/enemies/creatures/bloodcats (+20)</span>
<a name="l01349"></a>01349                   bDiffModifier += DIFF_FACTOR_GAME_DIFFICULTY;
<a name="l01350"></a>01350                   <span class="keywordflow">break</span>;
<a name="l01351"></a>01351             <span class="keywordflow">case</span> <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87eddc657c89fd754a6f20b3869250288a702">DIF_LEVEL_INSANE</a>:
<a name="l01352"></a>01352                   <span class="comment">// equally stronger enemies/creatures/bloodcats (+40)</span>
<a name="l01353"></a>01353                   <span class="keywordflow">if</span> ( SOLDIER_CLASS_MILITIA( ubSoldierClass ) )
<a name="l01354"></a>01354                   {     
<a name="l01355"></a>01355                         <span class="comment">// militia only +20</span>
<a name="l01356"></a>01356                         bDiffModifier += DIFF_FACTOR_GAME_DIFFICULTY;
<a name="l01357"></a>01357                   }
<a name="l01358"></a>01358                   <span class="keywordflow">else</span>
<a name="l01359"></a>01359                   {
<a name="l01360"></a>01360                         bDiffModifier += (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(DIFF_FACTOR_GAME_DIFFICULTY * 1.5);
<a name="l01361"></a>01361                         <span class="keywordflow">break</span>;
<a name="l01362"></a>01362                   }
<a name="l01363"></a>01363       }
<a name="l01364"></a>01364 
<a name="l01365"></a>01365 
<a name="l01366"></a>01366       <span class="comment">// the progress returned ranges from 0 to 100</span>
<a name="l01367"></a>01367       ubProgress = <a class="code" href="Campaign_8cpp.html#c301f0385a7e0d276efe888024738b09">HighestPlayerProgressPercentage</a>();
<a name="l01368"></a>01368 
<a name="l01369"></a>01369       <span class="comment">// bump it a bit once we've accomplished something (killed some enemies or taken an important sector)</span>
<a name="l01370"></a>01370       <span class="keywordflow">if</span> ( ubProgress &gt; 0 )
<a name="l01371"></a>01371       {
<a name="l01372"></a>01372             <span class="comment">// +5</span>
<a name="l01373"></a>01373             bDiffModifier += DIFF_MODIFIER_SOME_PROGRESS;
<a name="l01374"></a>01374       }
<a name="l01375"></a>01375 
<a name="l01376"></a>01376       <span class="comment">// drop it down a bit if we still don't have any mine income</span>
<a name="l01377"></a>01377       <span class="keywordflow">if</span> ( <a class="code" href="Strategic_01Mines_8cpp.html#a2cb338bf2018b23e288346abccb8306">PredictIncomeFromPlayerMines</a>() == 0 )
<a name="l01378"></a>01378       {
<a name="l01379"></a>01379             <span class="comment">// -5</span>
<a name="l01380"></a>01380             bDiffModifier += DIFF_MODIFIER_NO_INCOME;
<a name="l01381"></a>01381       }
<a name="l01382"></a>01382 
<a name="l01383"></a>01383 
<a name="l01384"></a>01384       <span class="comment">// adjust for progress level (0 to +50)</span>
<a name="l01385"></a>01385       ubProgressModifier = ( ubProgress * DIFF_FACTOR_PLAYER_PROGRESS ) / 100;
<a name="l01386"></a>01386       bDiffModifier += ubProgressModifier;
<a name="l01387"></a>01387 
<a name="l01388"></a>01388 
<a name="l01389"></a>01389       <span class="comment">// adjust for map location</span>
<a name="l01390"></a>01390       bDiffModifier += <a class="code" href="Soldier_01Create_8cpp.html#0be6563e41a5ee887f115ca4f84c59f0">GetLocationModifier</a>( ubSoldierClass );
<a name="l01391"></a>01391 
<a name="l01392"></a>01392 
<a name="l01393"></a>01393       <span class="comment">// should be no way to go over 100, although it's possible to go below 0 when just starting on easy</span>
<a name="l01394"></a>01394       <span class="comment">// Assert( bDiffModifier &lt;= 100 );</span>
<a name="l01395"></a>01395 
<a name="l01396"></a>01396       <span class="comment">// limit the range of the combined factors to between 0 and 100</span>
<a name="l01397"></a>01397       bDiffModifier = __max(   0, bDiffModifier );
<a name="l01398"></a>01398       bDiffModifier = __min( 100, bDiffModifier );
<a name="l01399"></a>01399 
<a name="l01400"></a>01400       <span class="comment">// DON'T change this function without carefully considering the impact on GenerateRandomEquipment(),</span>
<a name="l01401"></a>01401       <span class="comment">// CreateDetailedPlacementGivenBasicPlacementInfo(), and SoldierDifficultyLevel().</span>
<a name="l01402"></a>01402       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CalcDifficultyModifier done"</span>));
<a name="l01403"></a>01403 
<a name="l01404"></a>01404       <span class="keywordflow">return</span>(bDiffModifier);
<a name="l01405"></a>01405 }
<a name="l01406"></a>01406 
<a name="l01407"></a>01407 
<a name="l01408"></a>01408 <span class="comment">//When the editor modifies the soldier's relative attribute level,</span>
<a name="l01409"></a>01409 <span class="comment">//this function is called to update that information.</span>
<a name="l01410"></a>01410 <span class="comment">//Used to generate a detailed placement from a basic placement.  This assumes that the detailed placement</span>
<a name="l01411"></a>01411 <span class="comment">//doesn't exist, meaning there are no static attributes.  This is called when you wish to convert a basic </span>
<a name="l01412"></a>01412 <span class="comment">//placement into a detailed placement just before creating a soldier.</span>
<a name="l01413"></a><a class="code" href="Soldier_01Create_8h.html#5e825bdba54a929a345b50c232fa9f6f">01413</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#5e825bdba54a929a345b50c232fa9f6f">CreateDetailedPlacementGivenBasicPlacementInfo</a>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pp, <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> *bp )
<a name="l01414"></a>01414 {
<a name="l01415"></a>01415       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bBaseAttribute;
<a name="l01416"></a>01416       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSoldierClass;
<a name="l01417"></a>01417       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubDiffFactor;
<a name="l01418"></a>01418       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bExpLevelModifier;
<a name="l01419"></a>01419       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bStatsModifier;
<a name="l01420"></a>01420       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubStatsLevel;
<a name="l01421"></a>01421       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo"</span>));
<a name="l01422"></a>01422 
<a name="l01423"></a>01423 
<a name="l01424"></a>01424       <span class="keywordflow">if</span>( !pp || !bp )
<a name="l01425"></a>01425             <span class="keywordflow">return</span>;
<a name="l01426"></a>01426       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f018fea6cfb1b744a620745d7d16cb54">fStatic</a>                                           = FALSE;
<a name="l01427"></a>01427       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a>                                         = NO_PROFILE;
<a name="l01428"></a>01428       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8a39234d4437851a4f4df5b9acc82e71">sInsertionGridNo</a>                = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#dc6870abf500e5744df91b39c09d51e2">usStartingGridNo</a>;
<a name="l01429"></a>01429       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4754277f31a04d79a679b00a5e5dd198">fPlayerMerc</a>                                 = FALSE;
<a name="l01430"></a>01430       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ccbdb6d232dab083430791ef7ecc2224">fPlayerPlan</a>                                 = FALSE;
<a name="l01431"></a>01431       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#03cb60f25b4a19bad86f9e866247fe58">fCopyProfileItemsOver</a> = FALSE;
<a name="l01432"></a>01432       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ebcd52cb950a237b1fa9d7de49227dad">bTeam</a>                                                   = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a>;
<a name="l01433"></a>01433       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a>                        = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a>;
<a name="l01434"></a>01434       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1190d364df3bb96d0c0931d8b5126ac7">ubCivilianGroup</a>                       = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#c32e19edfc3eae79e96bbdc11819aa90">ubCivilianGroup</a>;
<a name="l01435"></a>01435       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>                          = 0;
<a name="l01436"></a>01436       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c6e38a1f49325bbb2282acee728cc261">sSectorX</a>                                          = <a class="code" href="strategicmap_8cpp.html#49d9aed144a633fda4ba1990f002d703">gWorldSectorX</a>;
<a name="l01437"></a>01437       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49d1d58f8839fa7312382ccd9bc01814">sSectorY</a>                                          = <a class="code" href="strategicmap_8cpp.html#ea322310ced0e35ee18a2ee7b32aac5b">gWorldSectorY</a>;
<a name="l01438"></a>01438       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#cf0b149e910b77164041f1a8484d58af">bSectorZ</a>                                          = <a class="code" href="strategicmap_8cpp.html#da715721a8ceedd42acf6ddb33e63ce0">gbWorldSectorZ</a>;
<a name="l01439"></a>01439       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#2406e9999b94e17cfb90786e671d6e90">fHasKeys</a>                                          = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#9b2004e798b55455baf128a0daf213f0">fHasKeys</a>;
<a name="l01440"></a>01440 
<a name="l01441"></a>01441       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo: choose body type"</span>));
<a name="l01442"></a>01442       <span class="comment">//Choose a body type randomly if none specified.</span>
<a name="l01443"></a>01443       <span class="keywordflow">if</span>( bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a> &lt; 0 )
<a name="l01444"></a>01444       {
<a name="l01445"></a>01445             <span class="keywordflow">switch</span> ( bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a> )
<a name="l01446"></a>01446             {
<a name="l01447"></a>01447                   <span class="keywordflow">case</span> OUR_TEAM:
<a name="l01448"></a>01448                   <span class="keywordflow">case</span> ENEMY_TEAM:
<a name="l01449"></a>01449                   <span class="keywordflow">case</span> MILITIA_TEAM:
<a name="l01450"></a>01450                         <span class="keywordflow">switch</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 4 ) )
<a name="l01451"></a>01451                         {
<a name="l01452"></a>01452                               <span class="keywordflow">case</span> 0:     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a788083a907978249a0160b5b1dd9ee4a4">REGMALE</a>;            <span class="keywordflow">break</span>;
<a name="l01453"></a>01453                               <span class="keywordflow">case</span> 1:     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7e6eac15857ce481c9ed507f7459a3507">BIGMALE</a>;            <span class="keywordflow">break</span>;
<a name="l01454"></a>01454                               <span class="keywordflow">case</span> 2:     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a73a7e8d65cd007e97390c6a3ae18062ce">STOCKYMALE</a>;   <span class="keywordflow">break</span>;
<a name="l01455"></a>01455                               <span class="keywordflow">case</span> 3:     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7040d5c40e76c4103ced101507f96e2f6">REGFEMALE</a>;    <span class="keywordflow">break</span>;
<a name="l01456"></a>01456                         }
<a name="l01457"></a>01457                         <span class="keywordflow">break</span>;
<a name="l01458"></a>01458                   <span class="keywordflow">case</span> CIV_TEAM:
<a name="l01459"></a>01459                         <span class="keywordflow">if</span>( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a> == <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de618d13f000b4b5195727feae9b48454950">SOLDIER_CLASS_MINER</a> )
<a name="l01460"></a>01460                         {
<a name="l01461"></a>01461                               <span class="keywordflow">switch</span>( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 3 ) )
<a name="l01462"></a>01462                               { <span class="comment">//only strong and fit men can be miners.</span>
<a name="l01463"></a>01463                                     <span class="keywordflow">case</span> 0:     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a788083a907978249a0160b5b1dd9ee4a4">REGMALE</a>;      <span class="keywordflow">break</span>;
<a name="l01464"></a>01464                                     <span class="keywordflow">case</span> 1:     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7e6eac15857ce481c9ed507f7459a3507">BIGMALE</a>;      <span class="keywordflow">break</span>;
<a name="l01465"></a>01465                                     <span class="keywordflow">case</span> 2: pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7f084d9af5cfa408362f35095268783f6">MANCIV</a>;           <span class="keywordflow">break</span>;
<a name="l01466"></a>01466                               }
<a name="l01467"></a>01467                         }
<a name="l01468"></a>01468                         <span class="keywordflow">else</span>
<a name="l01469"></a>01469                         {
<a name="l01470"></a>01470                               <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> iRandom;
<a name="l01471"></a>01471                               iRandom = <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 100 );
<a name="l01472"></a>01472                               <span class="keywordflow">if</span>( iRandom &lt; 8 )
<a name="l01473"></a>01473                               { <span class="comment">//8% chance FATCIV</span>
<a name="l01474"></a>01474                                     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a72254b6f06629056dd86be50df5347676">FATCIV</a>;
<a name="l01475"></a>01475                               }
<a name="l01476"></a>01476                               <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iRandom &lt; 38 )
<a name="l01477"></a>01477                               { <span class="comment">//30% chance MANCIV</span>
<a name="l01478"></a>01478                                     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7f084d9af5cfa408362f35095268783f6">MANCIV</a>;
<a name="l01479"></a>01479                               }
<a name="l01480"></a>01480                               <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iRandom &lt; 57 )
<a name="l01481"></a>01481                               { <span class="comment">//19% chance MINICIV</span>
<a name="l01482"></a>01482                                     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7af422ea2d015cab1eb7d0cf653186a05">MINICIV</a>;
<a name="l01483"></a>01483                               }
<a name="l01484"></a>01484                               <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iRandom &lt; 76 )
<a name="l01485"></a>01485                               { <span class="comment">//19% chance DRESSCIV</span>
<a name="l01486"></a>01486                                     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a734700b4c6e766408a86e53420c62163c">DRESSCIV</a>;
<a name="l01487"></a>01487                               }
<a name="l01488"></a>01488                               <span class="keywordflow">else</span> <span class="keywordflow">if</span>( iRandom &lt; 88 )
<a name="l01489"></a>01489                               { <span class="comment">//12% chance HATKIDCIV</span>
<a name="l01490"></a>01490                                     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7d280093211f32a309c7e52bc1e4570c8">HATKIDCIV</a>;
<a name="l01491"></a>01491                               }
<a name="l01492"></a>01492                               <span class="keywordflow">else</span> 
<a name="l01493"></a>01493                               { <span class="comment">//12% chance KIDCIV</span>
<a name="l01494"></a>01494                                     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7572e26862c1a3864663d8fe55b2f7f4d">KIDCIV</a>;
<a name="l01495"></a>01495                               }
<a name="l01496"></a>01496                         }
<a name="l01497"></a>01497                         <span class="keywordflow">break</span>;
<a name="l01498"></a>01498             }
<a name="l01499"></a>01499       }
<a name="l01500"></a>01500       <span class="keywordflow">else</span>
<a name="l01501"></a>01501       {
<a name="l01502"></a>01502             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a>;
<a name="l01503"></a>01503       }
<a name="l01504"></a>01504 
<a name="l01505"></a>01505       <span class="comment">//Pass over mandatory information specified from the basic placement</span>
<a name="l01506"></a>01506       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#88e4f58ca15daeb28ee87c47c5eb2306">bOrders</a>;
<a name="l01507"></a>01507       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#d9cd617657bb1765b57e7647ff2b0a92">bAttitude</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#def23ae50e065204f4a927d38deb16e2">bAttitude</a>;
<a name="l01508"></a>01508       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e7441ebda87cc863566264c163ccc211">bDirection</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#621418b9dd4585aa282c8c436ae870da">bDirection</a>;
<a name="l01509"></a>01509 
<a name="l01510"></a>01510 
<a name="l01511"></a>01511       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo: determine soldier's class"</span>));
<a name="l01512"></a>01512       <span class="comment">// determine this soldier's soldier class</span>
<a name="l01513"></a>01513       <span class="keywordflow">if</span>( bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a> == CREATURE_TEAM )
<a name="l01514"></a>01514       {
<a name="l01515"></a>01515             ubSoldierClass = <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a>;
<a name="l01516"></a>01516       }
<a name="l01517"></a>01517       <span class="keywordflow">else</span>
<a name="l01518"></a>01518       {
<a name="l01519"></a>01519             ubSoldierClass = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a>;
<a name="l01520"></a>01520       }
<a name="l01521"></a>01521 
<a name="l01522"></a>01522       ubDiffFactor = <a class="code" href="Soldier_01Create_8cpp.html#433ca5a6b48ed78de02acdf1408198b5">CalcDifficultyModifier</a>( ubSoldierClass );
<a name="l01523"></a>01523 
<a name="l01524"></a>01524 
<a name="l01525"></a>01525       <span class="comment">// experience level is modified by game difficulty, player's progress, &amp; proximity to Queen's Palace, etc.</span>
<a name="l01526"></a>01526       <span class="comment">// This formula gives the following results:</span>
<a name="l01527"></a>01527       <span class="comment">//    DIFFICULTY FACTOR             EXP. LEVEL  MODIFIER          LEVEL OF AVG REGULAR TROOP</span>
<a name="l01528"></a>01528       <span class="comment">//                   0 to 19                                                  -2                                                                            2</span>
<a name="l01529"></a>01529       <span class="comment">//                  20 to 39                                                  -1                                                                            3</span>
<a name="l01530"></a>01530       <span class="comment">//                  41 to 59                                                  -0                                                                            4</span>
<a name="l01531"></a>01531       <span class="comment">//                      60 to 79                                                    +1                                                                            5</span>
<a name="l01532"></a>01532       <span class="comment">//                      80 to 99                                                    +2                                                                            6</span>
<a name="l01533"></a>01533       <span class="comment">//                        100                                                             +3                                                                            7           (can happen in P3 Meduna itself on HARD only!)</span>
<a name="l01534"></a>01534       bExpLevelModifier = ( ubDiffFactor / 20 ) - 2;
<a name="l01535"></a>01535 
<a name="l01536"></a>01536       <span class="comment">// if in the upper half of this difficulty rating (10-19, 30-39, 50-59, 70-79, and 90-99)</span>
<a name="l01537"></a>01537       <span class="keywordflow">if</span> ( ( ubDiffFactor % 20 ) &gt;= 10 )
<a name="l01538"></a>01538       {
<a name="l01539"></a>01539             <span class="comment">// increase stats only by one level's worth</span>
<a name="l01540"></a>01540             bStatsModifier = +1;
<a name="l01541"></a>01541       }
<a name="l01542"></a>01542       <span class="keywordflow">else</span>
<a name="l01543"></a>01543       {
<a name="l01544"></a>01544             <span class="comment">// normal stats for this level</span>
<a name="l01545"></a>01545             bStatsModifier = 0;
<a name="l01546"></a>01546       }
<a name="l01547"></a>01547 
<a name="l01548"></a>01548       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo: adjust stats and level"</span>));
<a name="l01549"></a>01549       <span class="comment">// Adjust level and statistics for Linda's prespecified relative attribute level</span>
<a name="l01550"></a>01550       <span class="keywordflow">switch</span> ( bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a> )
<a name="l01551"></a>01551       {
<a name="l01552"></a>01552             <span class="comment">// NOTE: bStatsModifier already includes the bExpLevelModifier since it's based on the level itself!</span>
<a name="l01553"></a>01553             <span class="keywordflow">case</span> 0:     bExpLevelModifier += -1; bStatsModifier += -1; <span class="keywordflow">break</span>;
<a name="l01554"></a>01554             <span class="keywordflow">case</span> 1:     bExpLevelModifier += -1; bStatsModifier +=  0; <span class="keywordflow">break</span>;
<a name="l01555"></a>01555             <span class="keywordflow">case</span> 2:     bExpLevelModifier +=  0; bStatsModifier +=  0; <span class="keywordflow">break</span>;
<a name="l01556"></a>01556             <span class="keywordflow">case</span> 3:     bExpLevelModifier += +1; bStatsModifier +=  0; <span class="keywordflow">break</span>;
<a name="l01557"></a>01557             <span class="keywordflow">case</span> 4:     bExpLevelModifier += +1; bStatsModifier += +1; <span class="keywordflow">break</span>;
<a name="l01558"></a>01558 
<a name="l01559"></a>01559             <span class="keywordflow">default</span>:
<a name="l01560"></a>01560                   AssertMsg( FALSE, <a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>( <span class="stringliteral">"Invalid bRelativeAttributeLevel = %d"</span>, bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a> ) );
<a name="l01561"></a>01561                   <span class="keywordflow">break</span>;
<a name="l01562"></a>01562       }
<a name="l01563"></a>01563 
<a name="l01564"></a>01564 
<a name="l01565"></a>01565       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo: set level based on soldier class"</span>));
<a name="l01566"></a>01566       <span class="comment">//Set the experience level based on the soldier class and exp level modifier or relative attribute level</span>
<a name="l01567"></a>01567       <span class="keywordflow">switch</span>( ubSoldierClass )
<a name="l01568"></a>01568       {
<a name="l01569"></a>01569             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61b149e8fdf658384dd176ef9e706f10dd">SOLDIER_CLASS_ADMINISTRATOR</a>:
<a name="l01570"></a>01570                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) 2 + bExpLevelModifier;
<a name="l01571"></a>01571                   <span class="keywordflow">break</span>;
<a name="l01572"></a>01572             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61e155251ca19fc71034c52119253642b8">SOLDIER_CLASS_ARMY</a>:
<a name="l01573"></a>01573                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) 4 + bExpLevelModifier;
<a name="l01574"></a>01574                   <span class="keywordflow">break</span>;
<a name="l01575"></a>01575             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a>:
<a name="l01576"></a>01576                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) 6 + bExpLevelModifier;
<a name="l01577"></a>01577                   <span class="keywordflow">break</span>;
<a name="l01578"></a>01578             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de615d87e4b53a22c14df589d9df96ddb0dc">SOLDIER_CLASS_GREEN_MILITIA</a>:
<a name="l01579"></a>01579                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) 2 + bExpLevelModifier;
<a name="l01580"></a>01580                   <span class="keywordflow">break</span>;
<a name="l01581"></a>01581             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de610534cbb3d918376e9f10be3bf049666e">SOLDIER_CLASS_REG_MILITIA</a>:
<a name="l01582"></a>01582                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) 4 + bExpLevelModifier;
<a name="l01583"></a>01583                   <span class="keywordflow">break</span>;
<a name="l01584"></a>01584             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61f2c9f1bbece4a7bd58b4a83a54dac6b6">SOLDIER_CLASS_ELITE_MILITIA</a>:
<a name="l01585"></a>01585                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) 6 + bExpLevelModifier;
<a name="l01586"></a>01586                   <span class="keywordflow">break</span>;
<a name="l01587"></a>01587             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de618d13f000b4b5195727feae9b48454950">SOLDIER_CLASS_MINER</a>:
<a name="l01588"></a>01588                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a>;                             <span class="comment">//avg 2 (1-4)</span>
<a name="l01589"></a>01589                   <span class="keywordflow">break</span>;
<a name="l01590"></a>01590 
<a name="l01591"></a>01591             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a>:
<a name="l01592"></a>01592                   <span class="keywordflow">switch</span>( bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a> )
<a name="l01593"></a>01593                   {
<a name="l01594"></a>01594                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7c6b7363ef12dbe5ad2377613a3d33db9">LARVAE_MONSTER</a>:
<a name="l01595"></a>01595                               pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = 1 + bExpLevelModifier;
<a name="l01596"></a>01596                               <span class="keywordflow">break</span>;
<a name="l01597"></a>01597                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7e687bcc336b8be3ac4aac1346046d095">INFANT_MONSTER</a>:
<a name="l01598"></a>01598                               pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = 2 + bExpLevelModifier;
<a name="l01599"></a>01599                               <span class="keywordflow">break</span>;
<a name="l01600"></a>01600                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f60be3c60e156d8cec34802d7f3607b">YAF_MONSTER</a>:
<a name="l01601"></a>01601                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a725460f03079c143c4456f779763fa23b">YAM_MONSTER</a>:
<a name="l01602"></a>01602                               pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(3 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 2 ) + bExpLevelModifier ); <span class="comment">//3-4</span>
<a name="l01603"></a>01603                               <span class="keywordflow">break</span>;
<a name="l01604"></a>01604                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a78e8f2de8ab141e991ee2b34ebb1dfda1">ADULTFEMALEMONSTER</a>:
<a name="l01605"></a>01605                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a79dec21a470d88f8b8a8704cb9b5ac827">AM_MONSTER</a>:
<a name="l01606"></a>01606                               pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(5 + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 2 ) + bExpLevelModifier ); <span class="comment">//5-6</span>
<a name="l01607"></a>01607                               <span class="keywordflow">break</span>;
<a name="l01608"></a>01608                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a75f327a7c32f4f979f42e8d6f6adbf587">QUEENMONSTER</a>:
<a name="l01609"></a>01609                               pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = 7 + bExpLevelModifier;
<a name="l01610"></a>01610                               <span class="keywordflow">break</span>;
<a name="l01611"></a>01611 
<a name="l01612"></a>01612                         <span class="keywordflow">case</span> <a class="code" href="Animation_01Data_8h.html#d295a916825180b548473dec560093a7fa470b7d78ba43f21bfd04c49f02a70b">BLOODCAT</a>:
<a name="l01613"></a>01613                               pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = 5 + bExpLevelModifier;
<a name="l01614"></a>01614                               <span class="keywordflow">if</span>( SECTOR( <a class="code" href="strategicmap_8cpp.html#49d9aed144a633fda4ba1990f002d703">gWorldSectorX</a>, <a class="code" href="strategicmap_8cpp.html#ea322310ced0e35ee18a2ee7b32aac5b">gWorldSectorY</a> ) == <a class="code" href="Campaign_01Types_8h.html#38436632403fcee6aacb5b18c6602643c0d966776074215ffc8795d29fe04b68">SEC_I16</a> )
<a name="l01615"></a>01615                               {
<a name="l01616"></a>01616                                     pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> += <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a>;
<a name="l01617"></a>01617                               }
<a name="l01618"></a>01618                               <span class="keywordflow">break</span>;
<a name="l01619"></a>01619                   }
<a name="l01620"></a>01620                   <span class="keywordflow">break</span>;
<a name="l01621"></a>01621 
<a name="l01622"></a>01622             <span class="keywordflow">default</span>:
<a name="l01623"></a>01623                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a>;                             <span class="comment">//avg 2 (1-4)</span>
<a name="l01624"></a>01624                   ubSoldierClass = <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61f30fb6bcf992831fe7ec28f6fbee1871">SOLDIER_CLASS_NONE</a>;
<a name="l01625"></a>01625                   <span class="keywordflow">break</span>;
<a name="l01626"></a>01626       }
<a name="l01627"></a>01627 
<a name="l01628"></a>01628 
<a name="l01629"></a>01629       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo: set exp. level"</span>));
<a name="l01630"></a>01630       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = max( <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a>, pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> ); <span class="comment">//minimum exp. level of 1 -- madd -&gt; = dif level</span>
<a name="l01631"></a>01631 
<a name="l01632"></a>01632       <span class="keywordflow">if</span> ( <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a> == <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87eddc657c89fd754a6f20b3869250288a702">DIF_LEVEL_INSANE</a> )
<a name="l01633"></a>01633             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = max( 6, pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> ); <span class="comment">//minimum exp. level of 6 in insane - madd</span>
<a name="l01634"></a>01634 
<a name="l01635"></a>01635       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> = min( 10, pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> ); <span class="comment">//maximum exp. level of 9 // 10 - Madd</span>
<a name="l01636"></a>01636 
<a name="l01637"></a>01637       ubStatsLevel = pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> + bStatsModifier;
<a name="l01638"></a>01638 
<a name="l01639"></a>01639       ubStatsLevel = max( <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a>, ubStatsLevel );     <span class="comment">//minimum stats level of 0 -- madd -&gt; = dif level</span>
<a name="l01640"></a>01640 
<a name="l01641"></a>01641       <span class="keywordflow">if</span> ( <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a> == <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87eddc657c89fd754a6f20b3869250288a702">DIF_LEVEL_INSANE</a> )
<a name="l01642"></a>01642             ubStatsLevel = max( 6, ubStatsLevel );    <span class="comment">//minimum stats level of 6 in insane</span>
<a name="l01643"></a>01643 
<a name="l01644"></a>01644       ubStatsLevel = min( 10, ubStatsLevel );   <span class="comment">//maximum stats level of 9 // 10 - Madd - this will probably apply to all dif levels though</span>
<a name="l01645"></a>01645 
<a name="l01646"></a>01646       <span class="comment">//Set the minimum base attribute</span>
<a name="l01647"></a>01647       bBaseAttribute = 49 + ( 4 * ubStatsLevel );
<a name="l01648"></a>01648 
<a name="l01649"></a>01649       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo: roll stats and skills"</span>));
<a name="l01650"></a>01650       <span class="comment">//Roll soldier's statistics and skills</span>
<a name="l01651"></a>01651       <span class="comment">//Stat range is currently 49-99, bell-curved around a range of 16 values dependent on the stats level</span>
<a name="l01652"></a>01652       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>                  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01653"></a>01653       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>                     = pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>;
<a name="l01654"></a>01654       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>                  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01655"></a>01655       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>          = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01656"></a>01656 
<a name="l01657"></a>01657       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01658"></a>01658       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>                  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01659"></a>01659       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>         = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01660"></a>01660       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>          = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01661"></a>01661       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>         = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01662"></a>01662       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>                 = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01663"></a>01663       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>                   = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01664"></a>01664       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>                   = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01665"></a>01665 
<a name="l01666"></a>01666       <span class="comment">// CJC: now calculate the REAL experience level if in the really upper end</span>
<a name="l01667"></a>01667       <span class="comment">// Madd</span>
<a name="l01668"></a>01668       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo: reduce stats and level"</span>));
<a name="l01669"></a>01669       <span class="keywordflow">if</span> ( <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a> &lt;= <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87edd3d0b73026f1c7122798d578613aa4575">DIF_LEVEL_HARD</a> )
<a name="l01670"></a>01670             <a class="code" href="Soldier_01Create_8cpp.html#fb6085cce840d328643552797aa3ee0f">ReduceHighExpLevels</a>( &amp;( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> ) );
<a name="l01671"></a>01671 
<a name="l01672"></a>01672       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1e4eaba07de6a26b8c4c7d0ce1c231e2">fVisible</a>                  = 0;
<a name="l01673"></a>01673       
<a name="l01674"></a>01674       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f9ba8f37aaf31e16d44ecb6fee567479">fOnRoof</a>                   = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#3dc23d15d608737c3b4db52b0cf65815">fOnRoof</a>;
<a name="l01675"></a>01675 
<a name="l01676"></a>01676       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a> = ubSoldierClass;
<a name="l01677"></a>01677 
<a name="l01678"></a>01678       <span class="comment">//Transfer over the patrol points.</span>
<a name="l01679"></a>01679       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#63f0be3b67f871f3d49cd09e88c5450f">bPatrolCnt</a>          = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#8fb0d3b6b3bfd0f4abd7598cd8c29e4f">bPatrolCnt</a>;
<a name="l01680"></a>01680       memcpy( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#72a68c367b8bc4fe932d78c53f8a522d">sPatrolGrid</a>, bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#dfb83f159ef6dd065a798a98f889d0a9">sPatrolGrid</a>, <span class="keyword">sizeof</span>( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> ) * MAXPATROLGRIDS );
<a name="l01681"></a>01681 
<a name="l01682"></a>01682       <span class="comment">//If it is a detailed placement, don't do this yet, as detailed placements may have their</span>
<a name="l01683"></a>01683       <span class="comment">//own equipment.</span>
<a name="l01684"></a>01684       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo: generate random equipment"</span>));
<a name="l01685"></a>01685       <span class="keywordflow">if</span>( !bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#3ef9d6dc68fb22fec84a9fce13f806c1">fDetailedPlacement</a> &amp;&amp; ubSoldierClass != <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61f30fb6bcf992831fe7ec28f6fbee1871">SOLDIER_CLASS_NONE</a> &amp;&amp; ubSoldierClass != <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a> &amp;&amp; ubSoldierClass != <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de618d13f000b4b5195727feae9b48454950">SOLDIER_CLASS_MINER</a> )
<a name="l01686"></a>01686             <a class="code" href="Inventory_01Choosing_8cpp.html#a19099e9b769c0b09938b469603a9e67">GenerateRandomEquipment</a>( pp, ubSoldierClass, bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#49c2fe6937f004d00ba00c008fa33a30">bRelativeEquipmentLevel</a>);
<a name="l01687"></a>01687 
<a name="l01688"></a>01688       <a class="code" href="Soldier_01Create_8cpp.html#0923fccb5699d7aef9dd49e92c8f75e6">DecideToAssignSniperOrders</a>(pp);
<a name="l01689"></a>01689 
<a name="l01690"></a>01690       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenBasicPlacementInfo done"</span>));
<a name="l01691"></a>01691 }
<a name="l01692"></a>01692 
<a name="l01693"></a>01693 
<a name="l01694"></a>01694 <span class="comment">//Used exclusively by the editor when the user wishes to change a basic placement into a detailed placement.</span>
<a name="l01695"></a>01695 <span class="comment">//Because the intention is to make some of the attributes static, all of the information that can be generated</span>
<a name="l01696"></a>01696 <span class="comment">//are defaulted to -1.  When an attribute is made to be static, that value in replaced by the new static value.</span>
<a name="l01697"></a>01697 <span class="comment">//This information is NOT compatible with TacticalCreateSoldier.  Before doing so, you must first convert the</span>
<a name="l01698"></a>01698 <span class="comment">//static detailed placement to a regular detailed placement.  </span>
<a name="l01699"></a><a class="code" href="Soldier_01Create_8h.html#142f4aa476d17fdc51cf6f629366b055">01699</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#142f4aa476d17fdc51cf6f629366b055">CreateStaticDetailedPlacementGivenBasicPlacementInfo</a>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *spp, <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> *bp )
<a name="l01700"></a>01700 {
<a name="l01701"></a>01701       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateStaticDetailedPlacementGivenBasicPlacementInfo"</span>));
<a name="l01702"></a>01702 
<a name="l01703"></a>01703       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> i;
<a name="l01704"></a>01704       <span class="keywordflow">if</span>( !spp || !bp )
<a name="l01705"></a>01705             <span class="keywordflow">return</span>;
<a name="l01706"></a>01706       memset( spp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> ) );
<a name="l01707"></a>01707       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f018fea6cfb1b744a620745d7d16cb54">fStatic</a>                                                = TRUE;
<a name="l01708"></a>01708       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a>                                        = NO_PROFILE;
<a name="l01709"></a>01709       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8a39234d4437851a4f4df5b9acc82e71">sInsertionGridNo</a>                     = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#dc6870abf500e5744df91b39c09d51e2">usStartingGridNo</a>;
<a name="l01710"></a>01710       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4754277f31a04d79a679b00a5e5dd198">fPlayerMerc</a>                                = FALSE;
<a name="l01711"></a>01711       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ccbdb6d232dab083430791ef7ecc2224">fPlayerPlan</a>                                = FALSE;
<a name="l01712"></a>01712       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#03cb60f25b4a19bad86f9e866247fe58">fCopyProfileItemsOver</a>    = FALSE;
<a name="l01713"></a>01713       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ebcd52cb950a237b1fa9d7de49227dad">bTeam</a>                                                  = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a>;
<a name="l01714"></a>01714       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a>                             = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a>;
<a name="l01715"></a>01715       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1190d364df3bb96d0c0931d8b5126ac7">ubCivilianGroup</a>                      = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#c32e19edfc3eae79e96bbdc11819aa90">ubCivilianGroup</a>;
<a name="l01716"></a>01716       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>                               = 0;
<a name="l01717"></a>01717       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c6e38a1f49325bbb2282acee728cc261">sSectorX</a>                                         = <a class="code" href="strategicmap_8cpp.html#49d9aed144a633fda4ba1990f002d703">gWorldSectorX</a>;
<a name="l01718"></a>01718       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49d1d58f8839fa7312382ccd9bc01814">sSectorY</a>                                         = <a class="code" href="strategicmap_8cpp.html#ea322310ced0e35ee18a2ee7b32aac5b">gWorldSectorY</a>;
<a name="l01719"></a>01719       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#cf0b149e910b77164041f1a8484d58af">bSectorZ</a>                                         = <a class="code" href="strategicmap_8cpp.html#da715721a8ceedd42acf6ddb33e63ce0">gbWorldSectorZ</a>;
<a name="l01720"></a>01720       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#2406e9999b94e17cfb90786e671d6e90">fHasKeys</a>                                         = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#9b2004e798b55455baf128a0daf213f0">fHasKeys</a>;
<a name="l01721"></a>01721 
<a name="l01722"></a>01722       <span class="comment">//Pass over mandatory information specified from the basic placement</span>
<a name="l01723"></a>01723       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#88e4f58ca15daeb28ee87c47c5eb2306">bOrders</a>;
<a name="l01724"></a>01724       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#d9cd617657bb1765b57e7647ff2b0a92">bAttitude</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#def23ae50e065204f4a927d38deb16e2">bAttitude</a>;
<a name="l01725"></a>01725       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e7441ebda87cc863566264c163ccc211">bDirection</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#621418b9dd4585aa282c8c436ae870da">bDirection</a>;
<a name="l01726"></a>01726 
<a name="l01727"></a>01727       <span class="comment">//Only creatures have mandatory body types specified.</span>
<a name="l01728"></a>01728       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ebcd52cb950a237b1fa9d7de49227dad">bTeam</a> == CREATURE_TEAM )
<a name="l01729"></a>01729             spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a>;
<a name="l01730"></a>01730       <span class="keywordflow">else</span>
<a name="l01731"></a>01731             spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a> = -1;
<a name="l01732"></a>01732 
<a name="l01733"></a>01733       <span class="comment">//Set up all possible static values.  </span>
<a name="l01734"></a>01734       <span class="comment">//By setting them all to -1, that signifies that the attribute isn't static.</span>
<a name="l01735"></a>01735       <span class="comment">//The static placement needs to be later *regenerated* in order to create a valid soldier.</span>
<a name="l01736"></a>01736       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a>                = -1;
<a name="l01737"></a>01737       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>                       = -1;
<a name="l01738"></a>01738       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>                    = -1;
<a name="l01739"></a>01739       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>                       = -1;
<a name="l01740"></a>01740       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>               = -1;
<a name="l01741"></a>01741       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a>      = -1;
<a name="l01742"></a>01742       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>                       = -1;
<a name="l01743"></a>01743       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>        = -1;
<a name="l01744"></a>01744       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>               = -1;
<a name="l01745"></a>01745       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>        = -1;
<a name="l01746"></a>01746       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>                = -1;
<a name="l01747"></a>01747       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>                        = -1;
<a name="l01748"></a>01748       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>                        = -1;
<a name="l01749"></a>01749 
<a name="l01750"></a>01750       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1e4eaba07de6a26b8c4c7d0ce1c231e2">fVisible</a>                       =  0;
<a name="l01751"></a>01751 
<a name="l01752"></a>01752       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f9ba8f37aaf31e16d44ecb6fee567479">fOnRoof</a>                        = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#3dc23d15d608737c3b4db52b0cf65815">fOnRoof</a>;
<a name="l01753"></a>01753 
<a name="l01754"></a>01754       <span class="comment">//Transfer over the patrol points.</span>
<a name="l01755"></a>01755       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#63f0be3b67f871f3d49cd09e88c5450f">bPatrolCnt</a>               = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#8fb0d3b6b3bfd0f4abd7598cd8c29e4f">bPatrolCnt</a>;
<a name="l01756"></a>01756       memcpy( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#72a68c367b8bc4fe932d78c53f8a522d">sPatrolGrid</a>, bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#dfb83f159ef6dd065a798a98f889d0a9">sPatrolGrid</a>, <span class="keyword">sizeof</span>( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> ) * MAXPATROLGRIDS );
<a name="l01757"></a>01757 
<a name="l01758"></a>01758       <span class="comment">//Starts with nothing</span>
<a name="l01759"></a>01759       <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a>; i++ )
<a name="l01760"></a>01760       {
<a name="l01761"></a>01761             memset( &amp;(spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[ i ]), 0, <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l01762"></a>01762             spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[ i ].<a class="code" href="structOBJECTTYPE.html#4fbe05335f161f08f354566b8e5a0a19">usItem</a> = NOTHING;
<a name="l01763"></a>01763             spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[ i ].<a class="code" href="structOBJECTTYPE.html#0f1e67bac22f1b89c4040ef8a5ea48c2">fFlags</a> |= OBJECT_UNDROPPABLE;
<a name="l01764"></a>01764       }
<a name="l01765"></a>01765 
<a name="l01766"></a>01766       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateStaticDetailedPlacementGivenBasicPlacementInfo done"</span>));
<a name="l01767"></a>01767 }
<a name="l01768"></a>01768 
<a name="l01769"></a>01769 <span class="preprocessor">#include "<a class="code" href="Font_01Control_8h.html">Font Control.h</a>"</span>
<a name="l01770"></a>01770 <span class="comment">//When you are ready to generate a soldier with a static detailed placement slot, this function will generate</span>
<a name="l01771"></a>01771 <span class="comment">//the proper detailed placement slot given the static detailed placement and it's accompanying basic placement.</span>
<a name="l01772"></a>01772 <span class="comment">//For the purposes of merc editing, the static detailed placement is preserved.</span>
<a name="l01773"></a><a class="code" href="Soldier_01Create_8h.html#442cac9e928a29c009c400ecaec6f94a">01773</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#442cac9e928a29c009c400ecaec6f94a">CreateDetailedPlacementGivenStaticDetailedPlacementAndBasicPlacementInfo</a>( 
<a name="l01774"></a>01774                <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pp, <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *spp, <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> *bp )
<a name="l01775"></a>01775 {
<a name="l01776"></a>01776       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> i;
<a name="l01777"></a>01777 
<a name="l01778"></a>01778       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenStaticDetailedPlacementAndBasicPlacementInfo"</span>));
<a name="l01779"></a>01779 
<a name="l01780"></a>01780       memset( pp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> ) );
<a name="l01781"></a>01781       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f9ba8f37aaf31e16d44ecb6fee567479">fOnRoof</a> = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f9ba8f37aaf31e16d44ecb6fee567479">fOnRoof</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#3dc23d15d608737c3b4db52b0cf65815">fOnRoof</a>;
<a name="l01782"></a>01782       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f018fea6cfb1b744a620745d7d16cb54">fStatic</a> = FALSE;
<a name="l01783"></a>01783       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a>;
<a name="l01784"></a>01784       <span class="comment">//Generate the new placement </span>
<a name="l01785"></a>01785       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a>;
<a name="l01786"></a>01786       <span class="keywordflow">if</span>( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> != NO_PROFILE )
<a name="l01787"></a>01787       {
<a name="l01788"></a>01788             <span class="comment">// Copy over team</span>
<a name="l01789"></a>01789             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#ebcd52cb950a237b1fa9d7de49227dad">bTeam</a> = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a>;
<a name="l01790"></a>01790 
<a name="l01791"></a>01791             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e7441ebda87cc863566264c163ccc211">bDirection</a>                                  = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#621418b9dd4585aa282c8c436ae870da">bDirection</a>;
<a name="l01792"></a>01792             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8a39234d4437851a4f4df5b9acc82e71">sInsertionGridNo</a>                = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#dc6870abf500e5744df91b39c09d51e2">usStartingGridNo</a>;
<a name="l01793"></a>01793 
<a name="l01794"></a>01794             <span class="comment">//ATE: Copy over sector coordinates from profile to create struct</span>
<a name="l01795"></a>01795             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c6e38a1f49325bbb2282acee728cc261">sSectorX</a>                                          = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#b0d6f66ec41a0d9c87fbc03dd9fed965">sSectorX</a>;
<a name="l01796"></a>01796             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49d1d58f8839fa7312382ccd9bc01814">sSectorY</a>                                          = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#e3caff1f000b3ed3c382e8a1f0d5fdbc">sSectorY</a>;
<a name="l01797"></a>01797             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#cf0b149e910b77164041f1a8484d58af">bSectorZ</a>                                          = <a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> ].<a class="code" href="structMERCPROFILESTRUCT.html#9dfd2271b790d94f55f142e71ab18065">bSectorZ</a>;
<a name="l01798"></a>01798 
<a name="l01799"></a>01799             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>                          = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>;
<a name="l01800"></a>01800 
<a name="l01801"></a>01801             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e5c0cb1b5fbe507c547ecde541013221">bOrders</a>                                           = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#88e4f58ca15daeb28ee87c47c5eb2306">bOrders</a>;
<a name="l01802"></a>01802             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#d9cd617657bb1765b57e7647ff2b0a92">bAttitude</a>                                         = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#def23ae50e065204f4a927d38deb16e2">bAttitude</a>;
<a name="l01803"></a>01803             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e7441ebda87cc863566264c163ccc211">bDirection</a>                                  = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#621418b9dd4585aa282c8c436ae870da">bDirection</a>;
<a name="l01804"></a>01804             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#63f0be3b67f871f3d49cd09e88c5450f">bPatrolCnt</a>                                  = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#8fb0d3b6b3bfd0f4abd7598cd8c29e4f">bPatrolCnt</a>;
<a name="l01805"></a>01805             memcpy( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#72a68c367b8bc4fe932d78c53f8a522d">sPatrolGrid</a>, bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#dfb83f159ef6dd065a798a98f889d0a9">sPatrolGrid</a>, <span class="keyword">sizeof</span>( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> ) * MAXPATROLGRIDS );
<a name="l01806"></a>01806             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#2406e9999b94e17cfb90786e671d6e90">fHasKeys</a>                                          = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#9b2004e798b55455baf128a0daf213f0">fHasKeys</a>;
<a name="l01807"></a>01807             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1190d364df3bb96d0c0931d8b5126ac7">ubCivilianGroup</a>                       = bp-&gt;<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#c32e19edfc3eae79e96bbdc11819aa90">ubCivilianGroup</a>;
<a name="l01808"></a>01808             
<a name="l01809"></a>01809             <span class="keywordflow">return</span>; <span class="comment">//done</span>
<a name="l01810"></a>01810       }
<a name="l01811"></a>01811       <a class="code" href="Soldier_01Create_8cpp.html#5e825bdba54a929a345b50c232fa9f6f">CreateDetailedPlacementGivenBasicPlacementInfo</a>( pp, bp );
<a name="l01812"></a>01812       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>              = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>;
<a name="l01813"></a>01813       <span class="comment">//Replace any of the new placement's attributes with static attributes.</span>
<a name="l01814"></a>01814       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a>            != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a>                 =     spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a>;
<a name="l01815"></a>01815       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>                      != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>                           = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>;
<a name="l01816"></a>01816       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>             != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>                  = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>;
<a name="l01817"></a>01817       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a>!= -1 )             pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a> = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a>;
<a name="l01818"></a>01818       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>            != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>                 = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>;
<a name="l01819"></a>01819       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>             != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>                  = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>;
<a name="l01820"></a>01820       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>           != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>          = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>;
<a name="l01821"></a>01821       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>              != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>                   = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>;
<a name="l01822"></a>01822       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>    != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>         = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>;
<a name="l01823"></a>01823       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>           != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>          = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>;
<a name="l01824"></a>01824       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>             != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>                  = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>;
<a name="l01825"></a>01825       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>    != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>         = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>;
<a name="l01826"></a>01826       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>              != -1 )                 pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>                   = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>;
<a name="l01827"></a>01827 
<a name="l01828"></a>01828       pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1e4eaba07de6a26b8c4c7d0ce1c231e2">fVisible</a> = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1e4eaba07de6a26b8c4c7d0ce1c231e2">fVisible</a>;
<a name="l01829"></a>01829       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1e4eaba07de6a26b8c4c7d0ce1c231e2">fVisible</a> )
<a name="l01830"></a>01830       {
<a name="l01831"></a>01831             sprintf( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#11ce98982166c21bcd644f1a2e8bb45f">HeadPal</a>, spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#11ce98982166c21bcd644f1a2e8bb45f">HeadPal</a> );
<a name="l01832"></a>01832             sprintf( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#097969cce346702b9fd06ba5208a3276">PantsPal</a>, spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#097969cce346702b9fd06ba5208a3276">PantsPal</a> );
<a name="l01833"></a>01833             sprintf( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aea74efcf2f672bd7c398c360e5edc55">VestPal</a>, spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aea74efcf2f672bd7c398c360e5edc55">VestPal</a> );
<a name="l01834"></a>01834             sprintf( pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e8ab217f813460200f9541afcba6c4c4">SkinPal</a>, spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e8ab217f813460200f9541afcba6c4c4">SkinPal</a> );
<a name="l01835"></a>01835       }
<a name="l01836"></a>01836 
<a name="l01837"></a>01837       <span class="comment">//This isn't perfect, however, it blindly brings over the items from the static </span>
<a name="l01838"></a>01838       <span class="comment">//detailed placement.  Due to the order of things, other items would </span>
<a name="l01839"></a>01839       <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a>; i++ )
<a name="l01840"></a>01840       {
<a name="l01841"></a>01841             <span class="comment">//copy over static items and empty slots that are droppable (signifies a forced empty slot)</span>
<a name="l01842"></a>01842             <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[ i ].<a class="code" href="structOBJECTTYPE.html#0f1e67bac22f1b89c4040ef8a5ea48c2">fFlags</a> &amp; OBJECT_NO_OVERWRITE )
<a name="l01843"></a>01843             {
<a name="l01844"></a>01844                   memcpy( &amp;pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[ i ], &amp;spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[ i ], <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l01845"></a>01845                   <span class="comment">//memcpy( pp-&gt;Inv, spp-&gt;Inv, sizeof( OBJECTTYPE ) * NUM_INV_SLOTS );</span>
<a name="l01846"></a>01846                   <span class="comment">//return;</span>
<a name="l01847"></a>01847             }
<a name="l01848"></a>01848       }
<a name="l01849"></a>01849       <span class="comment">//if ( !gGameOptions.fGunNut ) </span>
<a name="l01850"></a>01850       <span class="comment">//{</span>
<a name="l01851"></a>01851       <span class="comment">//    ReplaceExtendedGuns( pp, bp-&gt;ubSoldierClass );</span>
<a name="l01852"></a>01852       <span class="comment">//}</span>
<a name="l01853"></a>01853       <span class="keywordflow">if</span>( bp-&gt;ubSoldierClass != <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61f30fb6bcf992831fe7ec28f6fbee1871">SOLDIER_CLASS_NONE</a> &amp;&amp; bp-&gt;ubSoldierClass != <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a> &amp;&amp; bp-&gt;ubSoldierClass != <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de618d13f000b4b5195727feae9b48454950">SOLDIER_CLASS_MINER</a> )
<a name="l01854"></a>01854       {
<a name="l01855"></a>01855             <a class="code" href="Inventory_01Choosing_8cpp.html#a19099e9b769c0b09938b469603a9e67">GenerateRandomEquipment</a>( pp, bp-&gt;ubSoldierClass, bp-&gt;bRelativeEquipmentLevel);
<a name="l01856"></a>01856             <a class="code" href="Soldier_01Create_8cpp.html#0923fccb5699d7aef9dd49e92c8f75e6">DecideToAssignSniperOrders</a>(pp);
<a name="l01857"></a>01857       }
<a name="l01858"></a>01858 
<a name="l01859"></a>01859       DebugMsg(<a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>,DBG_LEVEL_3,<a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"CreateDetailedPlacementGivenStaticDetailedPlacementAndBasicPlacementInfo done"</span>));
<a name="l01860"></a>01860 }
<a name="l01861"></a>01861 
<a name="l01862"></a>01862 <span class="comment">//Used to update a existing soldier's attributes with the new static detailed placement info.  This is used</span>
<a name="l01863"></a>01863 <span class="comment">//by the editor upon exiting the editor into the game, to update the existing soldiers with new information.</span>
<a name="l01864"></a>01864 <span class="comment">//This gives flexibility of testing mercs.  Upon entering the editor again, this call will reset all the </span>
<a name="l01865"></a>01865 <span class="comment">//mercs to their original states.</span>
<a name="l01866"></a><a class="code" href="Soldier_01Create_8h.html#30fbf57c0800b24b57c95745e1bebbc5">01866</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#30fbf57c0800b24b57c95745e1bebbc5">UpdateSoldierWithStaticDetailedInformation</a>( SOLDIERTYPE *<a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>, <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *spp )
<a name="l01867"></a>01867 {
<a name="l01868"></a>01868       <span class="comment">//First, check to see if the soldier has a profile.  If so, then it'll extract the information</span>
<a name="l01869"></a>01869       <span class="comment">//and update the soldier with the profile information instead.  This has complete override</span>
<a name="l01870"></a>01870       <span class="comment">//authority.</span>
<a name="l01871"></a>01871       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> != NO_PROFILE )
<a name="l01872"></a>01872       {
<a name="l01873"></a>01873             <a class="code" href="Soldier_01Create_8cpp.html#e5a6ef9c711125386d7c024ae3db4b4b">TacticalCopySoldierFromProfile</a>( <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>, spp );
<a name="l01874"></a>01874             <a class="code" href="Soldier_01Create_8cpp.html#3833461236626aa1e87f2e9ac71980c9">UpdateStaticDetailedPlacementWithProfileInformation</a>( spp, spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> );
<a name="l01875"></a>01875             <a class="code" href="Animation_01Control_8cpp.html#e1c891c50668a158b16528d356ea6c37">SetSoldierAnimationSurface</a>( s, s-&gt;usAnimState );
<a name="l01876"></a>01876             <a class="code" href="Soldier_01Control_8cpp.html#11353b21428c34b57d2cfb3ed2963588">CreateSoldierPalettes</a>( s );
<a name="l01877"></a>01877             <span class="keywordflow">return</span>;
<a name="l01878"></a>01878       }
<a name="l01879"></a>01879 
<a name="l01880"></a>01880       <span class="keywordflow">switch</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a> )
<a name="l01881"></a>01881       { <span class="comment">//If the soldier is an administrator, then </span>
<a name="l01882"></a>01882             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61b149e8fdf658384dd176ef9e706f10dd">SOLDIER_CLASS_ADMINISTRATOR</a>:
<a name="l01883"></a>01883             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61e155251ca19fc71034c52119253642b8">SOLDIER_CLASS_ARMY</a>:
<a name="l01884"></a>01884             <span class="keywordflow">case</span> <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a>:
<a name="l01885"></a>01885                   <a class="code" href="Soldier_01Create_8cpp.html#2c1bc3a8473cac919acb055f502854cd">GeneratePaletteForSoldier</a>( <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>, spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8c94f66e6fe51672802ee1ea24dddf07">ubSoldierClass</a> );              
<a name="l01886"></a>01886                   <span class="keywordflow">break</span>;
<a name="l01887"></a>01887       }
<a name="l01888"></a>01888 
<a name="l01889"></a>01889       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a> != -1 )
<a name="l01890"></a>01890       { <span class="comment">//We have a static experience level, so generate all of the soldier's attributes.</span>
<a name="l01891"></a>01891             <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bBaseAttribute;
<a name="l01892"></a>01892             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExpLevel = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a>;
<a name="l01893"></a>01893             <span class="comment">//Set the minimum base attribute</span>
<a name="l01894"></a>01894             bBaseAttribute = 49 + ( 4 * <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExpLevel );
<a name="l01895"></a>01895 
<a name="l01896"></a>01896             <span class="comment">//Roll enemy's combat statistics, taking bExpLevel into account.</span>
<a name="l01897"></a>01897             <span class="comment">//Stat range is currently 40-99, slightly bell-curved around the bExpLevel</span>
<a name="l01898"></a>01898             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLifeMax                   = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01899"></a>01899             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLife                      = <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLifeMax;
<a name="l01900"></a>01900             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bAgility                   = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01901"></a>01901             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bDexterity                 = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01902"></a>01902             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMarksmanship  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01903"></a>01903             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMedical                   = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01904"></a>01904             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMechanical          = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01905"></a>01905             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExplosive                 = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01906"></a>01906             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLeadership          = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01907"></a>01907             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bStrength                  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01908"></a>01908             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bWisdom                    = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01909"></a>01909             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMorale                    = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01910"></a>01910       }
<a name="l01911"></a>01911       <span class="comment">//Replace any soldier attributes with any static values in the detailed placement.</span>
<a name="l01912"></a>01912       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>                      != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLife                            = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>;
<a name="l01913"></a>01913       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>             != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLifeMax                   = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>;
<a name="l01914"></a>01914       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a>!= -1 )             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMarksmanship  = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a>;
<a name="l01915"></a>01915       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>            != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bStrength                  = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>;
<a name="l01916"></a>01916       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>             != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bAgility                   = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>;
<a name="l01917"></a>01917       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>           != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bDexterity                 = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>;
<a name="l01918"></a>01918       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>              != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bWisdom                    = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>;
<a name="l01919"></a>01919       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>    != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLeadership          = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>;
<a name="l01920"></a>01920       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>           != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExplosive                 = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>;
<a name="l01921"></a>01921       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>             != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMedical                   = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>;
<a name="l01922"></a>01922       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>    != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMechanical          = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>;
<a name="l01923"></a>01923       <span class="keywordflow">if</span>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>              != -1 )                 <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMorale                    = spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f7a6b0d3b3eade28a4795512e192d0eb">bMorale</a>;
<a name="l01924"></a>01924 
<a name="l01925"></a>01925       <span class="comment">//life can't exceed the life max.</span>
<a name="l01926"></a>01926       <span class="keywordflow">if</span>( <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLife &gt; <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLifeMax )
<a name="l01927"></a>01927             <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLife = <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLifeMax;
<a name="l01928"></a>01928 
<a name="l01929"></a>01929       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;ubScheduleID         =     spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#8d57132b9da9a691e7dc5693d8d5fe82">ubScheduleID</a>;
<a name="l01930"></a>01930 
<a name="l01931"></a>01931       <span class="comment">//Copy over the current inventory list.</span>
<a name="l01932"></a>01932       memcpy( <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;inv, spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>, <span class="keyword">sizeof</span>( OBJECTTYPE ) * <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a> );
<a name="l01933"></a>01933 }
<a name="l01934"></a>01934 
<a name="l01935"></a>01935 <span class="comment">//In the case of setting a profile ID in order to extract a soldier from the profile array, we</span>
<a name="l01936"></a>01936 <span class="comment">//also want to copy that information to the static detailed placement, for editor viewing purposes.</span>
<a name="l01937"></a><a class="code" href="Soldier_01Create_8h.html#3833461236626aa1e87f2e9ac71980c9">01937</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#3833461236626aa1e87f2e9ac71980c9">UpdateStaticDetailedPlacementWithProfileInformation</a>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *spp, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubProfile )
<a name="l01938"></a>01938 {
<a name="l01939"></a>01939       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                              cnt;
<a name="l01940"></a>01940       <a class="code" href="structMERCPROFILESTRUCT.html">MERCPROFILESTRUCT</a> * pProfile;
<a name="l01941"></a>01941 
<a name="l01942"></a>01942       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> = ubProfile;
<a name="l01943"></a>01943 
<a name="l01944"></a>01944       pProfile = &amp;(<a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[ ubProfile ]);
<a name="l01945"></a>01945 
<a name="l01946"></a>01946       SET_PALETTEREP_ID ( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#11ce98982166c21bcd644f1a2e8bb45f">HeadPal</a>,         pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#03c95342190035d6b22493c053663a60">HAIR</a> );
<a name="l01947"></a>01947       SET_PALETTEREP_ID ( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aea74efcf2f672bd7c398c360e5edc55">VestPal</a>,         pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#0ca2f50b1cc301bdb8463951e8b91c46">VEST</a> );
<a name="l01948"></a>01948       SET_PALETTEREP_ID ( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#e8ab217f813460200f9541afcba6c4c4">SkinPal</a>,         pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#a64df0a52bdf68ce187225d89f02dac7">SKIN</a> );
<a name="l01949"></a>01949       SET_PALETTEREP_ID ( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#097969cce346702b9fd06ba5208a3276">PantsPal</a>,  pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#7038c71c245abd0a286e5cf2a17d954a">PANTS</a> );
<a name="l01950"></a>01950 
<a name="l01951"></a>01951       <a class="code" href="Sys_01Globals_8h.html#3d1e5716a3d04a53b8846319dd57da83">wcscpy</a>( spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bffeb02e6a6802a632473e578e025f7a">name</a>, pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#67765a16f1c6a2a9fc5d0a7cf6f830fd">zNickname</a> );
<a name="l01952"></a>01952 
<a name="l01953"></a>01953       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#29f2e5dc7ffa8b6a7df13089430ac461">bLife</a>                                                        = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#09fbcd22d7fc230711c52e75231d8f79">bLife</a>;
<a name="l01954"></a>01954       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#b04bf878c8de9128c9e63abe4f1b8a34">bLifeMax</a>                                                     = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#fa85b8afa8461cbbdb7eb533eed28e31">bLifeMax</a>;
<a name="l01955"></a>01955       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4462af66bbd2745b264ae18d577563bf">bAgility</a>                                                     = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#bd3daf02919f8e2b0883f7f087992ac2">bAgility</a>;
<a name="l01956"></a>01956       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#209837b9ce3122b0d4a295faa55964e8">bLeadership</a>                                      = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#57bd8d3f6cd1b8018e27a5183cc66302">bLeadership</a>;
<a name="l01957"></a>01957       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#bf1af9aeaeff61d9bd83927f36772dce">bDexterity</a>                                             = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#aaab9a3e77856f91c988c009236d411b">bDexterity</a>;
<a name="l01958"></a>01958       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#3d04f7591c4513e1fc4f8ba0de32a631">bStrength</a>                                              = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#9fa8346f31e989f4be1ba37d847eab59">bStrength</a>;
<a name="l01959"></a>01959       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#0bb4655bd7fad24ad5f33010291a1c77">bWisdom</a>                                                      = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#8df4ce262d2419f83a35b988fd6bd3e4">bWisdom</a>;
<a name="l01960"></a>01960       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aed615090c85062502ab030d1968858a">bExpLevel</a>                                              = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#38902687ff41c38a4110ab7599b23f51">bExpLevel</a>;
<a name="l01961"></a>01961       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#aa5e3f404486ad4cd4015dc82ab8a55f">bMarksmanship</a>                                    = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#3d5a20873d37fe66c0e7dc88b24f8ad7">bMarksmanship</a>;
<a name="l01962"></a>01962       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#49261be09bb0c789ef74f6167a4620f6">bMedical</a>                                                     = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#71a09e46c3ceebced381a4e6ed631f71">bMedical</a>;
<a name="l01963"></a>01963       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#38edd67137a7bffa38bcacbfc2c76f31">bMechanical</a>                                      = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#c1d3aecec4e7639c5225510c9c087500">bMechanical</a>;
<a name="l01964"></a>01964       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#c1f85b1c7d18c14ed63f0a387859602d">bExplosive</a>                                             = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#55a776cd5567f3b3cf91f100413786fa">bExplosive</a>;
<a name="l01965"></a>01965 
<a name="l01966"></a>01966       spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#1d351f2d5d9f2786c4afb5333ab0ceee">bBodyType</a>                                              = pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#e193a429e867757861825f442953a0d2">ubBodyType</a>;
<a name="l01967"></a>01967 
<a name="l01968"></a>01968       <span class="comment">// Copy over inv if we want to</span>
<a name="l01969"></a>01969       <span class="keywordflow">for</span> ( cnt = 0; cnt &lt; <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a>; cnt++ )
<a name="l01970"></a>01970       {
<a name="l01971"></a>01971             <a class="code" href="Items_8cpp.html#19aed5cbf530232ff0e01c7d6e58bd8e">CreateItems</a>( pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#cfa933838ced4f570567383a509555f5">inv</a>[ cnt ], pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#9714f8777eadf02e0e415a0ced87d524">bInvStatus</a>[ cnt ], pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#cafd5e8e1fada3041586b85244a6a213">bInvNumber</a>[ cnt ], &amp;(spp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#77f67dd5bf56fd387974309de1a5d3ea">Inv</a>[ cnt ]) );
<a name="l01972"></a>01972       }
<a name="l01973"></a>01973 }
<a name="l01974"></a>01974 
<a name="l01975"></a>01975 <span class="comment">//When the editor modifies the soldier's relative attribute level,</span>
<a name="l01976"></a>01976 <span class="comment">//this function is called to update that information.</span>
<a name="l01977"></a><a class="code" href="Soldier_01Create_8h.html#03c69116c6a48e0769751172595a7eee">01977</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#53a2878b02ae3a6c1d1abdbb290b142b">ModifySoldierAttributesWithNewRelativeLevel</a>( SOLDIERTYPE *<a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>, <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bRelativeAttributeLevel )
<a name="l01978"></a>01978 {
<a name="l01979"></a>01979       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bBaseAttribute;
<a name="l01980"></a>01980       <span class="comment">//Set the experience level based on the relative attribute level</span>
<a name="l01981"></a>01981       <span class="comment">// NOTE OF WARNING: THIS CURRENTLY IGNORES THE ENEMY CLASS (ADMIN/REG/ELITE) FOR CALCULATING LEVEL &amp; ATTRIBUTES</span>
<a name="l01982"></a>01982 
<a name="l01983"></a>01983       <span class="comment">// Rel level 0: Lvl 1, 1: Lvl 2-3, 2: Lvl 4-5, 3: Lvl 6-7, 4: Lvl 8-9</span>
<a name="l01984"></a>01984       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExpLevel = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(2 * bRelativeAttributeLevel + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>(2));
<a name="l01985"></a>01985 
<a name="l01986"></a>01986       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExpLevel = max( 1, <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExpLevel ); <span class="comment">//minimum level of 1</span>
<a name="l01987"></a>01987       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExpLevel = min( 9, <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExpLevel ); <span class="comment">//maximum level of 9</span>
<a name="l01988"></a>01988 
<a name="l01989"></a>01989       <span class="comment">//Set the minimum base attribute</span>
<a name="l01990"></a>01990       bBaseAttribute = 49 + ( 4 * <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExpLevel );
<a name="l01991"></a>01991 
<a name="l01992"></a>01992       <span class="comment">//Roll enemy's combat statistics, taking bExpLevel into account.</span>
<a name="l01993"></a>01993       <span class="comment">//Stat range is currently 40-99, slightly bell-curved around the bExpLevel</span>
<a name="l01994"></a>01994       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLifeMax                   = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01995"></a>01995       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLife                      = <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLifeMax;
<a name="l01996"></a>01996       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bAgility                   = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01997"></a>01997       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bDexterity                 = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01998"></a>01998       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMarksmanship  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l01999"></a>01999       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMedical                   = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l02000"></a>02000       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMechanical          = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l02001"></a>02001       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bExplosive                 = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l02002"></a>02002       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bLeadership          = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l02003"></a>02003       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bStrength                  = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l02004"></a>02004       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bWisdom                    = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l02005"></a>02005       <a class="code" href="expat_8h.html#ac7f55bb30c87ac10aa173aa6c9f4bc0">s</a>-&gt;bMorale                    = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>)(bBaseAttribute + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 9 ) + <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 8 ));
<a name="l02006"></a>02006 }
<a name="l02007"></a>02007 
<a name="l02008"></a>02008 
<a name="l02009"></a><a class="code" href="Soldier_01Create_8h.html#7be6c9a73e26eb081dab5ef3d4962732">02009</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#7be6c9a73e26eb081dab5ef3d4962732">ForceSoldierProfileID</a>( SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubProfileID )
<a name="l02010"></a>02010 {
<a name="l02011"></a>02011       <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> CreateStruct;
<a name="l02012"></a>02012 
<a name="l02013"></a>02013       memset( &amp;CreateStruct, 0, <span class="keyword">sizeof</span>( CreateStruct ) );
<a name="l02014"></a>02014       CreateStruct.ubProfile = ubProfileID;
<a name="l02015"></a>02015 
<a name="l02016"></a>02016 
<a name="l02017"></a>02017       <a class="code" href="Soldier_01Create_8cpp.html#e5a6ef9c711125386d7c024ae3db4b4b">TacticalCopySoldierFromProfile</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, &amp;CreateStruct );
<a name="l02018"></a>02018 
<a name="l02019"></a>02019       <span class="comment">// Delete face and re-create</span>
<a name="l02020"></a>02020       <a class="code" href="Faces_8cpp.html#723dc9fa070546164117a820002a13b5">DeleteSoldierFace</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l02021"></a>02021 
<a name="l02022"></a>02022       <span class="comment">// Init face</span>
<a name="l02023"></a>02023       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#d5f6fd345324ba5fdf49c5a0624f6620">iFaceIndex</a> = <a class="code" href="Faces_8cpp.html#f81d3e8c608f1e1c226d52d4929c3a7d">InitSoldierFace</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l02024"></a>02024 
<a name="l02025"></a>02025       <span class="comment">// Update animation, palettes</span>
<a name="l02026"></a>02026       <a class="code" href="Animation_01Control_8cpp.html#e1c891c50668a158b16528d356ea6c37">SetSoldierAnimationSurface</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#1f73b62a5ea0dd26fa1bec1d9f522b41">usAnimState</a> );
<a name="l02027"></a>02027 
<a name="l02028"></a>02028       <span class="comment">// Re-Create palettes</span>
<a name="l02029"></a>02029       <a class="code" href="Soldier_01Control_8cpp.html#11353b21428c34b57d2cfb3ed2963588">CreateSoldierPalettes</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l02030"></a>02030       
<a name="l02031"></a>02031 }
<a name="l02032"></a>02032 
<a name="l02033"></a>02033 <span class="preprocessor">#define CENTRAL_GRIDNO 13202</span>
<a name="l02034"></a>02034 <span class="preprocessor"></span><span class="preprocessor">#define CENTRAL_RADIUS 30</span>
<a name="l02035"></a>02035 <span class="preprocessor"></span>
<a name="l02036"></a><a class="code" href="Soldier_01Create_8cpp.html#4e4a6c745c0bfc90806b594c936c3d34">02036</a> SOLDIERTYPE* <a class="code" href="Soldier_01Create_8cpp.html#4e4a6c745c0bfc90806b594c936c3d34">ReserveTacticalSoldierForAutoresolve</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSoldierClass )
<a name="l02037"></a>02037 {
<a name="l02038"></a>02038       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> i, iStart, iEnd;
<a name="l02039"></a>02039       SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02040"></a>02040       <span class="comment">//This code looks for a soldier of specified type that currently exists in tactical and</span>
<a name="l02041"></a>02041       <span class="comment">//returns the pointer to that soldier.  This is used when copying the exact status of</span>
<a name="l02042"></a>02042       <span class="comment">//all remaining enemy troops (or creatures) to finish the battle in autoresolve.  To</span>
<a name="l02043"></a>02043       <span class="comment">//signify that the troop has already been reserved, we simply set their gridno to NOWHERE.</span>
<a name="l02044"></a>02044       <span class="keywordflow">if</span>( ubSoldierClass != <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a> )
<a name="l02045"></a>02045       { <span class="comment">//use the enemy team</span>
<a name="l02046"></a>02046             iStart = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ ENEMY_TEAM ].<a class="code" href="structTacticalTeamType.html#f8fe819ad07b242f5dbf97fd4c69b00d">bFirstID</a>;
<a name="l02047"></a>02047             iEnd = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ ENEMY_TEAM ].<a class="code" href="structTacticalTeamType.html#6a887279dad735dc302f21c1e559d5ce">bLastID</a>;
<a name="l02048"></a>02048       }
<a name="l02049"></a>02049       <span class="keywordflow">else</span>
<a name="l02050"></a>02050       { <span class="comment">//use the creature team</span>
<a name="l02051"></a>02051             iStart = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ CREATURE_TEAM ].<a class="code" href="structTacticalTeamType.html#f8fe819ad07b242f5dbf97fd4c69b00d">bFirstID</a>;
<a name="l02052"></a>02052             iEnd = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ CREATURE_TEAM ].<a class="code" href="structTacticalTeamType.html#6a887279dad735dc302f21c1e559d5ce">bLastID</a>;
<a name="l02053"></a>02053       }
<a name="l02054"></a>02054       <span class="keywordflow">for</span>( i = iStart; i &lt;= iEnd; i++ )
<a name="l02055"></a>02055       {
<a name="l02056"></a>02056             <span class="keywordflow">if</span>( <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;bActive &amp;&amp; <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;bInSector &amp;&amp; <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;bLife &amp;&amp; <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;sGridNo != NOWHERE )
<a name="l02057"></a>02057             {
<a name="l02058"></a>02058                   <span class="keywordflow">if</span>( <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;ubSoldierClass == ubSoldierClass )
<a name="l02059"></a>02059                   {
<a name="l02060"></a>02060                         <span class="comment">//reserve this soldier</span>
<a name="l02061"></a>02061                         <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;sGridNo = NOWHERE;
<a name="l02062"></a>02062 
<a name="l02063"></a>02063                         <span class="comment">//Allocate and copy the soldier</span>
<a name="l02064"></a>02064                         <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = (SOLDIERTYPE*)MemAlloc( <span class="keyword">sizeof</span>( SOLDIERTYPE ) );
<a name="l02065"></a>02065                         <span class="keywordflow">if</span>( !<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> )
<a name="l02066"></a>02066                               <span class="keywordflow">return</span> NULL;
<a name="l02067"></a>02067                         memcpy( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ], <span class="keyword">sizeof</span>( SOLDIERTYPE ) );
<a name="l02068"></a>02068 
<a name="l02069"></a>02069                         <span class="comment">//Assign a bogus ID, then return it</span>
<a name="l02070"></a>02070                         pSoldier-&gt;ubID = 255;
<a name="l02071"></a>02071                         <span class="keywordflow">return</span> pSoldier;
<a name="l02072"></a>02072                   }
<a name="l02073"></a>02073             }
<a name="l02074"></a>02074       }
<a name="l02075"></a>02075       <span class="keywordflow">return</span> NULL;
<a name="l02076"></a>02076 }
<a name="l02077"></a>02077 
<a name="l02078"></a>02078 <span class="comment">//USED BY STRATEGIC AI and AUTORESOLVE</span>
<a name="l02079"></a><a class="code" href="Soldier_01Create_8h.html#e49212bbe726afb00cac1df4b183e1e5">02079</a> SOLDIERTYPE* <a class="code" href="Soldier_01Create_8cpp.html#e49212bbe726afb00cac1df4b183e1e5">TacticalCreateAdministrator</a>()
<a name="l02080"></a>02080 {
<a name="l02081"></a>02081       <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> bp;
<a name="l02082"></a>02082       <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> pp;
<a name="l02083"></a>02083       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubID;
<a name="l02084"></a>02084       SOLDIERTYPE * <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02085"></a>02085 
<a name="l02086"></a>02086       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> == <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> &amp;&amp; !<a class="code" href="PreBattle_01Interface_8cpp.html#2e77be6801f29c8e0e4bf9201cd52666">gfPersistantPBI</a> )
<a name="l02087"></a>02087       {
<a name="l02088"></a>02088             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#4e4a6c745c0bfc90806b594c936c3d34">ReserveTacticalSoldierForAutoresolve</a>( <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61b149e8fdf658384dd176ef9e706f10dd">SOLDIER_CLASS_ADMINISTRATOR</a> );
<a name="l02089"></a>02089             <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> ) <span class="keywordflow">return</span> <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02090"></a>02090       }
<a name="l02091"></a>02091 
<a name="l02092"></a>02092       memset( &amp;bp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> ) );
<a name="l02093"></a>02093       memset( &amp;pp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> ) );
<a name="l02094"></a>02094       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a> ), <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61b149e8fdf658384dd176ef9e706f10dd">SOLDIER_CLASS_ADMINISTRATOR</a> );
<a name="l02095"></a>02095       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#49c2fe6937f004d00ba00c008fa33a30">bRelativeEquipmentLevel</a> ), <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61b149e8fdf658384dd176ef9e706f10dd">SOLDIER_CLASS_ADMINISTRATOR</a> );
<a name="l02096"></a>02096       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a> = ENEMY_TEAM;
<a name="l02097"></a>02097       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#88e4f58ca15daeb28ee87c47c5eb2306">bOrders</a> = <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138f5aa440b40aa8e6f41bfba3b0b8b4ed95">SEEKENEMY</a>;
<a name="l02098"></a>02098       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#def23ae50e065204f4a927d38deb16e2">bAttitude</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Overhead_01Types_8h.html#731c15105066cc17fd55a258db2879d318853594333cd376ff96348884974512">MAXATTITUDES</a> );
<a name="l02099"></a>02099       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a> = -1;
<a name="l02100"></a>02100       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a> = <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61b149e8fdf658384dd176ef9e706f10dd">SOLDIER_CLASS_ADMINISTRATOR</a>;
<a name="l02101"></a>02101       <a class="code" href="Soldier_01Create_8cpp.html#5e825bdba54a929a345b50c232fa9f6f">CreateDetailedPlacementGivenBasicPlacementInfo</a>( &amp;pp, &amp;bp );
<a name="l02102"></a>02102       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#9012dd4ad15957a14b023ae9fee7c862">TacticalCreateSoldier</a>( &amp;pp, &amp;ubID );
<a name="l02103"></a>02103       <span class="keywordflow">if</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> )
<a name="l02104"></a>02104       {
<a name="l02105"></a>02105             <span class="comment">// send soldier to centre of map, roughly</span>
<a name="l02106"></a>02106             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0fdab3f65adc00474d2f67655f77c6b9">sNoiseGridno</a> = (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>) (CENTRAL_GRIDNO + ( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( CENTRAL_RADIUS * 2 + 1 ) - CENTRAL_RADIUS ) + ( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( CENTRAL_RADIUS * 2 + 1 ) - CENTRAL_RADIUS ) * WORLD_COLS);
<a name="l02107"></a>02107             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#38db62a11e58e205b0c604fbf6278e2e">ubNoiseVolume</a> = MAX_MISC_NOISE_DURATION;
<a name="l02108"></a>02108       }
<a name="l02109"></a>02109       <span class="keywordflow">return</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l02110"></a>02110 }
<a name="l02111"></a>02111 
<a name="l02112"></a>02112 <span class="comment">//USED BY STRATEGIC AI and AUTORESOLVE</span>
<a name="l02113"></a><a class="code" href="Soldier_01Create_8h.html#da78af68e368f7a2cc0a5d839497749d">02113</a> SOLDIERTYPE* <a class="code" href="Soldier_01Create_8cpp.html#da78af68e368f7a2cc0a5d839497749d">TacticalCreateArmyTroop</a>()
<a name="l02114"></a>02114 {
<a name="l02115"></a>02115       <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> bp;
<a name="l02116"></a>02116       <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> pp;
<a name="l02117"></a>02117       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubID;
<a name="l02118"></a>02118       SOLDIERTYPE * <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02119"></a>02119 
<a name="l02120"></a>02120       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> == <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> &amp;&amp; !<a class="code" href="PreBattle_01Interface_8cpp.html#2e77be6801f29c8e0e4bf9201cd52666">gfPersistantPBI</a> )
<a name="l02121"></a>02121       {
<a name="l02122"></a>02122             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#4e4a6c745c0bfc90806b594c936c3d34">ReserveTacticalSoldierForAutoresolve</a>( <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61e155251ca19fc71034c52119253642b8">SOLDIER_CLASS_ARMY</a> );
<a name="l02123"></a>02123             <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> ) <span class="keywordflow">return</span> <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02124"></a>02124       }
<a name="l02125"></a>02125 
<a name="l02126"></a>02126       memset( &amp;bp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> ) );
<a name="l02127"></a>02127       memset( &amp;pp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> ) );
<a name="l02128"></a>02128       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a> ), <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61e155251ca19fc71034c52119253642b8">SOLDIER_CLASS_ARMY</a> );
<a name="l02129"></a>02129       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#49c2fe6937f004d00ba00c008fa33a30">bRelativeEquipmentLevel</a> ), <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61e155251ca19fc71034c52119253642b8">SOLDIER_CLASS_ARMY</a> );
<a name="l02130"></a>02130       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a> = ENEMY_TEAM;
<a name="l02131"></a>02131       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#88e4f58ca15daeb28ee87c47c5eb2306">bOrders</a>  = <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138f5aa440b40aa8e6f41bfba3b0b8b4ed95">SEEKENEMY</a>;
<a name="l02132"></a>02132       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#def23ae50e065204f4a927d38deb16e2">bAttitude</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Overhead_01Types_8h.html#731c15105066cc17fd55a258db2879d318853594333cd376ff96348884974512">MAXATTITUDES</a> );
<a name="l02133"></a>02133       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a> = -1;
<a name="l02134"></a>02134       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a> = <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61e155251ca19fc71034c52119253642b8">SOLDIER_CLASS_ARMY</a>;
<a name="l02135"></a>02135       <a class="code" href="Soldier_01Create_8cpp.html#5e825bdba54a929a345b50c232fa9f6f">CreateDetailedPlacementGivenBasicPlacementInfo</a>( &amp;pp, &amp;bp );
<a name="l02136"></a>02136       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#9012dd4ad15957a14b023ae9fee7c862">TacticalCreateSoldier</a>( &amp;pp, &amp;ubID );
<a name="l02137"></a>02137       <span class="keywordflow">if</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> )
<a name="l02138"></a>02138       {
<a name="l02139"></a>02139             <span class="comment">// send soldier to centre of map, roughly</span>
<a name="l02140"></a>02140             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0fdab3f65adc00474d2f67655f77c6b9">sNoiseGridno</a> = (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>) (CENTRAL_GRIDNO + ( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( CENTRAL_RADIUS * 2 + 1 ) - CENTRAL_RADIUS ) + ( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( CENTRAL_RADIUS * 2 + 1 ) - CENTRAL_RADIUS ) * WORLD_COLS);
<a name="l02141"></a>02141             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#38db62a11e58e205b0c604fbf6278e2e">ubNoiseVolume</a> = MAX_MISC_NOISE_DURATION;
<a name="l02142"></a>02142       }
<a name="l02143"></a>02143 
<a name="l02144"></a>02144       <span class="keywordflow">return</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l02145"></a>02145 }
<a name="l02146"></a>02146 
<a name="l02147"></a>02147 <span class="comment">//USED BY STRATEGIC AI and AUTORESOLVE</span>
<a name="l02148"></a><a class="code" href="Soldier_01Create_8h.html#7fd42470b3fa4067c8e95d2be78131d4">02148</a> SOLDIERTYPE* <a class="code" href="Soldier_01Create_8cpp.html#7fd42470b3fa4067c8e95d2be78131d4">TacticalCreateEliteEnemy</a>()
<a name="l02149"></a>02149 {
<a name="l02150"></a>02150       <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> bp;
<a name="l02151"></a>02151       <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> pp;
<a name="l02152"></a>02152       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubID;
<a name="l02153"></a>02153       SOLDIERTYPE * <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02154"></a>02154 
<a name="l02155"></a>02155       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> == <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> &amp;&amp; !<a class="code" href="PreBattle_01Interface_8cpp.html#2e77be6801f29c8e0e4bf9201cd52666">gfPersistantPBI</a> )
<a name="l02156"></a>02156       {
<a name="l02157"></a>02157             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#4e4a6c745c0bfc90806b594c936c3d34">ReserveTacticalSoldierForAutoresolve</a>( <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a> );
<a name="l02158"></a>02158             <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> ) <span class="keywordflow">return</span> <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;           
<a name="l02159"></a>02159       }
<a name="l02160"></a>02160 
<a name="l02161"></a>02161       memset( &amp;bp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> ) );
<a name="l02162"></a>02162       memset( &amp;pp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> ) );
<a name="l02163"></a>02163 
<a name="l02164"></a>02164       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a> ), <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a> );
<a name="l02165"></a>02165       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#49c2fe6937f004d00ba00c008fa33a30">bRelativeEquipmentLevel</a> ), <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a> );
<a name="l02166"></a>02166       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a> = ENEMY_TEAM;
<a name="l02167"></a>02167       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#88e4f58ca15daeb28ee87c47c5eb2306">bOrders</a>  = <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138f5aa440b40aa8e6f41bfba3b0b8b4ed95">SEEKENEMY</a>;
<a name="l02168"></a>02168       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#def23ae50e065204f4a927d38deb16e2">bAttitude</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Overhead_01Types_8h.html#731c15105066cc17fd55a258db2879d318853594333cd376ff96348884974512">MAXATTITUDES</a> );
<a name="l02169"></a>02169       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a> = -1;
<a name="l02170"></a>02170       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a> = <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de61a3398ebdb00774b852a6dc6a1ba38764">SOLDIER_CLASS_ELITE</a>;
<a name="l02171"></a>02171       <a class="code" href="Soldier_01Create_8cpp.html#5e825bdba54a929a345b50c232fa9f6f">CreateDetailedPlacementGivenBasicPlacementInfo</a>( &amp;pp, &amp;bp );
<a name="l02172"></a>02172 
<a name="l02173"></a>02173       <span class="comment">//SPECIAL!  Certain events in the game can cause profiled NPCs to become enemies.  The two cases are </span>
<a name="l02174"></a>02174       <span class="comment">//adding Mike and Iggy.  We will only add one NPC in any given combat and the conditions for setting</span>
<a name="l02175"></a>02175       <span class="comment">//the associated facts are done elsewhere.  There is also another place where NPCs can get added, which</span>
<a name="l02176"></a>02176       <span class="comment">//is in AddPlacementToWorld() used for inserting defensive enemies.</span>
<a name="l02177"></a>02177       <span class="comment">//NOTE:  We don't want to add Mike or Iggy if this is being called from autoresolve!</span>
<a name="l02178"></a>02178       <a class="code" href="Soldier_01Create_8cpp.html#77852f4ba80e82fd71c96f27bfb27ac9">OkayToUpgradeEliteToSpecialProfiledEnemy</a>( &amp;pp );
<a name="l02179"></a>02179       
<a name="l02180"></a>02180       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#9012dd4ad15957a14b023ae9fee7c862">TacticalCreateSoldier</a>( &amp;pp, &amp;ubID );
<a name="l02181"></a>02181       <span class="keywordflow">if</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> )
<a name="l02182"></a>02182       {
<a name="l02183"></a>02183             <span class="comment">// send soldier to centre of map, roughly</span>
<a name="l02184"></a>02184             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#0fdab3f65adc00474d2f67655f77c6b9">sNoiseGridno</a> = (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)(CENTRAL_GRIDNO + ( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( CENTRAL_RADIUS * 2 + 1 ) - CENTRAL_RADIUS ) + ( <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( CENTRAL_RADIUS * 2 + 1 ) - CENTRAL_RADIUS ) * WORLD_COLS);
<a name="l02185"></a>02185             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#38db62a11e58e205b0c604fbf6278e2e">ubNoiseVolume</a> = MAX_MISC_NOISE_DURATION;
<a name="l02186"></a>02186       }
<a name="l02187"></a>02187 
<a name="l02188"></a>02188       <span class="keywordflow">return</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> );
<a name="l02189"></a>02189 }
<a name="l02190"></a>02190 
<a name="l02191"></a><a class="code" href="Soldier_01Create_8cpp.html#2be321b597e239aec75566768478bb85">02191</a> SOLDIERTYPE* <a class="code" href="Soldier_01Create_8cpp.html#2be321b597e239aec75566768478bb85">ReserveTacticalMilitiaSoldierForAutoresolve</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSoldierClass )
<a name="l02192"></a>02192 {
<a name="l02193"></a>02193       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> i, iStart, iEnd;
<a name="l02194"></a>02194       SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02195"></a>02195 
<a name="l02196"></a>02196       <span class="comment">// For description look original ReserveTacticalSoldierForAutoresolve()</span>
<a name="l02197"></a>02197 
<a name="l02198"></a>02198       iStart = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ MILITIA_TEAM ].<a class="code" href="structTacticalTeamType.html#f8fe819ad07b242f5dbf97fd4c69b00d">bFirstID</a>;
<a name="l02199"></a>02199       iEnd = <a class="code" href="Overhead_8cpp.html#46bd754f8875c305ab18731ed10e3364">gTacticalStatus</a>.<a class="code" href="structTacticalStatusType.html#2ecddfe580bb019bc92cc4859eaf3edc">Team</a>[ MILITIA_TEAM ].<a class="code" href="structTacticalTeamType.html#6a887279dad735dc302f21c1e559d5ce">bLastID</a>;
<a name="l02200"></a>02200 
<a name="l02201"></a>02201       <span class="keywordflow">for</span>( i = iStart; i &lt;= iEnd; i++ )
<a name="l02202"></a>02202       {
<a name="l02203"></a>02203             <span class="keywordflow">if</span>( <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;bActive &amp;&amp; <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;bInSector &amp;&amp; <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;bLife &amp;&amp; <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;sGridNo != NOWHERE )
<a name="l02204"></a>02204             {
<a name="l02205"></a>02205                   <span class="keywordflow">if</span>( <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;ubSoldierClass == ubSoldierClass )
<a name="l02206"></a>02206                   {
<a name="l02207"></a>02207                         <span class="comment">//reserve this soldier</span>
<a name="l02208"></a>02208                         <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ]-&gt;sGridNo = NOWHERE;
<a name="l02209"></a>02209 
<a name="l02210"></a>02210                         <span class="comment">//Allocate and copy the soldier</span>
<a name="l02211"></a>02211                         <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = (SOLDIERTYPE*)MemAlloc( <span class="keyword">sizeof</span>( SOLDIERTYPE ) );
<a name="l02212"></a>02212                         <span class="keywordflow">if</span>( !<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> )
<a name="l02213"></a>02213                               <span class="keywordflow">return</span> NULL;
<a name="l02214"></a>02214                         memcpy( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ i ], <span class="keyword">sizeof</span>( SOLDIERTYPE ) );
<a name="l02215"></a>02215 
<a name="l02216"></a>02216                         <span class="comment">//Assign a bogus ID, then return it</span>
<a name="l02217"></a>02217                         pSoldier-&gt;ubID = 255;
<a name="l02218"></a>02218                         <span class="keywordflow">return</span> pSoldier;
<a name="l02219"></a>02219                   }
<a name="l02220"></a>02220             }
<a name="l02221"></a>02221       }
<a name="l02222"></a>02222       <span class="keywordflow">return</span> NULL;
<a name="l02223"></a>02223 }
<a name="l02224"></a>02224 
<a name="l02225"></a>02225 
<a name="l02226"></a><a class="code" href="Soldier_01Create_8h.html#6d1449358a0f8f284ddebe49e46530c3">02226</a> SOLDIERTYPE* <a class="code" href="Soldier_01Create_8cpp.html#6d1449358a0f8f284ddebe49e46530c3">TacticalCreateMilitia</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubMilitiaClass )
<a name="l02227"></a>02227 {
<a name="l02228"></a>02228       <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> bp;
<a name="l02229"></a>02229       <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> pp;
<a name="l02230"></a>02230       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubID;
<a name="l02231"></a>02231       SOLDIERTYPE * <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02232"></a>02232 
<a name="l02233"></a>02233       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> == <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> &amp;&amp; !<a class="code" href="PreBattle_01Interface_8cpp.html#2e77be6801f29c8e0e4bf9201cd52666">gfPersistantPBI</a> )
<a name="l02234"></a>02234       {
<a name="l02235"></a>02235             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#2be321b597e239aec75566768478bb85">ReserveTacticalMilitiaSoldierForAutoresolve</a>( ubMilitiaClass );
<a name="l02236"></a>02236             <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> ) <span class="keywordflow">return</span> <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;           
<a name="l02237"></a>02237       }
<a name="l02238"></a>02238 
<a name="l02239"></a>02239       memset( &amp;bp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> ) );
<a name="l02240"></a>02240       memset( &amp;pp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> ) );
<a name="l02241"></a>02241       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a> ), ubMilitiaClass );
<a name="l02242"></a>02242       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#49c2fe6937f004d00ba00c008fa33a30">bRelativeEquipmentLevel</a> ), ubMilitiaClass );
<a name="l02243"></a>02243       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a> = MILITIA_TEAM;
<a name="l02244"></a>02244       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a> = ubMilitiaClass;
<a name="l02245"></a>02245       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#88e4f58ca15daeb28ee87c47c5eb2306">bOrders</a> = <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138fc84bd0ee013c388bd7cc8139be7206a2">STATIONARY</a>;
<a name="l02246"></a>02246       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#def23ae50e065204f4a927d38deb16e2">bAttitude</a> = (<a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>) <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( <a class="code" href="Overhead_01Types_8h.html#731c15105066cc17fd55a258db2879d318853594333cd376ff96348884974512">MAXATTITUDES</a> );
<a name="l02247"></a>02247       <span class="comment">//bp.bAttitude = AGGRESSIVE;</span>
<a name="l02248"></a>02248       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a> = -1;
<a name="l02249"></a>02249       <a class="code" href="Soldier_01Create_8cpp.html#5e825bdba54a929a345b50c232fa9f6f">CreateDetailedPlacementGivenBasicPlacementInfo</a>( &amp;pp, &amp;bp );
<a name="l02250"></a>02250       <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#9012dd4ad15957a14b023ae9fee7c862">TacticalCreateSoldier</a>( &amp;pp, &amp;ubID );
<a name="l02251"></a>02251 
<a name="l02252"></a>02252       <span class="keywordflow">return</span> <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02253"></a>02253 }
<a name="l02254"></a>02254 
<a name="l02255"></a><a class="code" href="Soldier_01Create_8h.html#8cab55cbaca83a73080a0c9da5d887e1">02255</a> SOLDIERTYPE* <a class="code" href="Soldier_01Create_8cpp.html#8cab55cbaca83a73080a0c9da5d887e1">TacticalCreateCreature</a>( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bCreatureBodyType )
<a name="l02256"></a>02256 {
<a name="l02257"></a>02257       <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> bp;
<a name="l02258"></a>02258       <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> pp;
<a name="l02259"></a>02259       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubID;
<a name="l02260"></a>02260       SOLDIERTYPE * <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02261"></a>02261 
<a name="l02262"></a>02262       <span class="keywordflow">if</span>( <a class="code" href="gameloop_8cpp.html#8cd832c7f0ec6ab02ba9fddd4a2257aa">guiCurrentScreen</a> == <a class="code" href="screenids_8h.html#a4ee5dea8709d2b490486a62df77faf2b47cddbba1e6954743e6b35bcc128e18">AUTORESOLVE_SCREEN</a> &amp;&amp; !<a class="code" href="PreBattle_01Interface_8cpp.html#2e77be6801f29c8e0e4bf9201cd52666">gfPersistantPBI</a> )
<a name="l02263"></a>02263       {
<a name="l02264"></a>02264             <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Soldier_01Create_8cpp.html#4e4a6c745c0bfc90806b594c936c3d34">ReserveTacticalSoldierForAutoresolve</a>( <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a> );
<a name="l02265"></a>02265             <span class="keywordflow">if</span>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> ) <span class="keywordflow">return</span> <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02266"></a>02266       }
<a name="l02267"></a>02267 
<a name="l02268"></a>02268       memset( &amp;bp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html">BASIC_SOLDIERCREATE_STRUCT</a> ) );
<a name="l02269"></a>02269       memset( &amp;pp, 0, <span class="keyword">sizeof</span>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> ) );
<a name="l02270"></a>02270       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#16f4ceaac5122b9a0ebb09c46a73e74a">bRelativeAttributeLevel</a> ), <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a> );
<a name="l02271"></a>02271       <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( &amp;( bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#49c2fe6937f004d00ba00c008fa33a30">bRelativeEquipmentLevel</a> ), <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a> );
<a name="l02272"></a>02272       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#bd255e877f2966dbbd17ffbaa254a025">bTeam</a> = CREATURE_TEAM;
<a name="l02273"></a>02273       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#6f8b4186867f69e234b40ed1c87730c6">ubSoldierClass</a> = <a class="code" href="Soldier_01Control_8h.html#d559b3ed307be626eacea8b56942de6161e5c11d278994d783b57f8dfefd191f">SOLDIER_CLASS_CREATURE</a>;
<a name="l02274"></a>02274       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#88e4f58ca15daeb28ee87c47c5eb2306">bOrders</a>  = <a class="code" href="Overhead_01Types_8h.html#5e7fba63eebd783231b18f414e8a138f5aa440b40aa8e6f41bfba3b0b8b4ed95">SEEKENEMY</a>;
<a name="l02275"></a>02275       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#def23ae50e065204f4a927d38deb16e2">bAttitude</a> = <a class="code" href="Overhead_01Types_8h.html#731c15105066cc17fd55a258db2879d3128db069f37b5cd1b44901dff4db4ae0">AGGRESSIVE</a>;
<a name="l02276"></a>02276       bp.<a class="code" href="structBASIC__SOLDIERCREATE__STRUCT.html#e2ee468828615ecf563e7a5e799ef59b">bBodyType</a> = bCreatureBodyType;
<a name="l02277"></a>02277       <a class="code" href="Soldier_01Create_8cpp.html#5e825bdba54a929a345b50c232fa9f6f">CreateDetailedPlacementGivenBasicPlacementInfo</a>( &amp;pp, &amp;bp );
<a name="l02278"></a>02278       <span class="keywordflow">return</span> <a class="code" href="Soldier_01Create_8cpp.html#9012dd4ad15957a14b023ae9fee7c862">TacticalCreateSoldier</a>( &amp;pp, &amp;ubID );
<a name="l02279"></a>02279 }
<a name="l02280"></a>02280 
<a name="l02281"></a>02281 
<a name="l02282"></a><a class="code" href="Soldier_01Create_8h.html#0929954b7dc4577e2398801120e14024">02282</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#0929954b7dc4577e2398801120e14024">RandomizeRelativeLevel</a>( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> *pbRelLevel, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSoldierClass )
<a name="l02283"></a>02283 {
<a name="l02284"></a>02284       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubLocationModifier;
<a name="l02285"></a>02285       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bRollModifier;
<a name="l02286"></a>02286       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bRoll, bAdjustedRoll;
<a name="l02287"></a>02287 
<a name="l02288"></a>02288 
<a name="l02289"></a>02289       <span class="comment">// We now adjust the relative level by location on the map, so enemies in NE corner will be generally very crappy (lots</span>
<a name="l02290"></a>02290       <span class="comment">// of bad and poor, with avg about best), while enemies in the SW will have lots of great and good, with avg about as</span>
<a name="l02291"></a>02291       <span class="comment">// lousy as it gets.  Militia are generally unmodified by distance, and never get bad or great at all.</span>
<a name="l02292"></a>02292 
<a name="l02293"></a>02293       <span class="comment">// this returns 0 to DIFF_FACTOR_PALACE_DISTANCE (0 to +30)</span>
<a name="l02294"></a>02294       ubLocationModifier = <a class="code" href="Soldier_01Create_8cpp.html#0be6563e41a5ee887f115ca4f84c59f0">GetLocationModifier</a>( ubSoldierClass );
<a name="l02295"></a>02295 
<a name="l02296"></a>02296       <span class="comment">// convert to 0 to 10 (divide by 3), the subtract 5 to get a range of -5 to +5</span>
<a name="l02297"></a>02297       bRollModifier = ( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> ) ( ubLocationModifier / ( DIFF_FACTOR_PALACE_DISTANCE / 10 ) ) - 5;
<a name="l02298"></a>02298 
<a name="l02299"></a>02299       <span class="comment">// roll a number from 0 to 9</span>
<a name="l02300"></a>02300       bRoll = ( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> ) <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 10 );
<a name="l02301"></a>02301 
<a name="l02302"></a>02302       <span class="comment">// adjust by the modifier (giving -5 to +14)</span>
<a name="l02303"></a>02303       bAdjustedRoll = bRoll + bRollModifier;
<a name="l02304"></a>02304 
<a name="l02305"></a>02305       <span class="keywordflow">if</span> ( SOLDIER_CLASS_MILITIA( ubSoldierClass ) )
<a name="l02306"></a>02306       {
<a name="l02307"></a>02307             <span class="comment">// Militia never get to roll bad/great results at all (to avoid great equipment drops from them if killed)</span>
<a name="l02308"></a>02308             bAdjustedRoll = __max( 1, bAdjustedRoll );
<a name="l02309"></a>02309             bAdjustedRoll = __min( 8, bAdjustedRoll );
<a name="l02310"></a>02310             <span class="keywordflow">if</span>( <a class="code" href="Auto_01Resolve_8h.html#4753f4fa3d21585d4f721d7deba0cc0e">IsAutoResolveActive</a>() )
<a name="l02311"></a>02311             { <span class="comment">//Artificially strengthen militia strength for sake of gameplay</span>
<a name="l02312"></a>02312                   bAdjustedRoll++;
<a name="l02313"></a>02313             }
<a name="l02314"></a>02314       }
<a name="l02315"></a>02315       <span class="keywordflow">else</span>
<a name="l02316"></a>02316       {
<a name="l02317"></a>02317             <span class="comment">// max-min this to a range of 0-9</span>
<a name="l02318"></a>02318             bAdjustedRoll = __max( 0, bAdjustedRoll );
<a name="l02319"></a>02319             bAdjustedRoll = __min( 9, bAdjustedRoll );
<a name="l02320"></a>02320             <span class="keywordflow">if</span>( <a class="code" href="Auto_01Resolve_8h.html#4753f4fa3d21585d4f721d7deba0cc0e">IsAutoResolveActive</a>() )
<a name="l02321"></a>02321             { <span class="comment">//Artificially weaken enemy/creature strength for sake of gameplay</span>
<a name="l02322"></a>02322                   <span class="keywordflow">if</span>( bAdjustedRoll &gt; 0 )
<a name="l02323"></a>02323                   {
<a name="l02324"></a>02324                         bAdjustedRoll--;
<a name="l02325"></a>02325                   }
<a name="l02326"></a>02326             }
<a name="l02327"></a>02327       }
<a name="l02328"></a>02328 
<a name="l02329"></a>02329       <span class="keywordflow">switch</span> ( bAdjustedRoll )
<a name="l02330"></a>02330       {
<a name="l02331"></a>02331             <span class="keywordflow">case</span> 0:
<a name="l02332"></a>02332                   <span class="comment">// bad</span>
<a name="l02333"></a>02333                   *pbRelLevel = 0;
<a name="l02334"></a>02334                   <span class="keywordflow">break</span>;
<a name="l02335"></a>02335             <span class="keywordflow">case</span> 1:
<a name="l02336"></a>02336             <span class="keywordflow">case</span> 2:
<a name="l02337"></a>02337                   <span class="comment">// poor</span>
<a name="l02338"></a>02338                   *pbRelLevel = 1;
<a name="l02339"></a>02339                   <span class="keywordflow">break</span>;
<a name="l02340"></a>02340             <span class="keywordflow">case</span> 3:
<a name="l02341"></a>02341             <span class="keywordflow">case</span> 4:
<a name="l02342"></a>02342             <span class="keywordflow">case</span> 5:
<a name="l02343"></a>02343             <span class="keywordflow">case</span> 6:
<a name="l02344"></a>02344                   <span class="comment">// average</span>
<a name="l02345"></a>02345                   *pbRelLevel = 2;
<a name="l02346"></a>02346                   <span class="keywordflow">break</span>;
<a name="l02347"></a>02347             <span class="keywordflow">case</span> 7:
<a name="l02348"></a>02348             <span class="keywordflow">case</span> 8:
<a name="l02349"></a>02349                   <span class="comment">// good</span>
<a name="l02350"></a>02350                   *pbRelLevel = 3;
<a name="l02351"></a>02351                   <span class="keywordflow">break</span>;
<a name="l02352"></a>02352             <span class="keywordflow">case</span> 9:
<a name="l02353"></a>02353                   <span class="comment">// great</span>
<a name="l02354"></a>02354                   *pbRelLevel = 4;
<a name="l02355"></a>02355                   <span class="keywordflow">break</span>;
<a name="l02356"></a>02356 
<a name="l02357"></a>02357             <span class="keywordflow">default</span>:
<a name="l02358"></a>02358                   Assert( FALSE );
<a name="l02359"></a>02359                   *pbRelLevel = 2;
<a name="l02360"></a>02360                   <span class="keywordflow">break</span>;
<a name="l02361"></a>02361       }
<a name="l02362"></a>02362 
<a name="l02363"></a>02363 <span class="comment">/*</span>
<a name="l02364"></a>02364 <span class="comment">      if( IsAutoResolveActive() )</span>
<a name="l02365"></a>02365 <span class="comment">      { //Artificially strengthen militia strength for sake of gameplay</span>
<a name="l02366"></a>02366 <span class="comment">            if ( SOLDIER_CLASS_MILITIA( ubSoldierClass ) )</span>
<a name="l02367"></a>02367 <span class="comment">            {</span>
<a name="l02368"></a>02368 <span class="comment">                  *pbRelLevel = 4;</span>
<a name="l02369"></a>02369 <span class="comment">            }</span>
<a name="l02370"></a>02370 <span class="comment">            else</span>
<a name="l02371"></a>02371 <span class="comment">            {</span>
<a name="l02372"></a>02372 <span class="comment">                  *pbRelLevel = 0;</span>
<a name="l02373"></a>02373 <span class="comment">            }</span>
<a name="l02374"></a>02374 <span class="comment">      }</span>
<a name="l02375"></a>02375 <span class="comment">*/</span>
<a name="l02376"></a>02376 }
<a name="l02377"></a>02377 
<a name="l02378"></a>02378 
<a name="l02379"></a>02379 <span class="comment">//This function shouldn't be called outside of tactical</span>
<a name="l02380"></a><a class="code" href="Soldier_01Create_8h.html#cc75ac44a7ad691c36402333eaea0424">02380</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#cc75ac44a7ad691c36402333eaea0424">QuickCreateProfileMerc</a>( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bTeam, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubProfileID )
<a name="l02381"></a>02381 {
<a name="l02382"></a>02382       <span class="comment">// Create guy # X</span>
<a name="l02383"></a>02383       <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a>          MercCreateStruct;
<a name="l02384"></a>02384       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                                                       sWorldX, sWorldY, sSectorX, sSectorY, <a class="code" href="Cursor_01Modes_8cpp.html#0298c42f38cd304c86593f3bb2e5e24b">sGridX</a>, <a class="code" href="Cursor_01Modes_8cpp.html#43cc85c76f540d9385b198858dcabe0e">sGridY</a>;
<a name="l02385"></a>02385       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                                                 ubID;
<a name="l02386"></a>02386       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usMapPos;
<a name="l02387"></a>02387 
<a name="l02388"></a>02388       <span class="keywordflow">if</span> ( <a class="code" href="Isometric_01Utils_8cpp.html#6a816393235bbc8a30ec40b5feca3e91">GetMouseXY</a>( &amp;sGridX, &amp;sGridY ) )
<a name="l02389"></a>02389       {
<a name="l02390"></a>02390             usMapPos = MAPROWCOLTOPOS( sGridY, sGridX );
<a name="l02391"></a>02391             <span class="comment">// Get Grid Coordinates of mouse</span>
<a name="l02392"></a>02392             <span class="keywordflow">if</span> ( <a class="code" href="Isometric_01Utils_8cpp.html#f0d7560e84f5f243678261a4dfe0eec5">GetMouseWorldCoordsInCenter</a>( &amp;sWorldX, &amp;sWorldY ) )
<a name="l02393"></a>02393             {            
<a name="l02394"></a>02394                   <a class="code" href="strategicmap_8cpp.html#5e03b70aced19759d9729edaad51cc50">GetCurrentWorldSector</a>( &amp;sSectorX, &amp;sSectorY );
<a name="l02395"></a>02395 
<a name="l02396"></a>02396 
<a name="l02397"></a>02397                   memset( &amp;MercCreateStruct, 0, <span class="keyword">sizeof</span>( MercCreateStruct ) );
<a name="l02398"></a>02398                   MercCreateStruct.bTeam                    = bTeam;
<a name="l02399"></a>02399                   MercCreateStruct.ubProfile          = ubProfileID;
<a name="l02400"></a>02400                   MercCreateStruct.sSectorX                 = sSectorX;
<a name="l02401"></a>02401                   MercCreateStruct.sSectorY                 = sSectorY;
<a name="l02402"></a>02402                   MercCreateStruct.bSectorZ                 = <a class="code" href="strategicmap_8cpp.html#da715721a8ceedd42acf6ddb33e63ce0">gbWorldSectorZ</a>;
<a name="l02403"></a>02403                   MercCreateStruct.sInsertionGridNo         = usMapPos;
<a name="l02404"></a>02404 
<a name="l02405"></a>02405                   <a class="code" href="Soldier_01Create_8cpp.html#61eecbf43a5419be6c1b8891e7de1e32">RandomizeNewSoldierStats</a>( &amp;MercCreateStruct );
<a name="l02406"></a>02406 
<a name="l02407"></a>02407                   <span class="keywordflow">if</span> ( <a class="code" href="Soldier_01Create_8cpp.html#9012dd4ad15957a14b023ae9fee7c862">TacticalCreateSoldier</a>( &amp;MercCreateStruct, &amp;ubID ) )
<a name="l02408"></a>02408                   {
<a name="l02409"></a>02409                         <a class="code" href="Soldier_01Add_8cpp.html#182cbefb5f3430f43ce986f8e4614219">AddSoldierToSector</a>( ubID );
<a name="l02410"></a>02410 
<a name="l02411"></a>02411                         <span class="comment">// So we can see them!</span>
<a name="l02412"></a>02412                         <a class="code" href="opplist_8cpp.html#f4fab2865204e018ead0e5c076b97be4">AllTeamsLookForAll</a>(NO_INTERRUPTS);
<a name="l02413"></a>02413                   }
<a name="l02414"></a>02414             }
<a name="l02415"></a>02415       }
<a name="l02416"></a>02416 }
<a name="l02417"></a>02417 
<a name="l02418"></a><a class="code" href="Soldier_01Create_8cpp.html#4dec121f35f85b44ec2030167e53e688">02418</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#4dec121f35f85b44ec2030167e53e688">CopyProfileItems</a>( SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pCreateStruct )
<a name="l02419"></a>02419 {
<a name="l02420"></a>02420       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                                                cnt, cnt2;
<a name="l02421"></a>02421       <a class="code" href="structMERCPROFILESTRUCT.html">MERCPROFILESTRUCT</a> *           pProfile;
<a name="l02422"></a>02422       OBJECTTYPE                                Obj;
<a name="l02423"></a>02423       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                                                uiMoneyLeft, uiMoneyLimitInSlot;
<a name="l02424"></a>02424       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a>                                                  bSlot;
<a name="l02425"></a>02425 
<a name="l02426"></a>02426       pProfile = &amp;(<a class="code" href="Soldier_01Profile_8cpp.html#1bcff2c50b375b1eb32800aa12000289">gMercProfiles</a>[pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a>]);
<a name="l02427"></a>02427 
<a name="l02428"></a>02428       <span class="comment">// Copy over inv if we want to</span>
<a name="l02429"></a>02429       <span class="keywordflow">if</span> ( pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#03cb60f25b4a19bad86f9e866247fe58">fCopyProfileItemsOver</a> || <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#74a40a8aaf3efe840cdaf6be62556d82">bTeam</a> != OUR_TEAM )
<a name="l02430"></a>02430       {
<a name="l02431"></a>02431             <span class="keywordflow">if</span> (pCreateStruct-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#4754277f31a04d79a679b00a5e5dd198">fPlayerMerc</a>)
<a name="l02432"></a>02432             {
<a name="l02433"></a>02433                   <span class="comment">// do some special coding to put stuff in the profile in better-looking</span>
<a name="l02434"></a>02434                   <span class="comment">// spots</span>
<a name="l02435"></a>02435                   memset( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>, 0, <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a> * <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l02436"></a>02436                   <span class="keywordflow">for</span> ( cnt = 0; cnt &lt; <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a>; cnt++ )
<a name="l02437"></a>02437                   {
<a name="l02438"></a>02438                         <span class="keywordflow">if</span> ( pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#cfa933838ced4f570567383a509555f5">inv</a>[ cnt ] != NOTHING )
<a name="l02439"></a>02439                         {
<a name="l02440"></a>02440                               <a class="code" href="Items_8cpp.html#19aed5cbf530232ff0e01c7d6e58bd8e">CreateItems</a>( pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#cfa933838ced4f570567383a509555f5">inv</a>[ cnt ], pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#9714f8777eadf02e0e415a0ced87d524">bInvStatus</a>[ cnt ], pProfile-&gt;<a class="code" href="structMERCPROFILESTRUCT.html#cafd5e8e1fada3041586b85244a6a213">bInvNumber</a>[ cnt ], &amp;Obj );
<a name="l02441"></a>02441 <span class="comment">//                            if (Item[Obj.usItem].fFlags &amp; ITEM_ATTACHMENT)</span>
<a name="l02442"></a>02442                               <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> (<a class="code" href="Item_01Types_8h.html#f9dc4cc7a3a99ad5944940cfb7c82237">Item</a>[Obj.<a class="code" href="structOBJECTTYPE.html#4fbe05335f161f08f354566b8e5a0a19">usItem</a>].attachment )
<a name="l02443"></a>02443                               {
<a name="l02444"></a>02444                                     <span class="comment">// try to find the appropriate item to attach to!</span>
<a name="l02445"></a>02445                                     for ( cnt2 = 0; cnt2 &lt; NUM_INV_SLOTS; cnt2++ )
<a name="l02446"></a>02446                                     {
<a name="l02447"></a>02447                                           <span class="keywordflow">if</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ cnt2 ].<a class="code" href="structOBJECTTYPE.html#4fbe05335f161f08f354566b8e5a0a19">usItem</a> != NOTHING &amp;&amp; <a class="code" href="Items_8cpp.html#c2738205478e5d719720738a44f447e4">ValidAttachment</a>( Obj.<a class="code" href="structOBJECTTYPE.html#4fbe05335f161f08f354566b8e5a0a19">usItem</a>, <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ cnt2 ].<a class="code" href="structOBJECTTYPE.html#4fbe05335f161f08f354566b8e5a0a19">usItem</a> ) )
<a name="l02448"></a>02448                                           {
<a name="l02449"></a>02449                                                 <a class="code" href="Items_8cpp.html#50949f80fa93497497e84d167eedd853">AttachObject</a>( NULL, &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ cnt2 ]), &amp;Obj );
<a name="l02450"></a>02450                                                 <span class="keywordflow">break</span>;
<a name="l02451"></a>02451                                           }
<a name="l02452"></a>02452                                     }
<a name="l02453"></a>02453                                     <span class="keywordflow">if</span> (cnt2 == NUM_INV_SLOTS)
<a name="l02454"></a>02454                                     {
<a name="l02455"></a>02455                                           <span class="comment">// oh well, couldn't find anything to attach to!</span>
<a name="l02456"></a>02456                                           <a class="code" href="Items_8cpp.html#b0cdccd7f510d5464ab386cb5b69c28f">AutoPlaceObject</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, &amp;Obj, FALSE );
<a name="l02457"></a>02457                                     }
<a name="l02458"></a>02458                               }
<a name="l02459"></a>02459                               <span class="keywordflow">else</span>
<a name="l02460"></a>02460                               {
<a name="l02461"></a>02461                                     <a class="code" href="Items_8cpp.html#b0cdccd7f510d5464ab386cb5b69c28f">AutoPlaceObject</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, &amp;Obj, FALSE );
<a name="l02462"></a>02462                               }
<a name="l02463"></a>02463 
<a name="l02464"></a>02464                         }
<a name="l02465"></a>02465                   }
<a name="l02466"></a>02466                   pProfile-&gt;usOptionalGearCost = 0;
<a name="l02467"></a>02467             }
<a name="l02468"></a>02468             <span class="keywordflow">else</span>
<a name="l02469"></a>02469             {
<a name="l02470"></a>02470                   <span class="keywordflow">for</span> ( cnt = 0; cnt &lt; <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878553e9a668bdf9e2a72b855424ee1bdabcf">NUM_INV_SLOTS</a>; cnt++ )
<a name="l02471"></a>02471                   {
<a name="l02472"></a>02472                         <span class="keywordflow">if</span> ( pProfile-&gt;inv[ cnt ] != NOTHING )
<a name="l02473"></a>02473                         {
<a name="l02474"></a>02474                               <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> ( <a class="code" href="Item_01Types_8h.html#f9dc4cc7a3a99ad5944940cfb7c82237">Item</a>[ pProfile-&gt;inv[ cnt ] ].<a class="code" href="structINVTYPE.html#1f63e61536407cc997a998585017ba07">usItemClass</a> == IC_KEY )
<a name="l02475"></a>02475                               {
<a name="l02476"></a>02476                                     <span class="comment">// since keys depend on 2 values, they pretty much have to be hardcoded.</span>
<a name="l02477"></a>02477                                     <span class="comment">// and if a case isn't handled here it's better to not give any key than</span>
<a name="l02478"></a>02478                                     <span class="comment">// to provide one which doesn't work and would confuse everything.</span>
<a name="l02479"></a>02479                                     <span class="keywordflow">switch</span>( pCreateStruct-&gt;ubProfile )
<a name="l02480"></a>02480                                     {
<a name="l02481"></a>02481                                           <span class="keywordflow">case</span> <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa11431bd7936d3ec0c04f31524687a5f16">BREWSTER</a>:
<a name="l02482"></a>02482                                                 <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> ( pProfile-&gt;inv[ cnt ] &gt;= <a class="code" href="Item_01Types_8h.html#572f9555da77e1b21f4cd40aed8d20f435bcc2bc85513df4f3897a9d64a9c51c">KEY_1</a> &amp;&amp; pProfile-&gt;inv[ cnt ] &lt;= <a class="code" href="Item_01Types_8h.html#572f9555da77e1b21f4cd40aed8d20f4bbe899939829ccbf0ec5bc9ce3aa5414">KEY_32</a>)
<a name="l02483"></a>02483                                                 {
<a name="l02484"></a>02484                                                       <a class="code" href="Items_8cpp.html#586cb2a6f62ea8b5967025cc3507c4e3">CreateKeyObject</a>( &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ cnt ] ), pProfile-&gt;bInvNumber[ cnt ], 19 );
<a name="l02485"></a>02485                                                 }
<a name="l02486"></a>02486                                                 <span class="keywordflow">else</span>
<a name="l02487"></a>02487                                                 {
<a name="l02488"></a>02488                                                       memset( &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[cnt]), 0, <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l02489"></a>02489                                                 }
<a name="l02490"></a>02490                                                 <span class="keywordflow">break</span>;
<a name="l02491"></a>02491                                           <span class="keywordflow">case</span> <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa150ca0edb0ce9f339d7223f1b3029bafd">SKIPPER</a>:
<a name="l02492"></a>02492                                                 <span class="keywordflow">if</span> ( pProfile-&gt;inv[ cnt ] &gt;= <a class="code" href="Item_01Types_8h.html#572f9555da77e1b21f4cd40aed8d20f435bcc2bc85513df4f3897a9d64a9c51c">KEY_1</a> &amp;&amp; pProfile-&gt;inv[ cnt ] &lt;= <a class="code" href="Item_01Types_8h.html#572f9555da77e1b21f4cd40aed8d20f4bbe899939829ccbf0ec5bc9ce3aa5414">KEY_32</a>)
<a name="l02493"></a>02493                                                 {
<a name="l02494"></a>02494                                                       <a class="code" href="Items_8cpp.html#586cb2a6f62ea8b5967025cc3507c4e3">CreateKeyObject</a>( &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ cnt ] ), pProfile-&gt;bInvNumber[ cnt ], 11 );
<a name="l02495"></a>02495                                                 }
<a name="l02496"></a>02496                                                 <span class="keywordflow">else</span>
<a name="l02497"></a>02497                                                 {
<a name="l02498"></a>02498                                                       memset( &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[cnt]), 0, <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l02499"></a>02499                                                 }
<a name="l02500"></a>02500                                                 <span class="keywordflow">break</span>;
<a name="l02501"></a>02501                                           <span class="keywordflow">case</span> <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa11e00a2131ffcce8d7d675d79122b9764">DOREEN</a>:
<a name="l02502"></a>02502                                                 <span class="keywordflow">if</span> ( pProfile-&gt;inv[ cnt ] &gt;= <a class="code" href="Item_01Types_8h.html#572f9555da77e1b21f4cd40aed8d20f435bcc2bc85513df4f3897a9d64a9c51c">KEY_1</a> &amp;&amp; pProfile-&gt;inv[ cnt ] &lt;= <a class="code" href="Item_01Types_8h.html#572f9555da77e1b21f4cd40aed8d20f4bbe899939829ccbf0ec5bc9ce3aa5414">KEY_32</a>)
<a name="l02503"></a>02503                                                 {
<a name="l02504"></a>02504                                                       <a class="code" href="Items_8cpp.html#586cb2a6f62ea8b5967025cc3507c4e3">CreateKeyObject</a>( &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ cnt ] ), pProfile-&gt;bInvNumber[ cnt ], 32 );
<a name="l02505"></a>02505                                                 }
<a name="l02506"></a>02506                                                 <span class="keywordflow">else</span>
<a name="l02507"></a>02507                                                 {
<a name="l02508"></a>02508                                                       memset( &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[cnt]), 0, <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l02509"></a>02509                                                 }
<a name="l02510"></a>02510                                                 <span class="keywordflow">break</span>;
<a name="l02511"></a>02511                                           <span class="keywordflow">default</span>:
<a name="l02512"></a>02512                                                 memset( &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[cnt]), 0, <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l02513"></a>02513                                                 <span class="keywordflow">break</span>;
<a name="l02514"></a>02514                                     }
<a name="l02515"></a>02515                               }
<a name="l02516"></a>02516                               <span class="keywordflow">else</span>
<a name="l02517"></a>02517                               {
<a name="l02518"></a>02518                                     <a class="code" href="Items_8cpp.html#19aed5cbf530232ff0e01c7d6e58bd8e">CreateItems</a>( pProfile-&gt;inv[ cnt ], pProfile-&gt;bInvStatus[ cnt ], pProfile-&gt;bInvNumber[ cnt ], &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ cnt ] ) );
<a name="l02519"></a>02519                               }
<a name="l02520"></a>02520                               <span class="keywordflow">if</span> ( <a class="code" href="Item_01Types_8h.html#f9dc4cc7a3a99ad5944940cfb7c82237">Item</a>[pProfile-&gt;inv[ cnt ]].<a class="code" href="structINVTYPE.html#19c05d0847a1b463210c718e82d08c97">fingerprintid</a> )
<a name="l02521"></a>02521                               {
<a name="l02522"></a>02522                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ cnt ].<a class="code" href="structOBJECTTYPE.html#bbf8833330a114c5ff8d0d95e51bee92">ubImprintID</a> = <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#5a5648a1bb3507cc41f6be199c51a3f8">ubProfile</a>;
<a name="l02523"></a>02523                               }
<a name="l02524"></a>02524                               <span class="keywordflow">if</span> (<a class="code" href="Soldier_01Create_8cpp.html#6dc43f7808994e9356c9399ef75f0ecd">gubItemDroppableFlag</a>[cnt])
<a name="l02525"></a>02525                               {
<a name="l02526"></a>02526                                     <span class="keywordflow">if</span> (pProfile-&gt;ubInvUndroppable &amp; <a class="code" href="Soldier_01Create_8cpp.html#6dc43f7808994e9356c9399ef75f0ecd">gubItemDroppableFlag</a>[cnt])
<a name="l02527"></a>02527                                     {
<a name="l02528"></a>02528                                           <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[cnt].<a class="code" href="structOBJECTTYPE.html#0f1e67bac22f1b89c4040ef8a5ea48c2">fFlags</a> |= OBJECT_UNDROPPABLE;
<a name="l02529"></a>02529                                     }
<a name="l02530"></a>02530                               }
<a name="l02531"></a>02531                         }
<a name="l02532"></a>02532                         <span class="keywordflow">else</span>
<a name="l02533"></a>02533                         {
<a name="l02534"></a>02534                               memset( &amp;(<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[cnt]), 0, <span class="keyword">sizeof</span>( OBJECTTYPE ) );
<a name="l02535"></a>02535                         }
<a name="l02536"></a>02536                   }
<a name="l02537"></a>02537                   <span class="keywordflow">if</span> (pProfile-&gt;uiMoney &gt; 0)
<a name="l02538"></a>02538                   {
<a name="l02539"></a>02539                         uiMoneyLeft = pProfile-&gt;uiMoney;
<a name="l02540"></a>02540                         bSlot = <a class="code" href="Items_8cpp.html#452c8400689b9feb314c1ca5c1cf4dfa">FindEmptySlotWithin</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc8785521434ace88498823088a193622a0ab42">BIGPOCK1POS</a>, <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc87855e7a9bbc37a973fe20ce49d9b0fade02e">SMALLPOCK8POS</a> );
<a name="l02541"></a>02541 
<a name="l02542"></a>02542                         <span class="comment">// add in increments of </span>
<a name="l02543"></a>02543                         <span class="keywordflow">while</span> ( bSlot != NO_SLOT )
<a name="l02544"></a>02544                         {
<a name="l02545"></a>02545                               uiMoneyLimitInSlot = MAX_MONEY_PER_SLOT;
<a name="l02546"></a>02546                               <span class="keywordflow">if</span> ( bSlot &gt;= <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc878551eb77e72bc2a6d90ace592f5bbaa2514">SMALLPOCK1POS</a> )
<a name="l02547"></a>02547                               {
<a name="l02548"></a>02548                                     uiMoneyLimitInSlot /= 2;
<a name="l02549"></a>02549                               }
<a name="l02550"></a>02550 
<a name="l02551"></a>02551                               <a class="code" href="Items_8cpp.html#153f1fcda178d6758ff8b01cf7999170">CreateItem</a>( <a class="code" href="Item_01Types_8h.html#572f9555da77e1b21f4cd40aed8d20f4fbf7e82d9551a181f32f99564541f312">MONEY</a>, 100, &amp;( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ bSlot ] ) );
<a name="l02552"></a>02552                               <span class="keywordflow">if</span> ( uiMoneyLeft &gt; uiMoneyLimitInSlot )
<a name="l02553"></a>02553                               {
<a name="l02554"></a>02554                                     <span class="comment">// fill pocket with money</span>
<a name="l02555"></a>02555                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ bSlot ].<a class="code" href="structOBJECTTYPE.html#c1c1aff6f6a60e1a522bbe3cac327a88">uiMoneyAmount</a> = uiMoneyLimitInSlot;              
<a name="l02556"></a>02556                                     uiMoneyLeft -= uiMoneyLimitInSlot;              
<a name="l02557"></a>02557                               }
<a name="l02558"></a>02558                               <span class="keywordflow">else</span>
<a name="l02559"></a>02559                               {
<a name="l02560"></a>02560                                     <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#13c875b952b6d634680165d127a9870b">inv</a>[ bSlot ].<a class="code" href="structOBJECTTYPE.html#c1c1aff6f6a60e1a522bbe3cac327a88">uiMoneyAmount</a> = uiMoneyLeft;
<a name="l02561"></a>02561                                     <span class="comment">// done!</span>
<a name="l02562"></a>02562                                     <span class="keywordflow">break</span>;
<a name="l02563"></a>02563                               }
<a name="l02564"></a>02564 
<a name="l02565"></a>02565                               bSlot = <a class="code" href="Items_8cpp.html#452c8400689b9feb314c1ca5c1cf4dfa">FindEmptySlotWithin</a>( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>, <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc8785521434ace88498823088a193622a0ab42">BIGPOCK1POS</a>, <a class="code" href="Soldier_01Control_8h.html#2a5937706f1724c8f06a0396bdc87855e7a9bbc37a973fe20ce49d9b0fade02e">SMALLPOCK8POS</a> );
<a name="l02566"></a>02566                         }                 
<a name="l02567"></a>02567                   }
<a name="l02568"></a>02568             }
<a name="l02569"></a>02569       }
<a name="l02570"></a>02570 }
<a name="l02571"></a>02571 
<a name="l02572"></a>02572 <span class="comment">//SPECIAL!  Certain events in the game can cause profiled NPCs to become enemies.  The two cases are </span>
<a name="l02573"></a>02573 <span class="comment">//adding Mike and Iggy.  We will only add one NPC in any given combat and the conditions for setting</span>
<a name="l02574"></a>02574 <span class="comment">//the associated facts are done elsewhere.  The function will set the profile for the SOLDIERCREATE_STRUCT</span>
<a name="l02575"></a>02575 <span class="comment">//and the rest will be handled automatically so long the ubProfile field doesn't get changed.</span>
<a name="l02576"></a>02576 <span class="comment">//NOTE:  We don't want to add Mike or Iggy if this is being called from autoresolve!</span>
<a name="l02577"></a><a class="code" href="Soldier_01Create_8h.html#77852f4ba80e82fd71c96f27bfb27ac9">02577</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#77852f4ba80e82fd71c96f27bfb27ac9">OkayToUpgradeEliteToSpecialProfiledEnemy</a>( <a class="code" href="structSOLDIERCREATE__STRUCT.html">SOLDIERCREATE_STRUCT</a> *pp )
<a name="l02578"></a>02578 {
<a name="l02579"></a>02579       <span class="keywordflow">if</span>( !<a class="code" href="Soldier_01Create_8cpp.html#7b183c22c3d7f98a9e33932fc3997a89">gfProfiledEnemyAdded</a> &amp;&amp; <a class="code" href="PreBattle_01Interface_8cpp.html#4ae96b9450aa7ad5b95e307b4f87f10d">gubEnemyEncounterCode</a> != <a class="code" href="PreBattle_01Interface_8h.html#15b8f0a0cc23d28aafa1b827c46a5305ff568fd8c38cacba574000c4b61378db">ENEMY_ENCOUNTER_CODE</a> &amp;&amp; <a class="code" href="PreBattle_01Interface_8cpp.html#4ae96b9450aa7ad5b95e307b4f87f10d">gubEnemyEncounterCode</a> != <a class="code" href="PreBattle_01Interface_8h.html#15b8f0a0cc23d28aafa1b827c46a53054401e7ee5b6d3fbc6ec6f806764da387">ENEMY_INVASION_CODE</a> )
<a name="l02580"></a>02580       {
<a name="l02581"></a>02581             <span class="keywordflow">if</span>( <a class="code" href="Quests_8cpp.html#c2813b14c5c981423bf788f8f84a193a">gubFact</a>[ <a class="code" href="Quests_8h.html#aead3e57f613f07868a1b2afb6b943f179b85fe032f316caff3e366a7d9aec46">FACT_MIKE_AVAILABLE_TO_ARMY</a> ] == 1 &amp;&amp; !pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f9ba8f37aaf31e16d44ecb6fee567479">fOnRoof</a> )
<a name="l02582"></a>02582             {
<a name="l02583"></a>02583                   <a class="code" href="Quests_8cpp.html#c2813b14c5c981423bf788f8f84a193a">gubFact</a>[ <a class="code" href="Quests_8h.html#aead3e57f613f07868a1b2afb6b943f179b85fe032f316caff3e366a7d9aec46">FACT_MIKE_AVAILABLE_TO_ARMY</a> ] = 2; <span class="comment">//so it fails all subsequent checks</span>
<a name="l02584"></a>02584                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa1cd6fa1414157427517c57868ba12741d">MIKE</a>;
<a name="l02585"></a>02585                   <a class="code" href="Soldier_01Create_8cpp.html#7b183c22c3d7f98a9e33932fc3997a89">gfProfiledEnemyAdded</a> = TRUE;
<a name="l02586"></a>02586             }
<a name="l02587"></a>02587             <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="Quests_8cpp.html#c2813b14c5c981423bf788f8f84a193a">gubFact</a>[ <a class="code" href="Quests_8h.html#aead3e57f613f07868a1b2afb6b943f1f89836057c08b3f5ccdb79c9bd879a67">FACT_IGGY_AVAILABLE_TO_ARMY</a> ] == 1 &amp;&amp; !pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#f9ba8f37aaf31e16d44ecb6fee567479">fOnRoof</a> )
<a name="l02588"></a>02588             {
<a name="l02589"></a>02589                   <a class="code" href="Quests_8cpp.html#c2813b14c5c981423bf788f8f84a193a">gubFact</a>[ <a class="code" href="Quests_8h.html#aead3e57f613f07868a1b2afb6b943f1f89836057c08b3f5ccdb79c9bd879a67">FACT_IGGY_AVAILABLE_TO_ARMY</a> ] = 2; <span class="comment">//so it fails all subsequent checks</span>
<a name="l02590"></a>02590                   pp-&gt;<a class="code" href="structSOLDIERCREATE__STRUCT.html#10663f9fc2265e92b6ae3e5f2615578f">ubProfile</a> = <a class="code" href="Soldier_01Profile_8h.html#acaa92dcb344e96138c964deae3e2fa144281cee24ef1fbe6e691d2d407218d4">IGGY</a>;
<a name="l02591"></a>02591                   <a class="code" href="Soldier_01Create_8cpp.html#7b183c22c3d7f98a9e33932fc3997a89">gfProfiledEnemyAdded</a> = TRUE;
<a name="l02592"></a>02592             }
<a name="l02593"></a>02593       }
<a name="l02594"></a>02594 }
<a name="l02595"></a>02595 
<a name="l02596"></a>02596 
<a name="l02597"></a><a class="code" href="Soldier_01Create_8cpp.html#b107792242acc45a5608392d7c8bbf6e">02597</a> <span class="keywordtype">void</span> <a class="code" href="SaveLoadGame_8cpp.html#b107792242acc45a5608392d7c8bbf6e">TrashAllSoldiers</a>( )
<a name="l02598"></a>02598 {
<a name="l02599"></a>02599   <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a>       cnt;
<a name="l02600"></a>02600   SOLDIERTYPE *<a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>;
<a name="l02601"></a>02601 
<a name="l02602"></a>02602       cnt = 0;
<a name="l02603"></a>02603 
<a name="l02604"></a>02604       <span class="keywordflow">for</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a> = <a class="code" href="Overhead_8cpp.html#2b9a828d7d92ec404b2f9a39fc001177">MercPtrs</a>[ cnt ]; cnt &lt; MAX_NUM_SOLDIERS; <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>++, cnt++ )
<a name="l02605"></a>02605       {
<a name="l02606"></a>02606             <span class="keywordflow">if</span> ( <a class="code" href="aniviewscreen_8cpp.html#629cf92081f22af2ea4014413ff37801">pSoldier</a>-&gt;<a class="code" href="structSOLDIERTYPE.html#653dad4e2520784e293eca9f948b8532">bActive</a> )
<a name="l02607"></a>02607             {
<a name="l02608"></a>02608                   <span class="comment">// Delete from world</span>
<a name="l02609"></a>02609                   <a class="code" href="Soldier_01Create_8cpp.html#5761f369bb132d093e5ce84db76fd7cf">TacticalRemoveSoldier</a>( (<a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>)cnt );
<a name="l02610"></a>02610             }
<a name="l02611"></a>02611       }
<a name="l02612"></a>02612 }
<a name="l02613"></a>02613 
<a name="l02614"></a>02614 
<a name="l02615"></a>02615 
<a name="l02616"></a><a class="code" href="Soldier_01Create_8cpp.html#0be6563e41a5ee887f115ca4f84c59f0">02616</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> <a class="code" href="Soldier_01Create_8cpp.html#0be6563e41a5ee887f115ca4f84c59f0">GetLocationModifier</a>( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubSoldierClass )
<a name="l02617"></a>02617 {
<a name="l02618"></a>02618       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubLocationModifier;
<a name="l02619"></a>02619       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubPalaceDistance;
<a name="l02620"></a>02620       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sSectorX, sSectorY, sSectorZ;
<a name="l02621"></a>02621       <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> bTownId;
<a name="l02622"></a>02622       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fSuccess;
<a name="l02623"></a>02623 
<a name="l02624"></a>02624 
<a name="l02625"></a>02625       <span class="comment">// where is all this taking place?</span>
<a name="l02626"></a>02626       fSuccess = <a class="code" href="Auto_01Resolve_8h.html#beb08b59818b93322c734fbeb494a4ad">GetCurrentBattleSectorXYZ</a>( &amp;sSectorX, &amp;sSectorY, &amp;sSectorZ );
<a name="l02627"></a>02627       Assert( fSuccess );
<a name="l02628"></a>02628 
<a name="l02629"></a>02629       <span class="comment">// ignore sSectorZ - treat any underground enemies as if they were on the surface!</span>
<a name="l02630"></a>02630       bTownId = <a class="code" href="strategicmap_8cpp.html#99dffd29ea4571bc0c833d45636f1403">GetTownIdForSector</a>( sSectorX, sSectorY );
<a name="l02631"></a>02631 
<a name="l02632"></a>02632 
<a name="l02633"></a>02633       <span class="keywordflow">switch</span> ( bTownId )
<a name="l02634"></a>02634       {
<a name="l02635"></a>02635             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe1051ae6da30d1617c09899e280a04bde521">ORTA</a>:
<a name="l02636"></a>02636             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe10560f8283526f5d52c03edfd9bff8b218a">TIXA</a>:
<a name="l02637"></a>02637                   <span class="comment">// enemy troops in these special places are stronger than geography would indicate</span>
<a name="l02638"></a>02638                   ubPalaceDistance = 4;
<a name="l02639"></a>02639                   <span class="keywordflow">break</span>;
<a name="l02640"></a>02640 
<a name="l02641"></a>02641             <span class="keywordflow">case</span> <a class="code" href="mapscreen_8h.html#4d1dc70bee62b945929c96dfafebe105b27f427a025e60b9feb35edaa5556f63">ALMA</a>:
<a name="l02642"></a>02642                   <span class="comment">// enemy troops in these special places are stronger than geography would indicate</span>
<a name="l02643"></a>02643                   ubPalaceDistance = 10;
<a name="l02644"></a>02644                   <span class="keywordflow">break</span>;
<a name="l02645"></a>02645 
<a name="l02646"></a>02646             <span class="keywordflow">default</span>:
<a name="l02647"></a>02647                   <span class="comment">// how far is this sector from the palace ?</span>
<a name="l02648"></a>02648                   <span class="comment">// the distance returned is in sectors, and the possible range is about 0-20</span>
<a name="l02649"></a>02649                   ubPalaceDistance = <a class="code" href="Soldier_01Create_8cpp.html#76f053c15c29b1af69222cf1316fb73d">GetPythDistanceFromPalace</a>( sSectorX, sSectorY );
<a name="l02650"></a>02650                   <span class="keywordflow">if</span> ( ubPalaceDistance &gt; MAX_PALACE_DISTANCE )
<a name="l02651"></a>02651                   {
<a name="l02652"></a>02652                         ubPalaceDistance = MAX_PALACE_DISTANCE;
<a name="l02653"></a>02653                   }
<a name="l02654"></a>02654       }
<a name="l02655"></a>02655 
<a name="l02656"></a>02656       <span class="comment">// adjust for distance from Queen's palace (P3) (0 to +30)</span>
<a name="l02657"></a>02657       ubLocationModifier = ( ( MAX_PALACE_DISTANCE - ubPalaceDistance ) * DIFF_FACTOR_PALACE_DISTANCE ) / MAX_PALACE_DISTANCE;
<a name="l02658"></a>02658 
<a name="l02659"></a>02659       <span class="keywordflow">return</span>( ubLocationModifier );
<a name="l02660"></a>02660 }
<a name="l02661"></a>02661 
<a name="l02662"></a>02662 
<a name="l02663"></a>02663 
<a name="l02664"></a>02664 <span class="comment">// grab the distance from the palace</span>
<a name="l02665"></a><a class="code" href="Soldier_01Create_8h.html#76f053c15c29b1af69222cf1316fb73d">02665</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> <a class="code" href="Soldier_01Create_8cpp.html#76f053c15c29b1af69222cf1316fb73d">GetPythDistanceFromPalace</a>( <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sSectorX, <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sSectorY )
<a name="l02666"></a>02666 {
<a name="l02667"></a>02667       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubDistance = 0;
<a name="l02668"></a>02668       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a> sRows = 0, sCols = 0;
<a name="l02669"></a>02669       <span class="keywordtype">float</span> fValue = 0.0;
<a name="l02670"></a>02670 
<a name="l02671"></a>02671       <span class="comment">// grab number of rows and cols</span>
<a name="l02672"></a>02672       sRows = (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)(abs((sSectorX) - ( PALACE_SECTOR_X )));
<a name="l02673"></a>02673       sCols = (<a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>)(abs((sSectorY) - ( PALACE_SECTOR_Y )));
<a name="l02674"></a>02674 
<a name="l02675"></a>02675  
<a name="l02676"></a>02676       <span class="comment">// apply Pythagoras's theorem for right-handed triangle:</span>
<a name="l02677"></a>02677       <span class="comment">// dist^2 = rows^2 + cols^2, so use the square root to get the distance</span>
<a name="l02678"></a>02678       fValue = ( float )sqrt(( <span class="keywordtype">float</span> )(sRows * sRows) + ( <span class="keywordtype">float</span> )(sCols * sCols));
<a name="l02679"></a>02679 
<a name="l02680"></a>02680       <span class="keywordflow">if</span>(  fmod( fValue, 1.0f ) &gt;= 0.50 )
<a name="l02681"></a>02681       {
<a name="l02682"></a>02682             ubDistance = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)( 1 + fValue );
<a name="l02683"></a>02683       }
<a name="l02684"></a>02684       <span class="keywordflow">else</span>
<a name="l02685"></a>02685       {
<a name="l02686"></a>02686             ubDistance = ( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> )fValue;
<a name="l02687"></a>02687       }
<a name="l02688"></a>02688 
<a name="l02689"></a>02689       <span class="keywordflow">return</span>( ubDistance );
<a name="l02690"></a>02690 }
<a name="l02691"></a>02691 
<a name="l02692"></a>02692 
<a name="l02693"></a>02693 
<a name="l02694"></a><a class="code" href="Soldier_01Create_8cpp.html#fb6085cce840d328643552797aa3ee0f">02694</a> <span class="keywordtype">void</span> <a class="code" href="Soldier_01Create_8cpp.html#fb6085cce840d328643552797aa3ee0f">ReduceHighExpLevels</a>( <a class="code" href="Types_8h.html#7ebe70ceca856797319175e30bcf003d">INT8</a> *pbExpLevel )
<a name="l02695"></a>02695 {
<a name="l02696"></a>02696       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubRoll;
<a name="l02697"></a>02697       <span class="comment">// important: must reset these to 0 by default for logic to work!</span>
<a name="l02698"></a>02698       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubChanceLvl8 = 0;
<a name="l02699"></a>02699       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubChanceLvl7 = 0;
<a name="l02700"></a>02700       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubChanceLvl6 = 0;
<a name="l02701"></a>02701       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubChanceLvl5 = 0;
<a name="l02702"></a>02702 
<a name="l02703"></a>02703 
<a name="l02704"></a>02704       <span class="comment">// this function reduces the experience levels of very high level enemies to something that player can compete with</span>
<a name="l02705"></a>02705       <span class="comment">// for interrupts.  It doesn't affect attributes and skills, those are rolled prior to this reduction!</span>
<a name="l02706"></a>02706 
<a name="l02707"></a>02707 
<a name="l02708"></a>02708       <span class="comment">// adjust for game difficulty level</span>
<a name="l02709"></a>02709       <span class="keywordflow">switch</span>( <a class="code" href="GameSettings_8cpp.html#f9f2d5fd368ccadcc26bebc202d52ae7">gGameOptions</a>.<a class="code" href="structGAME__OPTIONS.html#4fb44167906152722f6af5cc9f7c1a99">ubDifficultyLevel</a> )
<a name="l02710"></a>02710       {
<a name="l02711"></a>02711             <span class="keywordflow">case</span> <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87eddbd3b0d23f4dc30ef17b50a14c3f54589">DIF_LEVEL_EASY</a>:
<a name="l02712"></a>02712                   <span class="comment">// max level: 6</span>
<a name="l02713"></a>02713                   <span class="keywordflow">switch</span> ( *pbExpLevel )
<a name="l02714"></a>02714                   {
<a name="l02715"></a>02715                         <span class="keywordflow">case</span> 6:
<a name="l02716"></a>02716                               ubChanceLvl6 = 25;
<a name="l02717"></a>02717                               ubChanceLvl5 = 100;
<a name="l02718"></a>02718                               <span class="keywordflow">break</span>;
<a name="l02719"></a>02719                         <span class="keywordflow">case</span> 7:
<a name="l02720"></a>02720                               ubChanceLvl6 = 50;
<a name="l02721"></a>02721                               ubChanceLvl5 = 100;
<a name="l02722"></a>02722                               <span class="keywordflow">break</span>;
<a name="l02723"></a>02723                         <span class="keywordflow">case</span> 8:
<a name="l02724"></a>02724                               ubChanceLvl6 = 75;
<a name="l02725"></a>02725                               ubChanceLvl5 = 100;
<a name="l02726"></a>02726                               <span class="keywordflow">break</span>;
<a name="l02727"></a>02727                         <span class="keywordflow">case</span> 9:
<a name="l02728"></a>02728                         <span class="keywordflow">case</span> 10: <span class="comment">// Madd</span>
<a name="l02729"></a>02729                               ubChanceLvl6 = 100;
<a name="l02730"></a>02730                               <span class="keywordflow">break</span>;
<a name="l02731"></a>02731                   }
<a name="l02732"></a>02732                   <span class="keywordflow">break</span>;
<a name="l02733"></a>02733 
<a name="l02734"></a>02734             <span class="keywordflow">case</span> <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87edddd0259b09fef163c6aa62268574191cb">DIF_LEVEL_MEDIUM</a>:
<a name="l02735"></a>02735                   <span class="comment">// max level: 7</span>
<a name="l02736"></a>02736                   <span class="keywordflow">switch</span> ( *pbExpLevel )
<a name="l02737"></a>02737                   {
<a name="l02738"></a>02738                         <span class="keywordflow">case</span> 7:
<a name="l02739"></a>02739                               ubChanceLvl7 = 25;
<a name="l02740"></a>02740                               ubChanceLvl6 = 100;
<a name="l02741"></a>02741                               <span class="keywordflow">break</span>;
<a name="l02742"></a>02742                         <span class="keywordflow">case</span> 8:
<a name="l02743"></a>02743                               ubChanceLvl7 = 50;
<a name="l02744"></a>02744                               ubChanceLvl6 = 100;
<a name="l02745"></a>02745                               <span class="keywordflow">break</span>;
<a name="l02746"></a>02746                         <span class="keywordflow">case</span> 9:
<a name="l02747"></a>02747                         <span class="keywordflow">case</span> 10: <span class="comment">// Madd</span>
<a name="l02748"></a>02748                               ubChanceLvl7 = 75;
<a name="l02749"></a>02749                               ubChanceLvl6 = 100;
<a name="l02750"></a>02750                               <span class="keywordflow">break</span>;
<a name="l02751"></a>02751                   }
<a name="l02752"></a>02752                   <span class="keywordflow">break</span>;
<a name="l02753"></a>02753 
<a name="l02754"></a>02754             <span class="keywordflow">case</span> <a class="code" href="GameSettings_8h.html#c205be2172292384dd687b5471a87edd3d0b73026f1c7122798d578613aa4575">DIF_LEVEL_HARD</a>:
<a name="l02755"></a>02755                   <span class="comment">// max level: 8</span>
<a name="l02756"></a>02756                   <span class="keywordflow">switch</span> ( *pbExpLevel )
<a name="l02757"></a>02757                   {
<a name="l02758"></a>02758                         <span class="keywordflow">case</span> 8:
<a name="l02759"></a>02759                               ubChanceLvl8 = 25;
<a name="l02760"></a>02760                               ubChanceLvl7 = 100;
<a name="l02761"></a>02761                               <span class="keywordflow">break</span>;
<a name="l02762"></a>02762                         <span class="keywordflow">case</span> 9:
<a name="l02763"></a>02763                         <span class="keywordflow">case</span> 10: <span class="comment">// Madd</span>
<a name="l02764"></a>02764                               ubChanceLvl8 = 50;
<a name="l02765"></a>02765                               ubChanceLvl7 = 100;
<a name="l02766"></a>02766                               <span class="keywordflow">break</span>;
<a name="l02767"></a>02767                   }
<a name="l02768"></a>02768                   <span class="keywordflow">break</span>;
<a name="l02769"></a>02769       }
<a name="l02770"></a>02770 
<a name="l02771"></a>02771 
<a name="l02772"></a>02772       ubRoll = ( <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ) <a class="code" href="Random_8cpp.html#49f938d1313ab6ef09ac6223a16ac334">Random</a>( 100 );
<a name="l02773"></a>02773 
<a name="l02774"></a>02774       <span class="keywordflow">if</span>                ( ubRoll &lt; ubChanceLvl8 )
<a name="l02775"></a>02775             *pbExpLevel = 8;
<a name="l02776"></a>02776       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ubRoll &lt; ubChanceLvl7 )
<a name="l02777"></a>02777             *pbExpLevel = 7;
<a name="l02778"></a>02778       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ubRoll &lt; ubChanceLvl6 )
<a name="l02779"></a>02779             *pbExpLevel = 6;
<a name="l02780"></a>02780       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ubRoll &lt; ubChanceLvl5 )
<a name="l02781"></a>02781             *pbExpLevel = 5;
<a name="l02782"></a>02782       <span class="comment">// else leave it alone</span>
<a name="l02783"></a>02783 
<a name="l02784"></a>02784 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Sep 9 13:49:01 2006 for Build by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
