<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Build: tiledef.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_3179ea33d55a76dc38212d9eab798728.html">export</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e5664b4b56927c8728eb3192fa60e338.html">hdc2</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_1eb12a41a47efb9efcd82fa98f4f4dbd.html">FTP</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_80cc1f21a78ab7941088ea567f236150.html">ja2src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_994ab287602efefceafe55287a3657d6.html">Build</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_b9856534af3903a3e1b7a173ba6b806c.html">TileEngine</a></div>
<h1>tiledef.cpp</h1><a href="tiledef_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifdef PRECOMPILEDHEADERS</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="TileEngine_01All_8h.html">TileEngine All.h</a>"</span>
<a name="l00003"></a>00003 <span class="preprocessor">#else</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">      #include "<a class="code" href="tiledef_8h.html">tiledef.h</a>"</span>
<a name="l00005"></a>00005 <span class="preprocessor">      #include "<a class="code" href="worlddef_8h.html">worlddef.h</a>"</span>
<a name="l00006"></a>00006 <span class="preprocessor">      #include &lt;stdio.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">      #include &lt;string.h&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">      #include "wcheck.h"</span>
<a name="l00009"></a>00009 <span class="preprocessor">      #include "stdlib.h"</span>
<a name="l00010"></a>00010 <span class="preprocessor">      #include "time.h"</span>
<a name="l00011"></a>00011 <span class="preprocessor">      #include "<a class="code" href="video_8h.html">video.h</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">      #include "debug.h"</span>
<a name="l00013"></a>00013 <span class="preprocessor">      #include "<a class="code" href="worldman_8h.html">worldman.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">      #include "<a class="code" href="gameloop_8h.html">gameloop.h</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">      #include "<a class="code" href="edit__sys_8h.html">edit_sys.h</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">      #include "pathai.h"</span>
<a name="l00017"></a>00017 <span class="preprocessor">      #include "tile surface.h"</span>
<a name="l00018"></a>00018 <span class="preprocessor">#endif</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="comment">//#include "editscreen.h"</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="comment">// GLobals</span>
<a name="l00024"></a><a class="code" href="tiledef_8h.html#44370e712d779c17b1688b11995cec77">00024</a> <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a>            <a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ <a class="code" href="TileDat_8h.html#3626eb77a4f637f63497920a218cf0e2d684bc586b31f71fc2f555719635f939">NUMBEROFTILES</a> ];
<a name="l00025"></a><a class="code" href="tiledef_8h.html#a56ae6fcb75ed7de3c202f15e2088ae8">00025</a> <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                              <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a>;
<a name="l00026"></a><a class="code" href="tiledef_8h.html#899257db123f6c75b179dfae9acc3c88">00026</a> <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                              <a class="code" href="tiledef_8cpp.html#899257db123f6c75b179dfae9acc3c88">gusNumAnimatedTiles</a> = 0;
<a name="l00027"></a><a class="code" href="tiledef_8h.html#f33c42d7e0ca9d5a04f759aaa913480a">00027</a> <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                              <a class="code" href="tiledef_8cpp.html#f33c42d7e0ca9d5a04f759aaa913480a">gusAnimatedTiles</a>[ MAX_ANIMATED_TILES ];
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00031"></a><a class="code" href="tiledef_8h.html#c678c275bd40fc1deec983df7ef10d1b">00031</a> <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                                    <a class="code" href="tiledef_8cpp.html#c678c275bd40fc1deec983df7ef10d1b">gTileTypeStartIndex</a>[ <a class="code" href="TileDat_8h.html#6a650646c036f06b5166f92a83f79748de2048e55668b32d6407d1e071d4a0c2">NUMBEROFTILETYPES</a> ];
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="tiledef_8cpp.html#306b34d683bdf1aafa2c462727452749">00033</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> <a class="code" href="Tactical_01Save_8cpp.html#306b34d683bdf1aafa2c462727452749">gubEncryptionArray2</a>[ BASE_NUMBER_OF_ROTATION_ARRAYS * 3 ][ NEW_ROTATION_ARRAY_SIZE ] =
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035     {
<a name="l00036"></a>00036     81,168,102,49,61,70,172,
<a name="l00037"></a>00037     127,7,148,115,179,10,117,
<a name="l00038"></a>00038     253,35,30,218,76,63,116,
<a name="l00039"></a>00039     210,241,65,169,157,4,9,
<a name="l00040"></a>00040     29,205,160,111,41,213,193,
<a name="l00041"></a>00041     190,86,19,207,133,25,190,
<a name="l00042"></a>00042     187,131,66,196,253,227,163
<a name="l00043"></a>00043     },
<a name="l00044"></a>00044     
<a name="l00045"></a>00045     {
<a name="l00046"></a>00046     236,81,128,26,96,137,92,
<a name="l00047"></a>00047     120,243,71,33,141,55,2,
<a name="l00048"></a>00048     185,185,187,33,230,72,146,
<a name="l00049"></a>00049     143,226,21,110,155,226,150,
<a name="l00050"></a>00050     111,124,165,242,4,76,201,
<a name="l00051"></a>00051     34,223,227,29,202,119,86,
<a name="l00052"></a>00052     172,219,8,121,183,148,142
<a name="l00053"></a>00053     },
<a name="l00054"></a>00054     
<a name="l00055"></a>00055     {
<a name="l00056"></a>00056     73,81,249,189,120,220,96,
<a name="l00057"></a>00057     79,28,37,30,199,170,56,
<a name="l00058"></a>00058     1,10,70,215,151,190,146,
<a name="l00059"></a>00059     156,233,11,251,146,195,134,
<a name="l00060"></a>00060     188,140,23,233,137,204,150,
<a name="l00061"></a>00061     116,36,97,40,119,204,194,
<a name="l00062"></a>00062     55,9,193,18,143,76,209
<a name="l00063"></a>00063     },
<a name="l00064"></a>00064     
<a name="l00065"></a>00065     {
<a name="l00066"></a>00066     143,200,80,50,154,231,247,
<a name="l00067"></a>00067     140,225,72,226,136,2,99,
<a name="l00068"></a>00068     209,182,82,146,128,49,3,
<a name="l00069"></a>00069     98,101,196,95,136,85,3,
<a name="l00070"></a>00070     81,37,131,9,251,79,209,
<a name="l00071"></a>00071     101,128,157,238,229,205,178,
<a name="l00072"></a>00072     49,161,141,101,175,48,2
<a name="l00073"></a>00073     },
<a name="l00074"></a>00074     
<a name="l00075"></a>00075     {
<a name="l00076"></a>00076     171,145,70,2,204,252,166,
<a name="l00077"></a>00077     194,2,182,182,189,17,205,
<a name="l00078"></a>00078     141,80,12,104,215,96,174,
<a name="l00079"></a>00079     11,106,181,150,113,213,71,
<a name="l00080"></a>00080     209,89,219,35,229,63,18,
<a name="l00081"></a>00081     64,237,140,153,224,215,31,
<a name="l00082"></a>00082     48,198,108,180,139,233,39
<a name="l00083"></a>00083     },
<a name="l00084"></a>00084     
<a name="l00085"></a>00085     {
<a name="l00086"></a>00086     31,60,240,131,203,6,32,
<a name="l00087"></a>00087     206,137,249,244,36,8,39,
<a name="l00088"></a>00088     38,142,11,77,76,18,200,
<a name="l00089"></a>00089     76,210,138,106,198,130,22,
<a name="l00090"></a>00090     37,178,76,18,233,77,149,
<a name="l00091"></a>00091     77,28,47,186,126,72,234,
<a name="l00092"></a>00092     254,158,97,10,162,58,93
<a name="l00093"></a>00093     },
<a name="l00094"></a>00094     
<a name="l00095"></a>00095     {
<a name="l00096"></a>00096     181,91,80,208,248,218,224,
<a name="l00097"></a>00097     90,219,176,181,120,63,35,
<a name="l00098"></a>00098     132,167,206,85,6,76,223,
<a name="l00099"></a>00099     90,15,100,142,121,79,111,
<a name="l00100"></a>00100     255,88,196,134,19,72,133,
<a name="l00101"></a>00101     40,95,98,232,153,217,182,
<a name="l00102"></a>00102     186,109,241,66,128,26,140
<a name="l00103"></a>00103     },
<a name="l00104"></a>00104     
<a name="l00105"></a>00105     {
<a name="l00106"></a>00106     225,112,22,157,253,52,123,
<a name="l00107"></a>00107     209,31,7,165,18,48,83,
<a name="l00108"></a>00108     190,53,154,87,188,199,251,
<a name="l00109"></a>00109     248,185,48,164,93,44,22,
<a name="l00110"></a>00110     165,77,239,88,148,21,155,
<a name="l00111"></a>00111     115,203,231,20,170,83,100,
<a name="l00112"></a>00112     222,204,57,83,39,241,126
<a name="l00113"></a>00113     },
<a name="l00114"></a>00114     
<a name="l00115"></a>00115     {
<a name="l00116"></a>00116     51,228,1,96,176,54,89,
<a name="l00117"></a>00117     49,157,66,125,113,124,187,
<a name="l00118"></a>00118     15,110,70,101,246,16,108,
<a name="l00119"></a>00119     156,20,32,200,96,70,170,
<a name="l00120"></a>00120     120,198,42,199,79,93,100,
<a name="l00121"></a>00121     115,246,113,213,187,66,169,
<a name="l00122"></a>00122     129,241,230,251,145,23,29
<a name="l00123"></a>00123     },
<a name="l00124"></a>00124     
<a name="l00125"></a>00125     {
<a name="l00126"></a>00126     101,67,67,78,108,22,58,
<a name="l00127"></a>00127     97,212,30,230,190,142,195,
<a name="l00128"></a>00128     243,169,75,210,61,248,180,
<a name="l00129"></a>00129     47,75,218,191,5,154,172,
<a name="l00130"></a>00130     19,204,224,123,244,251,1,
<a name="l00131"></a>00131     94,192,187,249,33,79,120,
<a name="l00132"></a>00132     115,109,88,173,40,7,61
<a name="l00133"></a>00133     },
<a name="l00134"></a>00134     
<a name="l00135"></a>00135     {
<a name="l00136"></a>00136     178,239,46,52,245,141,192,
<a name="l00137"></a>00137     77,114,7,54,78,179,195,
<a name="l00138"></a>00138     12,213,79,16,184,192,27,
<a name="l00139"></a>00139     100,195,74,5,1,15,226,
<a name="l00140"></a>00140     223,50,245,39,244,230,85,
<a name="l00141"></a>00141     8,196,217,18,128,187,251,
<a name="l00142"></a>00142     52,225,65,96,62,49,239
<a name="l00143"></a>00143     },
<a name="l00144"></a>00144     
<a name="l00145"></a>00145     {
<a name="l00146"></a>00146     94,190,122,81,36,204,171,
<a name="l00147"></a>00147     249,104,120,214,89,133,203,
<a name="l00148"></a>00148     103,19,163,117,53,59,48,
<a name="l00149"></a>00149     182,240,91,101,160,234,121,
<a name="l00150"></a>00150     1,78,151,26,3,28,228,
<a name="l00151"></a>00151     130,138,137,188,21,167,198,
<a name="l00152"></a>00152     197,34,63,165,195,11,206
<a name="l00153"></a>00153     },
<a name="l00154"></a>00154     
<a name="l00155"></a>00155     {
<a name="l00156"></a>00156     220,164,4,55,94,159,83,
<a name="l00157"></a>00157     86,186,109,101,150,60,4,
<a name="l00158"></a>00158     146,58,195,221,221,148,11,
<a name="l00159"></a>00159     50,155,232,95,39,71,37,
<a name="l00160"></a>00160     106,104,102,59,34,41,206,
<a name="l00161"></a>00161     61,129,242,45,11,12,85,
<a name="l00162"></a>00162     27,184,210,214,165,106,238
<a name="l00163"></a>00163     },
<a name="l00164"></a>00164     
<a name="l00165"></a>00165     {
<a name="l00166"></a>00166     44,151,227,47,39,93,122,
<a name="l00167"></a>00167     237,91,225,164,198,235,53,
<a name="l00168"></a>00168     226,36,124,86,57,94,185,
<a name="l00169"></a>00169     251,231,101,120,178,168,162,
<a name="l00170"></a>00170     218,38,34,33,126,235,196,
<a name="l00171"></a>00171     151,30,175,212,103,170,17,
<a name="l00172"></a>00172     208,48,75,16,231,10,66
<a name="l00173"></a>00173     },
<a name="l00174"></a>00174     
<a name="l00175"></a>00175     {
<a name="l00176"></a>00176     90,201,253,44,89,120,222,
<a name="l00177"></a>00177     145,82,80,6,63,114,22,
<a name="l00178"></a>00178     37,106,33,40,177,4,112,
<a name="l00179"></a>00179     152,9,70,250,103,229,235,
<a name="l00180"></a>00180     22,147,65,5,164,55,48,
<a name="l00181"></a>00181     233,103,112,216,69,34,63,
<a name="l00182"></a>00182     31,159,108,38,14,111,132
<a name="l00183"></a>00183     },
<a name="l00184"></a>00184     
<a name="l00185"></a>00185     {
<a name="l00186"></a>00186     170,177,43,7,140,86,71,
<a name="l00187"></a>00187     207,205,235,155,239,88,129,
<a name="l00188"></a>00188     53,6,111,139,249,208,172,
<a name="l00189"></a>00189     252,34,88,175,213,251,129,
<a name="l00190"></a>00190     86,54,242,107,142,144,79,
<a name="l00191"></a>00191     96,161,29,171,196,16,17,
<a name="l00192"></a>00192     143,205,207,201,47,88,10
<a name="l00193"></a>00193     },
<a name="l00194"></a>00194     
<a name="l00195"></a>00195     {
<a name="l00196"></a>00196     112,203,199,48,59,153,46,
<a name="l00197"></a>00197     130,221,189,166,213,63,67,
<a name="l00198"></a>00198     50,190,21,148,242,238,113,
<a name="l00199"></a>00199     94,28,228,234,100,103,187,
<a name="l00200"></a>00200     95,53,124,69,6,55,6,
<a name="l00201"></a>00201     39,204,11,231,64,176,183,
<a name="l00202"></a>00202     86,248,21,152,62,205,200
<a name="l00203"></a>00203     },
<a name="l00204"></a>00204     
<a name="l00205"></a>00205     {
<a name="l00206"></a>00206     133,189,180,176,46,27,167,
<a name="l00207"></a>00207     213,33,253,7,209,112,92,
<a name="l00208"></a>00208     8,60,122,206,229,50,184,
<a name="l00209"></a>00209     207,25,142,34,149,64,234,
<a name="l00210"></a>00210     16,252,247,255,22,70,90,
<a name="l00211"></a>00211     126,212,16,93,248,50,89,
<a name="l00212"></a>00212     194,248,244,230,224,203,62
<a name="l00213"></a>00213     },
<a name="l00214"></a>00214     
<a name="l00215"></a>00215     {
<a name="l00216"></a>00216     234,231,52,206,57,230,130,
<a name="l00217"></a>00217     158,240,79,58,175,226,31,
<a name="l00218"></a>00218     213,160,154,113,199,241,84,
<a name="l00219"></a>00219     178,66,108,201,41,240,188,
<a name="l00220"></a>00220     24,9,50,145,172,208,226,
<a name="l00221"></a>00221     100,127,42,93,55,123,245,
<a name="l00222"></a>00222     197,102,110,206,48,234,81
<a name="l00223"></a>00223     },
<a name="l00224"></a>00224     
<a name="l00225"></a>00225     {
<a name="l00226"></a>00226     176,193,13,70,253,101,15,
<a name="l00227"></a>00227     39,156,34,168,239,92,185,
<a name="l00228"></a>00228     235,239,109,151,115,6,12,
<a name="l00229"></a>00229     184,92,210,40,152,12,36,
<a name="l00230"></a>00230     57,183,30,136,247,232,152,
<a name="l00231"></a>00231     77,59,225,190,208,165,59,
<a name="l00232"></a>00232     133,118,100,111,45,20,177
<a name="l00233"></a>00233     },
<a name="l00234"></a>00234     
<a name="l00235"></a>00235     {
<a name="l00236"></a>00236     242,224,56,94,247,232,26,
<a name="l00237"></a>00237     5,5,92,145,57,226,205,
<a name="l00238"></a>00238     229,79,2,235,214,16,252,
<a name="l00239"></a>00239     135,176,247,51,4,190,78,
<a name="l00240"></a>00240     45,155,6,184,220,121,136,
<a name="l00241"></a>00241     151,66,29,253,210,166,255,
<a name="l00242"></a>00242     75,82,234,246,152,230,26
<a name="l00243"></a>00243     },
<a name="l00244"></a>00244     
<a name="l00245"></a>00245     {
<a name="l00246"></a>00246     71,92,199,196,224,54,108,
<a name="l00247"></a>00247     71,191,224,240,145,231,54,
<a name="l00248"></a>00248     198,135,241,115,219,139,162,
<a name="l00249"></a>00249     178,253,95,131,237,175,212,
<a name="l00250"></a>00250     251,85,23,132,211,92,89,
<a name="l00251"></a>00251     14,166,88,5,254,58,254,
<a name="l00252"></a>00252     204,5,41,160,72,105,230
<a name="l00253"></a>00253     },
<a name="l00254"></a>00254     
<a name="l00255"></a>00255     {
<a name="l00256"></a>00256     122,240,140,138,243,30,90,
<a name="l00257"></a>00257     95,32,36,108,168,91,94,
<a name="l00258"></a>00258     223,161,93,96,118,32,153,
<a name="l00259"></a>00259     235,41,222,65,8,181,221,
<a name="l00260"></a>00260     196,207,70,218,41,74,198,
<a name="l00261"></a>00261     79,6,240,9,240,142,41,
<a name="l00262"></a>00262     69,48,113,102,15,168,239
<a name="l00263"></a>00263     },
<a name="l00264"></a>00264     
<a name="l00265"></a>00265     {
<a name="l00266"></a>00266     33,100,248,1,115,220,254,
<a name="l00267"></a>00267     216,113,156,238,175,27,36,
<a name="l00268"></a>00268     61,20,255,131,209,181,91,
<a name="l00269"></a>00269     40,126,238,227,186,46,228,
<a name="l00270"></a>00270     253,64,201,169,138,5,71,
<a name="l00271"></a>00271     30,20,119,212,255,127,121,
<a name="l00272"></a>00272     170,240,13,84,96,212,210
<a name="l00273"></a>00273     },
<a name="l00274"></a>00274     
<a name="l00275"></a>00275     {
<a name="l00276"></a>00276     213,91,87,107,184,54,252,
<a name="l00277"></a>00277     30,240,165,139,29,230,205,
<a name="l00278"></a>00278     42,49,78,136,10,113,160,
<a name="l00279"></a>00279     132,246,82,211,200,164,178,
<a name="l00280"></a>00280     112,128,15,43,150,157,197,
<a name="l00281"></a>00281     88,7,48,126,75,210,2,
<a name="l00282"></a>00282     196,228,191,100,25,80,254
<a name="l00283"></a>00283     },
<a name="l00284"></a>00284     
<a name="l00285"></a>00285     {
<a name="l00286"></a>00286     161,100,85,71,23,7,176,
<a name="l00287"></a>00287     250,104,108,62,88,195,110,
<a name="l00288"></a>00288     27,102,177,102,127,163,105,
<a name="l00289"></a>00289     65,133,21,24,117,155,208,
<a name="l00290"></a>00290     39,37,206,154,225,85,176,
<a name="l00291"></a>00291     161,128,129,8,6,18,114,
<a name="l00292"></a>00292     12,53,53,165,90,177,26
<a name="l00293"></a>00293     },
<a name="l00294"></a>00294     
<a name="l00295"></a>00295     {
<a name="l00296"></a>00296     36,101,106,199,26,144,50,
<a name="l00297"></a>00297     33,13,177,101,149,6,56,
<a name="l00298"></a>00298     112,251,141,157,46,152,191,
<a name="l00299"></a>00299     112,214,180,104,160,119,202,
<a name="l00300"></a>00300     112,75,167,190,116,185,126,
<a name="l00301"></a>00301     27,229,214,110,194,128,191,
<a name="l00302"></a>00302     19,24,123,193,148,15,69
<a name="l00303"></a>00303     },
<a name="l00304"></a>00304     
<a name="l00305"></a>00305     {
<a name="l00306"></a>00306     94,179,36,34,168,18,167,
<a name="l00307"></a>00307     136,168,214,94,144,245,66,
<a name="l00308"></a>00308     241,83,82,74,25,138,106,
<a name="l00309"></a>00309     213,7,78,133,181,254,75,
<a name="l00310"></a>00310     73,230,160,60,93,65,204,
<a name="l00311"></a>00311     19,24,42,169,150,246,86,
<a name="l00312"></a>00312     182,211,11,68,108,69,44
<a name="l00313"></a>00313     },
<a name="l00314"></a>00314     
<a name="l00315"></a>00315     {
<a name="l00316"></a>00316     127,97,243,9,60,97,125,
<a name="l00317"></a>00317     234,114,130,69,83,11,157,
<a name="l00318"></a>00318     186,44,46,37,4,205,85,
<a name="l00319"></a>00319     226,218,134,60,127,11,227,
<a name="l00320"></a>00320     55,80,85,109,26,120,25,
<a name="l00321"></a>00321     19,60,173,155,255,182,196,
<a name="l00322"></a>00322     64,12,112,91,145,131,23
<a name="l00323"></a>00323     },
<a name="l00324"></a>00324     
<a name="l00325"></a>00325     {
<a name="l00326"></a>00326     166,108,127,147,227,40,125,
<a name="l00327"></a>00327     27,76,18,129,108,39,24,
<a name="l00328"></a>00328     100,92,205,245,147,59,47,
<a name="l00329"></a>00329     190,251,54,204,28,72,76,
<a name="l00330"></a>00330     151,24,71,228,181,206,140,
<a name="l00331"></a>00331     172,161,216,38,201,154,203,
<a name="l00332"></a>00332     141,252,226,169,135,208,183
<a name="l00333"></a>00333     },
<a name="l00334"></a>00334     
<a name="l00335"></a>00335     {
<a name="l00336"></a>00336     143,63,98,145,133,62,237,
<a name="l00337"></a>00337     139,191,134,154,119,47,128,
<a name="l00338"></a>00338     196,154,179,252,48,125,206,
<a name="l00339"></a>00339     245,106,207,37,87,203,218,
<a name="l00340"></a>00340     175,115,73,116,243,111,167,
<a name="l00341"></a>00341     231,22,81,34,216,26,234,
<a name="l00342"></a>00342     36,136,62,97,46,137,172
<a name="l00343"></a>00343     },
<a name="l00344"></a>00344     
<a name="l00345"></a>00345     {
<a name="l00346"></a>00346     125,118,61,116,135,101,54,
<a name="l00347"></a>00347     15,215,129,210,84,238,226,
<a name="l00348"></a>00348     43,56,40,197,174,30,226,
<a name="l00349"></a>00349     95,117,34,65,115,192,53,
<a name="l00350"></a>00350     67,222,155,83,103,157,18,
<a name="l00351"></a>00351     188,158,107,3,133,177,144,
<a name="l00352"></a>00352     242,76,231,253,233,120,19
<a name="l00353"></a>00353     },
<a name="l00354"></a>00354     
<a name="l00355"></a>00355     {
<a name="l00356"></a>00356     65,199,211,202,123,9,216,
<a name="l00357"></a>00357     255,223,125,141,168,222,211,
<a name="l00358"></a>00358     71,184,143,146,32,40,117,
<a name="l00359"></a>00359     82,140,45,50,203,212,115,
<a name="l00360"></a>00360     70,166,219,132,100,127,245,
<a name="l00361"></a>00361     11,146,38,66,68,135,130,
<a name="l00362"></a>00362     71,59,123,29,51,25,249
<a name="l00363"></a>00363     },
<a name="l00364"></a>00364     
<a name="l00365"></a>00365     {
<a name="l00366"></a>00366     190,161,56,194,42,46,58,
<a name="l00367"></a>00367     104,89,177,209,173,64,141,
<a name="l00368"></a>00368     117,68,136,202,201,9,67,
<a name="l00369"></a>00369     112,209,78,255,233,204,77,
<a name="l00370"></a>00370     72,199,213,85,252,204,10,
<a name="l00371"></a>00371     221,117,125,115,252,250,46,
<a name="l00372"></a>00372     101,111,125,194,139,186,255
<a name="l00373"></a>00373     },
<a name="l00374"></a>00374     
<a name="l00375"></a>00375     {
<a name="l00376"></a>00376     31,86,139,193,121,21,227,
<a name="l00377"></a>00377     136,133,87,49,18,190,230,
<a name="l00378"></a>00378     224,29,177,1,149,9,151,
<a name="l00379"></a>00379     24,129,123,31,191,15,12,
<a name="l00380"></a>00380     186,16,109,103,75,43,16,
<a name="l00381"></a>00381     233,124,37,188,28,178,253,
<a name="l00382"></a>00382     78,27,215,234,165,87,234
<a name="l00383"></a>00383     },
<a name="l00384"></a>00384     
<a name="l00385"></a>00385     {
<a name="l00386"></a>00386     170,4,161,157,18,78,11,
<a name="l00387"></a>00387     223,148,86,130,184,244,199,
<a name="l00388"></a>00388     171,43,229,209,235,160,189,
<a name="l00389"></a>00389     23,30,145,9,19,238,221,
<a name="l00390"></a>00390     41,113,74,156,184,137,226,
<a name="l00391"></a>00391     186,241,135,67,86,193,87,
<a name="l00392"></a>00392     95,11,215,251,31,39,80
<a name="l00393"></a>00393     },
<a name="l00394"></a>00394     
<a name="l00395"></a>00395     {
<a name="l00396"></a>00396     85,223,21,67,248,93,201,
<a name="l00397"></a>00397     234,55,255,161,143,221,252,
<a name="l00398"></a>00398     110,10,206,90,36,240,21,
<a name="l00399"></a>00399     39,237,78,109,10,6,248,
<a name="l00400"></a>00400     7,125,44,88,104,198,17,
<a name="l00401"></a>00401     195,47,15,140,61,184,167,
<a name="l00402"></a>00402     251,182,72,224,147,159,196
<a name="l00403"></a>00403     },
<a name="l00404"></a>00404     
<a name="l00405"></a>00405     {
<a name="l00406"></a>00406     123,19,239,168,30,154,104,
<a name="l00407"></a>00407     60,207,7,69,172,234,176,
<a name="l00408"></a>00408     23,31,137,211,242,79,208,
<a name="l00409"></a>00409     145,194,222,40,205,220,218,
<a name="l00410"></a>00410     202,197,167,163,162,203,119,
<a name="l00411"></a>00411     188,250,215,100,172,230,115,
<a name="l00412"></a>00412     79,119,241,177,204,213,247
<a name="l00413"></a>00413     },
<a name="l00414"></a>00414     
<a name="l00415"></a>00415     {
<a name="l00416"></a>00416     164,47,183,166,25,101,55,
<a name="l00417"></a>00417     173,255,232,132,251,73,117,
<a name="l00418"></a>00418     235,22,152,184,146,245,171,
<a name="l00419"></a>00419     192,242,110,184,81,188,135,
<a name="l00420"></a>00420     183,224,50,201,210,124,141,
<a name="l00421"></a>00421     254,235,54,153,73,133,105,
<a name="l00422"></a>00422     251,27,228,131,103,255,205
<a name="l00423"></a>00423     },
<a name="l00424"></a>00424     
<a name="l00425"></a>00425     {
<a name="l00426"></a>00426     141,53,177,160,37,136,109,
<a name="l00427"></a>00427     76,46,150,5,207,226,32,
<a name="l00428"></a>00428     160,180,136,191,175,88,111,
<a name="l00429"></a>00429     36,245,86,149,192,56,237,
<a name="l00430"></a>00430     119,37,117,196,117,115,54,
<a name="l00431"></a>00431     203,93,49,208,170,113,233,
<a name="l00432"></a>00432     46,143,140,211,5,170,166
<a name="l00433"></a>00433     },
<a name="l00434"></a>00434     
<a name="l00435"></a>00435     {
<a name="l00436"></a>00436     2,245,56,116,61,150,114,
<a name="l00437"></a>00437     76,28,201,61,29,126,115,
<a name="l00438"></a>00438     226,153,233,246,200,95,246,
<a name="l00439"></a>00439     112,88,77,97,48,22,186,
<a name="l00440"></a>00440     203,102,27,213,211,119,235,
<a name="l00441"></a>00441     204,147,244,229,21,29,175,
<a name="l00442"></a>00442     52,103,21,222,146,203,247
<a name="l00443"></a>00443     },
<a name="l00444"></a>00444     
<a name="l00445"></a>00445     {
<a name="l00446"></a>00446     203,187,75,44,10,228,157,
<a name="l00447"></a>00447     113,156,9,120,202,29,117,
<a name="l00448"></a>00448     184,122,64,90,44,31,194,
<a name="l00449"></a>00449     191,30,155,50,190,115,208,
<a name="l00450"></a>00450     130,69,132,201,246,81,100,
<a name="l00451"></a>00451     108,67,226,228,85,112,150,
<a name="l00452"></a>00452     243,222,107,49,158,2,199
<a name="l00453"></a>00453     },
<a name="l00454"></a>00454     
<a name="l00455"></a>00455     {
<a name="l00456"></a>00456     243,107,29,155,25,62,54,
<a name="l00457"></a>00457     254,77,132,226,20,121,227,
<a name="l00458"></a>00458     78,33,189,27,153,172,240,
<a name="l00459"></a>00459     78,17,13,117,133,92,119,
<a name="l00460"></a>00460     205,123,66,233,177,141,20,
<a name="l00461"></a>00461     2,21,244,85,47,218,7,
<a name="l00462"></a>00462     194,47,175,180,65,92,188
<a name="l00463"></a>00463     },
<a name="l00464"></a>00464     
<a name="l00465"></a>00465     {
<a name="l00466"></a>00466     3,223,186,179,171,112,64,
<a name="l00467"></a>00467     226,172,223,83,208,235,215,
<a name="l00468"></a>00468     235,20,187,212,96,218,104,
<a name="l00469"></a>00469     41,66,233,141,50,89,115,
<a name="l00470"></a>00470     102,35,34,147,219,175,203,
<a name="l00471"></a>00471     216,121,7,60,166,18,77,
<a name="l00472"></a>00472     246,202,53,41,124,33,72
<a name="l00473"></a>00473     },
<a name="l00474"></a>00474     
<a name="l00475"></a>00475     {
<a name="l00476"></a>00476     115,8,155,105,168,30,132,
<a name="l00477"></a>00477     213,57,253,89,18,62,83,
<a name="l00478"></a>00478     13,138,197,40,21,218,47,
<a name="l00479"></a>00479     156,13,133,209,66,82,67,
<a name="l00480"></a>00480     99,176,107,172,80,52,146,
<a name="l00481"></a>00481     108,148,19,61,193,41,114,
<a name="l00482"></a>00482     250,121,164,57,125,29,35
<a name="l00483"></a>00483     },
<a name="l00484"></a>00484     
<a name="l00485"></a>00485     {
<a name="l00486"></a>00486     252,37,152,15,100,236,254,
<a name="l00487"></a>00487     226,253,7,172,123,6,10,
<a name="l00488"></a>00488     139,17,7,254,146,114,216,
<a name="l00489"></a>00489     45,95,154,241,252,4,47,
<a name="l00490"></a>00490     134,193,201,19,97,207,39,
<a name="l00491"></a>00491     144,254,165,157,60,218,144,
<a name="l00492"></a>00492     173,48,97,157,173,165,139
<a name="l00493"></a>00493     },
<a name="l00494"></a>00494     
<a name="l00495"></a>00495     {
<a name="l00496"></a>00496     43,160,148,141,246,225,109,
<a name="l00497"></a>00497     162,9,196,127,84,62,238,
<a name="l00498"></a>00498     41,82,224,161,103,65,28,
<a name="l00499"></a>00499     169,227,113,157,43,7,17,
<a name="l00500"></a>00500     78,6,67,179,102,7,16,
<a name="l00501"></a>00501     186,197,164,203,143,211,114,
<a name="l00502"></a>00502     255,34,222,17,63,184,47
<a name="l00503"></a>00503     },
<a name="l00504"></a>00504     
<a name="l00505"></a>00505     {
<a name="l00506"></a>00506     202,17,101,190,148,37,65,
<a name="l00507"></a>00507     227,178,78,200,202,174,105,
<a name="l00508"></a>00508     90,13,220,198,78,74,44,
<a name="l00509"></a>00509     37,172,23,111,225,219,23,
<a name="l00510"></a>00510     223,119,96,149,12,206,14,
<a name="l00511"></a>00511     131,243,148,179,37,120,26,
<a name="l00512"></a>00512     168,77,232,223,65,125,224
<a name="l00513"></a>00513     },
<a name="l00514"></a>00514     
<a name="l00515"></a>00515     {
<a name="l00516"></a>00516     95,160,190,37,50,215,151,
<a name="l00517"></a>00517     196,31,209,227,48,62,1,
<a name="l00518"></a>00518     249,123,173,73,232,137,16,
<a name="l00519"></a>00519     25,39,88,73,51,149,31,
<a name="l00520"></a>00520     178,19,34,120,74,112,230,
<a name="l00521"></a>00521     97,243,213,31,34,121,189,
<a name="l00522"></a>00522     200,255,68,57,75,208,129
<a name="l00523"></a>00523     },
<a name="l00524"></a>00524     
<a name="l00525"></a>00525     {
<a name="l00526"></a>00526     135,244,60,186,169,184,217,
<a name="l00527"></a>00527     128,88,234,225,59,98,108,
<a name="l00528"></a>00528     180,189,228,11,222,179,81,
<a name="l00529"></a>00529     129,225,122,192,210,117,133,
<a name="l00530"></a>00530     142,124,112,228,166,55,29,
<a name="l00531"></a>00531     3,133,178,40,47,107,31,
<a name="l00532"></a>00532     237,22,170,212,75,186,142
<a name="l00533"></a>00533     },
<a name="l00534"></a>00534     
<a name="l00535"></a>00535     {
<a name="l00536"></a>00536     254,191,1,222,153,4,115,
<a name="l00537"></a>00537     100,149,222,68,112,139,102,
<a name="l00538"></a>00538     61,231,195,98,156,181,242,
<a name="l00539"></a>00539     24,137,44,136,34,43,76,
<a name="l00540"></a>00540     219,155,8,100,28,81,181,
<a name="l00541"></a>00541     252,75,50,126,154,46,177,
<a name="l00542"></a>00542     11,53,126,99,180,248,57
<a name="l00543"></a>00543     },
<a name="l00544"></a>00544     
<a name="l00545"></a>00545     {
<a name="l00546"></a>00546     109,132,42,96,40,141,189,
<a name="l00547"></a>00547     8,138,168,147,13,172,54,
<a name="l00548"></a>00548     196,69,7,241,14,128,187,
<a name="l00549"></a>00549     124,187,63,140,172,27,97,
<a name="l00550"></a>00550     195,63,235,191,196,254,187,
<a name="l00551"></a>00551     234,123,1,174,6,88,6,
<a name="l00552"></a>00552     177,247,45,156,120,226,125
<a name="l00553"></a>00553     },
<a name="l00554"></a>00554     
<a name="l00555"></a>00555     {
<a name="l00556"></a>00556     30,95,46,155,25,137,245,
<a name="l00557"></a>00557     52,68,72,74,137,152,60,
<a name="l00558"></a>00558     3,26,152,42,137,223,113,
<a name="l00559"></a>00559     244,114,229,1,192,53,115,
<a name="l00560"></a>00560     90,174,232,119,234,38,77,
<a name="l00561"></a>00561     114,195,46,6,151,52,203,
<a name="l00562"></a>00562     85,96,69,205,58,68,39
<a name="l00563"></a>00563     },
<a name="l00564"></a>00564     
<a name="l00565"></a>00565     {
<a name="l00566"></a>00566     30,59,201,53,236,197,180,
<a name="l00567"></a>00567     160,196,103,128,88,254,209,
<a name="l00568"></a>00568     225,82,124,227,135,183,59,
<a name="l00569"></a>00569     172,203,39,154,168,155,144,
<a name="l00570"></a>00570     235,35,68,198,41,8,87,
<a name="l00571"></a>00571     105,92,255,110,51,167,55,
<a name="l00572"></a>00572     248,69,103,157,208,146,105
<a name="l00573"></a>00573     },
<a name="l00574"></a>00574     
<a name="l00575"></a>00575     {
<a name="l00576"></a>00576     249,205,245,168,172,15,16,
<a name="l00577"></a>00577     148,112,53,141,74,5,64,
<a name="l00578"></a>00578     218,194,253,75,243,113,168,
<a name="l00579"></a>00579     228,80,59,85,44,153,81,
<a name="l00580"></a>00580     216,126,55,215,165,220,72,
<a name="l00581"></a>00581     217,83,199,41,128,227,208,
<a name="l00582"></a>00582     24,3,173,137,18,75,53
<a name="l00583"></a>00583     },
<a name="l00584"></a>00584     
<a name="l00585"></a>00585     {
<a name="l00586"></a>00586     21,130,191,209,19,213,58,
<a name="l00587"></a>00587     123,18,147,139,147,81,14,
<a name="l00588"></a>00588     156,255,245,64,150,115,131,
<a name="l00589"></a>00589     244,12,61,185,211,155,114,
<a name="l00590"></a>00590     151,96,11,203,200,138,71,
<a name="l00591"></a>00591     17,26,234,71,106,73,60,
<a name="l00592"></a>00592     76,106,210,50,115,45,2
<a name="l00593"></a>00593     },
<a name="l00594"></a>00594     
<a name="l00595"></a>00595     {
<a name="l00596"></a>00596     55,17,107,248,62,204,196,
<a name="l00597"></a>00597     224,45,253,50,10,2,51,
<a name="l00598"></a>00598     233,34,73,107,137,68,253,
<a name="l00599"></a>00599     235,235,24,99,52,125,184,
<a name="l00600"></a>00600     3,3,88,146,80,226,29,
<a name="l00601"></a>00601     5,25,66,196,226,87,125,
<a name="l00602"></a>00602     83,169,124,218,190,135,197
<a name="l00603"></a>00603     },  
<a name="l00604"></a>00604 };
<a name="l00605"></a>00605 
<a name="l00606"></a>00606 <span class="comment">// These values coorespond to TerrainTypeDefines order</span>
<a name="l00607"></a><a class="code" href="tiledef_8h.html#ca5884bb2f15affe2c76ce78c71b32e3">00607</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>       <a class="code" href="tiledef_8cpp.html#ca5884bb2f15affe2c76ce78c71b32e3">gTileTypeMovementCost</a>[ <a class="code" href="tiledef_8h.html#c670bc5d76bf3f6a2bdda553ba73177cd0d09708a0cf3ad9a451133d7b25ffdb">NUM_TERRAIN_TYPES</a> ] =
<a name="l00608"></a>00608 {
<a name="l00609"></a>00609       TRAVELCOST_FLAT,                                <span class="comment">// NO_TERRAIN</span>
<a name="l00610"></a>00610       TRAVELCOST_FLAT,                                <span class="comment">// FLAT GROUND</span>
<a name="l00611"></a>00611       TRAVELCOST_FLATFLOOR,                     <span class="comment">// FLAT FLOOR</span>
<a name="l00612"></a>00612       TRAVELCOST_PAVEDROAD,                     <span class="comment">// PAVED ROAD</span>
<a name="l00613"></a>00613       TRAVELCOST_DIRTROAD,                      <span class="comment">// DIRT ROAD</span>
<a name="l00614"></a>00614       TRAVELCOST_FLAT,                                <span class="comment">// LOW_GRASS</span>
<a name="l00615"></a>00615       TRAVELCOST_FLAT,                                <span class="comment">// HIGH GRASS</span>
<a name="l00616"></a>00616       TRAVELCOST_TRAINTRACKS,             <span class="comment">// TRAIN TRACKS</span>
<a name="l00617"></a>00617       TRAVELCOST_SHORE,                               <span class="comment">// LOW WATER</span>
<a name="l00618"></a>00618       TRAVELCOST_SHORE,                               <span class="comment">// MED WATER</span>
<a name="l00619"></a>00619       TRAVELCOST_SHORE,                               <span class="comment">// DEEP WATER</span>
<a name="l00620"></a>00620 };
<a name="l00621"></a>00621 
<a name="l00622"></a>00622 
<a name="l00623"></a><a class="code" href="tiledef_8h.html#6c927afc0c30c675b7af142f5914b0a1">00623</a> <span class="keywordtype">void</span> <a class="code" href="tiledef_8cpp.html#6c927afc0c30c675b7af142f5914b0a1">CreateTileDatabase</a>( )
<a name="l00624"></a>00624 {
<a name="l00625"></a>00625       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                              cnt1, cnt2;
<a name="l00626"></a>00626       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                               ubLoop;
<a name="l00627"></a>00627       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                              NumRegions;
<a name="l00628"></a>00628       <a class="code" href="structTILE__IMAGERY.html">PTILE_IMAGERY</a>   TileSurf;
<a name="l00629"></a>00629       <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a>            TileElement;
<a name="l00630"></a>00630 
<a name="l00631"></a>00631       <span class="comment">// Loop through all surfaces and tiles and build database</span>
<a name="l00632"></a>00632       <span class="keywordflow">for</span>( cnt1 = 0; cnt1 &lt; <a class="code" href="TileDat_8h.html#6a650646c036f06b5166f92a83f79748de2048e55668b32d6407d1e071d4a0c2">NUMBEROFTILETYPES</a>; cnt1++ )
<a name="l00633"></a>00633       {
<a name="l00634"></a>00634             <span class="comment">// Get number of regions</span>
<a name="l00635"></a>00635             TileSurf = <a class="code" href="Tile_01Surface_8cpp.html#3fe928e9b907016ec4c49519f08dda59">gTileSurfaceArray</a>[ cnt1 ];
<a name="l00636"></a>00636 
<a name="l00637"></a>00637             <span class="keywordflow">if</span> ( TileSurf != NULL )
<a name="l00638"></a>00638             {
<a name="l00639"></a>00639 
<a name="l00640"></a>00640                   <span class="comment">// Build start index list</span>
<a name="l00641"></a>00641           <a class="code" href="tiledef_8cpp.html#c678c275bd40fc1deec983df7ef10d1b">gTileTypeStartIndex</a>[ cnt1 ] = (<a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>)<a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a>;
<a name="l00642"></a>00642 
<a name="l00643"></a>00643                   NumRegions = TileSurf-&gt;<a class="code" href="structTILE__IMAGERY.html#9a4fe07c8c8a3d78811642a61b84f4db">vo</a>-&gt;<a class="code" href="structTAG__HVOBJECT.html#59ebcf168778e4e5134f49c1e0e73df3">usNumberOfObjects</a>;
<a name="l00644"></a>00644                   
<a name="l00645"></a>00645                   <span class="comment">// Check for overflow</span>
<a name="l00646"></a>00646                   <span class="keywordflow">if</span> ( NumRegions &gt; <a class="code" href="TileDat_8cpp.html#57e3703becedc94f8cbaef2022587485">gNumTilesPerType</a>[ cnt1 ] )
<a name="l00647"></a>00647                   {
<a name="l00648"></a>00648                         #ifdef JA2EDITOR
<a name="l00649"></a>00649                               <span class="comment">// Display warning</span>
<a name="l00650"></a>00650                               <a class="code" href="edit__sys_8cpp.html#fdf79748876e7ea925720c6c5b18585f">gfWarning</a> = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)cnt1;
<a name="l00651"></a>00651 <span class="preprocessor">                        #endif</span>
<a name="l00652"></a>00652 <span class="preprocessor"></span>
<a name="l00653"></a>00653                         <span class="comment">// Cutof</span>
<a name="l00654"></a>00654                         NumRegions = <a class="code" href="TileDat_8cpp.html#57e3703becedc94f8cbaef2022587485">gNumTilesPerType</a>[ cnt1 ];
<a name="l00655"></a>00655                   }
<a name="l00656"></a>00656 
<a name="l00657"></a>00657                   DebugMsg( <a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>, DBG_LEVEL_3, <a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"Type: %s Size: %d Index: %d"</span>, <a class="code" href="TileDat_8cpp.html#d848f80fe7c9eeaa2f690786335d37a1">gTileSurfaceName</a>[cnt1], <a class="code" href="TileDat_8cpp.html#57e3703becedc94f8cbaef2022587485">gNumTilesPerType</a>[ cnt1 ], <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a> ) );
<a name="l00658"></a>00658 
<a name="l00659"></a>00659                   <span class="keywordflow">for</span>( cnt2 = 0; cnt2 &lt; NumRegions; cnt2++ )
<a name="l00660"></a>00660                   {
<a name="l00661"></a>00661 
<a name="l00662"></a>00662                         memset( &amp;TileElement, 0, <span class="keyword">sizeof</span>( TileElement ) );
<a name="l00663"></a>00663                         TileElement.usRegionIndex = (<a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>)cnt2;
<a name="l00664"></a>00664                         TileElement.hTileSurface      = TileSurf-&gt;<a class="code" href="structTILE__IMAGERY.html#9a4fe07c8c8a3d78811642a61b84f4db">vo</a>;
<a name="l00665"></a>00665                         TileElement.sBuddyNum               = -1;
<a name="l00666"></a>00666 
<a name="l00667"></a>00667                         <span class="comment">// Check for multi-z stuff</span>
<a name="l00668"></a>00668                         <span class="keywordflow">if</span> ( TileSurf-&gt;<a class="code" href="structTILE__IMAGERY.html#9a4fe07c8c8a3d78811642a61b84f4db">vo</a>-&gt;<a class="code" href="structTAG__HVOBJECT.html#ebffebf19c374377928ce53df9d94f47">ppZStripInfo</a> != NULL )
<a name="l00669"></a>00669                         {
<a name="l00670"></a>00670                               <span class="comment">// Only do this if we are within the # of video objects</span>
<a name="l00671"></a>00671                               <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> ( cnt2 &lt; TileSurf-&gt;vo-&gt;usNumberOfObjects )
<a name="l00672"></a>00672                               {     
<a name="l00673"></a>00673                                     <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> ( TileSurf-&gt;<a class="code" href="structTILE__IMAGERY.html#9a4fe07c8c8a3d78811642a61b84f4db">vo</a>-&gt;<a class="code" href="structTAG__HVOBJECT.html#ebffebf19c374377928ce53df9d94f47">ppZStripInfo</a>[ cnt2 ] != NULL )
<a name="l00674"></a>00674                                     {
<a name="l00675"></a>00675                                           TileElement.uiFlags |= MULTI_Z_TILE;
<a name="l00676"></a>00676                                     }
<a name="l00677"></a>00677                               }
<a name="l00678"></a>00678                               <span class="keywordflow">else</span>
<a name="l00679"></a>00679                               {
<a name="l00680"></a>00680                                     <span class="comment">//Ate test to see if problems is gone</span>
<a name="l00681"></a>00681                                     <span class="keywordtype">int</span> i = 0;
<a name="l00682"></a>00682                               }
<a name="l00683"></a>00683                         }
<a name="l00684"></a>00684 
<a name="l00685"></a>00685                         <span class="comment">// Structure database stuff!</span>
<a name="l00686"></a>00686                         <span class="keywordflow">if</span> (TileSurf-&gt;<a class="code" href="structTILE__IMAGERY.html#3820369b42c937cc7b0fdea55e2c16da">pStructureFileRef</a> != NULL &amp;&amp; TileSurf-&gt;<a class="code" href="structTILE__IMAGERY.html#3820369b42c937cc7b0fdea55e2c16da">pStructureFileRef</a>-&gt;<a class="code" href="structTAG__STRUCTURE__FILE__REF.html#f46704de8d60fe95ef020f5240b4ecea">pubStructureData</a> != NULL)
<a name="l00687"></a>00687                         {
<a name="l00688"></a>00688                               <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> (TileSurf-&gt;<a class="code" href="structTILE__IMAGERY.html#3820369b42c937cc7b0fdea55e2c16da">pStructureFileRef</a>-&gt;<a class="code" href="structTAG__STRUCTURE__FILE__REF.html#fff59391102b0c44d6c95f7c89243e05">pDBStructureRef</a>[cnt2].<a class="code" href="structTAG__DB__STRUCTURE__REF.html#b8820bcc9bc94d85d1d089dc9795174d">pDBStructure</a> != NULL)
<a name="l00689"></a>00689                               {
<a name="l00690"></a>00690                                     TileElement.<a class="code" href="structTILE__ELEMENT.html#b40129d88b4722f9e0e33e69310312e9">pDBStructureRef</a>   = &amp;(TileSurf-&gt;<a class="code" href="structTILE__IMAGERY.html#3820369b42c937cc7b0fdea55e2c16da">pStructureFileRef</a>-&gt;<a class="code" href="structTAG__STRUCTURE__FILE__REF.html#fff59391102b0c44d6c95f7c89243e05">pDBStructureRef</a>[cnt2]);
<a name="l00691"></a>00691 
<a name="l00692"></a>00692                                     <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> ( TileElement.<a class="code" href="structTILE__ELEMENT.html#b40129d88b4722f9e0e33e69310312e9">pDBStructureRef</a>-&gt;<a class="code" href="structTAG__DB__STRUCTURE__REF.html#b8820bcc9bc94d85d1d089dc9795174d">pDBStructure</a>-&gt;<a class="code" href="structTAG__DB__STRUCTURE.html#9beeb136d5510ae7dfc8c673818be65d">fFlags</a> &amp; STRUCTURE_HIDDEN )
<a name="l00693"></a>00693                                     {
<a name="l00694"></a>00694                                           <span class="comment">// ATE: These are ignored!</span>
<a name="l00695"></a>00695                                           <span class="comment">//TileElement.uiFlags |= HIDDEN_TILE;                                   </span>
<a name="l00696"></a>00696                                     }
<a name="l00697"></a>00697                               }
<a name="l00698"></a>00698                         } 
<a name="l00699"></a>00699 
<a name="l00700"></a>00700                         TileElement.fType                                     = (<a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>)TileSurf-&gt;fType;
<a name="l00701"></a>00701                         TileElement.ubTerrainID                   = TileSurf-&gt;ubTerrainID;
<a name="l00702"></a>00702                         TileElement.usWallOrientation = <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a8922a1679c12d641e9b1933f27de5f86f">NO_ORIENTATION</a>;
<a name="l00703"></a>00703                         
<a name="l00704"></a>00704                         <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> (TileSurf-&gt;pAuxData != NULL)
<a name="l00705"></a>00705                         {
<a name="l00706"></a>00706                               <a class="code" href="Soldier_01Ani_8cpp.html#c294aa65f0375eb6343a2de2a25dafcc">if</a> (TileSurf-&gt;pAuxData[cnt2].fFlags &amp; AUX_FULL_TILE)
<a name="l00707"></a>00707                               {
<a name="l00708"></a>00708                                     TileElement.ubFullTile = 1;
<a name="l00709"></a>00709                               }
<a name="l00710"></a>00710                               <span class="keywordflow">if</span> (TileSurf-&gt;pAuxData[cnt2].fFlags &amp; AUX_ANIMATED_TILE)
<a name="l00711"></a>00711                               {
<a name="l00712"></a>00712                                     <span class="comment">// Allocate Animated tile data</span>
<a name="l00713"></a>00713                                     <a class="code" href="tiledef_8cpp.html#d9e59fcd12073c432aaf3714dc6f0eab">AllocateAnimTileData</a>( &amp;TileElement, TileSurf-&gt;pAuxData[cnt2].ubNumberOfFrames );
<a name="l00714"></a>00714 
<a name="l00715"></a>00715                                     <span class="comment">// Set values into tile element</span>
<a name="l00716"></a>00716                                     TileElement.pAnimData-&gt;bCurrentFrame = TileSurf-&gt;pAuxData[cnt2].ubCurrentFrame;
<a name="l00717"></a>00717                                     for (ubLoop = 0; ubLoop &lt; TileElement.pAnimData-&gt;ubNumFrames; ubLoop++)
<a name="l00718"></a>00718                                     {
<a name="l00719"></a>00719                                           TileElement.pAnimData-&gt;pusFrames[ ubLoop ] = <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a> - TileElement.pAnimData-&gt;bCurrentFrame + ubLoop;
<a name="l00720"></a>00720                                     }
<a name="l00721"></a>00721 
<a name="l00722"></a>00722 <span class="comment">/*</span>
<a name="l00723"></a>00723 <span class="comment">                                    for (ubLoop = TileElement.pAnimData-&gt;bCurrentFrame; ubLoop &lt; TileElement.pAnimData-&gt;ubNumFrames; ubLoop++)</span>
<a name="l00724"></a>00724 <span class="comment">                                    {</span>
<a name="l00725"></a>00725 <span class="comment">                                          TileElement.pAnimData-&gt;pusFrames[ ubLoop ] = gTileDatabaseSize - TileElement.pAnimData-&gt;bCurrentFrame + ubLoop;</span>
<a name="l00726"></a>00726 <span class="comment">                                    }</span>
<a name="l00727"></a>00727 <span class="comment">                                    for (ubLoop = 0; ubLoop &lt; TileElement.pAnimData-&gt;bCurrentFrame; ubLoop++)</span>
<a name="l00728"></a>00728 <span class="comment">                                    {</span>
<a name="l00729"></a>00729 <span class="comment">                                          TileElement.pAnimData-&gt;pusFrames[ ubLoop ] = gTileDatabaseSize - TileElement.pAnimData-&gt;bCurrentFrame + ubLoop;</span>
<a name="l00730"></a>00730 <span class="comment">                                    }</span>
<a name="l00731"></a>00731 <span class="comment"></span>
<a name="l00732"></a>00732 <span class="comment">*/</span>
<a name="l00733"></a>00733                                     
<a name="l00734"></a>00734                                     <span class="comment">// set into animation controller array</span>
<a name="l00735"></a>00735                                     <a class="code" href="tiledef_8cpp.html#f33c42d7e0ca9d5a04f759aaa913480a">gusAnimatedTiles</a>[ <a class="code" href="tiledef_8cpp.html#899257db123f6c75b179dfae9acc3c88">gusNumAnimatedTiles</a> ] = <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a>;
<a name="l00736"></a>00736                                     <a class="code" href="tiledef_8cpp.html#899257db123f6c75b179dfae9acc3c88">gusNumAnimatedTiles</a>++;
<a name="l00737"></a>00737 
<a name="l00738"></a>00738                                     Assert( <a class="code" href="tiledef_8cpp.html#899257db123f6c75b179dfae9acc3c88">gusNumAnimatedTiles</a> &lt;= MAX_ANIMATED_TILES );
<a name="l00739"></a>00739 
<a name="l00740"></a>00740                                     TileElement.uiFlags                        |= ANIMATED_TILE;      
<a name="l00741"></a>00741                               }
<a name="l00742"></a>00742                               TileElement.usWallOrientation = TileSurf-&gt;pAuxData[cnt2].ubWallOrientation;
<a name="l00743"></a>00743                               <span class="keywordflow">if</span> (TileSurf-&gt;pAuxData[cnt2].ubNumberOfTiles &gt; 0)
<a name="l00744"></a>00744                               {
<a name="l00745"></a>00745                                     TileElement.ubNumberOfTiles = TileSurf-&gt;pAuxData[cnt2].ubNumberOfTiles;
<a name="l00746"></a>00746                                     TileElement.pTileLocData = TileSurf-&gt;pTileLocData + TileSurf-&gt;pAuxData[cnt2].usTileLocIndex;
<a name="l00747"></a>00747                               }
<a name="l00748"></a>00748                         }
<a name="l00749"></a>00749 
<a name="l00750"></a>00750                         <a class="code" href="TileDat_8cpp.html#2a1312031aede45c702d5cc108fca973">SetSpecificDatabaseValues</a>( (<a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>)cnt1, <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a>, &amp;TileElement, TileSurf-&gt;bRaisedObjectType );
<a name="l00751"></a>00751 
<a name="l00752"></a>00752                         <a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a> ] = TileElement;
<a name="l00753"></a>00753                         <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a>++;
<a name="l00754"></a>00754                   }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756                   <span class="comment">// Check if data matches what should be there</span>
<a name="l00757"></a>00757                   <span class="keywordflow">if</span> ( NumRegions &lt; <a class="code" href="TileDat_8cpp.html#57e3703becedc94f8cbaef2022587485">gNumTilesPerType</a>[ cnt1 ] )
<a name="l00758"></a>00758                   {
<a name="l00759"></a>00759 <span class="preprocessor">                        #ifdef JA2EDITOR</span>
<a name="l00760"></a>00760 <span class="preprocessor"></span>                              <span class="comment">// Display warning here</span>
<a name="l00761"></a>00761                               <a class="code" href="edit__sys_8cpp.html#fdf79748876e7ea925720c6c5b18585f">gfWarning</a> = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)cnt1;
<a name="l00762"></a>00762 <span class="preprocessor">                        #endif</span>
<a name="l00763"></a>00763 <span class="preprocessor"></span>
<a name="l00764"></a>00764                         <span class="comment">// Do underflows here</span>
<a name="l00765"></a>00765                         <span class="keywordflow">for</span> ( cnt2 = NumRegions; cnt2 &lt; <a class="code" href="TileDat_8cpp.html#57e3703becedc94f8cbaef2022587485">gNumTilesPerType</a>[ cnt1 ]; cnt2++ )
<a name="l00766"></a>00766                         {
<a name="l00767"></a>00767                               memset( &amp;TileElement, 0, <span class="keyword">sizeof</span>( TileElement ) );
<a name="l00768"></a>00768                               TileElement.usRegionIndex = 0;
<a name="l00769"></a>00769                               TileElement.hTileSurface      = TileSurf-&gt;vo;
<a name="l00770"></a>00770                               TileElement.fType                         = (<a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>)TileSurf-&gt;fType;
<a name="l00771"></a>00771                               TileElement.ubFullTile    = FALSE;
<a name="l00772"></a>00772                               TileElement.sOffsetHeight = 0;
<a name="l00773"></a>00773                               TileElement.ubFullTile        = 0;
<a name="l00774"></a>00774           TileElement.uiFlags       |= UNDERFLOW_FILLER;
<a name="l00775"></a>00775 
<a name="l00776"></a>00776                               <a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a> ] = TileElement;
<a name="l00777"></a>00777                               <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a>++;
<a name="l00778"></a>00778                         }
<a name="l00779"></a>00779 
<a name="l00780"></a>00780                   }
<a name="l00781"></a>00781 
<a name="l00782"></a>00782             }
<a name="l00783"></a>00783       }
<a name="l00784"></a>00784 
<a name="l00785"></a>00785       <span class="comment">//Calculate mem usgae</span>
<a name="l00786"></a>00786       <a class="code" href="worlddef_8cpp.html#31c08f0155dff43ff4c8eac4c6187854">gSurfaceMemUsage</a> = <a class="code" href="MemMan_8cpp.html#7be20cf65978fea1497101a189959eca">guiMemTotal</a> - <a class="code" href="worlddef_8cpp.html#31c08f0155dff43ff4c8eac4c6187854">gSurfaceMemUsage</a>;
<a name="l00787"></a>00787       DebugMsg( <a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>, DBG_LEVEL_3, <a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"Database Sizes: %d vs %d"</span>, <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a>, <a class="code" href="TileDat_8h.html#3626eb77a4f637f63497920a218cf0e2d684bc586b31f71fc2f555719635f939">NUMBEROFTILES</a> ) );
<a name="l00788"></a>00788       DebugMsg( <a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>, DBG_LEVEL_3, <a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"Database Types: %d"</span>, <a class="code" href="TileDat_8h.html#6a650646c036f06b5166f92a83f79748de2048e55668b32d6407d1e071d4a0c2">NUMBEROFTILETYPES</a> ) );
<a name="l00789"></a>00789       DebugMsg( <a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>, DBG_LEVEL_3, <a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"Database Item Mem:            %d"</span>, <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a> * <span class="keyword">sizeof</span>( <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a> ) ) );
<a name="l00790"></a>00790       DebugMsg( <a class="code" href="DEBUG_8cpp.html#a7985c2fd033797fc67a03b2c26e07c6">TOPIC_JA2</a>, DBG_LEVEL_3, <a class="code" href="DEBUG_8cpp.html#88565bf27eec0b2003eb5bc9426b8e4b">String</a>(<span class="stringliteral">"Database Item Total Mem:            %d"</span>, gSurfaceMemUsage ) );
<a name="l00791"></a>00791 
<a name="l00792"></a>00792 }
<a name="l00793"></a>00793 
<a name="l00794"></a><a class="code" href="tiledef_8h.html#53fd81f5b4dc9992c41ccdde1569e84b">00794</a> <span class="keywordtype">void</span> <a class="code" href="tiledef_8cpp.html#53fd81f5b4dc9992c41ccdde1569e84b">DeallocateTileDatabase</a>( )
<a name="l00795"></a>00795 {
<a name="l00796"></a>00796       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> cnt; 
<a name="l00797"></a>00797 
<a name="l00798"></a>00798       <span class="keywordflow">for</span>( cnt = 0; cnt &lt; <a class="code" href="TileDat_8h.html#3626eb77a4f637f63497920a218cf0e2d684bc586b31f71fc2f555719635f939">NUMBEROFTILES</a>; cnt++ )
<a name="l00799"></a>00799       {
<a name="l00800"></a>00800             <span class="comment">// Check if an existing set of animated tiles are in place, remove if found</span>
<a name="l00801"></a>00801             <span class="keywordflow">if</span> ( <a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ cnt ].pAnimData != NULL )
<a name="l00802"></a>00802             {
<a name="l00803"></a>00803                   <a class="code" href="tiledef_8cpp.html#7c7f7b28f00d580b8134d45bfb064613">FreeAnimTileData</a>( &amp;<a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ cnt ] );
<a name="l00804"></a>00804             }           
<a name="l00805"></a>00805       }
<a name="l00806"></a>00806 
<a name="l00807"></a>00807       <a class="code" href="tiledef_8cpp.html#a56ae6fcb75ed7de3c202f15e2088ae8">gTileDatabaseSize</a> = 0;
<a name="l00808"></a>00808       gSurfaceMemUsage = 0;
<a name="l00809"></a>00809       <a class="code" href="tiledef_8cpp.html#899257db123f6c75b179dfae9acc3c88">gusNumAnimatedTiles</a> = 0;
<a name="l00810"></a>00810 
<a name="l00811"></a>00811 }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813 
<a name="l00814"></a><a class="code" href="tiledef_8h.html#49e2f4b13ce26a6dd33ff9a1fb66aa05">00814</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#49e2f4b13ce26a6dd33ff9a1fb66aa05">GetLandHeadType</a>( <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a>, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> *puiType )
<a name="l00815"></a>00815 {
<a name="l00816"></a>00816  <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                             usIndex;
<a name="l00817"></a>00817 
<a name="l00818"></a>00818  Assert( puiType != NULL );
<a name="l00819"></a>00819 
<a name="l00820"></a>00820  CHECKF( <a class="code" href="worlddef_8cpp.html#a1c640bcf89772795e6517da9963e0d7">gpWorldLevelData</a>[ iMapIndex ].pLandHead != NULL );
<a name="l00821"></a>00821 
<a name="l00822"></a>00822  usIndex = <a class="code" href="worlddef_8cpp.html#a1c640bcf89772795e6517da9963e0d7">gpWorldLevelData</a>[ iMapIndex ].<a class="code" href="structMAP__ELEMENT.html#a1705924637065ad2cf2cf884e6429f7">pLandHead</a>-&gt;<a class="code" href="structTAG__level__node.html#52b821707a4f7d758df5f97d376ef9f7">usIndex</a>;
<a name="l00823"></a>00823 
<a name="l00824"></a>00824  <a class="code" href="tiledef_8cpp.html#997c9e24de80577e1e7bcc85f5a5b7ec">GetTileType</a>( usIndex, puiType );
<a name="l00825"></a>00825 
<a name="l00826"></a>00826  <span class="keywordflow">return</span>( TRUE );
<a name="l00827"></a>00827 
<a name="l00828"></a>00828 }
<a name="l00829"></a>00829 
<a name="l00830"></a><a class="code" href="tiledef_8h.html#124bf2cea87f395f8dd894e418dabd1d">00830</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#124bf2cea87f395f8dd894e418dabd1d">SetLandIndex</a>( <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a>, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usIndex, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiNewType, <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fDelete )
<a name="l00831"></a>00831 {
<a name="l00832"></a>00832       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>      usTempIndex;
<a name="l00833"></a>00833       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>       ubLastHighLevel=0;
<a name="l00834"></a>00834 
<a name="l00835"></a>00835       <span class="keywordflow">if</span> ( fDelete )
<a name="l00836"></a>00836       {
<a name="l00837"></a>00837             <a class="code" href="worldman_8cpp.html#18168fffa684bba72638b5cbfec80148">RemoveLand</a>( iMapIndex, usIndex );
<a name="l00838"></a>00838             <span class="keywordflow">return</span>( TRUE );
<a name="l00839"></a>00839       }
<a name="l00840"></a>00840 
<a name="l00841"></a>00841       <span class="keywordflow">if</span> ( <a class="code" href="tiledef_8cpp.html#75d5270e58bfa7f951f5c1eae6e3fa7b">AnyHeigherLand</a>( iMapIndex, uiNewType, &amp;ubLastHighLevel ) )
<a name="l00842"></a>00842       {
<a name="l00843"></a>00843                   <span class="comment">// Check if type exists and get it's index if so</span>
<a name="l00844"></a>00844                   <span class="keywordflow">if</span> ( <a class="code" href="worldman_8cpp.html#166807522dce08c6d16e0114cd389709">TypeExistsInLandLayer</a>( iMapIndex, uiNewType, &amp;usTempIndex ) )
<a name="l00845"></a>00845                   {
<a name="l00846"></a>00846                         <span class="comment">// Replace with new index</span>
<a name="l00847"></a>00847                         <span class="keywordflow">return</span>( <a class="code" href="worldman_8cpp.html#df2c0318baffa783a355141294c13685">ReplaceLandIndex</a>( iMapIndex, usTempIndex, usIndex ) );
<a name="l00848"></a>00848                   }
<a name="l00849"></a>00849                   <span class="keywordflow">else</span>
<a name="l00850"></a>00850                   {
<a name="l00851"></a>00851                         <span class="keywordflow">return</span>( <a class="code" href="worldman_8cpp.html#0303530ab44d7effc90f8e9fd7ebb070">InsertLandIndexAtLevel</a>( iMapIndex, usIndex, (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)(ubLastHighLevel+1) ) );
<a name="l00852"></a>00852                   }
<a name="l00853"></a>00853 
<a name="l00854"></a>00854       }
<a name="l00855"></a>00855       <span class="keywordflow">else</span>
<a name="l00856"></a>00856       {
<a name="l00857"></a>00857 
<a name="l00858"></a>00858             <span class="comment">// Check if type exists and get it's index if so</span>
<a name="l00859"></a>00859             <span class="keywordflow">if</span> ( <a class="code" href="worldman_8cpp.html#166807522dce08c6d16e0114cd389709">TypeExistsInLandLayer</a>( iMapIndex, uiNewType, &amp;usTempIndex ) )
<a name="l00860"></a>00860             {
<a name="l00861"></a>00861                   <span class="comment">// Replace with new index</span>
<a name="l00862"></a>00862                   <span class="keywordflow">return</span>( <a class="code" href="worldman_8cpp.html#df2c0318baffa783a355141294c13685">ReplaceLandIndex</a>( iMapIndex, usTempIndex, usIndex ) );
<a name="l00863"></a>00863             }
<a name="l00864"></a>00864             <span class="keywordflow">else</span>
<a name="l00865"></a>00865             {
<a name="l00866"></a>00866                   <span class="comment">// Otherwise, add to head</span>
<a name="l00867"></a>00867                   <span class="keywordflow">return</span>( <a class="code" href="worldman_8cpp.html#205ed9951af6dabc1c5e857689628cd9">AddLandToHead</a>( iMapIndex, usIndex ) );
<a name="l00868"></a>00868             }
<a name="l00869"></a>00869       }
<a name="l00870"></a>00870 
<a name="l00871"></a>00871 }
<a name="l00872"></a>00872 
<a name="l00873"></a>00873 
<a name="l00874"></a><a class="code" href="tiledef_8h.html#ee91e21c861e87c1128c100638f40918">00874</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#ee91e21c861e87c1128c100638f40918">SetLandIndexWithRadius</a>( <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a>, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usIndex, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiNewType, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubRadius, <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> fReplace )
<a name="l00875"></a>00875 {
<a name="l00876"></a>00876       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                        usTempIndex;
<a name="l00877"></a>00877       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                         sTop, sBottom;
<a name="l00878"></a>00878       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                         sLeft, sRight;
<a name="l00879"></a>00879       <a class="code" href="Types_8h.html#30f500129d8c688af07726d5d34ce52d">INT16</a>                         cnt1, cnt2;
<a name="l00880"></a>00880       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a>                     iNewIndex;
<a name="l00881"></a>00881       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>                       fDoPaste = FALSE;
<a name="l00882"></a>00882       <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a>                         leftmost;
<a name="l00883"></a>00883       <span class="comment">//BOOLEAN                     fNewCommand;</span>
<a name="l00884"></a>00884       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                        Dummy;
<a name="l00885"></a>00885 
<a name="l00886"></a>00886       <span class="comment">// Determine start end end indicies and num rows</span>
<a name="l00887"></a>00887       sTop        = ubRadius;
<a name="l00888"></a>00888       sBottom = -ubRadius;
<a name="l00889"></a>00889       sLeft   = - ubRadius;
<a name="l00890"></a>00890       sRight  = ubRadius;
<a name="l00891"></a>00891 
<a name="l00892"></a>00892       <span class="comment">//fNewCommand = fFirstDrawMode; //NEW_UNDO_COMMAND;</span>
<a name="l00893"></a>00893 
<a name="l00894"></a>00894       <span class="keywordflow">for</span>( cnt1 = sBottom; cnt1 &lt;= sTop; cnt1++ )
<a name="l00895"></a>00895       {
<a name="l00896"></a>00896 
<a name="l00897"></a>00897             leftmost = ( ( iMapIndex + ( WORLD_COLS * cnt1 ) )/ WORLD_COLS ) * WORLD_COLS;
<a name="l00898"></a>00898 
<a name="l00899"></a>00899             <span class="keywordflow">for</span>( cnt2 = sLeft; cnt2 &lt;= sRight; cnt2++ )
<a name="l00900"></a>00900             {
<a name="l00901"></a>00901                   iNewIndex = iMapIndex + ( WORLD_COLS * cnt1 ) + cnt2;
<a name="l00902"></a>00902 
<a name="l00903"></a>00903                   <span class="keywordflow">if</span> ( iNewIndex &gt;=0 &amp;&amp; iNewIndex &lt; WORLD_MAX &amp;&amp; 
<a name="l00904"></a>00904                            iNewIndex &gt;= leftmost &amp;&amp; iNewIndex &lt; ( leftmost + WORLD_COLS ) )
<a name="l00905"></a>00905                   {
<a name="l00906"></a>00906 
<a name="l00907"></a>00907                         <span class="keywordflow">if</span> ( fReplace )
<a name="l00908"></a>00908                         {
<a name="l00909"></a>00909                               fDoPaste = TRUE;
<a name="l00910"></a>00910                         }
<a name="l00911"></a>00911                         <span class="keywordflow">else</span>
<a name="l00912"></a>00912                         {
<a name="l00913"></a>00913                               <span class="keywordflow">if</span> ( !<a class="code" href="worldman_8cpp.html#166807522dce08c6d16e0114cd389709">TypeExistsInLandLayer</a>( iNewIndex, uiNewType, &amp;usTempIndex ) )
<a name="l00914"></a>00914                               {
<a name="l00915"></a>00915                                     fDoPaste = TRUE;
<a name="l00916"></a>00916                               }
<a name="l00917"></a>00917                         }
<a name="l00918"></a>00918                         
<a name="l00919"></a>00919                         <span class="keywordflow">if</span> ( fDoPaste &amp;&amp; ((uiNewType &gt;= <a class="code" href="TileDat_8h.html#6a650646c036f06b5166f92a83f79748c36f86dfa067ad8525732284862bfa31">FIRSTFLOOR</a> &amp;&amp; uiNewType &lt;= LASTFLOOR) || 
<a name="l00920"></a>00920                                                                          ((uiNewType &lt; FIRSTFLOOR || uiNewType &gt; LASTFLOOR) &amp;&amp; 
<a name="l00921"></a>00921                                                                          !<a class="code" href="worldman_8cpp.html#ea72a45b10dea80b5c254aefd41ec101">TypeRangeExistsInLandLayer</a>( iNewIndex, <a class="code" href="TileDat_8h.html#6a650646c036f06b5166f92a83f79748c36f86dfa067ad8525732284862bfa31">FIRSTFLOOR</a>, LASTFLOOR, &amp;Dummy ))) )
<a name="l00922"></a>00922                         {
<a name="l00923"></a>00923                               <a class="code" href="tiledef_8cpp.html#124bf2cea87f395f8dd894e418dabd1d">SetLandIndex</a>( iNewIndex, usIndex, uiNewType, FALSE );
<a name="l00924"></a>00924                         }
<a name="l00925"></a>00925                   }
<a name="l00926"></a>00926             }
<a name="l00927"></a>00927       }
<a name="l00928"></a>00928 
<a name="l00929"></a>00929       <span class="keywordflow">return</span>( TRUE );
<a name="l00930"></a>00930 }
<a name="l00931"></a>00931 
<a name="l00932"></a>00932 
<a name="l00933"></a><a class="code" href="tiledef_8h.html#624c676a1f0b80598797161c17288215">00933</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#624c676a1f0b80598797161c17288215">GetTypeLandLevel</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a>, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiNewType, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *pubLevel )
<a name="l00934"></a>00934 {
<a name="l00935"></a>00935       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                         level = 0;
<a name="l00936"></a>00936       <a class="code" href="structTAG__level__node.html">LEVELNODE</a>               *pLand;
<a name="l00937"></a>00937       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                        fTileType=0;
<a name="l00938"></a>00938 
<a name="l00939"></a>00939       pLand = <a class="code" href="worlddef_8cpp.html#a1c640bcf89772795e6517da9963e0d7">gpWorldLevelData</a>[ iMapIndex ].<a class="code" href="structMAP__ELEMENT.html#a1705924637065ad2cf2cf884e6429f7">pLandHead</a>;
<a name="l00940"></a>00940 
<a name="l00941"></a>00941       <span class="keywordflow">while</span>( pLand != NULL )
<a name="l00942"></a>00942       {
<a name="l00943"></a>00943 
<a name="l00944"></a>00944             <span class="keywordflow">if</span> ( pLand-&gt;<a class="code" href="structTAG__level__node.html#52b821707a4f7d758df5f97d376ef9f7">usIndex</a> != NO_TILE )
<a name="l00945"></a>00945             {
<a name="l00946"></a>00946                   <a class="code" href="tiledef_8cpp.html#997c9e24de80577e1e7bcc85f5a5b7ec">GetTileType</a>( pLand-&gt;<a class="code" href="structTAG__level__node.html#52b821707a4f7d758df5f97d376ef9f7">usIndex</a>, &amp;fTileType );
<a name="l00947"></a>00947 
<a name="l00948"></a>00948                   <span class="keywordflow">if</span> ( fTileType == uiNewType )
<a name="l00949"></a>00949                   {
<a name="l00950"></a>00950                         *pubLevel = level;
<a name="l00951"></a>00951                         <span class="keywordflow">return</span>( TRUE );   
<a name="l00952"></a>00952                   }
<a name="l00953"></a>00953 
<a name="l00954"></a>00954             }
<a name="l00955"></a>00955             
<a name="l00956"></a>00956             level++;
<a name="l00957"></a>00957             pLand = pLand-&gt;<a class="code" href="structTAG__level__node.html#7c693acc3b593ab866b789ba7542eef7">pNext</a>;
<a name="l00958"></a>00958       }
<a name="l00959"></a>00959 
<a name="l00960"></a>00960       <span class="keywordflow">return</span>( FALSE );
<a name="l00961"></a>00961 
<a name="l00962"></a>00962 }
<a name="l00963"></a>00963 
<a name="l00964"></a>00964 
<a name="l00965"></a><a class="code" href="tiledef_8h.html#91815c5ebdacaba84c2436209a755c74">00965</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>       <a class="code" href="tiledef_8cpp.html#91815c5ebdacaba84c2436209a755c74">GetLandLevelDepth</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a> )
<a name="l00966"></a>00966 {
<a name="l00967"></a>00967       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                         level = 0;
<a name="l00968"></a>00968       <a class="code" href="structTAG__level__node.html">LEVELNODE</a>         *pLand;
<a name="l00969"></a>00969 
<a name="l00970"></a>00970       pLand = <a class="code" href="worlddef_8cpp.html#a1c640bcf89772795e6517da9963e0d7">gpWorldLevelData</a>[ iMapIndex ].<a class="code" href="structMAP__ELEMENT.html#a1705924637065ad2cf2cf884e6429f7">pLandHead</a>;
<a name="l00971"></a>00971 
<a name="l00972"></a>00972       <span class="keywordflow">while</span>( pLand != NULL )
<a name="l00973"></a>00973       {
<a name="l00974"></a>00974             level++;
<a name="l00975"></a>00975             pLand = pLand-&gt;<a class="code" href="structTAG__level__node.html#7c693acc3b593ab866b789ba7542eef7">pNext</a>;
<a name="l00976"></a>00976       }
<a name="l00977"></a>00977 
<a name="l00978"></a>00978       <span class="keywordflow">return</span>( level );
<a name="l00979"></a>00979 
<a name="l00980"></a>00980 }
<a name="l00981"></a>00981 
<a name="l00982"></a><a class="code" href="tiledef_8h.html#bd3e007d3c537fc06528fb69244b8c1a">00982</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#70b2dc1cf7d8a17a865955e1937f2345">GetSubIndexFromTileIndex</a>( <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usTileIndex, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> *pusSubIndex )
<a name="l00983"></a>00983 {
<a name="l00984"></a>00984       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiType=0;
<a name="l00985"></a>00985       <span class="keywordflow">if</span>( <a class="code" href="tiledef_8cpp.html#997c9e24de80577e1e7bcc85f5a5b7ec">GetTileType</a>( usTileIndex, &amp;uiType ) )
<a name="l00986"></a>00986       {
<a name="l00987"></a>00987             *pusSubIndex = usTileIndex - <a class="code" href="tiledef_8cpp.html#c678c275bd40fc1deec983df7ef10d1b">gTileTypeStartIndex</a>[ uiType ] + 1;
<a name="l00988"></a>00988             <span class="keywordflow">return</span> TRUE;
<a name="l00989"></a>00989       }
<a name="l00990"></a>00990       <span class="keywordflow">return</span> FALSE;
<a name="l00991"></a>00991 }
<a name="l00992"></a>00992 
<a name="l00993"></a><a class="code" href="tiledef_8h.html#f26318eb26e663d34d288900adce09b5">00993</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#f26318eb26e663d34d288900adce09b5">GetTypeSubIndexFromTileIndex</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiCheckType, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usIndex, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> *pusSubIndex )
<a name="l00994"></a>00994 {
<a name="l00995"></a>00995 
<a name="l00996"></a>00996       <span class="comment">// Tile database is zero-based, Type indecies are 1-based!</span>
<a name="l00997"></a>00997 
<a name="l00998"></a>00998       CHECKF ( uiCheckType &lt; <a class="code" href="TileDat_8h.html#6a650646c036f06b5166f92a83f79748de2048e55668b32d6407d1e071d4a0c2">NUMBEROFTILETYPES</a> );
<a name="l00999"></a>00999 
<a name="l01000"></a>01000       *pusSubIndex = usIndex - <a class="code" href="tiledef_8cpp.html#c678c275bd40fc1deec983df7ef10d1b">gTileTypeStartIndex</a>[ uiCheckType ] + 1;
<a name="l01001"></a>01001 
<a name="l01002"></a>01002       <span class="keywordflow">return</span>( TRUE );
<a name="l01003"></a>01003 }
<a name="l01004"></a>01004 
<a name="l01005"></a><a class="code" href="tiledef_8h.html#b9a48e84448bad517f5144e638657931">01005</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#0538eb158428ddd847e7363edc07b31e">GetTypeSubIndexFromTileIndexChar</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiCheckType, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usIndex, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *pubSubIndex )
<a name="l01006"></a>01006 {
<a name="l01007"></a>01007 
<a name="l01008"></a>01008       <span class="comment">// Tile database is zero-based, Type indecies are 1-based!</span>
<a name="l01009"></a>01009 
<a name="l01010"></a>01010       CHECKF ( uiCheckType &lt; <a class="code" href="TileDat_8h.html#6a650646c036f06b5166f92a83f79748de2048e55668b32d6407d1e071d4a0c2">NUMBEROFTILETYPES</a> );
<a name="l01011"></a>01011 
<a name="l01012"></a>01012       *pubSubIndex = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)(usIndex - <a class="code" href="tiledef_8cpp.html#c678c275bd40fc1deec983df7ef10d1b">gTileTypeStartIndex</a>[ uiCheckType ] + 1);
<a name="l01013"></a>01013 
<a name="l01014"></a>01014       <span class="keywordflow">return</span>( TRUE );
<a name="l01015"></a>01015 }
<a name="l01016"></a>01016       
<a name="l01017"></a><a class="code" href="tiledef_8h.html#88fb4209f479cf8705b24390553f0e16">01017</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>     <a class="code" href="tiledef_8cpp.html#88fb4209f479cf8705b24390553f0e16">GetTileIndexFromTypeSubIndex</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiCheckType, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usSubIndex, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> *pusTileIndex )
<a name="l01018"></a>01018 {
<a name="l01019"></a>01019       <span class="comment">// Tile database is zero-based, Type indecies are 1-based!</span>
<a name="l01020"></a>01020 
<a name="l01021"></a>01021       CHECKF ( uiCheckType &lt; <a class="code" href="TileDat_8h.html#6a650646c036f06b5166f92a83f79748de2048e55668b32d6407d1e071d4a0c2">NUMBEROFTILETYPES</a> );
<a name="l01022"></a>01022 
<a name="l01023"></a>01023       *pusTileIndex = usSubIndex + <a class="code" href="tiledef_8cpp.html#c678c275bd40fc1deec983df7ef10d1b">gTileTypeStartIndex</a>[ uiCheckType ] - 1;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025       <span class="keywordflow">return</span>( TRUE );
<a name="l01026"></a>01026 
<a name="l01027"></a>01027 }
<a name="l01028"></a>01028 
<a name="l01029"></a>01029 
<a name="l01030"></a>01030 
<a name="l01031"></a><a class="code" href="tiledef_8h.html#6e97553bceac4db890b0423ba359ab40">01031</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#6e97553bceac4db890b0423ba359ab40">MoveLandIndexToTop</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a>, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usIndex )
<a name="l01032"></a>01032 {
<a name="l01033"></a>01033 
<a name="l01034"></a>01034       <span class="comment">// Remove, then add again</span>
<a name="l01035"></a>01035       <a class="code" href="worldman_8cpp.html#18168fffa684bba72638b5cbfec80148">RemoveLand</a>( iMapIndex, usIndex );
<a name="l01036"></a>01036 
<a name="l01037"></a>01037       <a class="code" href="worldman_8cpp.html#205ed9951af6dabc1c5e857689628cd9">AddLandToHead</a>( iMapIndex, usIndex );
<a name="l01038"></a>01038 
<a name="l01039"></a>01039       <span class="keywordflow">return</span>( TRUE );
<a name="l01040"></a>01040 }
<a name="l01041"></a>01041 
<a name="l01042"></a>01042 
<a name="l01043"></a>01043 <span class="comment">// Database access functions</span>
<a name="l01044"></a><a class="code" href="tiledef_8h.html#997c9e24de80577e1e7bcc85f5a5b7ec">01044</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>     <a class="code" href="tiledef_8cpp.html#997c9e24de80577e1e7bcc85f5a5b7ec">GetTileType</a>( <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usIndex, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> *puiType )
<a name="l01045"></a>01045 {
<a name="l01046"></a>01046   <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a>          TileElem;
<a name="l01047"></a>01047 
<a name="l01048"></a>01048       CHECKF( usIndex != NO_TILE );
<a name="l01049"></a>01049       CHECKF( usIndex &lt; <a class="code" href="TileDat_8h.html#3626eb77a4f637f63497920a218cf0e2d684bc586b31f71fc2f555719635f939">NUMBEROFTILES</a> ); <span class="comment">//lal bugfix</span>
<a name="l01050"></a>01050 
<a name="l01051"></a>01051       <span class="comment">// Get tile element</span>
<a name="l01052"></a>01052       TileElem = <a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ usIndex ];
<a name="l01053"></a>01053 
<a name="l01054"></a>01054       *puiType = TileElem.<a class="code" href="structTILE__ELEMENT.html#0a0c3b2ac3635e1d0307e73dc0c6641f">fType</a>;
<a name="l01055"></a>01055 
<a name="l01056"></a>01056       <span class="keywordflow">return</span>( TRUE );
<a name="l01057"></a>01057 }
<a name="l01058"></a>01058 
<a name="l01059"></a><a class="code" href="tiledef_8h.html#90279f5fda4e87245adda6afe3c4f01b">01059</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>     <a class="code" href="tiledef_8cpp.html#90279f5fda4e87245adda6afe3c4f01b">GetTileFlags</a>( <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usIndex, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> *puiFlags )
<a name="l01060"></a>01060 {
<a name="l01061"></a>01061   <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a>          TileElem;
<a name="l01062"></a>01062 
<a name="l01063"></a>01063       CHECKF( usIndex != NO_TILE );
<a name="l01064"></a>01064       CHECKF( usIndex &lt; <a class="code" href="TileDat_8h.html#3626eb77a4f637f63497920a218cf0e2d684bc586b31f71fc2f555719635f939">NUMBEROFTILES</a> );
<a name="l01065"></a>01065 
<a name="l01066"></a>01066       <span class="comment">// Get tile element</span>
<a name="l01067"></a>01067       TileElem = <a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ usIndex ];
<a name="l01068"></a>01068 
<a name="l01069"></a>01069       *puiFlags = TileElem.<a class="code" href="structTILE__ELEMENT.html#9b81a802f706b019a9f89c082dd37d3e">uiFlags</a>;
<a name="l01070"></a>01070 
<a name="l01071"></a>01071       <span class="keywordflow">return</span>( TRUE );
<a name="l01072"></a>01072 }
<a name="l01073"></a>01073 
<a name="l01074"></a><a class="code" href="tiledef_8h.html#5830f6ff645055cce0d9fb47e47960e5">01074</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>     <a class="code" href="tiledef_8cpp.html#5830f6ff645055cce0d9fb47e47960e5">GetTileTypeLogicalHeight</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> fType, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *pubLogHeight )
<a name="l01075"></a>01075 {
<a name="l01076"></a>01076       *pubLogHeight = <a class="code" href="TileDat_8cpp.html#84bd96b5222ae79b6091ee39bf705df7">gTileTypeLogicalHeight</a>[ fType ];
<a name="l01077"></a>01077 
<a name="l01078"></a>01078       <span class="keywordflow">return</span>( TRUE );
<a name="l01079"></a>01079 }
<a name="l01080"></a>01080 
<a name="l01081"></a>01081 
<a name="l01082"></a>01082 
<a name="l01083"></a><a class="code" href="tiledef_8h.html#d6dd7d5e04d5af79e4be6b03a046cecf">01083</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#d6dd7d5e04d5af79e4be6b03a046cecf">LandTypeHeigher</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiDestType, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiSrcType  )
<a name="l01084"></a>01084 {
<a name="l01085"></a>01085   <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                             ubDestLogHeight;
<a name="l01086"></a>01086   <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                             ubSrcLogHeight;
<a name="l01087"></a>01087 
<a name="l01088"></a>01088       <span class="comment">// Get logical height of type at head and type we wish to paste</span>
<a name="l01089"></a>01089       <a class="code" href="tiledef_8cpp.html#5830f6ff645055cce0d9fb47e47960e5">GetTileTypeLogicalHeight</a>( uiDestType, &amp;ubDestLogHeight );
<a name="l01090"></a>01090       <a class="code" href="tiledef_8cpp.html#5830f6ff645055cce0d9fb47e47960e5">GetTileTypeLogicalHeight</a>( uiSrcType, &amp;ubSrcLogHeight );
<a name="l01091"></a>01091 
<a name="l01092"></a>01092       <span class="keywordflow">return</span>( ubDestLogHeight &gt; ubSrcLogHeight );
<a name="l01093"></a>01093 
<a name="l01094"></a>01094 }
<a name="l01095"></a>01095 
<a name="l01096"></a>01096 
<a name="l01097"></a><a class="code" href="tiledef_8h.html#75d5270e58bfa7f951f5c1eae6e3fa7b">01097</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#75d5270e58bfa7f951f5c1eae6e3fa7b">AnyHeigherLand</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a>, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiSrcType, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *pubLastLevel )
<a name="l01098"></a>01098 {
<a name="l01099"></a>01099       <a class="code" href="structTAG__level__node.html">LEVELNODE</a>         *pLand             = NULL;
<a name="l01100"></a>01100   <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                             ubSrcLogHeight=0;
<a name="l01101"></a>01101       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                        fTileType=0;
<a name="l01102"></a>01102       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                         level = 0;
<a name="l01103"></a>01103       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                         ubSrcTypeLevel=0;
<a name="l01104"></a>01104       <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a>                       fFound = FALSE;
<a name="l01105"></a>01105 
<a name="l01106"></a>01106       pLand = <a class="code" href="worlddef_8cpp.html#a1c640bcf89772795e6517da9963e0d7">gpWorldLevelData</a>[ iMapIndex ].<a class="code" href="structMAP__ELEMENT.html#a1705924637065ad2cf2cf884e6429f7">pLandHead</a>;
<a name="l01107"></a>01107 
<a name="l01108"></a>01108       <a class="code" href="tiledef_8cpp.html#5830f6ff645055cce0d9fb47e47960e5">GetTileTypeLogicalHeight</a>( uiSrcType, &amp;ubSrcLogHeight );
<a name="l01109"></a>01109 
<a name="l01110"></a>01110       <span class="comment">// Check that src type is not head</span>
<a name="l01111"></a>01111       <span class="keywordflow">if</span> ( <a class="code" href="tiledef_8cpp.html#624c676a1f0b80598797161c17288215">GetTypeLandLevel</a>( iMapIndex, uiSrcType, &amp;ubSrcTypeLevel ) )
<a name="l01112"></a>01112       {
<a name="l01113"></a>01113              <span class="keywordflow">if</span> ( ubSrcTypeLevel == LANDHEAD )
<a name="l01114"></a>01114              {
<a name="l01115"></a>01115                         <span class="keywordflow">return</span>( FALSE );
<a name="l01116"></a>01116              }
<a name="l01117"></a>01117       }
<a name="l01118"></a>01118 
<a name="l01119"></a>01119       <span class="comment">// Look through all objects and Search for type</span>
<a name="l01120"></a>01120 
<a name="l01121"></a>01121       <span class="keywordflow">while</span>( pLand != NULL )
<a name="l01122"></a>01122       {
<a name="l01123"></a>01123 
<a name="l01124"></a>01124             <span class="comment">// Get type and height</span>
<a name="l01125"></a>01125             <a class="code" href="tiledef_8cpp.html#997c9e24de80577e1e7bcc85f5a5b7ec">GetTileType</a>( pLand-&gt;<a class="code" href="structTAG__level__node.html#52b821707a4f7d758df5f97d376ef9f7">usIndex</a>, &amp;fTileType );
<a name="l01126"></a>01126 
<a name="l01127"></a>01127             <span class="keywordflow">if</span> ( <a class="code" href="TileDat_8cpp.html#84bd96b5222ae79b6091ee39bf705df7">gTileTypeLogicalHeight</a>[ fTileType ] &gt; ubSrcLogHeight )
<a name="l01128"></a>01128             {     
<a name="l01129"></a>01129                   *pubLastLevel = level;
<a name="l01130"></a>01130                   fFound = TRUE;
<a name="l01131"></a>01131             }
<a name="l01132"></a>01132 
<a name="l01133"></a>01133             <span class="comment">// Advance to next</span>
<a name="l01134"></a>01134             pLand = pLand-&gt;<a class="code" href="structTAG__level__node.html#7c693acc3b593ab866b789ba7542eef7">pNext</a>;
<a name="l01135"></a>01135 
<a name="l01136"></a>01136             level++;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138       }
<a name="l01139"></a>01139 
<a name="l01140"></a>01140       <span class="comment">// Could not find it, return FALSE</span>
<a name="l01141"></a>01141       <span class="keywordflow">return</span>( fFound );
<a name="l01142"></a>01142 
<a name="l01143"></a>01143 }
<a name="l01144"></a>01144 
<a name="l01145"></a><a class="code" href="tiledef_8h.html#f7c46ae55ea0e1a5d22c69b96c2cf7f9">01145</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#f7c46ae55ea0e1a5d22c69b96c2cf7f9">AnyLowerLand</a>( <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a>, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiSrcType, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *pubLastLevel )
<a name="l01146"></a>01146 {
<a name="l01147"></a>01147       <a class="code" href="structTAG__level__node.html">LEVELNODE</a>         *pLand             = NULL;
<a name="l01148"></a>01148   <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                             ubSrcLogHeight;
<a name="l01149"></a>01149       <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a>                        fTileType=0;
<a name="l01150"></a>01150       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                         level = 0;
<a name="l01151"></a>01151       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                         ubSrcTypeLevel;
<a name="l01152"></a>01152   <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a>          TileElem;
<a name="l01153"></a>01153 
<a name="l01154"></a>01154       pLand = <a class="code" href="worlddef_8cpp.html#a1c640bcf89772795e6517da9963e0d7">gpWorldLevelData</a>[ iMapIndex ].<a class="code" href="structMAP__ELEMENT.html#a1705924637065ad2cf2cf884e6429f7">pLandHead</a>;
<a name="l01155"></a>01155 
<a name="l01156"></a>01156       <a class="code" href="tiledef_8cpp.html#5830f6ff645055cce0d9fb47e47960e5">GetTileTypeLogicalHeight</a>( uiSrcType, &amp;ubSrcLogHeight );
<a name="l01157"></a>01157 
<a name="l01158"></a>01158       <a class="code" href="tiledef_8cpp.html#624c676a1f0b80598797161c17288215">GetTypeLandLevel</a>( iMapIndex, uiSrcType, &amp;ubSrcTypeLevel );
<a name="l01159"></a>01159 
<a name="l01160"></a>01160       <span class="comment">// Look through all objects and Search for type</span>
<a name="l01161"></a>01161       <span class="keywordflow">while</span>( pLand != NULL )
<a name="l01162"></a>01162       {
<a name="l01163"></a>01163 
<a name="l01164"></a>01164             <span class="comment">// Get type and height</span>
<a name="l01165"></a>01165             <a class="code" href="tiledef_8cpp.html#997c9e24de80577e1e7bcc85f5a5b7ec">GetTileType</a>( pLand-&gt;<a class="code" href="structTAG__level__node.html#52b821707a4f7d758df5f97d376ef9f7">usIndex</a>, &amp;fTileType );
<a name="l01166"></a>01166 
<a name="l01167"></a>01167             <span class="keywordflow">if</span> ( <a class="code" href="TileDat_8cpp.html#84bd96b5222ae79b6091ee39bf705df7">gTileTypeLogicalHeight</a>[ fTileType ] &lt; ubSrcLogHeight )
<a name="l01168"></a>01168             {     
<a name="l01169"></a>01169                   *pubLastLevel = level;
<a name="l01170"></a>01170                   <span class="keywordflow">return</span>( TRUE );
<a name="l01171"></a>01171             }
<a name="l01172"></a>01172 
<a name="l01173"></a>01173             <span class="comment">// Get tile element</span>
<a name="l01174"></a>01174             TileElem = <a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ pLand-&gt;<a class="code" href="structTAG__level__node.html#52b821707a4f7d758df5f97d376ef9f7">usIndex</a> ];
<a name="l01175"></a>01175 
<a name="l01176"></a>01176             <span class="comment">// Get full tile flag</span>
<a name="l01177"></a>01177             <span class="keywordflow">if</span> ( TileElem.<a class="code" href="structTILE__ELEMENT.html#aefb1e68bc3156630ee6bc2742e54e1b">ubFullTile</a> &amp;&amp; fTileType != uiSrcType )
<a name="l01178"></a>01178             {
<a name="l01179"></a>01179                   <span class="keywordflow">return</span>( FALSE );
<a name="l01180"></a>01180             }
<a name="l01181"></a>01181 
<a name="l01182"></a>01182 
<a name="l01183"></a>01183             <span class="comment">// Advance to next</span>
<a name="l01184"></a>01184             pLand = pLand-&gt;<a class="code" href="structTAG__level__node.html#7c693acc3b593ab866b789ba7542eef7">pNext</a>;
<a name="l01185"></a>01185 
<a name="l01186"></a>01186             level++;
<a name="l01187"></a>01187 
<a name="l01188"></a>01188       }
<a name="l01189"></a>01189 
<a name="l01190"></a>01190       <span class="comment">// Could not find it, return FALSE</span>
<a name="l01191"></a>01191       <span class="keywordflow">return</span>( FALSE );
<a name="l01192"></a>01192 
<a name="l01193"></a>01193 }
<a name="l01194"></a>01194 
<a name="l01195"></a>01195 
<a name="l01196"></a><a class="code" href="tiledef_8h.html#88cd3b32d6027d45c72a6f6e6b0e190b">01196</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#88cd3b32d6027d45c72a6f6e6b0e190b">GetWallOrientation</a>( <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usIndex, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> *pusWallOrientation )
<a name="l01197"></a>01197 {
<a name="l01198"></a>01198   <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a>          TileElem;
<a name="l01199"></a>01199 
<a name="l01200"></a>01200       CHECKF( usIndex != NO_TILE );
<a name="l01201"></a>01201       CHECKF( usIndex &lt; <a class="code" href="TileDat_8h.html#3626eb77a4f637f63497920a218cf0e2d684bc586b31f71fc2f555719635f939">NUMBEROFTILES</a> ); <span class="comment">//lal bugfix</span>
<a name="l01202"></a>01202 
<a name="l01203"></a>01203       <span class="comment">// Get tile element</span>
<a name="l01204"></a>01204       TileElem = <a class="code" href="tiledef_8cpp.html#44370e712d779c17b1688b11995cec77">gTileDatabase</a>[ usIndex ];
<a name="l01205"></a>01205 
<a name="l01206"></a>01206       *pusWallOrientation = TileElem.<a class="code" href="structTILE__ELEMENT.html#a2e23083c9f6c6031c232c55179d4dbc">usWallOrientation</a>;
<a name="l01207"></a>01207 
<a name="l01208"></a>01208       <span class="keywordflow">return</span>( TRUE );
<a name="l01209"></a>01209 }
<a name="l01210"></a>01210 
<a name="l01211"></a><a class="code" href="tiledef_8h.html#2e528ef6819460ebeba14b3292cf393a">01211</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#2e528ef6819460ebeba14b3292cf393a">ContainsWallOrientation</a>( <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a>, <a class="code" href="Types_8h.html#e1e6edbbc26d6fbc71a90190d0266018">UINT32</a> uiType, <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usWallOrientation, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> *pubLevel )
<a name="l01212"></a>01212 {
<a name="l01213"></a>01213       <a class="code" href="structTAG__level__node.html">LEVELNODE</a>   *pStruct = NULL;
<a name="l01214"></a>01214       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>                         level = 0;
<a name="l01215"></a>01215       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a>                        usCheckWallOrient=0;
<a name="l01216"></a>01216 
<a name="l01217"></a>01217       pStruct = <a class="code" href="worlddef_8cpp.html#a1c640bcf89772795e6517da9963e0d7">gpWorldLevelData</a>[ iMapIndex ].<a class="code" href="structMAP__ELEMENT.html#0cc751d3c74e25ab6dd78d58da155f6d">pStructHead</a>;
<a name="l01218"></a>01218 
<a name="l01219"></a>01219       <span class="comment">// Look through all objects and Search for type</span>
<a name="l01220"></a>01220 
<a name="l01221"></a>01221       <span class="keywordflow">while</span>( pStruct != NULL )
<a name="l01222"></a>01222       {
<a name="l01223"></a>01223 
<a name="l01224"></a>01224             <a class="code" href="tiledef_8cpp.html#88cd3b32d6027d45c72a6f6e6b0e190b">GetWallOrientation</a>( pStruct-&gt;<a class="code" href="structTAG__level__node.html#52b821707a4f7d758df5f97d376ef9f7">usIndex</a>, &amp;usCheckWallOrient );
<a name="l01225"></a>01225 
<a name="l01226"></a>01226             <span class="keywordflow">if</span> ( usCheckWallOrient == usWallOrientation )
<a name="l01227"></a>01227             {
<a name="l01228"></a>01228                         *pubLevel = level;
<a name="l01229"></a>01229                         <span class="keywordflow">return</span>( TRUE );
<a name="l01230"></a>01230             }
<a name="l01231"></a>01231 
<a name="l01232"></a>01232             <span class="comment">// Advance to next</span>
<a name="l01233"></a>01233             pStruct = pStruct-&gt;<a class="code" href="structTAG__level__node.html#7c693acc3b593ab866b789ba7542eef7">pNext</a>;
<a name="l01234"></a>01234 
<a name="l01235"></a>01235             level++;
<a name="l01236"></a>01236 
<a name="l01237"></a>01237       }
<a name="l01238"></a>01238 
<a name="l01239"></a>01239       <span class="comment">// Could not find it, return FALSE</span>
<a name="l01240"></a>01240       <span class="keywordflow">return</span>( FALSE );
<a name="l01241"></a>01241 
<a name="l01242"></a>01242 }
<a name="l01243"></a>01243 
<a name="l01244"></a>01244 <span class="comment">//Kris:  This function returns two special types if there are two walls</span>
<a name="l01245"></a>01245 <span class="comment">//sharing the same tile.  This case only happens with the exterior and </span>
<a name="l01246"></a>01246 <span class="comment">//interior bottom corners.  Otherwise, it returns the orientation of the </span>
<a name="l01247"></a>01247 <span class="comment">//first wall encountered -- not that there should be duplicate walls...</span>
<a name="l01248"></a><a class="code" href="tiledef_8h.html#6c98a3d3e7c1cf545dbbf800210ccd65">01248</a> <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> <a class="code" href="tiledef_8cpp.html#6c98a3d3e7c1cf545dbbf800210ccd65">CalculateWallOrientationsAtGridNo</a>( <a class="code" href="Types_8h.html#1137216524060afd426c34677fed058b">INT32</a> <a class="code" href="editscreen_8cpp.html#48f31659f64cd18c814b1612166c50b5">iMapIndex</a> )
<a name="l01249"></a>01249 {
<a name="l01250"></a>01250       <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> usCheckWallOrientation=0;
<a name="l01251"></a>01251       <a class="code" href="structTAG__level__node.html">LEVELNODE</a> *pStruct = NULL;
<a name="l01252"></a>01252       <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubFinalWallOrientation = <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a8922a1679c12d641e9b1933f27de5f86f">NO_ORIENTATION</a>;
<a name="l01253"></a>01253       pStruct = <a class="code" href="worlddef_8cpp.html#a1c640bcf89772795e6517da9963e0d7">gpWorldLevelData</a>[ iMapIndex ].<a class="code" href="structMAP__ELEMENT.html#0cc751d3c74e25ab6dd78d58da155f6d">pStructHead</a>;
<a name="l01254"></a>01254       <span class="comment">//Traverse all of the pStructs</span>
<a name="l01255"></a>01255       <span class="keywordflow">while</span>( pStruct != NULL )
<a name="l01256"></a>01256       {
<a name="l01257"></a>01257             <a class="code" href="tiledef_8cpp.html#88cd3b32d6027d45c72a6f6e6b0e190b">GetWallOrientation</a>( pStruct-&gt;<a class="code" href="structTAG__level__node.html#52b821707a4f7d758df5f97d376ef9f7">usIndex</a>, &amp;usCheckWallOrientation );
<a name="l01258"></a>01258             <span class="keywordflow">if</span>( ubFinalWallOrientation == <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a8922a1679c12d641e9b1933f27de5f86f">NO_ORIENTATION</a> )
<a name="l01259"></a>01259             {     <span class="comment">//Get the first valid orientation.</span>
<a name="l01260"></a>01260                   ubFinalWallOrientation = (<a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a>)usCheckWallOrientation;
<a name="l01261"></a>01261             }
<a name="l01262"></a>01262             <span class="keywordflow">else</span> <span class="keywordflow">switch</span>( ubFinalWallOrientation )
<a name="l01263"></a>01263             {     <span class="comment">//If the first valid orientation has the key counterpart orientation,</span>
<a name="l01264"></a>01264                   <span class="comment">//return the special corner orientations.</span>
<a name="l01265"></a>01265                   <span class="keywordflow">case</span> <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a8f75944718d83d0d6dacc7c27b74bd5c1">INSIDE_TOP_LEFT</a>:
<a name="l01266"></a>01266                         <span class="keywordflow">if</span>( usCheckWallOrientation == <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a82ae9ed271ada2567debafc536d5b0379">INSIDE_TOP_RIGHT</a> )
<a name="l01267"></a>01267                               <span class="keywordflow">return</span> <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a88de4403dec7e372dcb45a27b918411cd">INSIDE_BOTTOM_CORNER</a>;
<a name="l01268"></a>01268                         <span class="keywordflow">break</span>;
<a name="l01269"></a>01269                   <span class="keywordflow">case</span> <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a82ae9ed271ada2567debafc536d5b0379">INSIDE_TOP_RIGHT</a>:
<a name="l01270"></a>01270                         <span class="keywordflow">if</span>( usCheckWallOrientation == <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a8f75944718d83d0d6dacc7c27b74bd5c1">INSIDE_TOP_LEFT</a> )
<a name="l01271"></a>01271                               <span class="keywordflow">return</span> <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a88de4403dec7e372dcb45a27b918411cd">INSIDE_BOTTOM_CORNER</a>;
<a name="l01272"></a>01272                         <span class="keywordflow">break</span>;
<a name="l01273"></a>01273                   <span class="keywordflow">case</span> <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a8eaa089acb450ae53dc9c990eb80c40b9">OUTSIDE_TOP_LEFT</a>:
<a name="l01274"></a>01274                         <span class="keywordflow">if</span>( usCheckWallOrientation == <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a80116de02cab510615bb2e55d6f02bf31">OUTSIDE_TOP_RIGHT</a> )
<a name="l01275"></a>01275                               <span class="keywordflow">return</span> <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a87d446f997307d1acddf3c2d0dd6f4727">OUTSIDE_BOTTOM_CORNER</a>;
<a name="l01276"></a>01276                         <span class="keywordflow">break</span>;
<a name="l01277"></a>01277                   <span class="keywordflow">case</span> <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a80116de02cab510615bb2e55d6f02bf31">OUTSIDE_TOP_RIGHT</a>:
<a name="l01278"></a>01278                         <span class="keywordflow">if</span>( usCheckWallOrientation == <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a8eaa089acb450ae53dc9c990eb80c40b9">OUTSIDE_TOP_LEFT</a> )
<a name="l01279"></a>01279                               <span class="keywordflow">return</span> <a class="code" href="tiledef_8h.html#894e4ad72f98fcf9d632b22db77845a87d446f997307d1acddf3c2d0dd6f4727">OUTSIDE_BOTTOM_CORNER</a>;
<a name="l01280"></a>01280                         <span class="keywordflow">break</span>;
<a name="l01281"></a>01281             }
<a name="l01282"></a>01282             <span class="comment">// Advance to next</span>
<a name="l01283"></a>01283             pStruct = pStruct-&gt;<a class="code" href="structTAG__level__node.html#7c693acc3b593ab866b789ba7542eef7">pNext</a>;
<a name="l01284"></a>01284       }
<a name="l01285"></a>01285       <span class="comment">// Only one wall, so return it's orienation.</span>
<a name="l01286"></a>01286       <span class="keywordflow">return</span> ubFinalWallOrientation;
<a name="l01287"></a>01287 }
<a name="l01288"></a>01288 
<a name="l01289"></a>01289 
<a name="l01290"></a><a class="code" href="tiledef_8h.html#d9e59fcd12073c432aaf3714dc6f0eab">01290</a> <a class="code" href="Types_8h.html#112e3146cb38b6ee95e64d85842e380a">BOOLEAN</a> <a class="code" href="tiledef_8cpp.html#d9e59fcd12073c432aaf3714dc6f0eab">AllocateAnimTileData</a>( <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a> *pTileElem, <a class="code" href="Types_8h.html#b27e9918b538ce9d8ca692479b375b6a">UINT8</a> ubNumFrames )
<a name="l01291"></a>01291 {
<a name="l01292"></a>01292       pTileElem-&gt;<a class="code" href="structTILE__ELEMENT.html#706d497149d8f9255fcb5dbd19b7e5aa">pAnimData</a> = (<a class="code" href="structTILE__ANIMATION__DATA.html">TILE_ANIMATION_DATA</a> *)MemAlloc( <span class="keyword">sizeof</span>( <a class="code" href="structTILE__ANIMATION__DATA.html">TILE_ANIMATION_DATA</a> ) );
<a name="l01293"></a>01293 
<a name="l01294"></a>01294       CHECKF( pTileElem-&gt;<a class="code" href="structTILE__ELEMENT.html#706d497149d8f9255fcb5dbd19b7e5aa">pAnimData</a> != NULL );
<a name="l01295"></a>01295 
<a name="l01296"></a>01296       pTileElem-&gt;<a class="code" href="structTILE__ELEMENT.html#706d497149d8f9255fcb5dbd19b7e5aa">pAnimData</a>-&gt;<a class="code" href="structTILE__ANIMATION__DATA.html#f140f5acd9d28083465fd36c26fd202f">pusFrames</a> = (<a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> *)MemAlloc( <span class="keyword">sizeof</span>( <a class="code" href="Types_8h.html#09f1a1fb2293e33483cc8d44aefb1eb1">UINT16</a> ) * ubNumFrames );
<a name="l01297"></a>01297 
<a name="l01298"></a>01298       CHECKF( pTileElem-&gt;<a class="code" href="structTILE__ELEMENT.html#706d497149d8f9255fcb5dbd19b7e5aa">pAnimData</a>-&gt;<a class="code" href="structTILE__ANIMATION__DATA.html#f140f5acd9d28083465fd36c26fd202f">pusFrames</a> != NULL );
<a name="l01299"></a>01299 
<a name="l01300"></a>01300       <span class="comment">// Set # if frames!</span>
<a name="l01301"></a>01301       pTileElem-&gt;<a class="code" href="structTILE__ELEMENT.html#706d497149d8f9255fcb5dbd19b7e5aa">pAnimData</a>-&gt;<a class="code" href="structTILE__ANIMATION__DATA.html#8b3202b2e4283ebebfbf169a716ca774">ubNumFrames</a> = ubNumFrames;
<a name="l01302"></a>01302 
<a name="l01303"></a>01303       <span class="keywordflow">return</span>( TRUE );
<a name="l01304"></a>01304 }
<a name="l01305"></a>01305 
<a name="l01306"></a><a class="code" href="tiledef_8h.html#7c7f7b28f00d580b8134d45bfb064613">01306</a> <span class="keywordtype">void</span> <a class="code" href="tiledef_8cpp.html#7c7f7b28f00d580b8134d45bfb064613">FreeAnimTileData</a>( <a class="code" href="structTILE__ELEMENT.html">TILE_ELEMENT</a> *pTileElem )
<a name="l01307"></a>01307 {
<a name="l01308"></a>01308       <span class="keywordflow">if</span> ( pTileElem-&gt;<a class="code" href="structTILE__ELEMENT.html#706d497149d8f9255fcb5dbd19b7e5aa">pAnimData</a> != NULL )
<a name="l01309"></a>01309       {
<a name="l01310"></a>01310             <span class="comment">// Free frames list</span>
<a name="l01311"></a>01311             MemFree( pTileElem-&gt;<a class="code" href="structTILE__ELEMENT.html#706d497149d8f9255fcb5dbd19b7e5aa">pAnimData</a>-&gt;<a class="code" href="structTILE__ANIMATION__DATA.html#f140f5acd9d28083465fd36c26fd202f">pusFrames</a> );
<a name="l01312"></a>01312             
<a name="l01313"></a>01313             <span class="comment">// Free frames</span>
<a name="l01314"></a>01314             MemFree( pTileElem-&gt;<a class="code" href="structTILE__ELEMENT.html#706d497149d8f9255fcb5dbd19b7e5aa">pAnimData</a> );
<a name="l01315"></a>01315       }
<a name="l01316"></a>01316 }
<a name="l01317"></a>01317 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Sep 9 13:49:12 2006 for Build by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
